import{g as Nc,r as ds,c as hi}from"./babylon-335ec499.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))p(T);new MutationObserver(T=>{for(const C of T)if(C.type==="childList")for(const D of C.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&p(D)}).observe(document,{childList:!0,subtree:!0});function h(T){const C={};return T.integrity&&(C.integrity=T.integrity),T.referrerPolicy&&(C.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?C.credentials="include":T.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function p(T){if(T.ep)return;T.ep=!0;const C=h(T);fetch(T.href,C)}})();var y_={exports:{}},Mo={},b_={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn=Symbol.for("react.element"),Vc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),zc=Symbol.for("react.strict_mode"),Wc=Symbol.for("react.profiler"),Uc=Symbol.for("react.provider"),Qc=Symbol.for("react.context"),Gc=Symbol.for("react.forward_ref"),Hc=Symbol.for("react.suspense"),jc=Symbol.for("react.memo"),Kc=Symbol.for("react.lazy"),ul=Symbol.iterator;function Yc(r){return r===null||typeof r!="object"?null:(r=ul&&r[ul]||r["@@iterator"],typeof r=="function"?r:null)}var T_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P_=Object.assign,E_={};function Oi(r,n,h){this.props=r,this.context=n,this.refs=E_,this.updater=h||T_}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(r,n){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,n,"setState")};Oi.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function M_(){}M_.prototype=Oi.prototype;function fs(r,n,h){this.props=r,this.context=n,this.refs=E_,this.updater=h||T_}var ps=fs.prototype=new M_;ps.constructor=fs;P_(ps,Oi.prototype);ps.isPureReactComponent=!0;var cl=Array.isArray,C_=Object.prototype.hasOwnProperty,vs={current:null},O_={key:!0,ref:!0,__self:!0,__source:!0};function B_(r,n,h){var p,T={},C=null,D=null;if(n!=null)for(p in n.ref!==void 0&&(D=n.ref),n.key!==void 0&&(C=""+n.key),n)C_.call(n,p)&&!O_.hasOwnProperty(p)&&(T[p]=n[p]);var B=arguments.length-2;if(B===1)T.children=h;else if(1<B){for(var E=Array(B),d=0;d<B;d++)E[d]=arguments[d+2];T.children=E}if(r&&r.defaultProps)for(p in B=r.defaultProps,B)T[p]===void 0&&(T[p]=B[p]);return{$$typeof:pn,type:r,key:C,ref:D,props:T,_owner:vs.current}}function Xc(r,n){return{$$typeof:pn,type:r.type,key:n,ref:r.ref,props:r.props,_owner:r._owner}}function ms(r){return typeof r=="object"&&r!==null&&r.$$typeof===pn}function Zc(r){var n={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(h){return n[h]})}var hl=/\/+/g;function Yo(r,n){return typeof r=="object"&&r!==null&&r.key!=null?Zc(""+r.key):n.toString(36)}function Wn(r,n,h,p,T){var C=typeof r;(C==="undefined"||C==="boolean")&&(r=null);var D=!1;if(r===null)D=!0;else switch(C){case"string":case"number":D=!0;break;case"object":switch(r.$$typeof){case pn:case Vc:D=!0}}if(D)return D=r,T=T(D),r=p===""?"."+Yo(D,0):p,cl(T)?(h="",r!=null&&(h=r.replace(hl,"$&/")+"/"),Wn(T,n,h,"",function(d){return d})):T!=null&&(ms(T)&&(T=Xc(T,h+(!T.key||D&&D.key===T.key?"":(""+T.key).replace(hl,"$&/")+"/")+r)),n.push(T)),1;if(D=0,p=p===""?".":p+":",cl(r))for(var B=0;B<r.length;B++){C=r[B];var E=p+Yo(C,B);D+=Wn(C,n,h,E,T)}else if(E=Yc(r),typeof E=="function")for(r=E.call(r),B=0;!(C=r.next()).done;)C=C.value,E=p+Yo(C,B++),D+=Wn(C,n,h,E,T);else if(C==="object")throw n=String(r),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return D}function Mn(r,n,h){if(r==null)return r;var p=[],T=0;return Wn(r,p,"","",function(C){return n.call(h,C,T++)}),p}function $c(r){if(r._status===-1){var n=r._result;n=n(),n.then(function(h){(r._status===0||r._status===-1)&&(r._status=1,r._result=h)},function(h){(r._status===0||r._status===-1)&&(r._status=2,r._result=h)}),r._status===-1&&(r._status=0,r._result=n)}if(r._status===1)return r._result.default;throw r._result}var pt={current:null},Un={transition:null},Jc={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Un,ReactCurrentOwner:vs};me.Children={map:Mn,forEach:function(r,n,h){Mn(r,function(){n.apply(this,arguments)},h)},count:function(r){var n=0;return Mn(r,function(){n++}),n},toArray:function(r){return Mn(r,function(n){return n})||[]},only:function(r){if(!ms(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};me.Component=Oi;me.Fragment=kc;me.Profiler=Wc;me.PureComponent=fs;me.StrictMode=zc;me.Suspense=Hc;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jc;me.cloneElement=function(r,n,h){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var p=P_({},r.props),T=r.key,C=r.ref,D=r._owner;if(n!=null){if(n.ref!==void 0&&(C=n.ref,D=vs.current),n.key!==void 0&&(T=""+n.key),r.type&&r.type.defaultProps)var B=r.type.defaultProps;for(E in n)C_.call(n,E)&&!O_.hasOwnProperty(E)&&(p[E]=n[E]===void 0&&B!==void 0?B[E]:n[E])}var E=arguments.length-2;if(E===1)p.children=h;else if(1<E){B=Array(E);for(var d=0;d<E;d++)B[d]=arguments[d+2];p.children=B}return{$$typeof:pn,type:r.type,key:T,ref:C,props:p,_owner:D}};me.createContext=function(r){return r={$$typeof:Qc,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Uc,_context:r},r.Consumer=r};me.createElement=B_;me.createFactory=function(r){var n=B_.bind(null,r);return n.type=r,n};me.createRef=function(){return{current:null}};me.forwardRef=function(r){return{$$typeof:Gc,render:r}};me.isValidElement=ms;me.lazy=function(r){return{$$typeof:Kc,_payload:{_status:-1,_result:r},_init:$c}};me.memo=function(r,n){return{$$typeof:jc,type:r,compare:n===void 0?null:n}};me.startTransition=function(r){var n=Un.transition;Un.transition={};try{r()}finally{Un.transition=n}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(r,n){return pt.current.useCallback(r,n)};me.useContext=function(r){return pt.current.useContext(r)};me.useDebugValue=function(){};me.useDeferredValue=function(r){return pt.current.useDeferredValue(r)};me.useEffect=function(r,n){return pt.current.useEffect(r,n)};me.useId=function(){return pt.current.useId()};me.useImperativeHandle=function(r,n,h){return pt.current.useImperativeHandle(r,n,h)};me.useInsertionEffect=function(r,n){return pt.current.useInsertionEffect(r,n)};me.useLayoutEffect=function(r,n){return pt.current.useLayoutEffect(r,n)};me.useMemo=function(r,n){return pt.current.useMemo(r,n)};me.useReducer=function(r,n,h){return pt.current.useReducer(r,n,h)};me.useRef=function(r){return pt.current.useRef(r)};me.useState=function(r){return pt.current.useState(r)};me.useSyncExternalStore=function(r,n,h){return pt.current.useSyncExternalStore(r,n,h)};me.useTransition=function(){return pt.current.useTransition()};me.version="18.2.0";b_.exports=me;var Lr=b_.exports;const qc=Nc(Lr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=Lr,th=Symbol.for("react.element"),rh=Symbol.for("react.fragment"),ih=Object.prototype.hasOwnProperty,nh=eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oh={key:!0,ref:!0,__self:!0,__source:!0};function I_(r,n,h){var p,T={},C=null,D=null;h!==void 0&&(C=""+h),n.key!==void 0&&(C=""+n.key),n.ref!==void 0&&(D=n.ref);for(p in n)ih.call(n,p)&&!oh.hasOwnProperty(p)&&(T[p]=n[p]);if(r&&r.defaultProps)for(p in n=r.defaultProps,n)T[p]===void 0&&(T[p]=n[p]);return{$$typeof:th,type:r,key:C,ref:D,props:T,_owner:nh.current}}Mo.Fragment=rh;Mo.jsx=I_;Mo.jsxs=I_;y_.exports=Mo;var qt=y_.exports,ba={},x_={exports:{}},It={},S_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function n(U,H){var Y=U.length;U.push(H);e:for(;0<Y;){var J=Y-1>>>1,q=U[J];if(0<T(q,H))U[J]=H,U[Y]=q,Y=J;else break e}}function h(U){return U.length===0?null:U[0]}function p(U){if(U.length===0)return null;var H=U[0],Y=U.pop();if(Y!==H){U[0]=Y;e:for(var J=0,q=U.length,le=q>>>1;J<le;){var fe=2*(J+1)-1,ue=U[fe],ae=fe+1,ce=U[ae];if(0>T(ue,Y))ae<q&&0>T(ce,ue)?(U[J]=ce,U[ae]=Y,J=ae):(U[J]=ue,U[fe]=Y,J=fe);else if(ae<q&&0>T(ce,Y))U[J]=ce,U[ae]=Y,J=ae;else break e}}return H}function T(U,H){var Y=U.sortIndex-H.sortIndex;return Y!==0?Y:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var C=performance;r.unstable_now=function(){return C.now()}}else{var D=Date,B=D.now();r.unstable_now=function(){return D.now()-B}}var E=[],d=[],c=1,l=null,g=3,b=!1,v=!1,_=!1,o=typeof setTimeout=="function"?setTimeout:null,t=typeof clearTimeout=="function"?clearTimeout:null,e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function i(U){for(var H=h(d);H!==null;){if(H.callback===null)p(d);else if(H.startTime<=U)p(d),H.sortIndex=H.expirationTime,n(E,H);else break;H=h(d)}}function a(U){if(_=!1,i(U),!v)if(h(E)!==null)v=!0,W(s);else{var H=h(d);H!==null&&Q(a,H.startTime-U)}}function s(U,H){v=!1,_&&(_=!1,t(m),m=-1),b=!0;var Y=g;try{for(i(H),l=h(E);l!==null&&(!(l.expirationTime>H)||U&&!M());){var J=l.callback;if(typeof J=="function"){l.callback=null,g=l.priorityLevel;var q=J(l.expirationTime<=H);H=r.unstable_now(),typeof q=="function"?l.callback=q:l===h(E)&&p(E),i(H)}else p(E);l=h(E)}if(l!==null)var le=!0;else{var fe=h(d);fe!==null&&Q(a,fe.startTime-H),le=!1}return le}finally{l=null,g=Y,b=!1}}var u=!1,f=null,m=-1,P=5,y=-1;function M(){return!(r.unstable_now()-y<P)}function O(){if(f!==null){var U=r.unstable_now();y=U;var H=!0;try{H=f(!0,U)}finally{H?x():(u=!1,f=null)}}else u=!1}var x;if(typeof e=="function")x=function(){e(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,N=R.port2;R.port1.onmessage=O,x=function(){N.postMessage(null)}}else x=function(){o(O,0)};function W(U){f=U,u||(u=!0,x())}function Q(U,H){m=o(function(){U(r.unstable_now())},H)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){v||b||(v=!0,W(s))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return h(E)},r.unstable_next=function(U){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var Y=g;g=H;try{return U()}finally{g=Y}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=g;g=U;try{return H()}finally{g=Y}},r.unstable_scheduleCallback=function(U,H,Y){var J=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?J+Y:J):Y=J,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,U={id:c++,callback:H,priorityLevel:U,startTime:Y,expirationTime:q,sortIndex:-1},Y>J?(U.sortIndex=Y,n(d,U),h(E)===null&&U===h(d)&&(_?(t(m),m=-1):_=!0,Q(a,Y-J))):(U.sortIndex=q,n(E,U),v||b||(v=!0,W(s))),U},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(U){var H=g;return function(){var Y=g;g=H;try{return U.apply(this,arguments)}finally{g=Y}}}})(D_);S_.exports=D_;var ah=S_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=Lr,Bt=ah;function $(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,h=1;h<arguments.length;h++)n+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,$i={};function Hr(r,n){yi(r,n),yi(r+"Capture",n)}function yi(r,n){for($i[r]=n,r=0;r<n.length;r++)A_.add(n[r])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,sh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dl={},fl={};function lh(r){return Ta.call(fl,r)?!0:Ta.call(dl,r)?!1:sh.test(r)?fl[r]=!0:(dl[r]=!0,!1)}function _h(r,n,h,p){if(h!==null&&h.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function uh(r,n,h,p){if(n===null||typeof n>"u"||_h(r,n,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function vt(r,n,h,p,T,C,D){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=p,this.attributeNamespace=T,this.mustUseProperty=h,this.propertyName=r,this.type=n,this.sanitizeURL=C,this.removeEmptyString=D}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){at[r]=new vt(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];at[n]=new vt(n,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){at[r]=new vt(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){at[r]=new vt(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){at[r]=new vt(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){at[r]=new vt(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){at[r]=new vt(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){at[r]=new vt(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){at[r]=new vt(r,5,!1,r.toLowerCase(),null,!1,!1)});var gs=/[\-:]([a-z])/g;function ys(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(gs,ys);at[n]=new vt(n,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(gs,ys);at[n]=new vt(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(gs,ys);at[n]=new vt(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){at[r]=new vt(r,1,!1,r.toLowerCase(),null,!1,!1)});at.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){at[r]=new vt(r,1,!1,r.toLowerCase(),null,!0,!0)});function bs(r,n,h,p){var T=at.hasOwnProperty(n)?at[n]:null;(T!==null?T.type!==0:p||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(uh(n,h,T,p)&&(h=null),p||T===null?lh(n)&&(h===null?r.removeAttribute(n):r.setAttribute(n,""+h)):T.mustUseProperty?r[T.propertyName]=h===null?T.type===3?!1:"":h:(n=T.attributeName,p=T.attributeNamespace,h===null?r.removeAttribute(n):(T=T.type,h=T===3||T===4&&h===!0?"":""+h,p?r.setAttributeNS(p,n,h):r.setAttribute(n,h))))}var sr=R_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cn=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),Ts=Symbol.for("react.strict_mode"),Pa=Symbol.for("react.profiler"),L_=Symbol.for("react.provider"),F_=Symbol.for("react.context"),Ps=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),Es=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),w_=Symbol.for("react.offscreen"),pl=Symbol.iterator;function Si(r){return r===null||typeof r!="object"?null:(r=pl&&r[pl]||r["@@iterator"],typeof r=="function"?r:null)}var Fe=Object.assign,Xo;function Vi(r){if(Xo===void 0)try{throw Error()}catch(h){var n=h.stack.trim().match(/\n( *(at )?)/);Xo=n&&n[1]||""}return`
`+Xo+r}var Zo=!1;function $o(r,n){if(!r||Zo)return"";Zo=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(d){var p=d}Reflect.construct(r,[],n)}else{try{n.call()}catch(d){p=d}r.call(n.prototype)}else{try{throw Error()}catch(d){p=d}r()}}catch(d){if(d&&p&&typeof d.stack=="string"){for(var T=d.stack.split(`
`),C=p.stack.split(`
`),D=T.length-1,B=C.length-1;1<=D&&0<=B&&T[D]!==C[B];)B--;for(;1<=D&&0<=B;D--,B--)if(T[D]!==C[B]){if(D!==1||B!==1)do if(D--,B--,0>B||T[D]!==C[B]){var E=`
`+T[D].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=D&&0<=B);break}}}finally{Zo=!1,Error.prepareStackTrace=h}return(r=r?r.displayName||r.name:"")?Vi(r):""}function ch(r){switch(r.tag){case 5:return Vi(r.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return r=$o(r.type,!1),r;case 11:return r=$o(r.type.render,!1),r;case 1:return r=$o(r.type,!0),r;default:return""}}function Ca(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ti:return"Fragment";case ei:return"Portal";case Pa:return"Profiler";case Ts:return"StrictMode";case Ea:return"Suspense";case Ma:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F_:return(r.displayName||"Context")+".Consumer";case L_:return(r._context.displayName||"Context")+".Provider";case Ps:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Es:return n=r.displayName||null,n!==null?n:Ca(r.type)||"Memo";case cr:n=r._payload,r=r._init;try{return Ca(r(n))}catch{}}return null}function hh(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ca(n);case 8:return n===Ts?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Cr(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function N_(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function dh(r){var n=N_(r)?"checked":"value",h=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),p=""+r[n];if(!r.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var T=h.get,C=h.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return T.call(this)},set:function(D){p=""+D,C.call(this,D)}}),Object.defineProperty(r,n,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function On(r){r._valueTracker||(r._valueTracker=dh(r))}function V_(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var h=n.getValue(),p="";return r&&(p=N_(r)?r.checked?"true":"false":r.value),r=p,r!==h?(n.setValue(r),!0):!1}function qn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Oa(r,n){var h=n.checked;return Fe({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??r._wrapperState.initialChecked})}function vl(r,n){var h=n.defaultValue==null?"":n.defaultValue,p=n.checked!=null?n.checked:n.defaultChecked;h=Cr(n.value!=null?n.value:h),r._wrapperState={initialChecked:p,initialValue:h,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function k_(r,n){n=n.checked,n!=null&&bs(r,"checked",n,!1)}function Ba(r,n){k_(r,n);var h=Cr(n.value),p=n.type;if(h!=null)p==="number"?(h===0&&r.value===""||r.value!=h)&&(r.value=""+h):r.value!==""+h&&(r.value=""+h);else if(p==="submit"||p==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?Ia(r,n.type,h):n.hasOwnProperty("defaultValue")&&Ia(r,n.type,Cr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function ml(r,n,h){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var p=n.type;if(!(p!=="submit"&&p!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,h||n===r.value||(r.value=n),r.defaultValue=n}h=r.name,h!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,h!==""&&(r.name=h)}function Ia(r,n,h){(n!=="number"||qn(r.ownerDocument)!==r)&&(h==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+h&&(r.defaultValue=""+h))}var ki=Array.isArray;function di(r,n,h,p){if(r=r.options,n){n={};for(var T=0;T<h.length;T++)n["$"+h[T]]=!0;for(h=0;h<r.length;h++)T=n.hasOwnProperty("$"+r[h].value),r[h].selected!==T&&(r[h].selected=T),T&&p&&(r[h].defaultSelected=!0)}else{for(h=""+Cr(h),n=null,T=0;T<r.length;T++){if(r[T].value===h){r[T].selected=!0,p&&(r[T].defaultSelected=!0);return}n!==null||r[T].disabled||(n=r[T])}n!==null&&(n.selected=!0)}}function xa(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error($(91));return Fe({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function gl(r,n){var h=n.value;if(h==null){if(h=n.children,n=n.defaultValue,h!=null){if(n!=null)throw Error($(92));if(ki(h)){if(1<h.length)throw Error($(93));h=h[0]}n=h}n==null&&(n=""),h=n}r._wrapperState={initialValue:Cr(h)}}function z_(r,n){var h=Cr(n.value),p=Cr(n.defaultValue);h!=null&&(h=""+h,h!==r.value&&(r.value=h),n.defaultValue==null&&r.defaultValue!==h&&(r.defaultValue=h)),p!=null&&(r.defaultValue=""+p)}function yl(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function W_(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sa(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?W_(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Bn,U_=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,h,p,T){MSApp.execUnsafeLocalFunction(function(){return r(n,h,p,T)})}:r}(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Bn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function Ji(r,n){if(n){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=n;return}}r.textContent=n}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fh=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(r){fh.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),Ui[n]=Ui[r]})});function Q_(r,n,h){return n==null||typeof n=="boolean"||n===""?"":h||typeof n!="number"||n===0||Ui.hasOwnProperty(r)&&Ui[r]?(""+n).trim():n+"px"}function G_(r,n){r=r.style;for(var h in n)if(n.hasOwnProperty(h)){var p=h.indexOf("--")===0,T=Q_(h,n[h],p);h==="float"&&(h="cssFloat"),p?r.setProperty(h,T):r[h]=T}}var ph=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(r,n){if(n){if(ph[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error($(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error($(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error($(61))}if(n.style!=null&&typeof n.style!="object")throw Error($(62))}}function Ra(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aa=null;function Ms(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var La=null,fi=null,pi=null;function bl(r){if(r=gn(r)){if(typeof La!="function")throw Error($(280));var n=r.stateNode;n&&(n=xo(n),La(r.stateNode,r.type,n))}}function H_(r){fi?pi?pi.push(r):pi=[r]:fi=r}function j_(){if(fi){var r=fi,n=pi;if(pi=fi=null,bl(r),n)for(r=0;r<n.length;r++)bl(n[r])}}function K_(r,n){return r(n)}function Y_(){}var Jo=!1;function X_(r,n,h){if(Jo)return r(n,h);Jo=!0;try{return K_(r,n,h)}finally{Jo=!1,(fi!==null||pi!==null)&&(Y_(),j_())}}function qi(r,n){var h=r.stateNode;if(h===null)return null;var p=xo(h);if(p===null)return null;h=p[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error($(231,n,typeof h));return h}var Fa=!1;if(ir)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){Fa=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{Fa=!1}function vh(r,n,h,p,T,C,D,B,E){var d=Array.prototype.slice.call(arguments,3);try{n.apply(h,d)}catch(c){this.onError(c)}}var Qi=!1,eo=null,to=!1,wa=null,mh={onError:function(r){Qi=!0,eo=r}};function gh(r,n,h,p,T,C,D,B,E){Qi=!1,eo=null,vh.apply(mh,arguments)}function yh(r,n,h,p,T,C,D,B,E){if(gh.apply(this,arguments),Qi){if(Qi){var d=eo;Qi=!1,eo=null}else throw Error($(198));to||(to=!0,wa=d)}}function jr(r){var n=r,h=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,n.flags&4098&&(h=n.return),r=n.return;while(r)}return n.tag===3?h:null}function Z_(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function Tl(r){if(jr(r)!==r)throw Error($(188))}function bh(r){var n=r.alternate;if(!n){if(n=jr(r),n===null)throw Error($(188));return n!==r?null:r}for(var h=r,p=n;;){var T=h.return;if(T===null)break;var C=T.alternate;if(C===null){if(p=T.return,p!==null){h=p;continue}break}if(T.child===C.child){for(C=T.child;C;){if(C===h)return Tl(T),r;if(C===p)return Tl(T),n;C=C.sibling}throw Error($(188))}if(h.return!==p.return)h=T,p=C;else{for(var D=!1,B=T.child;B;){if(B===h){D=!0,h=T,p=C;break}if(B===p){D=!0,p=T,h=C;break}B=B.sibling}if(!D){for(B=C.child;B;){if(B===h){D=!0,h=C,p=T;break}if(B===p){D=!0,p=C,h=T;break}B=B.sibling}if(!D)throw Error($(189))}}if(h.alternate!==p)throw Error($(190))}if(h.tag!==3)throw Error($(188));return h.stateNode.current===h?r:n}function $_(r){return r=bh(r),r!==null?J_(r):null}function J_(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=J_(r);if(n!==null)return n;r=r.sibling}return null}var q_=Bt.unstable_scheduleCallback,Pl=Bt.unstable_cancelCallback,Th=Bt.unstable_shouldYield,Ph=Bt.unstable_requestPaint,He=Bt.unstable_now,Eh=Bt.unstable_getCurrentPriorityLevel,Cs=Bt.unstable_ImmediatePriority,eu=Bt.unstable_UserBlockingPriority,ro=Bt.unstable_NormalPriority,Mh=Bt.unstable_LowPriority,tu=Bt.unstable_IdlePriority,Co=null,Xt=null;function Ch(r){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Co,r,void 0,(r.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Ih,Oh=Math.log,Bh=Math.LN2;function Ih(r){return r>>>=0,r===0?32:31-(Oh(r)/Bh|0)|0}var In=64,xn=4194304;function zi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function io(r,n){var h=r.pendingLanes;if(h===0)return 0;var p=0,T=r.suspendedLanes,C=r.pingedLanes,D=h&268435455;if(D!==0){var B=D&~T;B!==0?p=zi(B):(C&=D,C!==0&&(p=zi(C)))}else D=h&~T,D!==0?p=zi(D):C!==0&&(p=zi(C));if(p===0)return 0;if(n!==0&&n!==p&&!(n&T)&&(T=p&-p,C=n&-n,T>=C||T===16&&(C&4194240)!==0))return n;if(p&4&&(p|=h&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=p;0<n;)h=31-Ut(n),T=1<<h,p|=r[h],n&=~T;return p}function xh(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sh(r,n){for(var h=r.suspendedLanes,p=r.pingedLanes,T=r.expirationTimes,C=r.pendingLanes;0<C;){var D=31-Ut(C),B=1<<D,E=T[D];E===-1?(!(B&h)||B&p)&&(T[D]=xh(B,n)):E<=n&&(r.expiredLanes|=B),C&=~B}}function Na(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ru(){var r=In;return In<<=1,!(In&4194240)&&(In=64),r}function qo(r){for(var n=[],h=0;31>h;h++)n.push(r);return n}function vn(r,n,h){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-Ut(n),r[n]=h}function Dh(r,n){var h=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var p=r.eventTimes;for(r=r.expirationTimes;0<h;){var T=31-Ut(h),C=1<<T;n[T]=0,p[T]=-1,r[T]=-1,h&=~C}}function Os(r,n){var h=r.entangledLanes|=n;for(r=r.entanglements;h;){var p=31-Ut(h),T=1<<p;T&n|r[p]&n&&(r[p]|=n),h&=~T}}var Ce=0;function iu(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var nu,Bs,ou,au,su,Va=!1,Sn=[],mr=null,gr=null,yr=null,en=new Map,tn=new Map,dr=[],Rh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function El(r,n){switch(r){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":en.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":tn.delete(n.pointerId)}}function Ri(r,n,h,p,T,C){return r===null||r.nativeEvent!==C?(r={blockedOn:n,domEventName:h,eventSystemFlags:p,nativeEvent:C,targetContainers:[T]},n!==null&&(n=gn(n),n!==null&&Bs(n)),r):(r.eventSystemFlags|=p,n=r.targetContainers,T!==null&&n.indexOf(T)===-1&&n.push(T),r)}function Ah(r,n,h,p,T){switch(n){case"focusin":return mr=Ri(mr,r,n,h,p,T),!0;case"dragenter":return gr=Ri(gr,r,n,h,p,T),!0;case"mouseover":return yr=Ri(yr,r,n,h,p,T),!0;case"pointerover":var C=T.pointerId;return en.set(C,Ri(en.get(C)||null,r,n,h,p,T)),!0;case"gotpointercapture":return C=T.pointerId,tn.set(C,Ri(tn.get(C)||null,r,n,h,p,T)),!0}return!1}function lu(r){var n=Fr(r.target);if(n!==null){var h=jr(n);if(h!==null){if(n=h.tag,n===13){if(n=Z_(h),n!==null){r.blockedOn=n,su(r.priority,function(){ou(h)});return}}else if(n===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Qn(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var h=ka(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(h===null){h=r.nativeEvent;var p=new h.constructor(h.type,h);Aa=p,h.target.dispatchEvent(p),Aa=null}else return n=gn(h),n!==null&&Bs(n),r.blockedOn=h,!1;n.shift()}return!0}function Ml(r,n,h){Qn(r)&&h.delete(n)}function Lh(){Va=!1,mr!==null&&Qn(mr)&&(mr=null),gr!==null&&Qn(gr)&&(gr=null),yr!==null&&Qn(yr)&&(yr=null),en.forEach(Ml),tn.forEach(Ml)}function Ai(r,n){r.blockedOn===n&&(r.blockedOn=null,Va||(Va=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,Lh)))}function rn(r){function n(T){return Ai(T,r)}if(0<Sn.length){Ai(Sn[0],r);for(var h=1;h<Sn.length;h++){var p=Sn[h];p.blockedOn===r&&(p.blockedOn=null)}}for(mr!==null&&Ai(mr,r),gr!==null&&Ai(gr,r),yr!==null&&Ai(yr,r),en.forEach(n),tn.forEach(n),h=0;h<dr.length;h++)p=dr[h],p.blockedOn===r&&(p.blockedOn=null);for(;0<dr.length&&(h=dr[0],h.blockedOn===null);)lu(h),h.blockedOn===null&&dr.shift()}var vi=sr.ReactCurrentBatchConfig,no=!0;function Fh(r,n,h,p){var T=Ce,C=vi.transition;vi.transition=null;try{Ce=1,Is(r,n,h,p)}finally{Ce=T,vi.transition=C}}function wh(r,n,h,p){var T=Ce,C=vi.transition;vi.transition=null;try{Ce=4,Is(r,n,h,p)}finally{Ce=T,vi.transition=C}}function Is(r,n,h,p){if(no){var T=ka(r,n,h,p);if(T===null)_a(r,n,p,oo,h),El(r,p);else if(Ah(T,r,n,h,p))p.stopPropagation();else if(El(r,p),n&4&&-1<Rh.indexOf(r)){for(;T!==null;){var C=gn(T);if(C!==null&&nu(C),C=ka(r,n,h,p),C===null&&_a(r,n,p,oo,h),C===T)break;T=C}T!==null&&p.stopPropagation()}else _a(r,n,p,null,h)}}var oo=null;function ka(r,n,h,p){if(oo=null,r=Ms(p),r=Fr(r),r!==null)if(n=jr(r),n===null)r=null;else if(h=n.tag,h===13){if(r=Z_(n),r!==null)return r;r=null}else if(h===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return oo=r,null}function _u(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eh()){case Cs:return 1;case eu:return 4;case ro:case Mh:return 16;case tu:return 536870912;default:return 16}default:return 16}}var pr=null,xs=null,Gn=null;function uu(){if(Gn)return Gn;var r,n=xs,h=n.length,p,T="value"in pr?pr.value:pr.textContent,C=T.length;for(r=0;r<h&&n[r]===T[r];r++);var D=h-r;for(p=1;p<=D&&n[h-p]===T[C-p];p++);return Gn=T.slice(r,1<p?1-p:void 0)}function Hn(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function Dn(){return!0}function Cl(){return!1}function xt(r){function n(h,p,T,C,D){this._reactName=h,this._targetInst=T,this.type=p,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var B in r)r.hasOwnProperty(B)&&(h=r[B],this[B]=h?h(C):C[B]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Dn:Cl,this.isPropagationStopped=Cl,this}return Fe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Dn)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Dn)},persist:function(){},isPersistent:Dn}),n}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=xt(Bi),mn=Fe({},Bi,{view:0,detail:0}),Nh=xt(mn),ea,ta,Li,Oo=Fe({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Li&&(Li&&r.type==="mousemove"?(ea=r.screenX-Li.screenX,ta=r.screenY-Li.screenY):ta=ea=0,Li=r),ea)},movementY:function(r){return"movementY"in r?r.movementY:ta}}),Ol=xt(Oo),Vh=Fe({},Oo,{dataTransfer:0}),kh=xt(Vh),zh=Fe({},mn,{relatedTarget:0}),ra=xt(zh),Wh=Fe({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Uh=xt(Wh),Qh=Fe({},Bi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gh=xt(Qh),Hh=Fe({},Bi,{data:0}),Bl=xt(Hh),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=Yh[r])?!!n[r]:!1}function Ds(){return Xh}var Zh=Fe({},mn,{key:function(r){if(r.key){var n=jh[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=Hn(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(r){return r.type==="keypress"?Hn(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Hn(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$h=xt(Zh),Jh=Fe({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=xt(Jh),qh=Fe({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),ed=xt(qh),td=Fe({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),rd=xt(td),id=Fe({},Oo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),nd=xt(id),od=[9,13,27,32],Rs=ir&&"CompositionEvent"in window,Gi=null;ir&&"documentMode"in document&&(Gi=document.documentMode);var ad=ir&&"TextEvent"in window&&!Gi,cu=ir&&(!Rs||Gi&&8<Gi&&11>=Gi),xl=String.fromCharCode(32),Sl=!1;function hu(r,n){switch(r){case"keyup":return od.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function du(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ri=!1;function sd(r,n){switch(r){case"compositionend":return du(n);case"keypress":return n.which!==32?null:(Sl=!0,xl);case"textInput":return r=n.data,r===xl&&Sl?null:r;default:return null}}function ld(r,n){if(ri)return r==="compositionend"||!Rs&&hu(r,n)?(r=uu(),Gn=xs=pr=null,ri=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return cu&&n.locale!=="ko"?null:n.data;default:return null}}var _d={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dl(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!_d[r.type]:n==="textarea"}function fu(r,n,h,p){H_(p),n=ao(n,"onChange"),0<n.length&&(h=new Ss("onChange","change",null,h,p),r.push({event:h,listeners:n}))}var Hi=null,nn=null;function ud(r){Cu(r,0)}function Bo(r){var n=oi(r);if(V_(n))return r}function cd(r,n){if(r==="change")return n}var pu=!1;if(ir){var ia;if(ir){var na="oninput"in document;if(!na){var Rl=document.createElement("div");Rl.setAttribute("oninput","return;"),na=typeof Rl.oninput=="function"}ia=na}else ia=!1;pu=ia&&(!document.documentMode||9<document.documentMode)}function Al(){Hi&&(Hi.detachEvent("onpropertychange",vu),nn=Hi=null)}function vu(r){if(r.propertyName==="value"&&Bo(nn)){var n=[];fu(n,nn,r,Ms(r)),X_(ud,n)}}function hd(r,n,h){r==="focusin"?(Al(),Hi=n,nn=h,Hi.attachEvent("onpropertychange",vu)):r==="focusout"&&Al()}function dd(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bo(nn)}function fd(r,n){if(r==="click")return Bo(n)}function pd(r,n){if(r==="input"||r==="change")return Bo(n)}function vd(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var Gt=typeof Object.is=="function"?Object.is:vd;function on(r,n){if(Gt(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var h=Object.keys(r),p=Object.keys(n);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var T=h[p];if(!Ta.call(n,T)||!Gt(r[T],n[T]))return!1}return!0}function Ll(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Fl(r,n){var h=Ll(r);r=0;for(var p;h;){if(h.nodeType===3){if(p=r+h.textContent.length,r<=n&&p>=n)return{node:h,offset:n-r};r=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Ll(h)}}function mu(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?mu(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function gu(){for(var r=window,n=qn();n instanceof r.HTMLIFrameElement;){try{var h=typeof n.contentWindow.location.href=="string"}catch{h=!1}if(h)r=n.contentWindow;else break;n=qn(r.document)}return n}function As(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function md(r){var n=gu(),h=r.focusedElem,p=r.selectionRange;if(n!==h&&h&&h.ownerDocument&&mu(h.ownerDocument.documentElement,h)){if(p!==null&&As(h)){if(n=p.start,r=p.end,r===void 0&&(r=n),"selectionStart"in h)h.selectionStart=n,h.selectionEnd=Math.min(r,h.value.length);else if(r=(n=h.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var T=h.textContent.length,C=Math.min(p.start,T);p=p.end===void 0?C:Math.min(p.end,T),!r.extend&&C>p&&(T=p,p=C,C=T),T=Fl(h,C);var D=Fl(h,p);T&&D&&(r.rangeCount!==1||r.anchorNode!==T.node||r.anchorOffset!==T.offset||r.focusNode!==D.node||r.focusOffset!==D.offset)&&(n=n.createRange(),n.setStart(T.node,T.offset),r.removeAllRanges(),C>p?(r.addRange(n),r.extend(D.node,D.offset)):(n.setEnd(D.node,D.offset),r.addRange(n)))}}for(n=[],r=h;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<n.length;h++)r=n[h],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var gd=ir&&"documentMode"in document&&11>=document.documentMode,ii=null,za=null,ji=null,Wa=!1;function wl(r,n,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Wa||ii==null||ii!==qn(p)||(p=ii,"selectionStart"in p&&As(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ji&&on(ji,p)||(ji=p,p=ao(za,"onSelect"),0<p.length&&(n=new Ss("onSelect","select",null,n,h),r.push({event:n,listeners:p}),n.target=ii)))}function Rn(r,n){var h={};return h[r.toLowerCase()]=n.toLowerCase(),h["Webkit"+r]="webkit"+n,h["Moz"+r]="moz"+n,h}var ni={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionend:Rn("Transition","TransitionEnd")},oa={},yu={};ir&&(yu=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Io(r){if(oa[r])return oa[r];if(!ni[r])return r;var n=ni[r],h;for(h in n)if(n.hasOwnProperty(h)&&h in yu)return oa[r]=n[h];return r}var bu=Io("animationend"),Tu=Io("animationiteration"),Pu=Io("animationstart"),Eu=Io("transitionend"),Mu=new Map,Nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(r,n){Mu.set(r,n),Hr(n,[r])}for(var aa=0;aa<Nl.length;aa++){var sa=Nl[aa],yd=sa.toLowerCase(),bd=sa[0].toUpperCase()+sa.slice(1);Br(yd,"on"+bd)}Br(bu,"onAnimationEnd");Br(Tu,"onAnimationIteration");Br(Pu,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Eu,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Td=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function Vl(r,n,h){var p=r.type||"unknown-event";r.currentTarget=h,yh(p,n,void 0,r),r.currentTarget=null}function Cu(r,n){n=(n&4)!==0;for(var h=0;h<r.length;h++){var p=r[h],T=p.event;p=p.listeners;e:{var C=void 0;if(n)for(var D=p.length-1;0<=D;D--){var B=p[D],E=B.instance,d=B.currentTarget;if(B=B.listener,E!==C&&T.isPropagationStopped())break e;Vl(T,B,d),C=E}else for(D=0;D<p.length;D++){if(B=p[D],E=B.instance,d=B.currentTarget,B=B.listener,E!==C&&T.isPropagationStopped())break e;Vl(T,B,d),C=E}}}if(to)throw r=wa,to=!1,wa=null,r}function Se(r,n){var h=n[ja];h===void 0&&(h=n[ja]=new Set);var p=r+"__bubble";h.has(p)||(Ou(n,r,2,!1),h.add(p))}function la(r,n,h){var p=0;n&&(p|=4),Ou(h,r,p,n)}var An="_reactListening"+Math.random().toString(36).slice(2);function an(r){if(!r[An]){r[An]=!0,A_.forEach(function(h){h!=="selectionchange"&&(Td.has(h)||la(h,!1,r),la(h,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[An]||(n[An]=!0,la("selectionchange",!1,n))}}function Ou(r,n,h,p){switch(_u(n)){case 1:var T=Fh;break;case 4:T=wh;break;default:T=Is}h=T.bind(null,n,h,r),T=void 0,!Fa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(T=!0),p?T!==void 0?r.addEventListener(n,h,{capture:!0,passive:T}):r.addEventListener(n,h,!0):T!==void 0?r.addEventListener(n,h,{passive:T}):r.addEventListener(n,h,!1)}function _a(r,n,h,p,T){var C=p;if(!(n&1)&&!(n&2)&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var B=p.stateNode.containerInfo;if(B===T||B.nodeType===8&&B.parentNode===T)break;if(D===4)for(D=p.return;D!==null;){var E=D.tag;if((E===3||E===4)&&(E=D.stateNode.containerInfo,E===T||E.nodeType===8&&E.parentNode===T))return;D=D.return}for(;B!==null;){if(D=Fr(B),D===null)return;if(E=D.tag,E===5||E===6){p=C=D;continue e}B=B.parentNode}}p=p.return}X_(function(){var d=C,c=Ms(h),l=[];e:{var g=Mu.get(r);if(g!==void 0){var b=Ss,v=r;switch(r){case"keypress":if(Hn(h)===0)break e;case"keydown":case"keyup":b=$h;break;case"focusin":v="focus",b=ra;break;case"focusout":v="blur",b=ra;break;case"beforeblur":case"afterblur":b=ra;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=ed;break;case bu:case Tu:case Pu:b=Uh;break;case Eu:b=rd;break;case"scroll":b=Nh;break;case"wheel":b=nd;break;case"copy":case"cut":case"paste":b=Gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Il}var _=(n&4)!==0,o=!_&&r==="scroll",t=_?g!==null?g+"Capture":null:g;_=[];for(var e=d,i;e!==null;){i=e;var a=i.stateNode;if(i.tag===5&&a!==null&&(i=a,t!==null&&(a=qi(e,t),a!=null&&_.push(sn(e,a,i)))),o)break;e=e.return}0<_.length&&(g=new b(g,v,null,h,c),l.push({event:g,listeners:_}))}}if(!(n&7)){e:{if(g=r==="mouseover"||r==="pointerover",b=r==="mouseout"||r==="pointerout",g&&h!==Aa&&(v=h.relatedTarget||h.fromElement)&&(Fr(v)||v[nr]))break e;if((b||g)&&(g=c.window===c?c:(g=c.ownerDocument)?g.defaultView||g.parentWindow:window,b?(v=h.relatedTarget||h.toElement,b=d,v=v?Fr(v):null,v!==null&&(o=jr(v),v!==o||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=d),b!==v)){if(_=Ol,a="onMouseLeave",t="onMouseEnter",e="mouse",(r==="pointerout"||r==="pointerover")&&(_=Il,a="onPointerLeave",t="onPointerEnter",e="pointer"),o=b==null?g:oi(b),i=v==null?g:oi(v),g=new _(a,e+"leave",b,h,c),g.target=o,g.relatedTarget=i,a=null,Fr(c)===d&&(_=new _(t,e+"enter",v,h,c),_.target=i,_.relatedTarget=o,a=_),o=a,b&&v)t:{for(_=b,t=v,e=0,i=_;i;i=qr(i))e++;for(i=0,a=t;a;a=qr(a))i++;for(;0<e-i;)_=qr(_),e--;for(;0<i-e;)t=qr(t),i--;for(;e--;){if(_===t||t!==null&&_===t.alternate)break t;_=qr(_),t=qr(t)}_=null}else _=null;b!==null&&kl(l,g,b,_,!1),v!==null&&o!==null&&kl(l,o,v,_,!0)}}e:{if(g=d?oi(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var s=cd;else if(Dl(g))if(pu)s=pd;else{s=dd;var u=hd}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(s=fd);if(s&&(s=s(r,d))){fu(l,s,h,c);break e}u&&u(r,g,d),r==="focusout"&&(u=g._wrapperState)&&u.controlled&&g.type==="number"&&Ia(g,"number",g.value)}switch(u=d?oi(d):window,r){case"focusin":(Dl(u)||u.contentEditable==="true")&&(ii=u,za=d,ji=null);break;case"focusout":ji=za=ii=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,wl(l,h,c);break;case"selectionchange":if(gd)break;case"keydown":case"keyup":wl(l,h,c)}var f;if(Rs)e:{switch(r){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ri?hu(r,h)&&(m="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(m="onCompositionStart");m&&(cu&&h.locale!=="ko"&&(ri||m!=="onCompositionStart"?m==="onCompositionEnd"&&ri&&(f=uu()):(pr=c,xs="value"in pr?pr.value:pr.textContent,ri=!0)),u=ao(d,m),0<u.length&&(m=new Bl(m,r,null,h,c),l.push({event:m,listeners:u}),f?m.data=f:(f=du(h),f!==null&&(m.data=f)))),(f=ad?sd(r,h):ld(r,h))&&(d=ao(d,"onBeforeInput"),0<d.length&&(c=new Bl("onBeforeInput","beforeinput",null,h,c),l.push({event:c,listeners:d}),c.data=f))}Cu(l,n)})}function sn(r,n,h){return{instance:r,listener:n,currentTarget:h}}function ao(r,n){for(var h=n+"Capture",p=[];r!==null;){var T=r,C=T.stateNode;T.tag===5&&C!==null&&(T=C,C=qi(r,h),C!=null&&p.unshift(sn(r,C,T)),C=qi(r,n),C!=null&&p.push(sn(r,C,T))),r=r.return}return p}function qr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function kl(r,n,h,p,T){for(var C=n._reactName,D=[];h!==null&&h!==p;){var B=h,E=B.alternate,d=B.stateNode;if(E!==null&&E===p)break;B.tag===5&&d!==null&&(B=d,T?(E=qi(h,C),E!=null&&D.unshift(sn(h,E,B))):T||(E=qi(h,C),E!=null&&D.push(sn(h,E,B)))),h=h.return}D.length!==0&&r.push({event:n,listeners:D})}var Pd=/\r\n?/g,Ed=/\u0000|\uFFFD/g;function zl(r){return(typeof r=="string"?r:""+r).replace(Pd,`
`).replace(Ed,"")}function Ln(r,n,h){if(n=zl(n),zl(r)!==n&&h)throw Error($(425))}function so(){}var Ua=null,Qa=null;function Ga(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Md=typeof clearTimeout=="function"?clearTimeout:void 0,Wl=typeof Promise=="function"?Promise:void 0,Cd=typeof queueMicrotask=="function"?queueMicrotask:typeof Wl<"u"?function(r){return Wl.resolve(null).then(r).catch(Od)}:Ha;function Od(r){setTimeout(function(){throw r})}function ua(r,n){var h=n,p=0;do{var T=h.nextSibling;if(r.removeChild(h),T&&T.nodeType===8)if(h=T.data,h==="/$"){if(p===0){r.removeChild(T),rn(n);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=T}while(h);rn(n)}function br(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Ul(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"){if(n===0)return r;n--}else h==="/$"&&n++}r=r.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ii,ln="__reactProps$"+Ii,nr="__reactContainer$"+Ii,ja="__reactEvents$"+Ii,Bd="__reactListeners$"+Ii,Id="__reactHandles$"+Ii;function Fr(r){var n=r[Yt];if(n)return n;for(var h=r.parentNode;h;){if(n=h[nr]||h[Yt]){if(h=n.alternate,n.child!==null||h!==null&&h.child!==null)for(r=Ul(r);r!==null;){if(h=r[Yt])return h;r=Ul(r)}return n}r=h,h=r.parentNode}return null}function gn(r){return r=r[Yt]||r[nr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function oi(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error($(33))}function xo(r){return r[ln]||null}var Ka=[],ai=-1;function Ir(r){return{current:r}}function De(r){0>ai||(r.current=Ka[ai],Ka[ai]=null,ai--)}function Oe(r,n){ai++,Ka[ai]=r.current,r.current=n}var Or={},ht=Ir(Or),bt=Ir(!1),zr=Or;function bi(r,n){var h=r.type.contextTypes;if(!h)return Or;var p=r.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===n)return p.__reactInternalMemoizedMaskedChildContext;var T={},C;for(C in h)T[C]=n[C];return p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=T),T}function Tt(r){return r=r.childContextTypes,r!=null}function lo(){De(bt),De(ht)}function Ql(r,n,h){if(ht.current!==Or)throw Error($(168));Oe(ht,n),Oe(bt,h)}function Bu(r,n,h){var p=r.stateNode;if(n=n.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var T in p)if(!(T in n))throw Error($(108,hh(r)||"Unknown",T));return Fe({},h,p)}function _o(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Or,zr=ht.current,Oe(ht,r),Oe(bt,bt.current),!0}function Gl(r,n,h){var p=r.stateNode;if(!p)throw Error($(169));h?(r=Bu(r,n,zr),p.__reactInternalMemoizedMergedChildContext=r,De(bt),De(ht),Oe(ht,r)):De(bt),Oe(bt,h)}var Jt=null,So=!1,ca=!1;function Iu(r){Jt===null?Jt=[r]:Jt.push(r)}function xd(r){So=!0,Iu(r)}function xr(){if(!ca&&Jt!==null){ca=!0;var r=0,n=Ce;try{var h=Jt;for(Ce=1;r<h.length;r++){var p=h[r];do p=p(!0);while(p!==null)}Jt=null,So=!1}catch(T){throw Jt!==null&&(Jt=Jt.slice(r+1)),q_(Cs,xr),T}finally{Ce=n,ca=!1}}return null}var si=[],li=0,uo=null,co=0,Dt=[],Rt=0,Wr=null,er=1,tr="";function Rr(r,n){si[li++]=co,si[li++]=uo,uo=r,co=n}function xu(r,n,h){Dt[Rt++]=er,Dt[Rt++]=tr,Dt[Rt++]=Wr,Wr=r;var p=er;r=tr;var T=32-Ut(p)-1;p&=~(1<<T),h+=1;var C=32-Ut(n)+T;if(30<C){var D=T-T%5;C=(p&(1<<D)-1).toString(32),p>>=D,T-=D,er=1<<32-Ut(n)+T|h<<T|p,tr=C+r}else er=1<<C|h<<T|p,tr=r}function Ls(r){r.return!==null&&(Rr(r,1),xu(r,1,0))}function Fs(r){for(;r===uo;)uo=si[--li],si[li]=null,co=si[--li],si[li]=null;for(;r===Wr;)Wr=Dt[--Rt],Dt[Rt]=null,tr=Dt[--Rt],Dt[Rt]=null,er=Dt[--Rt],Dt[Rt]=null}var Ot=null,Ct=null,Re=!1,Wt=null;function Su(r,n){var h=At(5,null,null,0);h.elementType="DELETED",h.stateNode=n,h.return=r,n=r.deletions,n===null?(r.deletions=[h],r.flags|=16):n.push(h)}function Hl(r,n){switch(r.tag){case 5:var h=r.type;return n=n.nodeType!==1||h.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,Ot=r,Ct=br(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,Ot=r,Ct=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(h=Wr!==null?{id:er,overflow:tr}:null,r.memoizedState={dehydrated:n,treeContext:h,retryLane:1073741824},h=At(18,null,null,0),h.stateNode=n,h.return=r,r.child=h,Ot=r,Ct=null,!0):!1;default:return!1}}function Ya(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Xa(r){if(Re){var n=Ct;if(n){var h=n;if(!Hl(r,n)){if(Ya(r))throw Error($(418));n=br(h.nextSibling);var p=Ot;n&&Hl(r,n)?Su(p,h):(r.flags=r.flags&-4097|2,Re=!1,Ot=r)}}else{if(Ya(r))throw Error($(418));r.flags=r.flags&-4097|2,Re=!1,Ot=r}}}function jl(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ot=r}function Fn(r){if(r!==Ot)return!1;if(!Re)return jl(r),Re=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!Ga(r.type,r.memoizedProps)),n&&(n=Ct)){if(Ya(r))throw Du(),Error($(418));for(;n;)Su(r,n),n=br(n.nextSibling)}if(jl(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error($(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"){if(n===0){Ct=br(r.nextSibling);break e}n--}else h!=="$"&&h!=="$!"&&h!=="$?"||n++}r=r.nextSibling}Ct=null}}else Ct=Ot?br(r.stateNode.nextSibling):null;return!0}function Du(){for(var r=Ct;r;)r=br(r.nextSibling)}function Ti(){Ct=Ot=null,Re=!1}function ws(r){Wt===null?Wt=[r]:Wt.push(r)}var Sd=sr.ReactCurrentBatchConfig;function kt(r,n){if(r&&r.defaultProps){n=Fe({},n),r=r.defaultProps;for(var h in r)n[h]===void 0&&(n[h]=r[h]);return n}return n}var ho=Ir(null),fo=null,_i=null,Ns=null;function Vs(){Ns=_i=fo=null}function ks(r){var n=ho.current;De(ho),r._currentValue=n}function Za(r,n,h){for(;r!==null;){var p=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,p!==null&&(p.childLanes|=n)):p!==null&&(p.childLanes&n)!==n&&(p.childLanes|=n),r===h)break;r=r.return}}function mi(r,n){fo=r,Ns=_i=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&n&&(yt=!0),r.firstContext=null)}function Ft(r){var n=r._currentValue;if(Ns!==r)if(r={context:r,memoizedValue:n,next:null},_i===null){if(fo===null)throw Error($(308));_i=r,fo.dependencies={lanes:0,firstContext:r}}else _i=_i.next=r;return n}var wr=null;function zs(r){wr===null?wr=[r]:wr.push(r)}function Ru(r,n,h,p){var T=n.interleaved;return T===null?(h.next=h,zs(n)):(h.next=T.next,T.next=h),n.interleaved=h,or(r,p)}function or(r,n){r.lanes|=n;var h=r.alternate;for(h!==null&&(h.lanes|=n),h=r,r=r.return;r!==null;)r.childLanes|=n,h=r.alternate,h!==null&&(h.childLanes|=n),h=r,r=r.return;return h.tag===3?h.stateNode:null}var hr=!1;function Ws(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Au(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function rr(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function Tr(r,n,h){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,Te&2){var T=p.pending;return T===null?n.next=n:(n.next=T.next,T.next=n),p.pending=n,or(r,h)}return T=p.interleaved,T===null?(n.next=n,zs(p)):(n.next=T.next,T.next=n),p.interleaved=n,or(r,h)}function jn(r,n,h){if(n=n.updateQueue,n!==null&&(n=n.shared,(h&4194240)!==0)){var p=n.lanes;p&=r.pendingLanes,h|=p,n.lanes=h,Os(r,h)}}function Kl(r,n){var h=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var T=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};C===null?T=C=D:C=C.next=D,h=h.next}while(h!==null);C===null?T=C=n:C=C.next=n}else T=C=n;h={baseState:p.baseState,firstBaseUpdate:T,lastBaseUpdate:C,shared:p.shared,effects:p.effects},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=n:r.next=n,h.lastBaseUpdate=n}function po(r,n,h,p){var T=r.updateQueue;hr=!1;var C=T.firstBaseUpdate,D=T.lastBaseUpdate,B=T.shared.pending;if(B!==null){T.shared.pending=null;var E=B,d=E.next;E.next=null,D===null?C=d:D.next=d,D=E;var c=r.alternate;c!==null&&(c=c.updateQueue,B=c.lastBaseUpdate,B!==D&&(B===null?c.firstBaseUpdate=d:B.next=d,c.lastBaseUpdate=E))}if(C!==null){var l=T.baseState;D=0,c=d=E=null,B=C;do{var g=B.lane,b=B.eventTime;if((p&g)===g){c!==null&&(c=c.next={eventTime:b,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var v=r,_=B;switch(g=n,b=h,_.tag){case 1:if(v=_.payload,typeof v=="function"){l=v.call(b,l,g);break e}l=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,g=typeof v=="function"?v.call(b,l,g):v,g==null)break e;l=Fe({},l,g);break e;case 2:hr=!0}}B.callback!==null&&B.lane!==0&&(r.flags|=64,g=T.effects,g===null?T.effects=[B]:g.push(B))}else b={eventTime:b,lane:g,tag:B.tag,payload:B.payload,callback:B.callback,next:null},c===null?(d=c=b,E=l):c=c.next=b,D|=g;if(B=B.next,B===null){if(B=T.shared.pending,B===null)break;g=B,B=g.next,g.next=null,T.lastBaseUpdate=g,T.shared.pending=null}}while(1);if(c===null&&(E=l),T.baseState=E,T.firstBaseUpdate=d,T.lastBaseUpdate=c,n=T.shared.interleaved,n!==null){T=n;do D|=T.lane,T=T.next;while(T!==n)}else C===null&&(T.shared.lanes=0);Qr|=D,r.lanes=D,r.memoizedState=l}}function Yl(r,n,h){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var p=r[n],T=p.callback;if(T!==null){if(p.callback=null,p=h,typeof T!="function")throw Error($(191,T));T.call(p)}}}var Lu=new R_.Component().refs;function $a(r,n,h,p){n=r.memoizedState,h=h(p,n),h=h==null?n:Fe({},n,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var Do={isMounted:function(r){return(r=r._reactInternals)?jr(r)===r:!1},enqueueSetState:function(r,n,h){r=r._reactInternals;var p=ft(),T=Er(r),C=rr(p,T);C.payload=n,h!=null&&(C.callback=h),n=Tr(r,C,T),n!==null&&(Qt(n,r,T,p),jn(n,r,T))},enqueueReplaceState:function(r,n,h){r=r._reactInternals;var p=ft(),T=Er(r),C=rr(p,T);C.tag=1,C.payload=n,h!=null&&(C.callback=h),n=Tr(r,C,T),n!==null&&(Qt(n,r,T,p),jn(n,r,T))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var h=ft(),p=Er(r),T=rr(h,p);T.tag=2,n!=null&&(T.callback=n),n=Tr(r,T,p),n!==null&&(Qt(n,r,p,h),jn(n,r,p))}};function Xl(r,n,h,p,T,C,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,C,D):n.prototype&&n.prototype.isPureReactComponent?!on(h,p)||!on(T,C):!0}function Fu(r,n,h){var p=!1,T=Or,C=n.contextType;return typeof C=="object"&&C!==null?C=Ft(C):(T=Tt(n)?zr:ht.current,p=n.contextTypes,C=(p=p!=null)?bi(r,T):Or),n=new n(h,C),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Do,r.stateNode=n,n._reactInternals=r,p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=T,r.__reactInternalMemoizedMaskedChildContext=C),n}function Zl(r,n,h,p){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(h,p),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(h,p),n.state!==r&&Do.enqueueReplaceState(n,n.state,null)}function Ja(r,n,h,p){var T=r.stateNode;T.props=h,T.state=r.memoizedState,T.refs=Lu,Ws(r);var C=n.contextType;typeof C=="object"&&C!==null?T.context=Ft(C):(C=Tt(n)?zr:ht.current,T.context=bi(r,C)),T.state=r.memoizedState,C=n.getDerivedStateFromProps,typeof C=="function"&&($a(r,n,C,h),T.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(n=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),n!==T.state&&Do.enqueueReplaceState(T,T.state,null),po(r,h,T,p),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308)}function Fi(r,n,h){if(r=h.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error($(309));var p=h.stateNode}if(!p)throw Error($(147,r));var T=p,C=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===C?n.ref:(n=function(D){var B=T.refs;B===Lu&&(B=T.refs={}),D===null?delete B[C]:B[C]=D},n._stringRef=C,n)}if(typeof r!="string")throw Error($(284));if(!h._owner)throw Error($(290,r))}return r}function wn(r,n){throw r=Object.prototype.toString.call(n),Error($(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function $l(r){var n=r._init;return n(r._payload)}function wu(r){function n(t,e){if(r){var i=t.deletions;i===null?(t.deletions=[e],t.flags|=16):i.push(e)}}function h(t,e){if(!r)return null;for(;e!==null;)n(t,e),e=e.sibling;return null}function p(t,e){for(t=new Map;e!==null;)e.key!==null?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function T(t,e){return t=Mr(t,e),t.index=0,t.sibling=null,t}function C(t,e,i){return t.index=i,r?(i=t.alternate,i!==null?(i=i.index,i<e?(t.flags|=2,e):i):(t.flags|=2,e)):(t.flags|=1048576,e)}function D(t){return r&&t.alternate===null&&(t.flags|=2),t}function B(t,e,i,a){return e===null||e.tag!==6?(e=ga(i,t.mode,a),e.return=t,e):(e=T(e,i),e.return=t,e)}function E(t,e,i,a){var s=i.type;return s===ti?c(t,e,i.props.children,a,i.key):e!==null&&(e.elementType===s||typeof s=="object"&&s!==null&&s.$$typeof===cr&&$l(s)===e.type)?(a=T(e,i.props),a.ref=Fi(t,e,i),a.return=t,a):(a=Jn(i.type,i.key,i.props,null,t.mode,a),a.ref=Fi(t,e,i),a.return=t,a)}function d(t,e,i,a){return e===null||e.tag!==4||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?(e=ya(i,t.mode,a),e.return=t,e):(e=T(e,i.children||[]),e.return=t,e)}function c(t,e,i,a,s){return e===null||e.tag!==7?(e=kr(i,t.mode,a,s),e.return=t,e):(e=T(e,i),e.return=t,e)}function l(t,e,i){if(typeof e=="string"&&e!==""||typeof e=="number")return e=ga(""+e,t.mode,i),e.return=t,e;if(typeof e=="object"&&e!==null){switch(e.$$typeof){case Cn:return i=Jn(e.type,e.key,e.props,null,t.mode,i),i.ref=Fi(t,null,e),i.return=t,i;case ei:return e=ya(e,t.mode,i),e.return=t,e;case cr:var a=e._init;return l(t,a(e._payload),i)}if(ki(e)||Si(e))return e=kr(e,t.mode,i,null),e.return=t,e;wn(t,e)}return null}function g(t,e,i,a){var s=e!==null?e.key:null;if(typeof i=="string"&&i!==""||typeof i=="number")return s!==null?null:B(t,e,""+i,a);if(typeof i=="object"&&i!==null){switch(i.$$typeof){case Cn:return i.key===s?E(t,e,i,a):null;case ei:return i.key===s?d(t,e,i,a):null;case cr:return s=i._init,g(t,e,s(i._payload),a)}if(ki(i)||Si(i))return s!==null?null:c(t,e,i,a,null);wn(t,i)}return null}function b(t,e,i,a,s){if(typeof a=="string"&&a!==""||typeof a=="number")return t=t.get(i)||null,B(e,t,""+a,s);if(typeof a=="object"&&a!==null){switch(a.$$typeof){case Cn:return t=t.get(a.key===null?i:a.key)||null,E(e,t,a,s);case ei:return t=t.get(a.key===null?i:a.key)||null,d(e,t,a,s);case cr:var u=a._init;return b(t,e,i,u(a._payload),s)}if(ki(a)||Si(a))return t=t.get(i)||null,c(e,t,a,s,null);wn(e,a)}return null}function v(t,e,i,a){for(var s=null,u=null,f=e,m=e=0,P=null;f!==null&&m<i.length;m++){f.index>m?(P=f,f=null):P=f.sibling;var y=g(t,f,i[m],a);if(y===null){f===null&&(f=P);break}r&&f&&y.alternate===null&&n(t,f),e=C(y,e,m),u===null?s=y:u.sibling=y,u=y,f=P}if(m===i.length)return h(t,f),Re&&Rr(t,m),s;if(f===null){for(;m<i.length;m++)f=l(t,i[m],a),f!==null&&(e=C(f,e,m),u===null?s=f:u.sibling=f,u=f);return Re&&Rr(t,m),s}for(f=p(t,f);m<i.length;m++)P=b(f,t,m,i[m],a),P!==null&&(r&&P.alternate!==null&&f.delete(P.key===null?m:P.key),e=C(P,e,m),u===null?s=P:u.sibling=P,u=P);return r&&f.forEach(function(M){return n(t,M)}),Re&&Rr(t,m),s}function _(t,e,i,a){var s=Si(i);if(typeof s!="function")throw Error($(150));if(i=s.call(i),i==null)throw Error($(151));for(var u=s=null,f=e,m=e=0,P=null,y=i.next();f!==null&&!y.done;m++,y=i.next()){f.index>m?(P=f,f=null):P=f.sibling;var M=g(t,f,y.value,a);if(M===null){f===null&&(f=P);break}r&&f&&M.alternate===null&&n(t,f),e=C(M,e,m),u===null?s=M:u.sibling=M,u=M,f=P}if(y.done)return h(t,f),Re&&Rr(t,m),s;if(f===null){for(;!y.done;m++,y=i.next())y=l(t,y.value,a),y!==null&&(e=C(y,e,m),u===null?s=y:u.sibling=y,u=y);return Re&&Rr(t,m),s}for(f=p(t,f);!y.done;m++,y=i.next())y=b(f,t,m,y.value,a),y!==null&&(r&&y.alternate!==null&&f.delete(y.key===null?m:y.key),e=C(y,e,m),u===null?s=y:u.sibling=y,u=y);return r&&f.forEach(function(O){return n(t,O)}),Re&&Rr(t,m),s}function o(t,e,i,a){if(typeof i=="object"&&i!==null&&i.type===ti&&i.key===null&&(i=i.props.children),typeof i=="object"&&i!==null){switch(i.$$typeof){case Cn:e:{for(var s=i.key,u=e;u!==null;){if(u.key===s){if(s=i.type,s===ti){if(u.tag===7){h(t,u.sibling),e=T(u,i.props.children),e.return=t,t=e;break e}}else if(u.elementType===s||typeof s=="object"&&s!==null&&s.$$typeof===cr&&$l(s)===u.type){h(t,u.sibling),e=T(u,i.props),e.ref=Fi(t,u,i),e.return=t,t=e;break e}h(t,u);break}else n(t,u);u=u.sibling}i.type===ti?(e=kr(i.props.children,t.mode,a,i.key),e.return=t,t=e):(a=Jn(i.type,i.key,i.props,null,t.mode,a),a.ref=Fi(t,e,i),a.return=t,t=a)}return D(t);case ei:e:{for(u=i.key;e!==null;){if(e.key===u)if(e.tag===4&&e.stateNode.containerInfo===i.containerInfo&&e.stateNode.implementation===i.implementation){h(t,e.sibling),e=T(e,i.children||[]),e.return=t,t=e;break e}else{h(t,e);break}else n(t,e);e=e.sibling}e=ya(i,t.mode,a),e.return=t,t=e}return D(t);case cr:return u=i._init,o(t,e,u(i._payload),a)}if(ki(i))return v(t,e,i,a);if(Si(i))return _(t,e,i,a);wn(t,i)}return typeof i=="string"&&i!==""||typeof i=="number"?(i=""+i,e!==null&&e.tag===6?(h(t,e.sibling),e=T(e,i),e.return=t,t=e):(h(t,e),e=ga(i,t.mode,a),e.return=t,t=e),D(t)):h(t,e)}return o}var Pi=wu(!0),Nu=wu(!1),yn={},Zt=Ir(yn),_n=Ir(yn),un=Ir(yn);function Nr(r){if(r===yn)throw Error($(174));return r}function Us(r,n){switch(Oe(un,n),Oe(_n,r),Oe(Zt,yn),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Sa(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=Sa(n,r)}De(Zt),Oe(Zt,n)}function Ei(){De(Zt),De(_n),De(un)}function Vu(r){Nr(un.current);var n=Nr(Zt.current),h=Sa(n,r.type);n!==h&&(Oe(_n,r),Oe(Zt,h))}function Qs(r){_n.current===r&&(De(Zt),De(_n))}var Ae=Ir(0);function vo(r){for(var n=r;n!==null;){if(n.tag===13){var h=n.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ha=[];function Gs(){for(var r=0;r<ha.length;r++)ha[r]._workInProgressVersionPrimary=null;ha.length=0}var Kn=sr.ReactCurrentDispatcher,da=sr.ReactCurrentBatchConfig,Ur=0,Le=null,Ye=null,$e=null,mo=!1,Ki=!1,cn=0,Dd=0;function lt(){throw Error($(321))}function Hs(r,n){if(n===null)return!1;for(var h=0;h<n.length&&h<r.length;h++)if(!Gt(r[h],n[h]))return!1;return!0}function js(r,n,h,p,T,C){if(Ur=C,Le=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Kn.current=r===null||r.memoizedState===null?Fd:wd,r=h(p,T),Ki){C=0;do{if(Ki=!1,cn=0,25<=C)throw Error($(301));C+=1,$e=Ye=null,n.updateQueue=null,Kn.current=Nd,r=h(p,T)}while(Ki)}if(Kn.current=go,n=Ye!==null&&Ye.next!==null,Ur=0,$e=Ye=Le=null,mo=!1,n)throw Error($(300));return r}function Ks(){var r=cn!==0;return cn=0,r}function Kt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Le.memoizedState=$e=r:$e=$e.next=r,$e}function wt(){if(Ye===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=Ye.next;var n=$e===null?Le.memoizedState:$e.next;if(n!==null)$e=n,Ye=r;else{if(r===null)throw Error($(310));Ye=r,r={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},$e===null?Le.memoizedState=$e=r:$e=$e.next=r}return $e}function hn(r,n){return typeof n=="function"?n(r):n}function fa(r){var n=wt(),h=n.queue;if(h===null)throw Error($(311));h.lastRenderedReducer=r;var p=Ye,T=p.baseQueue,C=h.pending;if(C!==null){if(T!==null){var D=T.next;T.next=C.next,C.next=D}p.baseQueue=T=C,h.pending=null}if(T!==null){C=T.next,p=p.baseState;var B=D=null,E=null,d=C;do{var c=d.lane;if((Ur&c)===c)E!==null&&(E=E.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p=d.hasEagerState?d.eagerState:r(p,d.action);else{var l={lane:c,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};E===null?(B=E=l,D=p):E=E.next=l,Le.lanes|=c,Qr|=c}d=d.next}while(d!==null&&d!==C);E===null?D=p:E.next=B,Gt(p,n.memoizedState)||(yt=!0),n.memoizedState=p,n.baseState=D,n.baseQueue=E,h.lastRenderedState=p}if(r=h.interleaved,r!==null){T=r;do C=T.lane,Le.lanes|=C,Qr|=C,T=T.next;while(T!==r)}else T===null&&(h.lanes=0);return[n.memoizedState,h.dispatch]}function pa(r){var n=wt(),h=n.queue;if(h===null)throw Error($(311));h.lastRenderedReducer=r;var p=h.dispatch,T=h.pending,C=n.memoizedState;if(T!==null){h.pending=null;var D=T=T.next;do C=r(C,D.action),D=D.next;while(D!==T);Gt(C,n.memoizedState)||(yt=!0),n.memoizedState=C,n.baseQueue===null&&(n.baseState=C),h.lastRenderedState=C}return[C,p]}function ku(){}function zu(r,n){var h=Le,p=wt(),T=n(),C=!Gt(p.memoizedState,T);if(C&&(p.memoizedState=T,yt=!0),p=p.queue,Ys(Qu.bind(null,h,p,r),[r]),p.getSnapshot!==n||C||$e!==null&&$e.memoizedState.tag&1){if(h.flags|=2048,dn(9,Uu.bind(null,h,p,T,n),void 0,null),Je===null)throw Error($(349));Ur&30||Wu(h,n,T)}return T}function Wu(r,n,h){r.flags|=16384,r={getSnapshot:n,value:h},n=Le.updateQueue,n===null?(n={lastEffect:null,stores:null},Le.updateQueue=n,n.stores=[r]):(h=n.stores,h===null?n.stores=[r]:h.push(r))}function Uu(r,n,h,p){n.value=h,n.getSnapshot=p,Gu(n)&&Hu(r)}function Qu(r,n,h){return h(function(){Gu(n)&&Hu(r)})}function Gu(r){var n=r.getSnapshot;r=r.value;try{var h=n();return!Gt(r,h)}catch{return!0}}function Hu(r){var n=or(r,1);n!==null&&Qt(n,r,1,-1)}function Jl(r){var n=Kt();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:r},n.queue=r,r=r.dispatch=Ld.bind(null,Le,r),[n.memoizedState,r]}function dn(r,n,h,p){return r={tag:r,create:n,destroy:h,deps:p,next:null},n=Le.updateQueue,n===null?(n={lastEffect:null,stores:null},Le.updateQueue=n,n.lastEffect=r.next=r):(h=n.lastEffect,h===null?n.lastEffect=r.next=r:(p=h.next,h.next=r,r.next=p,n.lastEffect=r)),r}function ju(){return wt().memoizedState}function Yn(r,n,h,p){var T=Kt();Le.flags|=r,T.memoizedState=dn(1|n,h,void 0,p===void 0?null:p)}function Ro(r,n,h,p){var T=wt();p=p===void 0?null:p;var C=void 0;if(Ye!==null){var D=Ye.memoizedState;if(C=D.destroy,p!==null&&Hs(p,D.deps)){T.memoizedState=dn(n,h,C,p);return}}Le.flags|=r,T.memoizedState=dn(1|n,h,C,p)}function ql(r,n){return Yn(8390656,8,r,n)}function Ys(r,n){return Ro(2048,8,r,n)}function Ku(r,n){return Ro(4,2,r,n)}function Yu(r,n){return Ro(4,4,r,n)}function Xu(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function Zu(r,n,h){return h=h!=null?h.concat([r]):null,Ro(4,4,Xu.bind(null,n,r),h)}function Xs(){}function $u(r,n){var h=wt();n=n===void 0?null:n;var p=h.memoizedState;return p!==null&&n!==null&&Hs(n,p[1])?p[0]:(h.memoizedState=[r,n],r)}function Ju(r,n){var h=wt();n=n===void 0?null:n;var p=h.memoizedState;return p!==null&&n!==null&&Hs(n,p[1])?p[0]:(r=r(),h.memoizedState=[r,n],r)}function qu(r,n,h){return Ur&21?(Gt(h,n)||(h=ru(),Le.lanes|=h,Qr|=h,r.baseState=!0),n):(r.baseState&&(r.baseState=!1,yt=!0),r.memoizedState=h)}function Rd(r,n){var h=Ce;Ce=h!==0&&4>h?h:4,r(!0);var p=da.transition;da.transition={};try{r(!1),n()}finally{Ce=h,da.transition=p}}function ec(){return wt().memoizedState}function Ad(r,n,h){var p=Er(r);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},tc(r))rc(n,h);else if(h=Ru(r,n,h,p),h!==null){var T=ft();Qt(h,r,p,T),ic(h,n,p)}}function Ld(r,n,h){var p=Er(r),T={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(tc(r))rc(n,T);else{var C=r.alternate;if(r.lanes===0&&(C===null||C.lanes===0)&&(C=n.lastRenderedReducer,C!==null))try{var D=n.lastRenderedState,B=C(D,h);if(T.hasEagerState=!0,T.eagerState=B,Gt(B,D)){var E=n.interleaved;E===null?(T.next=T,zs(n)):(T.next=E.next,E.next=T),n.interleaved=T;return}}catch{}finally{}h=Ru(r,n,T,p),h!==null&&(T=ft(),Qt(h,r,p,T),ic(h,n,p))}}function tc(r){var n=r.alternate;return r===Le||n!==null&&n===Le}function rc(r,n){Ki=mo=!0;var h=r.pending;h===null?n.next=n:(n.next=h.next,h.next=n),r.pending=n}function ic(r,n,h){if(h&4194240){var p=n.lanes;p&=r.pendingLanes,h|=p,n.lanes=h,Os(r,h)}}var go={readContext:Ft,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Fd={readContext:Ft,useCallback:function(r,n){return Kt().memoizedState=[r,n===void 0?null:n],r},useContext:Ft,useEffect:ql,useImperativeHandle:function(r,n,h){return h=h!=null?h.concat([r]):null,Yn(4194308,4,Xu.bind(null,n,r),h)},useLayoutEffect:function(r,n){return Yn(4194308,4,r,n)},useInsertionEffect:function(r,n){return Yn(4,2,r,n)},useMemo:function(r,n){var h=Kt();return n=n===void 0?null:n,r=r(),h.memoizedState=[r,n],r},useReducer:function(r,n,h){var p=Kt();return n=h!==void 0?h(n):n,p.memoizedState=p.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},p.queue=r,r=r.dispatch=Ad.bind(null,Le,r),[p.memoizedState,r]},useRef:function(r){var n=Kt();return r={current:r},n.memoizedState=r},useState:Jl,useDebugValue:Xs,useDeferredValue:function(r){return Kt().memoizedState=r},useTransition:function(){var r=Jl(!1),n=r[0];return r=Rd.bind(null,r[1]),Kt().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,h){var p=Le,T=Kt();if(Re){if(h===void 0)throw Error($(407));h=h()}else{if(h=n(),Je===null)throw Error($(349));Ur&30||Wu(p,n,h)}T.memoizedState=h;var C={value:h,getSnapshot:n};return T.queue=C,ql(Qu.bind(null,p,C,r),[r]),p.flags|=2048,dn(9,Uu.bind(null,p,C,h,n),void 0,null),h},useId:function(){var r=Kt(),n=Je.identifierPrefix;if(Re){var h=tr,p=er;h=(p&~(1<<32-Ut(p)-1)).toString(32)+h,n=":"+n+"R"+h,h=cn++,0<h&&(n+="H"+h.toString(32)),n+=":"}else h=Dd++,n=":"+n+"r"+h.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},wd={readContext:Ft,useCallback:$u,useContext:Ft,useEffect:Ys,useImperativeHandle:Zu,useInsertionEffect:Ku,useLayoutEffect:Yu,useMemo:Ju,useReducer:fa,useRef:ju,useState:function(){return fa(hn)},useDebugValue:Xs,useDeferredValue:function(r){var n=wt();return qu(n,Ye.memoizedState,r)},useTransition:function(){var r=fa(hn)[0],n=wt().memoizedState;return[r,n]},useMutableSource:ku,useSyncExternalStore:zu,useId:ec,unstable_isNewReconciler:!1},Nd={readContext:Ft,useCallback:$u,useContext:Ft,useEffect:Ys,useImperativeHandle:Zu,useInsertionEffect:Ku,useLayoutEffect:Yu,useMemo:Ju,useReducer:pa,useRef:ju,useState:function(){return pa(hn)},useDebugValue:Xs,useDeferredValue:function(r){var n=wt();return Ye===null?n.memoizedState=r:qu(n,Ye.memoizedState,r)},useTransition:function(){var r=pa(hn)[0],n=wt().memoizedState;return[r,n]},useMutableSource:ku,useSyncExternalStore:zu,useId:ec,unstable_isNewReconciler:!1};function Mi(r,n){try{var h="",p=n;do h+=ch(p),p=p.return;while(p);var T=h}catch(C){T=`
Error generating stack: `+C.message+`
`+C.stack}return{value:r,source:n,stack:T,digest:null}}function va(r,n,h){return{value:r,source:null,stack:h??null,digest:n??null}}function qa(r,n){try{console.error(n.value)}catch(h){setTimeout(function(){throw h})}}var Vd=typeof WeakMap=="function"?WeakMap:Map;function nc(r,n,h){h=rr(-1,h),h.tag=3,h.payload={element:null};var p=n.value;return h.callback=function(){bo||(bo=!0,_s=p),qa(r,n)},h}function oc(r,n,h){h=rr(-1,h),h.tag=3;var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var T=n.value;h.payload=function(){return p(T)},h.callback=function(){qa(r,n)}}var C=r.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(h.callback=function(){qa(r,n),typeof p!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var D=n.stack;this.componentDidCatch(n.value,{componentStack:D!==null?D:""})}),h}function e_(r,n,h){var p=r.pingCache;if(p===null){p=r.pingCache=new Vd;var T=new Set;p.set(n,T)}else T=p.get(n),T===void 0&&(T=new Set,p.set(n,T));T.has(h)||(T.add(h),r=Jd.bind(null,r,n,h),n.then(r,r))}function t_(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function r_(r,n,h,p,T){return r.mode&1?(r.flags|=65536,r.lanes=T,r):(r===n?r.flags|=65536:(r.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(n=rr(-1,1),n.tag=2,Tr(h,n,1))),h.lanes|=1),r)}var kd=sr.ReactCurrentOwner,yt=!1;function dt(r,n,h,p){n.child=r===null?Nu(n,null,h,p):Pi(n,r.child,h,p)}function i_(r,n,h,p,T){h=h.render;var C=n.ref;return mi(n,T),p=js(r,n,h,p,C,T),h=Ks(),r!==null&&!yt?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~T,ar(r,n,T)):(Re&&h&&Ls(n),n.flags|=1,dt(r,n,p,T),n.child)}function n_(r,n,h,p,T){if(r===null){var C=h.type;return typeof C=="function"&&!il(C)&&C.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(n.tag=15,n.type=C,ac(r,n,C,p,T)):(r=Jn(h.type,null,p,n,n.mode,T),r.ref=n.ref,r.return=n,n.child=r)}if(C=r.child,!(r.lanes&T)){var D=C.memoizedProps;if(h=h.compare,h=h!==null?h:on,h(D,p)&&r.ref===n.ref)return ar(r,n,T)}return n.flags|=1,r=Mr(C,p),r.ref=n.ref,r.return=n,n.child=r}function ac(r,n,h,p,T){if(r!==null){var C=r.memoizedProps;if(on(C,p)&&r.ref===n.ref)if(yt=!1,n.pendingProps=p=C,(r.lanes&T)!==0)r.flags&131072&&(yt=!0);else return n.lanes=r.lanes,ar(r,n,T)}return es(r,n,h,p,T)}function sc(r,n,h){var p=n.pendingProps,T=p.children,C=r!==null?r.memoizedState:null;if(p.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ci,Mt),Mt|=h;else{if(!(h&1073741824))return r=C!==null?C.baseLanes|h:h,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,Oe(ci,Mt),Mt|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=C!==null?C.baseLanes:h,Oe(ci,Mt),Mt|=p}else C!==null?(p=C.baseLanes|h,n.memoizedState=null):p=h,Oe(ci,Mt),Mt|=p;return dt(r,n,T,h),n.child}function lc(r,n){var h=n.ref;(r===null&&h!==null||r!==null&&r.ref!==h)&&(n.flags|=512,n.flags|=2097152)}function es(r,n,h,p,T){var C=Tt(h)?zr:ht.current;return C=bi(n,C),mi(n,T),h=js(r,n,h,p,C,T),p=Ks(),r!==null&&!yt?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~T,ar(r,n,T)):(Re&&p&&Ls(n),n.flags|=1,dt(r,n,h,T),n.child)}function o_(r,n,h,p,T){if(Tt(h)){var C=!0;_o(n)}else C=!1;if(mi(n,T),n.stateNode===null)Xn(r,n),Fu(n,h,p),Ja(n,h,p,T),p=!0;else if(r===null){var D=n.stateNode,B=n.memoizedProps;D.props=B;var E=D.context,d=h.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=Tt(h)?zr:ht.current,d=bi(n,d));var c=h.getDerivedStateFromProps,l=typeof c=="function"||typeof D.getSnapshotBeforeUpdate=="function";l||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(B!==p||E!==d)&&Zl(n,D,p,d),hr=!1;var g=n.memoizedState;D.state=g,po(n,p,D,T),E=n.memoizedState,B!==p||g!==E||bt.current||hr?(typeof c=="function"&&($a(n,h,c,p),E=n.memoizedState),(B=hr||Xl(n,h,B,p,g,E,d))?(l||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(n.flags|=4194308)):(typeof D.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=p,n.memoizedState=E),D.props=p,D.state=E,D.context=d,p=B):(typeof D.componentDidMount=="function"&&(n.flags|=4194308),p=!1)}else{D=n.stateNode,Au(r,n),B=n.memoizedProps,d=n.type===n.elementType?B:kt(n.type,B),D.props=d,l=n.pendingProps,g=D.context,E=h.contextType,typeof E=="object"&&E!==null?E=Ft(E):(E=Tt(h)?zr:ht.current,E=bi(n,E));var b=h.getDerivedStateFromProps;(c=typeof b=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(B!==l||g!==E)&&Zl(n,D,p,E),hr=!1,g=n.memoizedState,D.state=g,po(n,p,D,T);var v=n.memoizedState;B!==l||g!==v||bt.current||hr?(typeof b=="function"&&($a(n,h,b,p),v=n.memoizedState),(d=hr||Xl(n,h,d,p,g,v,E)||!1)?(c||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,v,E),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,v,E)),typeof D.componentDidUpdate=="function"&&(n.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof D.componentDidUpdate!="function"||B===r.memoizedProps&&g===r.memoizedState||(n.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&g===r.memoizedState||(n.flags|=1024),n.memoizedProps=p,n.memoizedState=v),D.props=p,D.state=v,D.context=E,p=d):(typeof D.componentDidUpdate!="function"||B===r.memoizedProps&&g===r.memoizedState||(n.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&g===r.memoizedState||(n.flags|=1024),p=!1)}return ts(r,n,h,p,C,T)}function ts(r,n,h,p,T,C){lc(r,n);var D=(n.flags&128)!==0;if(!p&&!D)return T&&Gl(n,h,!1),ar(r,n,C);p=n.stateNode,kd.current=n;var B=D&&typeof h.getDerivedStateFromError!="function"?null:p.render();return n.flags|=1,r!==null&&D?(n.child=Pi(n,r.child,null,C),n.child=Pi(n,null,B,C)):dt(r,n,B,C),n.memoizedState=p.state,T&&Gl(n,h,!0),n.child}function _c(r){var n=r.stateNode;n.pendingContext?Ql(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Ql(r,n.context,!1),Us(r,n.containerInfo)}function a_(r,n,h,p,T){return Ti(),ws(T),n.flags|=256,dt(r,n,h,p),n.child}var rs={dehydrated:null,treeContext:null,retryLane:0};function is(r){return{baseLanes:r,cachePool:null,transitions:null}}function uc(r,n,h){var p=n.pendingProps,T=Ae.current,C=!1,D=(n.flags&128)!==0,B;if((B=D)||(B=r!==null&&r.memoizedState===null?!1:(T&2)!==0),B?(C=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(T|=1),Oe(Ae,T&1),r===null)return Xa(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(n.mode&1?r.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(D=p.children,r=p.fallback,C?(p=n.mode,C=n.child,D={mode:"hidden",children:D},!(p&1)&&C!==null?(C.childLanes=0,C.pendingProps=D):C=Fo(D,p,0,null),r=kr(r,p,h,null),C.return=n,r.return=n,C.sibling=r,n.child=C,n.child.memoizedState=is(h),n.memoizedState=rs,r):Zs(n,D));if(T=r.memoizedState,T!==null&&(B=T.dehydrated,B!==null))return zd(r,n,D,p,B,T,h);if(C){C=p.fallback,D=n.mode,T=r.child,B=T.sibling;var E={mode:"hidden",children:p.children};return!(D&1)&&n.child!==T?(p=n.child,p.childLanes=0,p.pendingProps=E,n.deletions=null):(p=Mr(T,E),p.subtreeFlags=T.subtreeFlags&14680064),B!==null?C=Mr(B,C):(C=kr(C,D,h,null),C.flags|=2),C.return=n,p.return=n,p.sibling=C,n.child=p,p=C,C=n.child,D=r.child.memoizedState,D=D===null?is(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},C.memoizedState=D,C.childLanes=r.childLanes&~h,n.memoizedState=rs,p}return C=r.child,r=C.sibling,p=Mr(C,{mode:"visible",children:p.children}),!(n.mode&1)&&(p.lanes=h),p.return=n,p.sibling=null,r!==null&&(h=n.deletions,h===null?(n.deletions=[r],n.flags|=16):h.push(r)),n.child=p,n.memoizedState=null,p}function Zs(r,n){return n=Fo({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Nn(r,n,h,p){return p!==null&&ws(p),Pi(n,r.child,null,h),r=Zs(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function zd(r,n,h,p,T,C,D){if(h)return n.flags&256?(n.flags&=-257,p=va(Error($(422))),Nn(r,n,D,p)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(C=p.fallback,T=n.mode,p=Fo({mode:"visible",children:p.children},T,0,null),C=kr(C,T,D,null),C.flags|=2,p.return=n,C.return=n,p.sibling=C,n.child=p,n.mode&1&&Pi(n,r.child,null,D),n.child.memoizedState=is(D),n.memoizedState=rs,C);if(!(n.mode&1))return Nn(r,n,D,null);if(T.data==="$!"){if(p=T.nextSibling&&T.nextSibling.dataset,p)var B=p.dgst;return p=B,C=Error($(419)),p=va(C,p,void 0),Nn(r,n,D,p)}if(B=(D&r.childLanes)!==0,yt||B){if(p=Je,p!==null){switch(D&-D){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(p.suspendedLanes|D)?0:T,T!==0&&T!==C.retryLane&&(C.retryLane=T,or(r,T),Qt(p,r,T,-1))}return rl(),p=va(Error($(421))),Nn(r,n,D,p)}return T.data==="$?"?(n.flags|=128,n.child=r.child,n=qd.bind(null,r),T._reactRetry=n,null):(r=C.treeContext,Ct=br(T.nextSibling),Ot=n,Re=!0,Wt=null,r!==null&&(Dt[Rt++]=er,Dt[Rt++]=tr,Dt[Rt++]=Wr,er=r.id,tr=r.overflow,Wr=n),n=Zs(n,p.children),n.flags|=4096,n)}function s_(r,n,h){r.lanes|=n;var p=r.alternate;p!==null&&(p.lanes|=n),Za(r.return,n,h)}function ma(r,n,h,p,T){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:T}:(C.isBackwards=n,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=h,C.tailMode=T)}function cc(r,n,h){var p=n.pendingProps,T=p.revealOrder,C=p.tail;if(dt(r,n,p.children,h),p=Ae.current,p&2)p=p&1|2,n.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&s_(r,h,n);else if(r.tag===19)s_(r,h,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}if(Oe(Ae,p),!(n.mode&1))n.memoizedState=null;else switch(T){case"forwards":for(h=n.child,T=null;h!==null;)r=h.alternate,r!==null&&vo(r)===null&&(T=h),h=h.sibling;h=T,h===null?(T=n.child,n.child=null):(T=h.sibling,h.sibling=null),ma(n,!1,T,h,C);break;case"backwards":for(h=null,T=n.child,n.child=null;T!==null;){if(r=T.alternate,r!==null&&vo(r)===null){n.child=T;break}r=T.sibling,T.sibling=h,h=T,T=r}ma(n,!0,h,null,C);break;case"together":ma(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Xn(r,n){!(n.mode&1)&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function ar(r,n,h){if(r!==null&&(n.dependencies=r.dependencies),Qr|=n.lanes,!(h&n.childLanes))return null;if(r!==null&&n.child!==r.child)throw Error($(153));if(n.child!==null){for(r=n.child,h=Mr(r,r.pendingProps),n.child=h,h.return=n;r.sibling!==null;)r=r.sibling,h=h.sibling=Mr(r,r.pendingProps),h.return=n;h.sibling=null}return n.child}function Wd(r,n,h){switch(n.tag){case 3:_c(n),Ti();break;case 5:Vu(n);break;case 1:Tt(n.type)&&_o(n);break;case 4:Us(n,n.stateNode.containerInfo);break;case 10:var p=n.type._context,T=n.memoizedProps.value;Oe(ho,p._currentValue),p._currentValue=T;break;case 13:if(p=n.memoizedState,p!==null)return p.dehydrated!==null?(Oe(Ae,Ae.current&1),n.flags|=128,null):h&n.child.childLanes?uc(r,n,h):(Oe(Ae,Ae.current&1),r=ar(r,n,h),r!==null?r.sibling:null);Oe(Ae,Ae.current&1);break;case 19:if(p=(h&n.childLanes)!==0,r.flags&128){if(p)return cc(r,n,h);n.flags|=128}if(T=n.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Oe(Ae,Ae.current),p)break;return null;case 22:case 23:return n.lanes=0,sc(r,n,h)}return ar(r,n,h)}var hc,ns,dc,fc;hc=function(r,n){for(var h=n.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break;for(;h.sibling===null;){if(h.return===null||h.return===n)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};ns=function(){};dc=function(r,n,h,p){var T=r.memoizedProps;if(T!==p){r=n.stateNode,Nr(Zt.current);var C=null;switch(h){case"input":T=Oa(r,T),p=Oa(r,p),C=[];break;case"select":T=Fe({},T,{value:void 0}),p=Fe({},p,{value:void 0}),C=[];break;case"textarea":T=xa(r,T),p=xa(r,p),C=[];break;default:typeof T.onClick!="function"&&typeof p.onClick=="function"&&(r.onclick=so)}Da(h,p);var D;h=null;for(d in T)if(!p.hasOwnProperty(d)&&T.hasOwnProperty(d)&&T[d]!=null)if(d==="style"){var B=T[d];for(D in B)B.hasOwnProperty(D)&&(h||(h={}),h[D]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($i.hasOwnProperty(d)?C||(C=[]):(C=C||[]).push(d,null));for(d in p){var E=p[d];if(B=T!=null?T[d]:void 0,p.hasOwnProperty(d)&&E!==B&&(E!=null||B!=null))if(d==="style")if(B){for(D in B)!B.hasOwnProperty(D)||E&&E.hasOwnProperty(D)||(h||(h={}),h[D]="");for(D in E)E.hasOwnProperty(D)&&B[D]!==E[D]&&(h||(h={}),h[D]=E[D])}else h||(C||(C=[]),C.push(d,h)),h=E;else d==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,B=B?B.__html:void 0,E!=null&&B!==E&&(C=C||[]).push(d,E)):d==="children"?typeof E!="string"&&typeof E!="number"||(C=C||[]).push(d,""+E):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($i.hasOwnProperty(d)?(E!=null&&d==="onScroll"&&Se("scroll",r),C||B===E||(C=[])):(C=C||[]).push(d,E))}h&&(C=C||[]).push("style",h);var d=C;(n.updateQueue=d)&&(n.flags|=4)}};fc=function(r,n,h,p){h!==p&&(n.flags|=4)};function wi(r,n){if(!Re)switch(r.tailMode){case"hidden":n=r.tail;for(var h=null;n!==null;)n.alternate!==null&&(h=n),n=n.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function _t(r){var n=r.alternate!==null&&r.alternate.child===r.child,h=0,p=0;if(n)for(var T=r.child;T!==null;)h|=T.lanes|T.childLanes,p|=T.subtreeFlags&14680064,p|=T.flags&14680064,T.return=r,T=T.sibling;else for(T=r.child;T!==null;)h|=T.lanes|T.childLanes,p|=T.subtreeFlags,p|=T.flags,T.return=r,T=T.sibling;return r.subtreeFlags|=p,r.childLanes=h,n}function Ud(r,n,h){var p=n.pendingProps;switch(Fs(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(n),null;case 1:return Tt(n.type)&&lo(),_t(n),null;case 3:return p=n.stateNode,Ei(),De(bt),De(ht),Gs(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(Fn(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Wt!==null&&(hs(Wt),Wt=null))),ns(r,n),_t(n),null;case 5:Qs(n);var T=Nr(un.current);if(h=n.type,r!==null&&n.stateNode!=null)dc(r,n,h,p,T),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!p){if(n.stateNode===null)throw Error($(166));return _t(n),null}if(r=Nr(Zt.current),Fn(n)){p=n.stateNode,h=n.type;var C=n.memoizedProps;switch(p[Yt]=n,p[ln]=C,r=(n.mode&1)!==0,h){case"dialog":Se("cancel",p),Se("close",p);break;case"iframe":case"object":case"embed":Se("load",p);break;case"video":case"audio":for(T=0;T<Wi.length;T++)Se(Wi[T],p);break;case"source":Se("error",p);break;case"img":case"image":case"link":Se("error",p),Se("load",p);break;case"details":Se("toggle",p);break;case"input":vl(p,C),Se("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!C.multiple},Se("invalid",p);break;case"textarea":gl(p,C),Se("invalid",p)}Da(h,C),T=null;for(var D in C)if(C.hasOwnProperty(D)){var B=C[D];D==="children"?typeof B=="string"?p.textContent!==B&&(C.suppressHydrationWarning!==!0&&Ln(p.textContent,B,r),T=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(C.suppressHydrationWarning!==!0&&Ln(p.textContent,B,r),T=["children",""+B]):$i.hasOwnProperty(D)&&B!=null&&D==="onScroll"&&Se("scroll",p)}switch(h){case"input":On(p),ml(p,C,!0);break;case"textarea":On(p),yl(p);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(p.onclick=so)}p=T,n.updateQueue=p,p!==null&&(n.flags|=4)}else{D=T.nodeType===9?T:T.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=W_(h)),r==="http://www.w3.org/1999/xhtml"?h==="script"?(r=D.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof p.is=="string"?r=D.createElement(h,{is:p.is}):(r=D.createElement(h),h==="select"&&(D=r,p.multiple?D.multiple=!0:p.size&&(D.size=p.size))):r=D.createElementNS(r,h),r[Yt]=n,r[ln]=p,hc(r,n,!1,!1),n.stateNode=r;e:{switch(D=Ra(h,p),h){case"dialog":Se("cancel",r),Se("close",r),T=p;break;case"iframe":case"object":case"embed":Se("load",r),T=p;break;case"video":case"audio":for(T=0;T<Wi.length;T++)Se(Wi[T],r);T=p;break;case"source":Se("error",r),T=p;break;case"img":case"image":case"link":Se("error",r),Se("load",r),T=p;break;case"details":Se("toggle",r),T=p;break;case"input":vl(r,p),T=Oa(r,p),Se("invalid",r);break;case"option":T=p;break;case"select":r._wrapperState={wasMultiple:!!p.multiple},T=Fe({},p,{value:void 0}),Se("invalid",r);break;case"textarea":gl(r,p),T=xa(r,p),Se("invalid",r);break;default:T=p}Da(h,T),B=T;for(C in B)if(B.hasOwnProperty(C)){var E=B[C];C==="style"?G_(r,E):C==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&U_(r,E)):C==="children"?typeof E=="string"?(h!=="textarea"||E!=="")&&Ji(r,E):typeof E=="number"&&Ji(r,""+E):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&($i.hasOwnProperty(C)?E!=null&&C==="onScroll"&&Se("scroll",r):E!=null&&bs(r,C,E,D))}switch(h){case"input":On(r),ml(r,p,!1);break;case"textarea":On(r),yl(r);break;case"option":p.value!=null&&r.setAttribute("value",""+Cr(p.value));break;case"select":r.multiple=!!p.multiple,C=p.value,C!=null?di(r,!!p.multiple,C,!1):p.defaultValue!=null&&di(r,!!p.multiple,p.defaultValue,!0);break;default:typeof T.onClick=="function"&&(r.onclick=so)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return _t(n),null;case 6:if(r&&n.stateNode!=null)fc(r,n,r.memoizedProps,p);else{if(typeof p!="string"&&n.stateNode===null)throw Error($(166));if(h=Nr(un.current),Nr(Zt.current),Fn(n)){if(p=n.stateNode,h=n.memoizedProps,p[Yt]=n,(C=p.nodeValue!==h)&&(r=Ot,r!==null))switch(r.tag){case 3:Ln(p.nodeValue,h,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ln(p.nodeValue,h,(r.mode&1)!==0)}C&&(n.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Yt]=n,n.stateNode=p}return _t(n),null;case 13:if(De(Ae),p=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Re&&Ct!==null&&n.mode&1&&!(n.flags&128))Du(),Ti(),n.flags|=98560,C=!1;else if(C=Fn(n),p!==null&&p.dehydrated!==null){if(r===null){if(!C)throw Error($(318));if(C=n.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error($(317));C[Yt]=n}else Ti(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;_t(n),C=!1}else Wt!==null&&(hs(Wt),Wt=null),C=!0;if(!C)return n.flags&65536?n:null}return n.flags&128?(n.lanes=h,n):(p=p!==null,p!==(r!==null&&r.memoizedState!==null)&&p&&(n.child.flags|=8192,n.mode&1&&(r===null||Ae.current&1?Xe===0&&(Xe=3):rl())),n.updateQueue!==null&&(n.flags|=4),_t(n),null);case 4:return Ei(),ns(r,n),r===null&&an(n.stateNode.containerInfo),_t(n),null;case 10:return ks(n.type._context),_t(n),null;case 17:return Tt(n.type)&&lo(),_t(n),null;case 19:if(De(Ae),C=n.memoizedState,C===null)return _t(n),null;if(p=(n.flags&128)!==0,D=C.rendering,D===null)if(p)wi(C,!1);else{if(Xe!==0||r!==null&&r.flags&128)for(r=n.child;r!==null;){if(D=vo(r),D!==null){for(n.flags|=128,wi(C,!1),p=D.updateQueue,p!==null&&(n.updateQueue=p,n.flags|=4),n.subtreeFlags=0,p=h,h=n.child;h!==null;)C=h,r=p,C.flags&=14680066,D=C.alternate,D===null?(C.childLanes=0,C.lanes=r,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=D.childLanes,C.lanes=D.lanes,C.child=D.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=D.memoizedProps,C.memoizedState=D.memoizedState,C.updateQueue=D.updateQueue,C.type=D.type,r=D.dependencies,C.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),h=h.sibling;return Oe(Ae,Ae.current&1|2),n.child}r=r.sibling}C.tail!==null&&He()>Ci&&(n.flags|=128,p=!0,wi(C,!1),n.lanes=4194304)}else{if(!p)if(r=vo(D),r!==null){if(n.flags|=128,p=!0,h=r.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),wi(C,!0),C.tail===null&&C.tailMode==="hidden"&&!D.alternate&&!Re)return _t(n),null}else 2*He()-C.renderingStartTime>Ci&&h!==1073741824&&(n.flags|=128,p=!0,wi(C,!1),n.lanes=4194304);C.isBackwards?(D.sibling=n.child,n.child=D):(h=C.last,h!==null?h.sibling=D:n.child=D,C.last=D)}return C.tail!==null?(n=C.tail,C.rendering=n,C.tail=n.sibling,C.renderingStartTime=He(),n.sibling=null,h=Ae.current,Oe(Ae,p?h&1|2:h&1),n):(_t(n),null);case 22:case 23:return tl(),p=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==p&&(n.flags|=8192),p&&n.mode&1?Mt&1073741824&&(_t(n),n.subtreeFlags&6&&(n.flags|=8192)):_t(n),null;case 24:return null;case 25:return null}throw Error($(156,n.tag))}function Qd(r,n){switch(Fs(n),n.tag){case 1:return Tt(n.type)&&lo(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return Ei(),De(bt),De(ht),Gs(),r=n.flags,r&65536&&!(r&128)?(n.flags=r&-65537|128,n):null;case 5:return Qs(n),null;case 13:if(De(Ae),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error($(340));Ti()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return De(Ae),null;case 4:return Ei(),null;case 10:return ks(n.type._context),null;case 22:case 23:return tl(),null;case 24:return null;default:return null}}var Vn=!1,ct=!1,Gd=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ui(r,n){var h=r.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){ze(r,n,p)}else h.current=null}function os(r,n,h){try{h()}catch(p){ze(r,n,p)}}var l_=!1;function Hd(r,n){if(Ua=no,r=gu(),As(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var T=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var D=0,B=-1,E=-1,d=0,c=0,l=r,g=null;t:for(;;){for(var b;l!==h||T!==0&&l.nodeType!==3||(B=D+T),l!==C||p!==0&&l.nodeType!==3||(E=D+p),l.nodeType===3&&(D+=l.nodeValue.length),(b=l.firstChild)!==null;)g=l,l=b;for(;;){if(l===r)break t;if(g===h&&++d===T&&(B=D),g===C&&++c===p&&(E=D),(b=l.nextSibling)!==null)break;l=g,g=l.parentNode}l=b}h=B===-1||E===-1?null:{start:B,end:E}}else h=null}h=h||{start:0,end:0}}else h=null;for(Qa={focusedElem:r,selectionRange:h},no=!1,ne=n;ne!==null;)if(n=ne,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,ne=r;else for(;ne!==null;){n=ne;try{var v=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,o=v.memoizedState,t=n.stateNode,e=t.getSnapshotBeforeUpdate(n.elementType===n.type?_:kt(n.type,_),o);t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:var i=n.stateNode.containerInfo;i.nodeType===1?i.textContent="":i.nodeType===9&&i.documentElement&&i.removeChild(i.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(a){ze(n,n.return,a)}if(r=n.sibling,r!==null){r.return=n.return,ne=r;break}ne=n.return}return v=l_,l_=!1,v}function Yi(r,n,h){var p=n.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var T=p=p.next;do{if((T.tag&r)===r){var C=T.destroy;T.destroy=void 0,C!==void 0&&os(n,h,C)}T=T.next}while(T!==p)}}function Ao(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var h=n=n.next;do{if((h.tag&r)===r){var p=h.create;h.destroy=p()}h=h.next}while(h!==n)}}function as(r){var n=r.ref;if(n!==null){var h=r.stateNode;switch(r.tag){case 5:r=h;break;default:r=h}typeof n=="function"?n(r):n.current=r}}function pc(r){var n=r.alternate;n!==null&&(r.alternate=null,pc(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[Yt],delete n[ln],delete n[ja],delete n[Bd],delete n[Id])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function vc(r){return r.tag===5||r.tag===3||r.tag===4}function __(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vc(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ss(r,n,h){var p=r.tag;if(p===5||p===6)r=r.stateNode,n?h.nodeType===8?h.parentNode.insertBefore(r,n):h.insertBefore(r,n):(h.nodeType===8?(n=h.parentNode,n.insertBefore(r,h)):(n=h,n.appendChild(r)),h=h._reactRootContainer,h!=null||n.onclick!==null||(n.onclick=so));else if(p!==4&&(r=r.child,r!==null))for(ss(r,n,h),r=r.sibling;r!==null;)ss(r,n,h),r=r.sibling}function ls(r,n,h){var p=r.tag;if(p===5||p===6)r=r.stateNode,n?h.insertBefore(r,n):h.appendChild(r);else if(p!==4&&(r=r.child,r!==null))for(ls(r,n,h),r=r.sibling;r!==null;)ls(r,n,h),r=r.sibling}var nt=null,zt=!1;function ur(r,n,h){for(h=h.child;h!==null;)mc(r,n,h),h=h.sibling}function mc(r,n,h){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Co,h)}catch{}switch(h.tag){case 5:ct||ui(h,n);case 6:var p=nt,T=zt;nt=null,ur(r,n,h),nt=p,zt=T,nt!==null&&(zt?(r=nt,h=h.stateNode,r.nodeType===8?r.parentNode.removeChild(h):r.removeChild(h)):nt.removeChild(h.stateNode));break;case 18:nt!==null&&(zt?(r=nt,h=h.stateNode,r.nodeType===8?ua(r.parentNode,h):r.nodeType===1&&ua(r,h),rn(r)):ua(nt,h.stateNode));break;case 4:p=nt,T=zt,nt=h.stateNode.containerInfo,zt=!0,ur(r,n,h),nt=p,zt=T;break;case 0:case 11:case 14:case 15:if(!ct&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){T=p=p.next;do{var C=T,D=C.destroy;C=C.tag,D!==void 0&&(C&2||C&4)&&os(h,n,D),T=T.next}while(T!==p)}ur(r,n,h);break;case 1:if(!ct&&(ui(h,n),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(B){ze(h,n,B)}ur(r,n,h);break;case 21:ur(r,n,h);break;case 22:h.mode&1?(ct=(p=ct)||h.memoizedState!==null,ur(r,n,h),ct=p):ur(r,n,h);break;default:ur(r,n,h)}}function u_(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var h=r.stateNode;h===null&&(h=r.stateNode=new Gd),n.forEach(function(p){var T=ef.bind(null,r,p);h.has(p)||(h.add(p),p.then(T,T))})}}function Vt(r,n){var h=n.deletions;if(h!==null)for(var p=0;p<h.length;p++){var T=h[p];try{var C=r,D=n,B=D;e:for(;B!==null;){switch(B.tag){case 5:nt=B.stateNode,zt=!1;break e;case 3:nt=B.stateNode.containerInfo,zt=!0;break e;case 4:nt=B.stateNode.containerInfo,zt=!0;break e}B=B.return}if(nt===null)throw Error($(160));mc(C,D,T),nt=null,zt=!1;var E=T.alternate;E!==null&&(E.return=null),T.return=null}catch(d){ze(T,n,d)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)gc(n,r),n=n.sibling}function gc(r,n){var h=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Vt(n,r),jt(r),p&4){try{Yi(3,r,r.return),Ao(3,r)}catch(_){ze(r,r.return,_)}try{Yi(5,r,r.return)}catch(_){ze(r,r.return,_)}}break;case 1:Vt(n,r),jt(r),p&512&&h!==null&&ui(h,h.return);break;case 5:if(Vt(n,r),jt(r),p&512&&h!==null&&ui(h,h.return),r.flags&32){var T=r.stateNode;try{Ji(T,"")}catch(_){ze(r,r.return,_)}}if(p&4&&(T=r.stateNode,T!=null)){var C=r.memoizedProps,D=h!==null?h.memoizedProps:C,B=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{B==="input"&&C.type==="radio"&&C.name!=null&&k_(T,C),Ra(B,D);var d=Ra(B,C);for(D=0;D<E.length;D+=2){var c=E[D],l=E[D+1];c==="style"?G_(T,l):c==="dangerouslySetInnerHTML"?U_(T,l):c==="children"?Ji(T,l):bs(T,c,l,d)}switch(B){case"input":Ba(T,C);break;case"textarea":z_(T,C);break;case"select":var g=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!C.multiple;var b=C.value;b!=null?di(T,!!C.multiple,b,!1):g!==!!C.multiple&&(C.defaultValue!=null?di(T,!!C.multiple,C.defaultValue,!0):di(T,!!C.multiple,C.multiple?[]:"",!1))}T[ln]=C}catch(_){ze(r,r.return,_)}}break;case 6:if(Vt(n,r),jt(r),p&4){if(r.stateNode===null)throw Error($(162));T=r.stateNode,C=r.memoizedProps;try{T.nodeValue=C}catch(_){ze(r,r.return,_)}}break;case 3:if(Vt(n,r),jt(r),p&4&&h!==null&&h.memoizedState.isDehydrated)try{rn(n.containerInfo)}catch(_){ze(r,r.return,_)}break;case 4:Vt(n,r),jt(r);break;case 13:Vt(n,r),jt(r),T=r.child,T.flags&8192&&(C=T.memoizedState!==null,T.stateNode.isHidden=C,!C||T.alternate!==null&&T.alternate.memoizedState!==null||(qs=He())),p&4&&u_(r);break;case 22:if(c=h!==null&&h.memoizedState!==null,r.mode&1?(ct=(d=ct)||c,Vt(n,r),ct=d):Vt(n,r),jt(r),p&8192){if(d=r.memoizedState!==null,(r.stateNode.isHidden=d)&&!c&&r.mode&1)for(ne=r,c=r.child;c!==null;){for(l=ne=c;ne!==null;){switch(g=ne,b=g.child,g.tag){case 0:case 11:case 14:case 15:Yi(4,g,g.return);break;case 1:ui(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){p=g,h=g.return;try{n=p,v.props=n.memoizedProps,v.state=n.memoizedState,v.componentWillUnmount()}catch(_){ze(p,h,_)}}break;case 5:ui(g,g.return);break;case 22:if(g.memoizedState!==null){h_(l);continue}}b!==null?(b.return=g,ne=b):h_(l)}c=c.sibling}e:for(c=null,l=r;;){if(l.tag===5){if(c===null){c=l;try{T=l.stateNode,d?(C=T.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(B=l.stateNode,E=l.memoizedProps.style,D=E!=null&&E.hasOwnProperty("display")?E.display:null,B.style.display=Q_("display",D))}catch(_){ze(r,r.return,_)}}}else if(l.tag===6){if(c===null)try{l.stateNode.nodeValue=d?"":l.memoizedProps}catch(_){ze(r,r.return,_)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:Vt(n,r),jt(r),p&4&&u_(r);break;case 21:break;default:Vt(n,r),jt(r)}}function jt(r){var n=r.flags;if(n&2){try{e:{for(var h=r.return;h!==null;){if(vc(h)){var p=h;break e}h=h.return}throw Error($(160))}switch(p.tag){case 5:var T=p.stateNode;p.flags&32&&(Ji(T,""),p.flags&=-33);var C=__(r);ls(r,C,T);break;case 3:case 4:var D=p.stateNode.containerInfo,B=__(r);ss(r,B,D);break;default:throw Error($(161))}}catch(E){ze(r,r.return,E)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function jd(r,n,h){ne=r,yc(r)}function yc(r,n,h){for(var p=(r.mode&1)!==0;ne!==null;){var T=ne,C=T.child;if(T.tag===22&&p){var D=T.memoizedState!==null||Vn;if(!D){var B=T.alternate,E=B!==null&&B.memoizedState!==null||ct;B=Vn;var d=ct;if(Vn=D,(ct=E)&&!d)for(ne=T;ne!==null;)D=ne,E=D.child,D.tag===22&&D.memoizedState!==null?d_(T):E!==null?(E.return=D,ne=E):d_(T);for(;C!==null;)ne=C,yc(C),C=C.sibling;ne=T,Vn=B,ct=d}c_(r)}else T.subtreeFlags&8772&&C!==null?(C.return=T,ne=C):c_(r)}}function c_(r){for(;ne!==null;){var n=ne;if(n.flags&8772){var h=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:ct||Ao(5,n);break;case 1:var p=n.stateNode;if(n.flags&4&&!ct)if(h===null)p.componentDidMount();else{var T=n.elementType===n.type?h.memoizedProps:kt(n.type,h.memoizedProps);p.componentDidUpdate(T,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var C=n.updateQueue;C!==null&&Yl(n,C,p);break;case 3:var D=n.updateQueue;if(D!==null){if(h=null,n.child!==null)switch(n.child.tag){case 5:h=n.child.stateNode;break;case 1:h=n.child.stateNode}Yl(n,D,h)}break;case 5:var B=n.stateNode;if(h===null&&n.flags&4){h=B;var E=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&h.focus();break;case"img":E.src&&(h.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var d=n.alternate;if(d!==null){var c=d.memoizedState;if(c!==null){var l=c.dehydrated;l!==null&&rn(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ct||n.flags&512&&as(n)}catch(g){ze(n,n.return,g)}}if(n===r){ne=null;break}if(h=n.sibling,h!==null){h.return=n.return,ne=h;break}ne=n.return}}function h_(r){for(;ne!==null;){var n=ne;if(n===r){ne=null;break}var h=n.sibling;if(h!==null){h.return=n.return,ne=h;break}ne=n.return}}function d_(r){for(;ne!==null;){var n=ne;try{switch(n.tag){case 0:case 11:case 15:var h=n.return;try{Ao(4,n)}catch(E){ze(n,h,E)}break;case 1:var p=n.stateNode;if(typeof p.componentDidMount=="function"){var T=n.return;try{p.componentDidMount()}catch(E){ze(n,T,E)}}var C=n.return;try{as(n)}catch(E){ze(n,C,E)}break;case 5:var D=n.return;try{as(n)}catch(E){ze(n,D,E)}}}catch(E){ze(n,n.return,E)}if(n===r){ne=null;break}var B=n.sibling;if(B!==null){B.return=n.return,ne=B;break}ne=n.return}}var Kd=Math.ceil,yo=sr.ReactCurrentDispatcher,$s=sr.ReactCurrentOwner,Lt=sr.ReactCurrentBatchConfig,Te=0,Je=null,Ke=null,ot=0,Mt=0,ci=Ir(0),Xe=0,fn=null,Qr=0,Lo=0,Js=0,Xi=null,gt=null,qs=0,Ci=1/0,$t=null,bo=!1,_s=null,Pr=null,kn=!1,vr=null,To=0,Zi=0,us=null,Zn=-1,$n=0;function ft(){return Te&6?He():Zn!==-1?Zn:Zn=He()}function Er(r){return r.mode&1?Te&2&&ot!==0?ot&-ot:Sd.transition!==null?($n===0&&($n=ru()),$n):(r=Ce,r!==0||(r=window.event,r=r===void 0?16:_u(r.type)),r):1}function Qt(r,n,h,p){if(50<Zi)throw Zi=0,us=null,Error($(185));vn(r,h,p),(!(Te&2)||r!==Je)&&(r===Je&&(!(Te&2)&&(Lo|=h),Xe===4&&fr(r,ot)),Pt(r,p),h===1&&Te===0&&!(n.mode&1)&&(Ci=He()+500,So&&xr()))}function Pt(r,n){var h=r.callbackNode;Sh(r,n);var p=io(r,r===Je?ot:0);if(p===0)h!==null&&Pl(h),r.callbackNode=null,r.callbackPriority=0;else if(n=p&-p,r.callbackPriority!==n){if(h!=null&&Pl(h),n===1)r.tag===0?xd(f_.bind(null,r)):Iu(f_.bind(null,r)),Cd(function(){!(Te&6)&&xr()}),h=null;else{switch(iu(p)){case 1:h=Cs;break;case 4:h=eu;break;case 16:h=ro;break;case 536870912:h=tu;break;default:h=ro}h=Bc(h,bc.bind(null,r))}r.callbackPriority=n,r.callbackNode=h}}function bc(r,n){if(Zn=-1,$n=0,Te&6)throw Error($(327));var h=r.callbackNode;if(gi()&&r.callbackNode!==h)return null;var p=io(r,r===Je?ot:0);if(p===0)return null;if(p&30||p&r.expiredLanes||n)n=Po(r,p);else{n=p;var T=Te;Te|=2;var C=Pc();(Je!==r||ot!==n)&&($t=null,Ci=He()+500,Vr(r,n));do try{Zd();break}catch(B){Tc(r,B)}while(1);Vs(),yo.current=C,Te=T,Ke!==null?n=0:(Je=null,ot=0,n=Xe)}if(n!==0){if(n===2&&(T=Na(r),T!==0&&(p=T,n=cs(r,T))),n===1)throw h=fn,Vr(r,0),fr(r,p),Pt(r,He()),h;if(n===6)fr(r,p);else{if(T=r.current.alternate,!(p&30)&&!Yd(T)&&(n=Po(r,p),n===2&&(C=Na(r),C!==0&&(p=C,n=cs(r,C))),n===1))throw h=fn,Vr(r,0),fr(r,p),Pt(r,He()),h;switch(r.finishedWork=T,r.finishedLanes=p,n){case 0:case 1:throw Error($(345));case 2:Ar(r,gt,$t);break;case 3:if(fr(r,p),(p&130023424)===p&&(n=qs+500-He(),10<n)){if(io(r,0)!==0)break;if(T=r.suspendedLanes,(T&p)!==p){ft(),r.pingedLanes|=r.suspendedLanes&T;break}r.timeoutHandle=Ha(Ar.bind(null,r,gt,$t),n);break}Ar(r,gt,$t);break;case 4:if(fr(r,p),(p&4194240)===p)break;for(n=r.eventTimes,T=-1;0<p;){var D=31-Ut(p);C=1<<D,D=n[D],D>T&&(T=D),p&=~C}if(p=T,p=He()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Kd(p/1960))-p,10<p){r.timeoutHandle=Ha(Ar.bind(null,r,gt,$t),p);break}Ar(r,gt,$t);break;case 5:Ar(r,gt,$t);break;default:throw Error($(329))}}}return Pt(r,He()),r.callbackNode===h?bc.bind(null,r):null}function cs(r,n){var h=Xi;return r.current.memoizedState.isDehydrated&&(Vr(r,n).flags|=256),r=Po(r,n),r!==2&&(n=gt,gt=h,n!==null&&hs(n)),r}function hs(r){gt===null?gt=r:gt.push.apply(gt,r)}function Yd(r){for(var n=r;;){if(n.flags&16384){var h=n.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var T=h[p],C=T.getSnapshot;T=T.value;try{if(!Gt(C(),T))return!1}catch{return!1}}}if(h=n.child,n.subtreeFlags&16384&&h!==null)h.return=n,n=h;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fr(r,n){for(n&=~Js,n&=~Lo,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var h=31-Ut(n),p=1<<h;r[h]=-1,n&=~p}}function f_(r){if(Te&6)throw Error($(327));gi();var n=io(r,0);if(!(n&1))return Pt(r,He()),null;var h=Po(r,n);if(r.tag!==0&&h===2){var p=Na(r);p!==0&&(n=p,h=cs(r,p))}if(h===1)throw h=fn,Vr(r,0),fr(r,n),Pt(r,He()),h;if(h===6)throw Error($(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,Ar(r,gt,$t),Pt(r,He()),null}function el(r,n){var h=Te;Te|=1;try{return r(n)}finally{Te=h,Te===0&&(Ci=He()+500,So&&xr())}}function Gr(r){vr!==null&&vr.tag===0&&!(Te&6)&&gi();var n=Te;Te|=1;var h=Lt.transition,p=Ce;try{if(Lt.transition=null,Ce=1,r)return r()}finally{Ce=p,Lt.transition=h,Te=n,!(Te&6)&&xr()}}function tl(){Mt=ci.current,De(ci)}function Vr(r,n){r.finishedWork=null,r.finishedLanes=0;var h=r.timeoutHandle;if(h!==-1&&(r.timeoutHandle=-1,Md(h)),Ke!==null)for(h=Ke.return;h!==null;){var p=h;switch(Fs(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&lo();break;case 3:Ei(),De(bt),De(ht),Gs();break;case 5:Qs(p);break;case 4:Ei();break;case 13:De(Ae);break;case 19:De(Ae);break;case 10:ks(p.type._context);break;case 22:case 23:tl()}h=h.return}if(Je=r,Ke=r=Mr(r.current,null),ot=Mt=n,Xe=0,fn=null,Js=Lo=Qr=0,gt=Xi=null,wr!==null){for(n=0;n<wr.length;n++)if(h=wr[n],p=h.interleaved,p!==null){h.interleaved=null;var T=p.next,C=h.pending;if(C!==null){var D=C.next;C.next=T,p.next=D}h.pending=p}wr=null}return r}function Tc(r,n){do{var h=Ke;try{if(Vs(),Kn.current=go,mo){for(var p=Le.memoizedState;p!==null;){var T=p.queue;T!==null&&(T.pending=null),p=p.next}mo=!1}if(Ur=0,$e=Ye=Le=null,Ki=!1,cn=0,$s.current=null,h===null||h.return===null){Xe=1,fn=n,Ke=null;break}e:{var C=r,D=h.return,B=h,E=n;if(n=ot,B.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var d=E,c=B,l=c.tag;if(!(c.mode&1)&&(l===0||l===11||l===15)){var g=c.alternate;g?(c.updateQueue=g.updateQueue,c.memoizedState=g.memoizedState,c.lanes=g.lanes):(c.updateQueue=null,c.memoizedState=null)}var b=t_(D);if(b!==null){b.flags&=-257,r_(b,D,B,C,n),b.mode&1&&e_(C,d,n),n=b,E=d;var v=n.updateQueue;if(v===null){var _=new Set;_.add(E),n.updateQueue=_}else v.add(E);break e}else{if(!(n&1)){e_(C,d,n),rl();break e}E=Error($(426))}}else if(Re&&B.mode&1){var o=t_(D);if(o!==null){!(o.flags&65536)&&(o.flags|=256),r_(o,D,B,C,n),ws(Mi(E,B));break e}}C=E=Mi(E,B),Xe!==4&&(Xe=2),Xi===null?Xi=[C]:Xi.push(C),C=D;do{switch(C.tag){case 3:C.flags|=65536,n&=-n,C.lanes|=n;var t=nc(C,E,n);Kl(C,t);break e;case 1:B=E;var e=C.type,i=C.stateNode;if(!(C.flags&128)&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Pr===null||!Pr.has(i)))){C.flags|=65536,n&=-n,C.lanes|=n;var a=oc(C,B,n);Kl(C,a);break e}}C=C.return}while(C!==null)}Mc(h)}catch(s){n=s,Ke===h&&h!==null&&(Ke=h=h.return);continue}break}while(1)}function Pc(){var r=yo.current;return yo.current=go,r===null?go:r}function rl(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),Je===null||!(Qr&268435455)&&!(Lo&268435455)||fr(Je,ot)}function Po(r,n){var h=Te;Te|=2;var p=Pc();(Je!==r||ot!==n)&&($t=null,Vr(r,n));do try{Xd();break}catch(T){Tc(r,T)}while(1);if(Vs(),Te=h,yo.current=p,Ke!==null)throw Error($(261));return Je=null,ot=0,Xe}function Xd(){for(;Ke!==null;)Ec(Ke)}function Zd(){for(;Ke!==null&&!Th();)Ec(Ke)}function Ec(r){var n=Oc(r.alternate,r,Mt);r.memoizedProps=r.pendingProps,n===null?Mc(r):Ke=n,$s.current=null}function Mc(r){var n=r;do{var h=n.alternate;if(r=n.return,n.flags&32768){if(h=Qd(h,n),h!==null){h.flags&=32767,Ke=h;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Xe=6,Ke=null;return}}else if(h=Ud(h,n,Mt),h!==null){Ke=h;return}if(n=n.sibling,n!==null){Ke=n;return}Ke=n=r}while(n!==null);Xe===0&&(Xe=5)}function Ar(r,n,h){var p=Ce,T=Lt.transition;try{Lt.transition=null,Ce=1,$d(r,n,h,p)}finally{Lt.transition=T,Ce=p}return null}function $d(r,n,h,p){do gi();while(vr!==null);if(Te&6)throw Error($(327));h=r.finishedWork;var T=r.finishedLanes;if(h===null)return null;if(r.finishedWork=null,r.finishedLanes=0,h===r.current)throw Error($(177));r.callbackNode=null,r.callbackPriority=0;var C=h.lanes|h.childLanes;if(Dh(r,C),r===Je&&(Ke=Je=null,ot=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||kn||(kn=!0,Bc(ro,function(){return gi(),null})),C=(h.flags&15990)!==0,h.subtreeFlags&15990||C){C=Lt.transition,Lt.transition=null;var D=Ce;Ce=1;var B=Te;Te|=4,$s.current=null,Hd(r,h),gc(h,r),md(Qa),no=!!Ua,Qa=Ua=null,r.current=h,jd(h),Ph(),Te=B,Ce=D,Lt.transition=C}else r.current=h;if(kn&&(kn=!1,vr=r,To=T),C=r.pendingLanes,C===0&&(Pr=null),Ch(h.stateNode),Pt(r,He()),n!==null)for(p=r.onRecoverableError,h=0;h<n.length;h++)T=n[h],p(T.value,{componentStack:T.stack,digest:T.digest});if(bo)throw bo=!1,r=_s,_s=null,r;return To&1&&r.tag!==0&&gi(),C=r.pendingLanes,C&1?r===us?Zi++:(Zi=0,us=r):Zi=0,xr(),null}function gi(){if(vr!==null){var r=iu(To),n=Lt.transition,h=Ce;try{if(Lt.transition=null,Ce=16>r?16:r,vr===null)var p=!1;else{if(r=vr,vr=null,To=0,Te&6)throw Error($(331));var T=Te;for(Te|=4,ne=r.current;ne!==null;){var C=ne,D=C.child;if(ne.flags&16){var B=C.deletions;if(B!==null){for(var E=0;E<B.length;E++){var d=B[E];for(ne=d;ne!==null;){var c=ne;switch(c.tag){case 0:case 11:case 15:Yi(8,c,C)}var l=c.child;if(l!==null)l.return=c,ne=l;else for(;ne!==null;){c=ne;var g=c.sibling,b=c.return;if(pc(c),c===d){ne=null;break}if(g!==null){g.return=b,ne=g;break}ne=b}}}var v=C.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var o=_.sibling;_.sibling=null,_=o}while(_!==null)}}ne=C}}if(C.subtreeFlags&2064&&D!==null)D.return=C,ne=D;else e:for(;ne!==null;){if(C=ne,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Yi(9,C,C.return)}var t=C.sibling;if(t!==null){t.return=C.return,ne=t;break e}ne=C.return}}var e=r.current;for(ne=e;ne!==null;){D=ne;var i=D.child;if(D.subtreeFlags&2064&&i!==null)i.return=D,ne=i;else e:for(D=e;ne!==null;){if(B=ne,B.flags&2048)try{switch(B.tag){case 0:case 11:case 15:Ao(9,B)}}catch(s){ze(B,B.return,s)}if(B===D){ne=null;break e}var a=B.sibling;if(a!==null){a.return=B.return,ne=a;break e}ne=B.return}}if(Te=T,xr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Co,r)}catch{}p=!0}return p}finally{Ce=h,Lt.transition=n}}return!1}function p_(r,n,h){n=Mi(h,n),n=nc(r,n,1),r=Tr(r,n,1),n=ft(),r!==null&&(vn(r,1,n),Pt(r,n))}function ze(r,n,h){if(r.tag===3)p_(r,r,h);else for(;n!==null;){if(n.tag===3){p_(n,r,h);break}else if(n.tag===1){var p=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Pr===null||!Pr.has(p))){r=Mi(h,r),r=oc(n,r,1),n=Tr(n,r,1),r=ft(),n!==null&&(vn(n,1,r),Pt(n,r));break}}n=n.return}}function Jd(r,n,h){var p=r.pingCache;p!==null&&p.delete(n),n=ft(),r.pingedLanes|=r.suspendedLanes&h,Je===r&&(ot&h)===h&&(Xe===4||Xe===3&&(ot&130023424)===ot&&500>He()-qs?Vr(r,0):Js|=h),Pt(r,n)}function Cc(r,n){n===0&&(r.mode&1?(n=xn,xn<<=1,!(xn&130023424)&&(xn=4194304)):n=1);var h=ft();r=or(r,n),r!==null&&(vn(r,n,h),Pt(r,h))}function qd(r){var n=r.memoizedState,h=0;n!==null&&(h=n.retryLane),Cc(r,h)}function ef(r,n){var h=0;switch(r.tag){case 13:var p=r.stateNode,T=r.memoizedState;T!==null&&(h=T.retryLane);break;case 19:p=r.stateNode;break;default:throw Error($(314))}p!==null&&p.delete(n),Cc(r,h)}var Oc;Oc=function(r,n,h){if(r!==null)if(r.memoizedProps!==n.pendingProps||bt.current)yt=!0;else{if(!(r.lanes&h)&&!(n.flags&128))return yt=!1,Wd(r,n,h);yt=!!(r.flags&131072)}else yt=!1,Re&&n.flags&1048576&&xu(n,co,n.index);switch(n.lanes=0,n.tag){case 2:var p=n.type;Xn(r,n),r=n.pendingProps;var T=bi(n,ht.current);mi(n,h),T=js(null,n,p,r,T,h);var C=Ks();return n.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Tt(p)?(C=!0,_o(n)):C=!1,n.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Ws(n),T.updater=Do,n.stateNode=T,T._reactInternals=n,Ja(n,p,r,h),n=ts(null,n,p,!0,C,h)):(n.tag=0,Re&&C&&Ls(n),dt(null,n,T,h),n=n.child),n;case 16:p=n.elementType;e:{switch(Xn(r,n),r=n.pendingProps,T=p._init,p=T(p._payload),n.type=p,T=n.tag=rf(p),r=kt(p,r),T){case 0:n=es(null,n,p,r,h);break e;case 1:n=o_(null,n,p,r,h);break e;case 11:n=i_(null,n,p,r,h);break e;case 14:n=n_(null,n,p,kt(p.type,r),h);break e}throw Error($(306,p,""))}return n;case 0:return p=n.type,T=n.pendingProps,T=n.elementType===p?T:kt(p,T),es(r,n,p,T,h);case 1:return p=n.type,T=n.pendingProps,T=n.elementType===p?T:kt(p,T),o_(r,n,p,T,h);case 3:e:{if(_c(n),r===null)throw Error($(387));p=n.pendingProps,C=n.memoizedState,T=C.element,Au(r,n),po(n,p,null,h);var D=n.memoizedState;if(p=D.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},n.updateQueue.baseState=C,n.memoizedState=C,n.flags&256){T=Mi(Error($(423)),n),n=a_(r,n,p,h,T);break e}else if(p!==T){T=Mi(Error($(424)),n),n=a_(r,n,p,h,T);break e}else for(Ct=br(n.stateNode.containerInfo.firstChild),Ot=n,Re=!0,Wt=null,h=Nu(n,null,p,h),n.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ti(),p===T){n=ar(r,n,h);break e}dt(r,n,p,h)}n=n.child}return n;case 5:return Vu(n),r===null&&Xa(n),p=n.type,T=n.pendingProps,C=r!==null?r.memoizedProps:null,D=T.children,Ga(p,T)?D=null:C!==null&&Ga(p,C)&&(n.flags|=32),lc(r,n),dt(r,n,D,h),n.child;case 6:return r===null&&Xa(n),null;case 13:return uc(r,n,h);case 4:return Us(n,n.stateNode.containerInfo),p=n.pendingProps,r===null?n.child=Pi(n,null,p,h):dt(r,n,p,h),n.child;case 11:return p=n.type,T=n.pendingProps,T=n.elementType===p?T:kt(p,T),i_(r,n,p,T,h);case 7:return dt(r,n,n.pendingProps,h),n.child;case 8:return dt(r,n,n.pendingProps.children,h),n.child;case 12:return dt(r,n,n.pendingProps.children,h),n.child;case 10:e:{if(p=n.type._context,T=n.pendingProps,C=n.memoizedProps,D=T.value,Oe(ho,p._currentValue),p._currentValue=D,C!==null)if(Gt(C.value,D)){if(C.children===T.children&&!bt.current){n=ar(r,n,h);break e}}else for(C=n.child,C!==null&&(C.return=n);C!==null;){var B=C.dependencies;if(B!==null){D=C.child;for(var E=B.firstContext;E!==null;){if(E.context===p){if(C.tag===1){E=rr(-1,h&-h),E.tag=2;var d=C.updateQueue;if(d!==null){d=d.shared;var c=d.pending;c===null?E.next=E:(E.next=c.next,c.next=E),d.pending=E}}C.lanes|=h,E=C.alternate,E!==null&&(E.lanes|=h),Za(C.return,h,n),B.lanes|=h;break}E=E.next}}else if(C.tag===10)D=C.type===n.type?null:C.child;else if(C.tag===18){if(D=C.return,D===null)throw Error($(341));D.lanes|=h,B=D.alternate,B!==null&&(B.lanes|=h),Za(D,h,n),D=C.sibling}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===n){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}dt(r,n,T.children,h),n=n.child}return n;case 9:return T=n.type,p=n.pendingProps.children,mi(n,h),T=Ft(T),p=p(T),n.flags|=1,dt(r,n,p,h),n.child;case 14:return p=n.type,T=kt(p,n.pendingProps),T=kt(p.type,T),n_(r,n,p,T,h);case 15:return ac(r,n,n.type,n.pendingProps,h);case 17:return p=n.type,T=n.pendingProps,T=n.elementType===p?T:kt(p,T),Xn(r,n),n.tag=1,Tt(p)?(r=!0,_o(n)):r=!1,mi(n,h),Fu(n,p,T),Ja(n,p,T,h),ts(null,n,p,!0,r,h);case 19:return cc(r,n,h);case 22:return sc(r,n,h)}throw Error($(156,n.tag))};function Bc(r,n){return q_(r,n)}function tf(r,n,h,p){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(r,n,h,p){return new tf(r,n,h,p)}function il(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rf(r){if(typeof r=="function")return il(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Ps)return 11;if(r===Es)return 14}return 2}function Mr(r,n){var h=r.alternate;return h===null?(h=At(r.tag,n,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=n,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&14680064,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,n=r.dependencies,h.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h}function Jn(r,n,h,p,T,C){var D=2;if(p=r,typeof r=="function")il(r)&&(D=1);else if(typeof r=="string")D=5;else e:switch(r){case ti:return kr(h.children,T,C,n);case Ts:D=8,T|=8;break;case Pa:return r=At(12,h,n,T|2),r.elementType=Pa,r.lanes=C,r;case Ea:return r=At(13,h,n,T),r.elementType=Ea,r.lanes=C,r;case Ma:return r=At(19,h,n,T),r.elementType=Ma,r.lanes=C,r;case w_:return Fo(h,T,C,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L_:D=10;break e;case F_:D=9;break e;case Ps:D=11;break e;case Es:D=14;break e;case cr:D=16,p=null;break e}throw Error($(130,r==null?r:typeof r,""))}return n=At(D,h,n,T),n.elementType=r,n.type=p,n.lanes=C,n}function kr(r,n,h,p){return r=At(7,r,p,n),r.lanes=h,r}function Fo(r,n,h,p){return r=At(22,r,p,n),r.elementType=w_,r.lanes=h,r.stateNode={isHidden:!1},r}function ga(r,n,h){return r=At(6,r,null,n),r.lanes=h,r}function ya(r,n,h){return n=At(4,r.children!==null?r.children:[],r.key,n),n.lanes=h,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function nf(r,n,h,p,T){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=p,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function nl(r,n,h,p,T,C,D,B,E){return r=new nf(r,n,h,B,E),n===1?(n=1,C===!0&&(n|=8)):n=0,C=At(3,null,null,n),r.current=C,C.stateNode=r,C.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ws(C),r}function of(r,n,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:p==null?null:""+p,children:r,containerInfo:n,implementation:h}}function Ic(r){if(!r)return Or;r=r._reactInternals;e:{if(jr(r)!==r||r.tag!==1)throw Error($(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Tt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error($(171))}if(r.tag===1){var h=r.type;if(Tt(h))return Bu(r,h,n)}return n}function xc(r,n,h,p,T,C,D,B,E){return r=nl(h,p,!0,r,T,C,D,B,E),r.context=Ic(null),h=r.current,p=ft(),T=Er(h),C=rr(p,T),C.callback=n??null,Tr(h,C,T),r.current.lanes=T,vn(r,T,p),Pt(r,p),r}function wo(r,n,h,p){var T=n.current,C=ft(),D=Er(T);return h=Ic(h),n.context===null?n.context=h:n.pendingContext=h,n=rr(C,D),n.payload={element:r},p=p===void 0?null:p,p!==null&&(n.callback=p),r=Tr(T,n,D),r!==null&&(Qt(r,T,D,C),jn(r,T,D)),D}function Eo(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function v_(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<n?h:n}}function ol(r,n){v_(r,n),(r=r.alternate)&&v_(r,n)}function af(){return null}var Sc=typeof reportError=="function"?reportError:function(r){console.error(r)};function al(r){this._internalRoot=r}No.prototype.render=al.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error($(409));wo(r,n,null,null)};No.prototype.unmount=al.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Gr(function(){wo(null,r,null,null)}),n[nr]=null}};function No(r){this._internalRoot=r}No.prototype.unstable_scheduleHydration=function(r){if(r){var n=au();r={blockedOn:null,target:r,priority:n};for(var h=0;h<dr.length&&n!==0&&n<dr[h].priority;h++);dr.splice(h,0,r),h===0&&lu(r)}};function sl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Vo(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function m_(){}function sf(r,n,h,p,T){if(T){if(typeof p=="function"){var C=p;p=function(){var d=Eo(D);C.call(d)}}var D=xc(n,p,r,0,null,!1,!1,"",m_);return r._reactRootContainer=D,r[nr]=D.current,an(r.nodeType===8?r.parentNode:r),Gr(),D}for(;T=r.lastChild;)r.removeChild(T);if(typeof p=="function"){var B=p;p=function(){var d=Eo(E);B.call(d)}}var E=nl(r,0,!1,null,null,!1,!1,"",m_);return r._reactRootContainer=E,r[nr]=E.current,an(r.nodeType===8?r.parentNode:r),Gr(function(){wo(n,E,h,p)}),E}function ko(r,n,h,p,T){var C=h._reactRootContainer;if(C){var D=C;if(typeof T=="function"){var B=T;T=function(){var E=Eo(D);B.call(E)}}wo(n,D,r,T)}else D=sf(h,n,r,T,p);return Eo(D)}nu=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var h=zi(n.pendingLanes);h!==0&&(Os(n,h|1),Pt(n,He()),!(Te&6)&&(Ci=He()+500,xr()))}break;case 13:Gr(function(){var p=or(r,1);if(p!==null){var T=ft();Qt(p,r,1,T)}}),ol(r,1)}};Bs=function(r){if(r.tag===13){var n=or(r,134217728);if(n!==null){var h=ft();Qt(n,r,134217728,h)}ol(r,134217728)}};ou=function(r){if(r.tag===13){var n=Er(r),h=or(r,n);if(h!==null){var p=ft();Qt(h,r,n,p)}ol(r,n)}};au=function(){return Ce};su=function(r,n){var h=Ce;try{return Ce=r,n()}finally{Ce=h}};La=function(r,n,h){switch(n){case"input":if(Ba(r,h),n=h.name,h.type==="radio"&&n!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<h.length;n++){var p=h[n];if(p!==r&&p.form===r.form){var T=xo(p);if(!T)throw Error($(90));V_(p),Ba(p,T)}}}break;case"textarea":z_(r,h);break;case"select":n=h.value,n!=null&&di(r,!!h.multiple,n,!1)}};K_=el;Y_=Gr;var lf={usingClientEntryPoint:!1,Events:[gn,oi,xo,H_,j_,el]},Ni={findFiberByHostInstance:Fr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_f={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=$_(r),r===null?null:r.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||af,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zn.isDisabled&&zn.supportsFiber)try{Co=zn.inject(_f),Xt=zn}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lf;It.createPortal=function(r,n){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sl(n))throw Error($(200));return of(r,n,null,h)};It.createRoot=function(r,n){if(!sl(r))throw Error($(299));var h=!1,p="",T=Sc;return n!=null&&(n.unstable_strictMode===!0&&(h=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=nl(r,1,!1,null,null,h,!1,p,T),r[nr]=n.current,an(r.nodeType===8?r.parentNode:r),new al(n)};It.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error($(188)):(r=Object.keys(r).join(","),Error($(268,r)));return r=$_(n),r=r===null?null:r.stateNode,r};It.flushSync=function(r){return Gr(r)};It.hydrate=function(r,n,h){if(!Vo(n))throw Error($(200));return ko(null,r,n,!0,h)};It.hydrateRoot=function(r,n,h){if(!sl(r))throw Error($(405));var p=h!=null&&h.hydratedSources||null,T=!1,C="",D=Sc;if(h!=null&&(h.unstable_strictMode===!0&&(T=!0),h.identifierPrefix!==void 0&&(C=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),n=xc(n,null,r,1,h??null,T,!1,C,D),r[nr]=n.current,an(r),p)for(r=0;r<p.length;r++)h=p[r],T=h._getVersion,T=T(h._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[h,T]:n.mutableSourceEagerHydrationData.push(h,T);return new No(n)};It.render=function(r,n,h){if(!Vo(n))throw Error($(200));return ko(null,r,n,!1,h)};It.unmountComponentAtNode=function(r){if(!Vo(r))throw Error($(40));return r._reactRootContainer?(Gr(function(){ko(null,null,r,!1,function(){r._reactRootContainer=null,r[nr]=null})}),!0):!1};It.unstable_batchedUpdates=el;It.unstable_renderSubtreeIntoContainer=function(r,n,h,p){if(!Vo(h))throw Error($(200));if(r==null||r._reactInternals===void 0)throw Error($(38));return ko(r,n,h,!1,p)};It.version="18.2.0-next-9e3b772b8-20220608";function Dc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dc)}catch(r){console.error(r)}}Dc(),x_.exports=It;var uf=x_.exports,g_=uf;ba.createRoot=g_.createRoot,ba.hydrateRoot=g_.hydrateRoot;var _e=ds(),Rc={exports:{}};(function(r,n){(function(p,T){r.exports=T(ds())})(typeof self<"u"?self:typeof hi<"u"?hi:hi,h=>(()=>{var p={"../../../dev/gui/src/2D/adtInstrumentation.ts":(B,E,d)=>{d.r(E),d.d(E,{AdvancedDynamicTextureInstrumentation:()=>l});var c=d("babylonjs/Misc/perfCounter"),l=function(){function g(b){this.texture=b,this._captureRenderTime=!1,this._renderTime=new c.PerfCounter,this._captureLayoutTime=!1,this._layoutTime=new c.PerfCounter,this._onBeginRenderObserver=null,this._onEndRenderObserver=null,this._onBeginLayoutObserver=null,this._onEndLayoutObserver=null}return Object.defineProperty(g.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"layoutTimeCounter",{get:function(){return this._layoutTime},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(b){var v=this;b!==this._captureRenderTime&&(this._captureRenderTime=b,b?(this._onBeginRenderObserver=this.texture.onBeginRenderObservable.add(function(){v._renderTime.beginMonitoring()}),this._onEndRenderObserver=this.texture.onEndRenderObservable.add(function(){v._renderTime.endMonitoring(!0)})):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"captureLayoutTime",{get:function(){return this._captureLayoutTime},set:function(b){var v=this;b!==this._captureLayoutTime&&(this._captureLayoutTime=b,b?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add(function(){v._layoutTime.beginMonitoring()}),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add(function(){v._layoutTime.endMonitoring(!0)})):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null))},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null,this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null,this.texture=null},g}()},"../../../dev/gui/src/2D/advancedDynamicTexture.ts":(B,E,d)=>{d.r(E),d.d(E,{AdvancedDynamicTexture:()=>o});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/container.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("../../../dev/gui/src/2D/style.ts"),_=d("../../../dev/gui/src/2D/measure.ts"),o=function(t){(0,c.__extends)(e,t);function e(i,a,s,u,f,m,P){a===void 0&&(a=0),s===void 0&&(s=0),f===void 0&&(f=!1),m===void 0&&(m=l.Texture.NEAREST_SAMPLINGMODE),P===void 0&&(P=!0);var y=t.call(this,i,{width:a,height:s},u,f,m,l.Constants.TEXTUREFORMAT_RGBA,P)||this;return y.onGuiReadyObservable=new l.Observable,y._isDirty=!1,y._rootContainer=new g.Container("root"),y._lastControlOver={},y._lastControlDown={},y._capturingControl={},y._linkedControls=new Array,y._isFullscreen=!1,y._fullscreenViewport=new l.Viewport(0,0,1,1),y._idealWidth=0,y._idealHeight=0,y._useSmallestIdeal=!1,y._renderAtIdealSize=!1,y._blockNextFocusCheck=!1,y._renderScale=1,y._cursorChanged=!1,y._defaultMousePointerId=0,y._rootChildrenHaveChanged=!1,y._capturedPointerIds=new Set,y._numLayoutCalls=0,y._numRenderCalls=0,y._clipboardData="",y.onClipboardObservable=new l.Observable,y.onControlPickedObservable=new l.Observable,y.onBeginLayoutObservable=new l.Observable,y.onEndLayoutObservable=new l.Observable,y.onBeginRenderObservable=new l.Observable,y.onEndRenderObservable=new l.Observable,y.premulAlpha=!1,y.applyYInversionOnUpdate=!0,y.checkPointerEveryFrame=!1,y._useInvalidateRectOptimization=!0,y._invalidatedRectangle=null,y._clearMeasure=new _.Measure(0,0,0,0),y._onClipboardCopy=function(M){var O=M,x=new l.ClipboardInfo(l.ClipboardEventTypes.COPY,O);y.onClipboardObservable.notifyObservers(x),O.preventDefault()},y._onClipboardCut=function(M){var O=M,x=new l.ClipboardInfo(l.ClipboardEventTypes.CUT,O);y.onClipboardObservable.notifyObservers(x),O.preventDefault()},y._onClipboardPaste=function(M){var O=M,x=new l.ClipboardInfo(l.ClipboardEventTypes.PASTE,O);y.onClipboardObservable.notifyObservers(x),O.preventDefault()},y.parseContent=y.parseSerializedObject,u=y.getScene(),!u||!y._texture||(y.applyYInversionOnUpdate=P,y._rootElement=u.getEngine().getInputElement(),y._renderObserver=u.onBeforeCameraRenderObservable.add(function(M){return y._checkUpdate(M)}),y._controlAddedObserver=y._rootContainer.onControlAddedObservable.add(function(M){M&&(y._rootChildrenHaveChanged=!0)}),y._controlRemovedObserver=y._rootContainer.onControlRemovedObservable.add(function(M){M&&(y._rootChildrenHaveChanged=!0)}),y._preKeyboardObserver=u.onPreKeyboardObservable.add(function(M){y._focusedControl&&(M.type===l.KeyboardEventTypes.KEYDOWN&&y._focusedControl.processKeyboard(M.event),M.skipOnPointerObservable=!0)}),y._rootContainer._link(y),y.hasAlpha=!0,(!a||!s)&&(y._resizeObserver=u.getEngine().onResizeObservable.add(function(){return y._onResize()}),y._onResize()),y._texture.isReady=!0),y}return Object.defineProperty(e.prototype,"numLayoutCalls",{get:function(){return this._numLayoutCalls},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRenderCalls",{get:function(){return this._numRenderCalls},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderScale",{get:function(){return this._renderScale},set:function(i){i!==this._renderScale&&(this._renderScale=i,this._onResize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(i){this._background!==i&&(this._background=i,this.markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idealWidth",{get:function(){return this._idealWidth},set:function(i){this._idealWidth!==i&&(this._idealWidth=i,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idealHeight",{get:function(){return this._idealHeight},set:function(i){this._idealHeight!==i&&(this._idealHeight=i,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useSmallestIdeal",{get:function(){return this._useSmallestIdeal},set:function(i){this._useSmallestIdeal!==i&&(this._useSmallestIdeal=i,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderAtIdealSize",{get:function(){return this._renderAtIdealSize},set:function(i){this._renderAtIdealSize!==i&&(this._renderAtIdealSize=i,this._onResize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idealRatio",{get:function(){var i=0,a=0;return this._idealWidth&&(i=this.getSize().width/this._idealWidth),this._idealHeight&&(a=this.getSize().height/this._idealHeight),this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?i:a:this._idealWidth?i:this._idealHeight?a:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layerToDispose},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!1,configurable:!0}),e.prototype.getChildren=function(){return[this._rootContainer]},e.prototype.getDescendants=function(i,a){return this._rootContainer.getDescendants(i,a)},e.prototype.getControlsByType=function(i){return this._rootContainer.getDescendants(!1,function(a){return a.typeName===i})},e.prototype.getControlByName=function(i){return this._getControlByKey("name",i)},e.prototype._getControlByKey=function(i,a){return this._rootContainer.getDescendants().find(function(s){return s[i]===a})||null},Object.defineProperty(e.prototype,"focusedControl",{get:function(){return this._focusedControl},set:function(i){this._focusedControl!=i&&(this._focusedControl&&this._focusedControl.onBlur(),i&&i.onFocus(),this._focusedControl=i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isForeground",{get:function(){return this.layer?!this.layer.isBackground:!0},set:function(i){this.layer&&this.layer.isBackground!==!i&&(this.layer.isBackground=!i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clipboardData",{get:function(){return this._clipboardData},set:function(i){this._clipboardData=i},enumerable:!1,configurable:!0}),e.prototype.getClassName=function(){return"AdvancedDynamicTexture"},e.prototype.executeOnAllControls=function(i,a){a||(a=this._rootContainer),i(a);for(var s=0,u=a.children;s<u.length;s++){var f=u[s];if(f.children){this.executeOnAllControls(i,f);continue}i(f)}},Object.defineProperty(e.prototype,"useInvalidateRectOptimization",{get:function(){return this._useInvalidateRectOptimization},set:function(i){this._useInvalidateRectOptimization=i},enumerable:!1,configurable:!0}),e.prototype.invalidateRect=function(i,a,s,u){if(this._useInvalidateRectOptimization)if(!this._invalidatedRectangle)this._invalidatedRectangle=new _.Measure(i,a,s-i+1,u-a+1);else{var f=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,s)),m=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,u));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,i)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,a)),this._invalidatedRectangle.width=f-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=m-this._invalidatedRectangle.top+1}},e.prototype.markAsDirty=function(){this._isDirty=!0},e.prototype.createStyle=function(){return new v.Style(this)},e.prototype.addControl=function(i){return this._rootContainer.addControl(i),this},e.prototype.removeControl=function(i){return this._rootContainer.removeControl(i),this},e.prototype.moveToNonOverlappedPosition=function(i,a,s){a===void 0&&(a=1),s===void 0&&(s=1);var u;if(Array.isArray(i))u=i;else{var f=this.getDescendants(!0);u=i===void 0?f.filter(function(m){return m.overlapGroup!==void 0}):f.filter(function(m){return m.overlapGroup===i})}u.forEach(function(m){var P,y=l.Vector2.Zero(),M=new l.Vector2(m.centerX,m.centerY);u.forEach(function(O){if(m!==O&&e._Overlaps(m,O)){var x=M.subtract(new l.Vector2(O.centerX,O.centerY)),R=x.length();R>0&&(y=y.add(x.normalize().scale(s/R)))}}),y.length()>0&&(y=y.normalize().scale(a*((P=m.overlapDeltaMultiplier)!==null&&P!==void 0?P:1)),m.linkOffsetXInPixels+=y.x,m.linkOffsetYInPixels+=y.y)})},e.prototype.dispose=function(){var i=this.getScene();i&&(this._rootElement=null,i.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&i.getEngine().onResizeObservable.remove(this._resizeObserver),this._prePointerObserver&&i.onPrePointerObservable.remove(this._prePointerObserver),this._sceneRenderObserver&&i.onBeforeRenderObservable.remove(this._sceneRenderObserver),this._pointerObserver&&i.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&i.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&i.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._canvasBlurObserver&&i.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver),this._controlAddedObserver&&this._rootContainer.onControlAddedObservable.remove(this._controlAddedObserver),this._controlRemovedObserver&&this._rootContainer.onControlRemovedObservable.remove(this._controlRemovedObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),this.onGuiReadyObservable.clear(),t.prototype.dispose.call(this))},e.prototype._onResize=function(){var i=this.getScene();if(i){var a=i.getEngine(),s=this.getSize(),u=a.getRenderWidth()*this._renderScale,f=a.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(f=f*this._idealWidth/u,u=this._idealWidth):this._idealHeight&&(u=u*this._idealHeight/f,f=this._idealHeight)),(s.width!==u||s.height!==f)&&(this.scaleTo(u,f),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,s.width-1,s.height-1)}},e.prototype._getGlobalViewport=function(){var i=this.getSize(),a=this._fullscreenViewport.toGlobal(i.width,i.height),s=Math.round(a.width*(1/this.rootContainer.scaleX)),u=Math.round(a.height*(1/this.rootContainer.scaleY));return a.x+=(a.width-s)/2,a.y+=(a.height-u)/2,a.width=s,a.height=u,a},e.prototype.getProjectedPosition=function(i,a){var s=this.getProjectedPositionWithZ(i,a);return new l.Vector2(s.x,s.y)},e.prototype.getProjectedPositionWithZ=function(i,a){var s=this.getScene();if(!s)return l.Vector3.Zero();var u=this._getGlobalViewport(),f=l.Vector3.Project(i,a,s.getTransformMatrix(),u);return new l.Vector3(f.x,f.y,f.z)},e.prototype._checkUpdate=function(i,a){if(!(this._layerToDispose&&!(i.layerMask&this._layerToDispose.layerMask))){if(this._isFullscreen&&this._linkedControls.length){var s=this.getScene();if(!s)return;for(var u=this._getGlobalViewport(),f=function(O){if(!O.isVisible)return"continue";var x=O._linkedMesh;if(!x||x.isDisposed())return l.Tools.SetImmediate(function(){O.linkWithMesh(null)}),"continue";var R=x.getBoundingInfo?x.getBoundingInfo().boundingSphere.center:l.Vector3.ZeroReadOnly,N=l.Vector3.Project(R,x.getWorldMatrix(),s.getTransformMatrix(),u);if(N.z<0||N.z>1)return O.notRenderable=!0,"continue";O.notRenderable=!1,m.useInvalidateRectOptimization&&O.invalidateRect(),O._moveToProjectedPosition(N)},m=this,P=0,y=this._linkedControls;P<y.length;P++){var M=y[P];f(M)}}!this._isDirty&&!this._rootContainer.isDirty||(this._isDirty=!1,this._render(a),a||this.update(this.applyYInversionOnUpdate,this.premulAlpha,e.AllowGPUOptimizations))}},e.prototype._render=function(i){var a,s=this.getSize(),u=s.width,f=s.height,m=this.getContext();if(m.font="18px Arial",m.strokeStyle="white",this.onGuiReadyObservable.hasObservers()&&this._checkGuiIsReady(),this._rootChildrenHaveChanged){var P=(a=this.getScene())===null||a===void 0?void 0:a.activeCamera;P&&(this._rootChildrenHaveChanged=!1,this._checkUpdate(P,!0))}this.onBeginLayoutObservable.notifyObservers(this);var y=new _.Measure(0,0,u,f);this._numLayoutCalls=0,this._rootContainer._layout(y,m),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,!i&&(this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,u,f),m.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(m.save(),m.fillStyle=this._background,m.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),m.restore()),this.onBeginRenderObservable.notifyObservers(this),this._numRenderCalls=0,this._rootContainer._render(m,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null)},e.prototype._changeCursor=function(i){this._rootElement&&(this._rootElement.style.cursor=i,this._cursorChanged=!0)},e.prototype._registerLastControlDown=function(i,a){this._lastControlDown[a]=i,this.onControlPickedObservable.notifyObservers(i)},e.prototype._doPicking=function(i,a,s,u,f,m,P,y){var M=this.getScene();if(M){var O=M.getEngine(),x=this.getSize();if(this._isFullscreen){var R=M.cameraToUseForPointers||M.activeCamera;if(!R)return;var N=R.viewport;i=i*(x.width/(O.getRenderWidth()*N.width)),a=a*(x.height/(O.getRenderHeight()*N.height))}if(this._capturingControl[f]){this._capturingControl[f].isPointerBlocker&&(this._shouldBlockPointer=!0),this._capturingControl[f]._processObservables(u,i,a,s,f,m);return}this._cursorChanged=!1,this._rootContainer._processPicking(i,a,s,u,f,m,P,y)||(M.doNotHandleCursors||this._changeCursor(""),u===l.PointerEventTypes.POINTERMOVE&&this._lastControlOver[f]&&(this._lastControlOver[f]._onPointerOut(this._lastControlOver[f],s),delete this._lastControlOver[f])),!this._cursorChanged&&!M.doNotHandleCursors&&this._changeCursor(""),this._manageFocus()}},e.prototype._cleanControlAfterRemovalFromList=function(i,a){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var u=i[s];u===a&&delete i[s]}},e.prototype._cleanControlAfterRemoval=function(i){this._cleanControlAfterRemovalFromList(this._lastControlDown,i),this._cleanControlAfterRemovalFromList(this._lastControlOver,i)},e.prototype.pick=function(i,a,s){s===void 0&&(s=null),this._isFullscreen&&this._scene&&this._translateToPicking(this._scene,new l.Viewport(0,0,0,0),s,i,a)},e.prototype._translateToPicking=function(i,a,s,u,f){u===void 0&&(u=i.pointerX),f===void 0&&(f=i.pointerY);var m=i.cameraToUseForPointers||i.activeCamera,P=i.getEngine(),y=i.cameraToUseForPointers;if(!m)a.x=0,a.y=0,a.width=P.getRenderWidth(),a.height=P.getRenderHeight();else if(m.rigCameras.length){var M=new l.Viewport(0,0,1,1);m.rigCameras.forEach(function(N){N.viewport.toGlobalToRef(P.getRenderWidth(),P.getRenderHeight(),M);var W=u/P.getHardwareScalingLevel()-M.x,Q=f/P.getHardwareScalingLevel()-(P.getRenderHeight()-M.y-M.height);W<0||Q<0||u>M.width||f>M.height||(i.cameraToUseForPointers=N,a.x=M.x,a.y=M.y,a.width=M.width,a.height=M.height)})}else m.viewport.toGlobalToRef(P.getRenderWidth(),P.getRenderHeight(),a);var O=u/P.getHardwareScalingLevel()-a.x,x=f/P.getHardwareScalingLevel()-(P.getRenderHeight()-a.y-a.height);if(this._shouldBlockPointer=!1,s){var R=s.event.pointerId||this._defaultMousePointerId;this._doPicking(O,x,s,s.type,R,s.event.button,s.event.deltaX,s.event.deltaY),(this._shouldBlockPointer||this._capturingControl[R])&&(s.skipOnPointerObservable=!0)}else this._doPicking(O,x,null,l.PointerEventTypes.POINTERMOVE,this._defaultMousePointerId,0);i.cameraToUseForPointers=y},e.prototype.attach=function(){var i=this,a=this.getScene();if(a){var s=new l.Viewport(0,0,0,0);this._prePointerObserver=a.onPrePointerObservable.add(function(u){if(!(a.isPointerCaptured(u.event.pointerId)&&u.type===l.PointerEventTypes.POINTERUP&&!i._capturedPointerIds.has(u.event.pointerId))&&!(u.type!==l.PointerEventTypes.POINTERMOVE&&u.type!==l.PointerEventTypes.POINTERUP&&u.type!==l.PointerEventTypes.POINTERDOWN&&u.type!==l.PointerEventTypes.POINTERWHEEL)){if(u.type===l.PointerEventTypes.POINTERMOVE){if(a.isPointerCaptured(u.event.pointerId))return;u.event.pointerId&&(i._defaultMousePointerId=u.event.pointerId)}i._translateToPicking(a,s,u)}}),this._attachPickingToSceneRender(a,function(){return i._translateToPicking(a,s,null)},!1),this._attachToOnPointerOut(a),this._attachToOnBlur(a)}},e.prototype.registerClipboardEvents=function(){self.addEventListener("copy",this._onClipboardCopy,!1),self.addEventListener("cut",this._onClipboardCut,!1),self.addEventListener("paste",this._onClipboardPaste,!1)},e.prototype.unRegisterClipboardEvents=function(){self.removeEventListener("copy",this._onClipboardCopy),self.removeEventListener("cut",this._onClipboardCut),self.removeEventListener("paste",this._onClipboardPaste)},e.prototype._transformUvs=function(i){var a=this.getTextureMatrix(),s;if(a.isIdentityAs3x2())s=i;else{var u=l.TmpVectors.Matrix[0];a.getRowToRef(0,l.TmpVectors.Vector4[0]),a.getRowToRef(1,l.TmpVectors.Vector4[1]),a.getRowToRef(2,l.TmpVectors.Vector4[2]);var f=l.TmpVectors.Vector4[0],m=l.TmpVectors.Vector4[1],P=l.TmpVectors.Vector4[2];u.setRowFromFloats(0,f.x,f.y,0,0),u.setRowFromFloats(1,m.x,m.y,0,0),u.setRowFromFloats(2,0,0,1,0),u.setRowFromFloats(3,P.x,P.y,0,1),s=l.TmpVectors.Vector2[0],l.Vector2.TransformToRef(i,u,s)}if((this.wrapU===l.Texture.WRAP_ADDRESSMODE||this.wrapU===l.Texture.MIRROR_ADDRESSMODE)&&s.x>1){var y=s.x-Math.trunc(s.x);this.wrapU===l.Texture.MIRROR_ADDRESSMODE&&Math.trunc(s.x)%2===1&&(y=1-y),s.x=y}if((this.wrapV===l.Texture.WRAP_ADDRESSMODE||this.wrapV===l.Texture.MIRROR_ADDRESSMODE)&&s.y>1){var M=s.y-Math.trunc(s.y);this.wrapV===l.Texture.MIRROR_ADDRESSMODE&&Math.trunc(s.x)%2===1&&(M=1-M),s.y=M}return s},e.prototype.attachToMesh=function(i,a){var s=this;a===void 0&&(a=!0);var u=this.getScene();u&&(this._pointerObserver&&u.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=u.onPointerObservable.add(function(f){if(!(f.type!==l.PointerEventTypes.POINTERMOVE&&f.type!==l.PointerEventTypes.POINTERUP&&f.type!==l.PointerEventTypes.POINTERDOWN&&f.type!==l.PointerEventTypes.POINTERWHEEL)){f.type===l.PointerEventTypes.POINTERMOVE&&f.event.pointerId&&(s._defaultMousePointerId=f.event.pointerId);var m=f.event.pointerId||s._defaultMousePointerId;if(f.pickInfo&&f.pickInfo.hit&&f.pickInfo.pickedMesh===i){var P=f.pickInfo.getTextureCoordinates();if(P){P=s._transformUvs(P);var y=s.getSize();s._doPicking(P.x*y.width,(s.applyYInversionOnUpdate?1-P.y:P.y)*y.height,f,f.type,m,f.event.button,f.event.deltaX,f.event.deltaY)}}else if(f.type===l.PointerEventTypes.POINTERUP){if(s._lastControlDown[m]&&s._lastControlDown[m]._forcePointerUp(m),delete s._lastControlDown[m],s.focusedControl){var M=s.focusedControl.keepsFocusWith(),O=!0;if(M)for(var x=0,R=M;x<R.length;x++){var N=R[x];if(s!==N._host){var W=N._host;if(W._lastControlOver[m]&&W._lastControlOver[m].isAscendant(N)){O=!1;break}}}O&&(s.focusedControl=null)}}else f.type===l.PointerEventTypes.POINTERMOVE&&(s._lastControlOver[m]&&s._lastControlOver[m]._onPointerOut(s._lastControlOver[m],f,!0),delete s._lastControlOver[m])}}),i.enablePointerMoveEvents=a,this._attachPickingToSceneRender(u,function(){var f=s._defaultMousePointerId,m=u==null?void 0:u.pick(u.pointerX,u.pointerY);if(m&&m.hit&&m.pickedMesh===i){var P=m.getTextureCoordinates();if(P){P=s._transformUvs(P);var y=s.getSize();s._doPicking(P.x*y.width,(s.applyYInversionOnUpdate?1-P.y:P.y)*y.height,null,l.PointerEventTypes.POINTERMOVE,f,0)}}else s._lastControlOver[f]&&s._lastControlOver[f]._onPointerOut(s._lastControlOver[f],null,!0),delete s._lastControlOver[f]},!0),this._attachToOnPointerOut(u),this._attachToOnBlur(u))},e.prototype.moveFocusToControl=function(i){this.focusedControl=i,this._lastPickedControl=i,this._blockNextFocusCheck=!0},e.prototype._manageFocus=function(){if(this._blockNextFocusCheck){this._blockNextFocusCheck=!1,this._lastPickedControl=this._focusedControl;return}if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}},e.prototype._attachPickingToSceneRender=function(i,a,s){var u=this;this._sceneRenderObserver=i.onBeforeRenderObservable.add(function(){u.checkPointerEveryFrame&&(u._linkedControls.length>0||s)&&a()})},e.prototype._attachToOnPointerOut=function(i){var a=this;this._canvasPointerOutObserver=i.getEngine().onCanvasPointerOutObservable.add(function(s){a._lastControlOver[s.pointerId]&&a._lastControlOver[s.pointerId]._onPointerOut(a._lastControlOver[s.pointerId],null),delete a._lastControlOver[s.pointerId],a._lastControlDown[s.pointerId]&&a._lastControlDown[s.pointerId]!==a._capturingControl[s.pointerId]&&(a._lastControlDown[s.pointerId]._forcePointerUp(s.pointerId),delete a._lastControlDown[s.pointerId])})},e.prototype._attachToOnBlur=function(i){var a=this;this._canvasBlurObserver=i.getEngine().onCanvasBlurObservable.add(function(){Object.entries(a._lastControlDown).forEach(function(s){var u=s[1];u._onCanvasBlur()}),a.focusedControl=null,a._lastControlDown={}})},e.prototype.serializeContent=function(){var i=this.getSize(),a={root:{},width:i.width,height:i.height};return this._rootContainer.serialize(a.root),a},e.prototype.parseSerializedObject=function(i,a){if(this._rootContainer=b.Control.Parse(i.root,this),a){var s=i.width,u=i.height;typeof s=="number"&&typeof u=="number"&&s>=0&&u>=0?this.scaleTo(s,u):this.scaleTo(1920,1080)}},e.prototype.clone=function(i){var a=this.getScene();if(!a)return this;var s=this.getSize(),u=this.serializeContent(),f=new e(i??"Clone of "+this.name,s.width,s.height,a,!this.noMipmap,this.samplingMode);return f.parseSerializedObject(u),f},e.ParseFromSnippetAsync=function(i,a,s){return(0,c.__awaiter)(this,void 0,void 0,function(){var u,f;return(0,c.__generator)(this,function(m){switch(m.label){case 0:return u=s??e.CreateFullscreenUI("ADT from snippet"),i==="_BLANK"?[2,u]:[4,e._LoadURLContentAsync(e.SnippetUrl+"/"+i.replace(/#/g,"/"),!0)];case 1:return f=m.sent(),u.parseSerializedObject(f,a),[2,u]}})})},e.prototype.parseFromSnippetAsync=function(i,a){return e.ParseFromSnippetAsync(i,a,this)},e.ParseFromFileAsync=function(i,a,s){return(0,c.__awaiter)(this,void 0,void 0,function(){var u,f;return(0,c.__generator)(this,function(m){switch(m.label){case 0:return u=s??e.CreateFullscreenUI("ADT from URL"),[4,e._LoadURLContentAsync(i)];case 1:return f=m.sent(),u.parseSerializedObject(f,a),[2,u]}})})},e.prototype.parseFromURLAsync=function(i,a){return e.ParseFromFileAsync(i,a,this)},e._LoadURLContentAsync=function(i,a){return a===void 0&&(a=!1),i===""?Promise.reject("No URL provided"):new Promise(function(s,u){var f=new l.WebRequest;f.addEventListener("readystatechange",function(){if(f.readyState==4)if(f.status==200){var m=void 0;if(a){var P=JSON.parse(JSON.parse(f.responseText).jsonPayload);m=P.encodedGui?new TextDecoder("utf-8").decode((0,l.DecodeBase64ToBinary)(P.encodedGui)):P.gui}else m=f.responseText;var y=JSON.parse(m);s(y)}else u("Unable to load")}),f.open("GET",i),f.send()})},e._Overlaps=function(i,a){return!(i.centerX>a.centerX+a.widthInPixels||i.centerX+i.widthInPixels<a.centerX||i.centerY+i.heightInPixels<a.centerY||i.centerY>a.centerY+a.heightInPixels)},e.CreateForMesh=function(i,a,s,u,f,m,P){a===void 0&&(a=1024),s===void 0&&(s=1024),u===void 0&&(u=!0),f===void 0&&(f=!1),P===void 0&&(P=this._CreateMaterial);var y=(0,l.RandomGUID)(),M=new e("AdvancedDynamicTexture for ".concat(i.name," [").concat(y,"]"),a,s,i.getScene(),!0,l.Texture.TRILINEAR_SAMPLINGMODE,m);return P(i,y,M,f),M.attachToMesh(i,u),M},e._CreateMaterial=function(i,a,s,u){var f=(0,l.GetClass)("BABYLON.StandardMaterial");if(!f)throw"StandardMaterial needs to be imported before as it contains a side-effect required by your code.";var m=new f("AdvancedDynamicTextureMaterial for ".concat(i.name," [").concat(a,"]"),i.getScene());m.backFaceCulling=!1,m.diffuseColor=l.Color3.Black(),m.specularColor=l.Color3.Black(),u?(m.diffuseTexture=s,m.emissiveTexture=s,s.hasAlpha=!0):(m.emissiveTexture=s,m.opacityTexture=s),i.material=m},e.CreateForMeshTexture=function(i,a,s,u,f){a===void 0&&(a=1024),s===void 0&&(s=1024),u===void 0&&(u=!0);var m=new e(i.name+" AdvancedDynamicTexture",a,s,i.getScene(),!0,l.Texture.TRILINEAR_SAMPLINGMODE,f);return m.attachToMesh(i,u),m},e.CreateFullscreenUI=function(i,a,s,u,f){a===void 0&&(a=!0),s===void 0&&(s=null),u===void 0&&(u=l.Texture.BILINEAR_SAMPLINGMODE),f===void 0&&(f=!1);var m=new e(i,0,0,s,!1,u),P=m.getScene(),y=new l.Layer(i+"_layer",null,P,!a);if(y.texture=m,m._layerToDispose=y,m._isFullscreen=!0,f&&P){var M=1/P.getEngine().getHardwareScalingLevel();m._rootContainer.scaleX=M,m._rootContainer.scaleY=M}return m.attach(),m},e.prototype.scale=function(i){t.prototype.scale.call(this,i),this.markAsDirty()},e.prototype.scaleTo=function(i,a){t.prototype.scaleTo.call(this,i,a),this.markAsDirty()},e.prototype._checkGuiIsReady=function(){this.guiIsReady()&&(this.onGuiReadyObservable.notifyObservers(this),this.onGuiReadyObservable.clear())},e.prototype.guiIsReady=function(){return this._rootContainer.isReady()},e.SnippetUrl=l.Constants.SnippetUrl,e.AllowGPUOptimizations=!0,e}(l.DynamicTexture)},"../../../dev/gui/src/2D/controls/button.ts":(B,E,d)=>{d.r(E),d.d(E,{Button:()=>o});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/rectangle.ts"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/controls/textBlock.ts"),v=d("../../../dev/gui/src/2D/controls/image.ts"),_=d("babylonjs/Misc/perfCounter"),o=function(t){(0,c.__extends)(e,t);function e(i){var a=t.call(this,i)||this;a.name=i,a.delegatePickingToChildren=!1,a.thickness=1,a.isPointerBlocker=!0;var s=null;return a.pointerEnterAnimation=function(){s=a.alpha,a.alpha-=.1},a.pointerOutAnimation=function(){s!==null&&(a.alpha=s)},a.pointerDownAnimation=function(){a.scaleX-=.05,a.scaleY-=.05},a.pointerUpAnimation=function(){a.scaleX+=.05,a.scaleY+=.05},a}return Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBlock",{get:function(){return this._textBlock},enumerable:!1,configurable:!0}),e.prototype._getTypeName=function(){return"Button"},e.prototype._processPicking=function(i,a,s,u,f,m,P,y){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable||!t.prototype.contains.call(this,i,a))return!1;if(this.delegatePickingToChildren){for(var M=!1,O=this._children.length-1;O>=0;O--){var x=this._children[O];if(x.isEnabled&&x.isHitTestVisible&&x.isVisible&&!x.notRenderable&&x.contains(i,a)){M=!0;break}}if(!M)return!1}return this._processObservables(u,i,a,s,f,m,P,y),!0},e.prototype._onPointerEnter=function(i,a){return t.prototype._onPointerEnter.call(this,i,a)?(!this.isReadOnly&&this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0):!1},e.prototype._onPointerOut=function(i,a,s){s===void 0&&(s=!1),!this.isReadOnly&&this.pointerOutAnimation&&this.pointerOutAnimation(),t.prototype._onPointerOut.call(this,i,a,s)},e.prototype._onPointerDown=function(i,a,s,u,f){return t.prototype._onPointerDown.call(this,i,a,s,u,f)?(!this.isReadOnly&&this.pointerDownAnimation&&this.pointerDownAnimation(),!0):!1},e.prototype._getRectangleFill=function(i){return this.isEnabled?this._getBackgroundColor(i):this._disabledColor},e.prototype._onPointerUp=function(i,a,s,u,f,m){!this.isReadOnly&&this.pointerUpAnimation&&this.pointerUpAnimation(),t.prototype._onPointerUp.call(this,i,a,s,u,f,m)},e.prototype.serialize=function(i){t.prototype.serialize.call(this,i),this._textBlock&&(i.textBlockName=this._textBlock.name),this._image&&(i.imageName=this._image.name)},e.prototype._parseFromContent=function(i,a){t.prototype._parseFromContent.call(this,i,a),i.textBlockName&&(this._textBlock=this.getChildByName(i.textBlockName)),i.imageName&&(this._image=this.getChildByName(i.imageName))},e.CreateImageButton=function(i,a,s){var u=new this(i),f=new b.TextBlock(i+"_button",a);f.textWrapping=!0,f.textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_CENTER,f.paddingLeft="20%",u.addControl(f);var m=new v.Image(i+"_icon",s);return m.width="20%",m.stretch=v.Image.STRETCH_UNIFORM,m.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,u.addControl(m),u._image=m,u._textBlock=f,u},e.CreateImageOnlyButton=function(i,a){var s=new this(i),u=new v.Image(i+"_icon",a);return u.stretch=v.Image.STRETCH_FILL,u.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,s.addControl(u),s._image=u,s},e.CreateSimpleButton=function(i,a){var s=new this(i),u=new b.TextBlock(i+"_button",a);return u.textWrapping=!0,u.textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_CENTER,s.addControl(u),s._textBlock=u,s},e.CreateImageWithCenterTextButton=function(i,a,s){var u=new this(i),f=new v.Image(i+"_icon",s);f.stretch=v.Image.STRETCH_FILL,u.addControl(f);var m=new b.TextBlock(i+"_button",a);return m.textWrapping=!0,m.textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_CENTER,u.addControl(m),u._image=f,u._textBlock=m,u},e}(l.Rectangle);(0,_.RegisterClass)("BABYLON.GUI.Button",o)},"../../../dev/gui/src/2D/controls/checkbox.ts":(B,E,d)=>{d.r(E),d.d(E,{Checkbox:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),v=d("../../../dev/gui/src/2D/controls/textBlock.ts"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.onIsCheckedChangedObservable=new l.Observable,i.isPointerBlocker=!0,i}return Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness!==e&&(this._thickness=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(e){e=Math.max(Math.min(1,e),0),this._checkSizeRatio!==e&&(this._checkSizeRatio=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background!==e&&(this._background=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChecked",{get:function(){return this._isChecked},set:function(e){this._isChecked!==e&&(this._isChecked=e,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(e))},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"Checkbox"},t.prototype._draw=function(e){e.save(),this._applyStates(e);var i=this._currentMeasure.width-this._thickness,a=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY),e.fillStyle=this._isEnabled?this._background:this._disabledColor,e.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,a),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),this._isChecked){e.fillStyle=this._isEnabled?this.color:this._disabledColorItem;var s=i*this._checkSizeRatio,u=a*this._checkSizeRatio;e.fillRect(this._currentMeasure.left+this._thickness/2+(i-s)/2,this._currentMeasure.top+this._thickness/2+(a-u)/2,s,u)}e.strokeStyle=this.color,e.lineWidth=this._thickness,e.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,a),e.restore()},t.prototype._onPointerDown=function(e,i,a,s,u){return o.prototype._onPointerDown.call(this,e,i,a,s,u)?(this.isReadOnly||(this.isChecked=!this.isChecked),!0):!1},t.AddCheckBoxWithHeader=function(e,i){var a=new b.StackPanel;a.isVertical=!1,a.height="30px";var s=new t;s.width="20px",s.height="20px",s.isChecked=!0,s.color="green",s.onIsCheckedChangedObservable.add(i),a.addControl(s);var u=new v.TextBlock;return u.text=e,u.width="180px",u.paddingLeft="5px",u.textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,u.color="white",a.addControl(u),a},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"thickness",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"checkSizeRatio",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"background",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"isChecked",null),t}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.Checkbox",_)},"../../../dev/gui/src/2D/controls/colorpicker.ts":(B,E,d)=>{d.r(E),d.d(E,{ColorPicker:()=>e});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/controls/inputText.ts"),v=d("../../../dev/gui/src/2D/controls/rectangle.ts"),_=d("../../../dev/gui/src/2D/controls/button.ts"),o=d("../../../dev/gui/src/2D/controls/grid.ts"),t=d("../../../dev/gui/src/2D/controls/textBlock.ts"),e=function(i){(0,c.__extends)(a,i);function a(s){var u=i.call(this,s)||this;return u.name=s,u._value=l.Color3.Red(),u._tmpColor=new l.Color3,u._pointerStartedOnSquare=!1,u._pointerStartedOnWheel=!1,u._squareLeft=0,u._squareTop=0,u._squareSize=0,u._h=360,u._s=1,u._v=1,u._lastPointerDownId=-1,u.onValueChangedObservable=new l.Observable,u._pointerIsDown=!1,u.value=new l.Color3(.88,.1,.1),u.size="200px",u.isPointerBlocker=!0,u}return Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(s){this._value.equals(s)||(this._value.copyFrom(s),this._value.toHSVToRef(this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1e-5),this._v=Math.max(this._tmpColor.b,1e-5),this._markAsDirty(),this._value.r<=a._Epsilon&&(this._value.r=0),this._value.g<=a._Epsilon&&(this._value.g=0),this._value.b<=a._Epsilon&&(this._value.b=0),this._value.r>=1-a._Epsilon&&(this._value.r=1),this._value.g>=1-a._Epsilon&&(this._value.g=1),this._value.b>=1-a._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(s){this._width.toString(this._host)!==s&&this._width.fromString(s)&&(this._width.getValue(this._host)===0&&(s="1px",this._width.fromString(s)),this._height.fromString(s),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(s){this._height.toString(this._host)!==s&&this._height.fromString(s)&&(this._height.getValue(this._host)===0&&(s="1px",this._height.fromString(s)),this._width.fromString(s),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this.width},set:function(s){this.width=s},enumerable:!1,configurable:!0}),a.prototype._getTypeName=function(){return"ColorPicker"},a.prototype._preMeasure=function(s){s.width<s.height?this._currentMeasure.height=s.width:this._currentMeasure.width=s.height},a.prototype._updateSquareProps=function(){var s=Math.min(this._currentMeasure.width,this._currentMeasure.height)*.5,u=s*.2,f=(s-u)*2,m=f/Math.sqrt(2),P=s-m*.5;this._squareLeft=this._currentMeasure.left+P,this._squareTop=this._currentMeasure.top+P,this._squareSize=m},a.prototype._drawGradientSquare=function(s,u,f,m,P,y){var M=y.createLinearGradient(u,f,m+u,f);M.addColorStop(0,"#fff"),M.addColorStop(1,"hsl("+s+", 100%, 50%)"),y.fillStyle=M,y.fillRect(u,f,m,P);var O=y.createLinearGradient(u,f,u,P+f);O.addColorStop(0,"rgba(0,0,0,0)"),O.addColorStop(1,"#000"),y.fillStyle=O,y.fillRect(u,f,m,P)},a.prototype._drawCircle=function(s,u,f,m){m.beginPath(),m.arc(s,u,f+1,0,2*Math.PI,!1),m.lineWidth=3,m.strokeStyle="#333333",m.stroke(),m.beginPath(),m.arc(s,u,f,0,2*Math.PI,!1),m.lineWidth=3,m.strokeStyle="#ffffff",m.stroke()},a.prototype._createColorWheelCanvas=function(s,u){var f=l.EngineStore.LastCreatedEngine;if(!f)throw new Error("Invalid engine. Unable to create a canvas.");for(var m=f.createCanvas(s*2,s*2),P=m.getContext("2d"),y=P.getImageData(0,0,s*2,s*2),M=y.data,O=this._tmpColor,x=s*s,R=s-u,N=R*R,W=-s;W<s;W++)for(var Q=-s;Q<s;Q++){var U=W*W+Q*Q;if(!(U>x||U<N)){var H=Math.sqrt(U),Y=Math.atan2(Q,W);l.Color3.HSVtoRGBToRef(Y*180/Math.PI+180,H/s,1,O);var J=(W+s+(Q+s)*2*s)*4;M[J]=O.r*255,M[J+1]=O.g*255,M[J+2]=O.b*255;var q=(H-R)/(s-R),le=.2,fe=.2,ue=.04,ae=50,ce=150;s<ae?le=fe:s>ce?le=ue:le=(ue-fe)*(s-ae)/(ce-ae)+fe,q=(H-R)/(s-R),q<le?M[J+3]=255*(q/le):q>1-le?M[J+3]=255*(1-(q-(1-le))/le):M[J+3]=255}}return P.putImageData(y,0,0),m},a.prototype._draw=function(s){s.save(),this._applyStates(s);var u=Math.min(this._currentMeasure.width,this._currentMeasure.height)*.5,f=u*.2,m=this._currentMeasure.left,P=this._currentMeasure.top;(!this._colorWheelCanvas||this._colorWheelCanvas.width!=u*2)&&(this._colorWheelCanvas=this._createColorWheelCanvas(u,f)),this._updateSquareProps(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur,s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY,s.fillRect(this._squareLeft,this._squareTop,this._squareSize,this._squareSize)),s.drawImage(this._colorWheelCanvas,m,P),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0),this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,s);var y=this._squareLeft+this._squareSize*this._s,M=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(y,M,u*.04,s);var O=u-f*.5;y=m+u+Math.cos((this._h-180)*Math.PI/180)*O,M=P+u+Math.sin((this._h-180)*Math.PI/180)*O,this._drawCircle(y,M,f*.35,s),s.restore()},a.prototype._updateValueFromPointer=function(s,u){if(this._pointerStartedOnWheel){var f=Math.min(this._currentMeasure.width,this._currentMeasure.height)*.5,m=f+this._currentMeasure.left,P=f+this._currentMeasure.top;this._h=Math.atan2(u-P,s-m)*180/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(s-this._squareLeft)/this._squareSize,this._v=1-(u-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),this._s=Math.max(this._s,a._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,a._Epsilon));l.Color3.HSVtoRGBToRef(this._h,this._s,this._v,this._tmpColor),this.value=this._tmpColor},a.prototype._isPointOnSquare=function(s,u){this._updateSquareProps();var f=this._squareLeft,m=this._squareTop,P=this._squareSize;return s>=f&&s<=f+P&&u>=m&&u<=m+P},a.prototype._isPointOnWheel=function(s,u){var f=Math.min(this._currentMeasure.width,this._currentMeasure.height)*.5,m=f+this._currentMeasure.left,P=f+this._currentMeasure.top,y=f*.2,M=f-y,O=f*f,x=M*M,R=s-m,N=u-P,W=R*R+N*N;return W<=O&&W>=x},a.prototype._onPointerDown=function(s,u,f,m,P){if(!i.prototype._onPointerDown.call(this,s,u,f,m,P))return!1;if(this.isReadOnly)return!0;this._pointerIsDown=!0,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._invertTransformMatrix.transformCoordinates(u.x,u.y,this._transformedPosition);var y=this._transformedPosition.x,M=this._transformedPosition.y;return this._isPointOnSquare(y,M)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(y,M)&&(this._pointerStartedOnWheel=!0),this._updateValueFromPointer(y,M),this._host._capturingControl[f]=this,this._lastPointerDownId=f,!0},a.prototype._onPointerMove=function(s,u,f,m){if(f==this._lastPointerDownId){if(!this.isReadOnly){this._invertTransformMatrix.transformCoordinates(u.x,u.y,this._transformedPosition);var P=this._transformedPosition.x,y=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(P,y)}i.prototype._onPointerMove.call(this,s,u,f,m)}},a.prototype._onPointerUp=function(s,u,f,m,P,y){this._pointerIsDown=!1,delete this._host._capturingControl[f],i.prototype._onPointerUp.call(this,s,u,f,m,P,y)},a.prototype._onCanvasBlur=function(){this._forcePointerUp(),i.prototype._onCanvasBlur.call(this)},a.ShowPickerDialogAsync=function(s,u){return new Promise(function(f){u.pickerWidth=u.pickerWidth||"640px",u.pickerHeight=u.pickerHeight||"400px",u.headerHeight=u.headerHeight||"35px",u.lastColor=u.lastColor||"#000000",u.swatchLimit=u.swatchLimit||20,u.numSwatchesPerLine=u.numSwatchesPerLine||10;var m=u.swatchLimit/u.numSwatchesPerLine,P=parseFloat(u.pickerWidth)/u.numSwatchesPerLine,y=Math.floor(P*.25),M=y*(u.numSwatchesPerLine+1),O=Math.floor((parseFloat(u.pickerWidth)-M)/u.numSwatchesPerLine),x=O*m+y*(m+1),R=(parseInt(u.pickerHeight)+x+Math.floor(O*.25)).toString()+"px",N="#c0c0c0",W="#535353",Q="#414141",U="515151",H="#555555",Y="#454545",J="#404040",q=l.Color3.FromHexString("#dddddd"),le=q.r+q.g+q.b,fe="#aaaaaa",ue="#ffffff",ae,ce,be=["R","G","B"],L="#454545",F="#f0f0f0",k,I,S=!1,A,w,V,G=new o.Grid;if(G.name="Dialog Container",G.width=u.pickerWidth,u.savedColors){G.height=R;var z=parseInt(u.pickerHeight)/parseInt(R);G.addRowDefinition(z,!1),G.addRowDefinition(1-z,!1)}else G.height=u.pickerHeight,G.addRowDefinition(1,!1);if(s.addControl(G),u.savedColors){I=new o.Grid,I.name="Swatch Drawer",I.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_TOP,I.background=W,I.width=u.pickerWidth;var j=u.savedColors.length/u.numSwatchesPerLine,X=void 0;j==0?X=0:X=j+1,I.height=(O*j+X*y).toString()+"px",I.top=Math.floor(O*.25).toString()+"px";for(var K=0;K<Math.ceil(u.savedColors.length/u.numSwatchesPerLine)*2+1;K++)K%2!=0?I.addRowDefinition(O,!0):I.addRowDefinition(y,!0);for(var K=0;K<u.numSwatchesPerLine*2+1;K++)K%2!=0?I.addColumnDefinition(O,!0):I.addColumnDefinition(y,!0);G.addControl(I,1,0)}var Z=new o.Grid;Z.name="Picker Panel",Z.height=u.pickerHeight;var oe=parseInt(u.headerHeight)/parseInt(u.pickerHeight),ee=[oe,1-oe];Z.addRowDefinition(ee[0],!1),Z.addRowDefinition(ee[1],!1),G.addControl(Z,0,0);var re=new v.Rectangle;re.name="Dialogue Header Bar",re.background="#cccccc",re.thickness=0,Z.addControl(re,0,0);var te=_.Button.CreateSimpleButton("closeButton","a");te.fontFamily="coreglyphs";var he=l.Color3.FromHexString(re.background),Ee=new l.Color3(1-he.r,1-he.g,1-he.b);te.color=Ee.toHexString(),te.fontSize=Math.floor(parseInt(u.headerHeight)*.6),te.textBlock.textVerticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,te.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_RIGHT,te.height=te.width=u.headerHeight,te.background=re.background,te.thickness=0,te.pointerDownAnimation=function(){},te.pointerUpAnimation=function(){te.background=re.background},te.pointerEnterAnimation=function(){te.color=re.background,te.background="red"},te.pointerOutAnimation=function(){te.color=Ee.toHexString(),te.background=re.background},te.onPointerClickObservable.add(function(){Qo(st.background)}),Z.addControl(te,0,0);var ge=new o.Grid;ge.name="Dialogue Body",ge.background=W;var Be=[.4375,.5625];ge.addRowDefinition(1,!1),ge.addColumnDefinition(Be[0],!1),ge.addColumnDefinition(Be[1],!1),Z.addControl(ge,1,0);var de=new o.Grid;de.name="Picker Grid",de.addRowDefinition(.85,!1),de.addRowDefinition(.15,!1),ge.addControl(de,0,0);var pe=new a;pe.name="GUI Color Picker",u.pickerHeight<u.pickerWidth?pe.width=.89:pe.height=.89,pe.value=l.Color3.FromHexString(u.lastColor),pe.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_CENTER,pe.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,pe.onPointerDownObservable.add(function(){V=pe.name,w="",Et(!1)}),pe.onValueChangedObservable.add(function(ie){V==pe.name&&Nt(ie,pe.name)}),de.addControl(pe,0,0);var Me=new o.Grid;Me.name="Dialogue Right Half",Me.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT;var Ie=[.514,.486];Me.addRowDefinition(Ie[0],!1),Me.addRowDefinition(Ie[1],!1),ge.addControl(Me,1,1);var mt=new o.Grid;mt.name="Swatches and Buttons";var qe=[.417,.583];mt.addRowDefinition(1,!1),mt.addColumnDefinition(qe[0],!1),mt.addColumnDefinition(qe[1],!1),Me.addControl(mt,0,0);var We=new o.Grid;We.name="New and Current Swatches";var Ze=[.04,.16,.64,.16];We.addRowDefinition(Ze[0],!1),We.addRowDefinition(Ze[1],!1),We.addRowDefinition(Ze[2],!1),We.addRowDefinition(Ze[3],!1),mt.addControl(We,0,0);var je=new o.Grid;je.name="Active Swatches",je.width=.67,je.addRowDefinition(.5,!1),je.addRowDefinition(.5,!1),We.addControl(je,2,0);var St=Math.floor(parseInt(u.pickerWidth)*Be[1]*qe[0]*.11),bn=Math.floor(parseInt(u.pickerHeight)*ee[1]*Ie[0]*Ze[1]*.5),Kr;u.pickerWidth>u.pickerHeight?Kr=bn:Kr=St;var Sr=new t.TextBlock;Sr.text="new",Sr.name="New Color Label",Sr.color=N,Sr.fontSize=Kr,We.addControl(Sr,1,0);var we=new v.Rectangle;we.name="New Color Swatch",we.background=u.lastColor,we.thickness=0,je.addControl(we,0,0);var st=_.Button.CreateSimpleButton("currentSwatch","");st.background=u.lastColor,st.thickness=0,st.onPointerClickObservable.add(function(){var ie=l.Color3.FromHexString(st.background);Nt(ie,st.name),Et(!1)}),st.pointerDownAnimation=function(){},st.pointerUpAnimation=function(){},st.pointerEnterAnimation=function(){},st.pointerOutAnimation=function(){},je.addControl(st,1,0);var Pe=new v.Rectangle;Pe.name="Swatch Outline",Pe.width=.67,Pe.thickness=2,Pe.color=J,Pe.isHitTestVisible=!1,We.addControl(Pe,2,0);var xi=new t.TextBlock;xi.name="Current Color Label",xi.text="current",xi.color=N,xi.fontSize=Kr,We.addControl(xi,3,0);var Ht=new o.Grid;Ht.name="Button Grid",Ht.height=.8;var Tn=1/3;Ht.addRowDefinition(Tn,!1),Ht.addRowDefinition(Tn,!1),Ht.addRowDefinition(Tn,!1),mt.addControl(Ht,0,1);var Dr=Math.floor(parseInt(u.pickerWidth)*Be[1]*qe[1]*.67).toString()+"px",Yr=Math.floor(parseInt(u.pickerHeight)*ee[1]*Ie[0]*(parseFloat(Ht.height.toString())/100)*Tn*.7).toString()+"px";parseFloat(Dr)>parseFloat(Yr)?ae=Math.floor(parseFloat(Yr)*.45):ae=Math.floor(parseFloat(Dr)*.11);var et=_.Button.CreateSimpleButton("butOK","OK");et.width=Dr,et.height=Yr,et.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,et.thickness=2,et.color=N,et.fontSize=ae,et.background=W,et.onPointerEnterObservable.add(function(){et.background=Q}),et.onPointerOutObservable.add(function(){et.background=W}),et.pointerDownAnimation=function(){et.background=U},et.pointerUpAnimation=function(){et.background=Q},et.onPointerClickObservable.add(function(){Et(!1),Qo(we.background)}),Ht.addControl(et,0,0);var tt=_.Button.CreateSimpleButton("butCancel","Cancel");tt.width=Dr,tt.height=Yr,tt.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,tt.thickness=2,tt.color=N,tt.fontSize=ae,tt.background=W,tt.onPointerEnterObservable.add(function(){tt.background=Q}),tt.onPointerOutObservable.add(function(){tt.background=W}),tt.pointerDownAnimation=function(){tt.background=U},tt.pointerUpAnimation=function(){tt.background=Q},tt.onPointerClickObservable.add(function(){Et(!1),Qo(st.background)}),Ht.addControl(tt,1,0),u.savedColors&&(A=_.Button.CreateSimpleButton("butSave","Save"),A.width=Dr,A.height=Yr,A.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,A.thickness=2,A.fontSize=ae,u.savedColors.length<u.swatchLimit?(A.color=N,A.background=W):Uo(A,!0),A.onPointerEnterObservable.add(function(){u.savedColors&&u.savedColors.length<u.swatchLimit&&(A.background=Q)}),A.onPointerOutObservable.add(function(){u.savedColors&&u.savedColors.length<u.swatchLimit&&(A.background=W)}),A.pointerDownAnimation=function(){u.savedColors&&u.savedColors.length<u.swatchLimit&&(A.background=U)},A.pointerUpAnimation=function(){u.savedColors&&u.savedColors.length<u.swatchLimit&&(A.background=Q)},A.onPointerClickObservable.add(function(){u.savedColors&&(u.savedColors.length==0&&Wo(!0),u.savedColors.length<u.swatchLimit&&zo(we.background,A),Et(!1))}),u.savedColors.length>0&&Wo(!0),Ht.addControl(A,2,0));var lr=new o.Grid;lr.name="Dialog Lower Right",lr.addRowDefinition(.02,!1),lr.addRowDefinition(.63,!1),lr.addRowDefinition(.21,!1),lr.addRowDefinition(.14,!1),Me.addControl(lr,1,0);var Xr=l.Color3.FromHexString(u.lastColor),rt=new o.Grid;rt.name="RGB Values",rt.width=.82,rt.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,rt.addRowDefinition(1/3,!1),rt.addRowDefinition(1/3,!1),rt.addRowDefinition(1/3,!1),rt.addColumnDefinition(.1,!1),rt.addColumnDefinition(.2,!1),rt.addColumnDefinition(.7,!1),lr.addControl(rt,1,0);for(var K=0;K<be.length;K++){var Pn=new t.TextBlock;Pn.text=be[K],Pn.color=N,Pn.fontSize=ae,rt.addControl(Pn,K,0)}var Ue=new b.InputText;Ue.width=.83,Ue.height=.72,Ue.name="rIntField",Ue.fontSize=ae,Ue.text=(Xr.r*255).toString(),Ue.color=F,Ue.background=L,Ue.onFocusObservable.add(function(){V=Ue.name,w=Ue.text,Et(!1)}),Ue.onBlurObservable.add(function(){Ue.text==""&&(Ue.text="0"),Zr(Ue,"r"),V==Ue.name&&(V="")}),Ue.onTextChangedObservable.add(function(){V==Ue.name&&Zr(Ue,"r")}),rt.addControl(Ue,0,1);var Qe=new b.InputText;Qe.width=.83,Qe.height=.72,Qe.name="gIntField",Qe.fontSize=ae,Qe.text=(Xr.g*255).toString(),Qe.color=F,Qe.background=L,Qe.onFocusObservable.add(function(){V=Qe.name,w=Qe.text,Et(!1)}),Qe.onBlurObservable.add(function(){Qe.text==""&&(Qe.text="0"),Zr(Qe,"g"),V==Qe.name&&(V="")}),Qe.onTextChangedObservable.add(function(){V==Qe.name&&Zr(Qe,"g")}),rt.addControl(Qe,1,1);var Ge=new b.InputText;Ge.width=.83,Ge.height=.72,Ge.name="bIntField",Ge.fontSize=ae,Ge.text=(Xr.b*255).toString(),Ge.color=F,Ge.background=L,Ge.onFocusObservable.add(function(){V=Ge.name,w=Ge.text,Et(!1)}),Ge.onBlurObservable.add(function(){Ge.text==""&&(Ge.text="0"),Zr(Ge,"b"),V==Ge.name&&(V="")}),Ge.onTextChangedObservable.add(function(){V==Ge.name&&Zr(Ge,"b")}),rt.addControl(Ge,2,1);var Ne=new b.InputText;Ne.width=.95,Ne.height=.72,Ne.name="rDecField",Ne.fontSize=ae,Ne.text=Xr.r.toString(),Ne.color=F,Ne.background=L,Ne.onFocusObservable.add(function(){V=Ne.name,w=Ne.text,Et(!1)}),Ne.onBlurObservable.add(function(){(parseFloat(Ne.text)==0||Ne.text=="")&&(Ne.text="0",$r(Ne,"r")),V==Ne.name&&(V="")}),Ne.onTextChangedObservable.add(function(){V==Ne.name&&$r(Ne,"r")}),rt.addControl(Ne,0,2);var Ve=new b.InputText;Ve.width=.95,Ve.height=.72,Ve.name="gDecField",Ve.fontSize=ae,Ve.text=Xr.g.toString(),Ve.color=F,Ve.background=L,Ve.onFocusObservable.add(function(){V=Ve.name,w=Ve.text,Et(!1)}),Ve.onBlurObservable.add(function(){(parseFloat(Ve.text)==0||Ve.text=="")&&(Ve.text="0",$r(Ve,"g")),V==Ve.name&&(V="")}),Ve.onTextChangedObservable.add(function(){V==Ve.name&&$r(Ve,"g")}),rt.addControl(Ve,1,2);var ke=new b.InputText;ke.width=.95,ke.height=.72,ke.name="bDecField",ke.fontSize=ae,ke.text=Xr.b.toString(),ke.color=F,ke.background=L,ke.onFocusObservable.add(function(){V=ke.name,w=ke.text,Et(!1)}),ke.onBlurObservable.add(function(){(parseFloat(ke.text)==0||ke.text=="")&&(ke.text="0",$r(ke,"b")),V==ke.name&&(V="")}),ke.onTextChangedObservable.add(function(){V==ke.name&&$r(ke,"b")}),rt.addControl(ke,2,2);var _r=new o.Grid;_r.name="Hex Value",_r.width=.82,_r.addRowDefinition(1,!1),_r.addColumnDefinition(.1,!1),_r.addColumnDefinition(.9,!1),lr.addControl(_r,2,0);var En=new t.TextBlock;En.text="#",En.color=N,En.fontSize=ae,_r.addControl(En,0,0);var ye=new b.InputText;ye.width=.96,ye.height=.72,ye.name="hexField",ye.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_CENTER,ye.fontSize=ae;var Ac=u.lastColor.split("#");ye.text=Ac[1],ye.color=F,ye.background=L,ye.onFocusObservable.add(function(){V=ye.name,w=ye.text,Et(!1)}),ye.onBlurObservable.add(function(){if(ye.text.length==3){var ie=ye.text.split("");ye.text=ie[0]+ie[0]+ie[1]+ie[1]+ie[2]+ie[2]}ye.text==""&&(ye.text="000000",Nt(l.Color3.FromHexString(ye.text),"b")),V==ye.name&&(V="")}),ye.onTextChangedObservable.add(function(){var ie=ye.text,ve=/[^0-9A-F]/i.test(ie);if((ye.text.length>6||ve)&&V==ye.name)ye.text=w;else{if(ye.text.length<6)for(var se=6-ye.text.length,it=0;it<se;it++)ie="0"+ie;if(ye.text.length==3){var xe=ye.text.split("");ie=xe[0]+xe[0]+xe[1]+xe[1]+xe[2]+xe[2]}ie="#"+ie,V==ye.name&&(w=ye.text,Nt(l.Color3.FromHexString(ie),ye.name))}}),_r.addControl(ye,0,1),u.savedColors&&u.savedColors.length>0&&zo("",A);function Nt(ie,ve){V=ve;var se=ie.toHexString();if(we.background=se,Ue.name!=V&&(Ue.text=Math.floor(ie.r*255).toString()),Qe.name!=V&&(Qe.text=Math.floor(ie.g*255).toString()),Ge.name!=V&&(Ge.text=Math.floor(ie.b*255).toString()),Ne.name!=V&&(Ne.text=ie.r.toString()),Ve.name!=V&&(Ve.text=ie.g.toString()),ke.name!=V&&(ke.text=ie.b.toString()),ye.name!=V){var it=se.split("#");ye.text=it[1]}pe.name!=V&&(pe.value=ie)}function Zr(ie,ve){var se=ie.text,it=/[^0-9]/g.test(se);if(it){ie.text=w;return}else se!=""&&(Math.floor(parseInt(se))<0?se="0":Math.floor(parseInt(se))>255?se="255":isNaN(parseInt(se))&&(se="0")),V==ie.name&&(w=se);if(se!=""){se=parseInt(se).toString(),ie.text=se;var xe=l.Color3.FromHexString(we.background);V==ie.name&&(ve=="r"?Nt(new l.Color3(parseInt(se)/255,xe.g,xe.b),ie.name):ve=="g"?Nt(new l.Color3(xe.r,parseInt(se)/255,xe.b),ie.name):Nt(new l.Color3(xe.r,xe.g,parseInt(se)/255),ie.name))}}function $r(ie,ve){var se=ie.text,it=/[^0-9.]/g.test(se);if(it){ie.text=w;return}else se!=""&&se!="."&&parseFloat(se)!=0&&(parseFloat(se)<0?se="0.0":parseFloat(se)>1?se="1.0":isNaN(parseFloat(se))&&(se="0.0")),V==ie.name&&(w=se);se!=""&&se!="."&&parseFloat(se)!=0?(se=parseFloat(se).toString(),ie.text=se):se="0.0";var xe=l.Color3.FromHexString(we.background);V==ie.name&&(ve=="r"?Nt(new l.Color3(parseFloat(se),xe.g,xe.b),ie.name):ve=="g"?Nt(new l.Color3(xe.r,parseFloat(se),xe.b),ie.name):Nt(new l.Color3(xe.r,xe.g,parseFloat(se)),ie.name))}function Lc(ie){u.savedColors&&u.savedColors.splice(ie,1),u.savedColors&&u.savedColors.length==0&&(Wo(!1),S=!1)}function Fc(){if(u.savedColors&&u.savedColors[k]){var ie=void 0;S?ie="b":ie="";var ve=_.Button.CreateSimpleButton("Swatch_"+k,ie);ve.fontFamily="coreglyphs";var se=l.Color3.FromHexString(u.savedColors[k]),it=se.r+se.g+se.b;it>le?ve.color=fe:ve.color=ue,ve.fontSize=Math.floor(O*.7),ve.textBlock.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_CENTER,ve.height=ve.width=O.toString()+"px",ve.background=u.savedColors[k],ve.thickness=2;var xe=k;return ve.pointerDownAnimation=function(){ve.thickness=4},ve.pointerUpAnimation=function(){ve.thickness=3},ve.pointerEnterAnimation=function(){ve.thickness=3},ve.pointerOutAnimation=function(){ve.thickness=2},ve.onPointerClickObservable.add(function(){S?(Lc(xe),zo("",A)):u.savedColors&&Nt(l.Color3.FromHexString(u.savedColors[xe]),ve.name)}),ve}else return null}function Et(ie){ie!==void 0&&(S=ie);var ve;if(S){for(var se=0;se<I.children.length;se++)ve=I.children[se],ve.textBlock.text="b";ce!==void 0&&(ce.textBlock.text="Done")}else{for(var se=0;se<I.children.length;se++)ve=I.children[se],ve.textBlock.text="";ce!==void 0&&(ce.textBlock.text="Edit")}}function zo(ie,ve){if(u.savedColors){ie!=""&&u.savedColors.push(ie),k=0,I.clearControls();var se=Math.ceil(u.savedColors.length/u.numSwatchesPerLine),it=void 0;if(se==0?it=0:it=se+1,I.rowCount!=se+it){for(var xe=I.rowCount,Jr=0;Jr<xe;Jr++)I.removeRowDefinition(0);for(var Jr=0;Jr<se+it;Jr++)Jr%2?I.addRowDefinition(O,!0):I.addRowDefinition(y,!0)}I.height=(O*se+it*y).toString()+"px";for(var Go=1,Ho=1;Go<se+it;Go+=2,Ho++){var jo=void 0;u.savedColors.length>Ho*u.numSwatchesPerLine?jo=u.numSwatchesPerLine:jo=u.savedColors.length-(Ho-1)*u.numSwatchesPerLine;for(var wc=Math.min(Math.max(jo,0),u.numSwatchesPerLine),Ko=0,ll=1;Ko<wc;Ko++)if(!(Ko>u.numSwatchesPerLine)){var _l=Fc();if(_l!=null)I.addControl(_l,Go,ll),ll+=2,k++;else continue}}u.savedColors.length>=u.swatchLimit?Uo(ve,!0):Uo(ve,!1)}}function Wo(ie){ie?(ce=_.Button.CreateSimpleButton("butEdit","Edit"),ce.width=Dr,ce.height=Yr,ce.left=Math.floor(parseInt(Dr)*.1).toString()+"px",ce.top=(parseFloat(ce.left)*-1).toString()+"px",ce.verticalAlignment=g.Control.VERTICAL_ALIGNMENT_BOTTOM,ce.horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,ce.thickness=2,ce.color=N,ce.fontSize=ae,ce.background=W,ce.onPointerEnterObservable.add(function(){ce.background=Q}),ce.onPointerOutObservable.add(function(){ce.background=W}),ce.pointerDownAnimation=function(){ce.background=U},ce.pointerUpAnimation=function(){ce.background=Q},ce.onPointerClickObservable.add(function(){S?S=!1:S=!0,Et()}),de.addControl(ce,1,0)):de.removeControl(ce)}function Uo(ie,ve){ve?(ie.color=H,ie.background=Y):(ie.color=N,ie.background=W)}function Qo(ie){u.savedColors&&u.savedColors.length>0?f({savedColors:u.savedColors,pickedColor:ie}):f({pickedColor:ie}),s.removeControl(G)}})},a._Epsilon=1e-6,(0,c.__decorate)([(0,l.serialize)()],a.prototype,"value",null),(0,c.__decorate)([(0,l.serialize)()],a.prototype,"width",null),(0,c.__decorate)([(0,l.serialize)()],a.prototype,"height",null),(0,c.__decorate)([(0,l.serialize)()],a.prototype,"size",null),a}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.ColorPicker",e)},"../../../dev/gui/src/2D/controls/container.ts":(B,E,d)=>{d.r(E),d.d(E,{Container:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/measure.ts"),v=d("../../../dev/gui/src/2D/math2D.ts"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._children=new Array,i._measureForChildren=b.Measure.Empty(),i._background="",i._backgroundGradient=null,i._adaptWidthToChildren=!1,i._adaptHeightToChildren=!1,i._renderToIntermediateTexture=!1,i._intermediateTexture=null,i.logLayoutCycleErrors=!1,i.maxLayoutCycle=3,i.onControlAddedObservable=new l.Observable,i.onControlRemovedObservable=new l.Observable,i._inverseTransformMatrix=v.Matrix2D.Identity(),i._inverseMeasure=new b.Measure(0,0,0,0),i}return Object.defineProperty(t.prototype,"renderToIntermediateTexture",{get:function(){return this._renderToIntermediateTexture},set:function(e){this._renderToIntermediateTexture!==e&&(this._renderToIntermediateTexture=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptHeightToChildren",{get:function(){return this._adaptHeightToChildren},set:function(e){this._adaptHeightToChildren!==e&&(this._adaptHeightToChildren=e,e&&(this.height="100%"),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptWidthToChildren",{get:function(){return this._adaptWidthToChildren},set:function(e){this._adaptWidthToChildren!==e&&(this._adaptWidthToChildren=e,e&&(this.width="100%"),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background!==e&&(this._background=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundGradient",{get:function(){return this._backgroundGradient},set:function(e){this._backgroundGradient!==e&&(this._backgroundGradient=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(e){this._isReadOnly=e;for(var i=0,a=this._children;i<a.length;i++){var s=a[i];s.isReadOnly=e}},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"Container"},t.prototype._flagDescendantsAsMatrixDirty=function(){for(var e=0,i=this.children;e<i.length;e++){var a=i[e];a._isClipped=!1,a._markMatrixAsDirty()}},t.prototype.getChildByName=function(e){for(var i=0,a=this.children;i<a.length;i++){var s=a[i];if(s.name===e)return s}return null},t.prototype.getChildByType=function(e,i){for(var a=0,s=this.children;a<s.length;a++){var u=s[a];if(u.typeName===i)return u}return null},t.prototype.containsControl=function(e){return this.children.indexOf(e)!==-1},t.prototype.addControl=function(e){if(!e)return this;var i=this._children.indexOf(e);return i!==-1?this:(e._link(this._host),e._markAllAsDirty(),this._reOrderControl(e),this._markAsDirty(),this.onControlAddedObservable.notifyObservers(e),this)},t.prototype.clearControls=function(){for(var e=this.children.slice(),i=0,a=e;i<a.length;i++){var s=a[i];this.removeControl(s)}return this},t.prototype.removeControl=function(e){var i=this._children.indexOf(e);return i!==-1&&(this._children.splice(i,1),e.parent=null),e.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(e),this._markAsDirty(),this.onControlRemovedObservable.notifyObservers(e),this},t.prototype._reOrderControl=function(e){var i=e.linkedMesh;this.removeControl(e);for(var a=!1,s=0;s<this._children.length;s++)if(this._children[s].zIndex>e.zIndex){this._children.splice(s,0,e),a=!0;break}a||this._children.push(e),e.parent=this,i&&e.linkWithMesh(i),this._markAsDirty()},t.prototype._offsetLeft=function(e){o.prototype._offsetLeft.call(this,e);for(var i=0,a=this._children;i<a.length;i++){var s=a[i];s._offsetLeft(e)}},t.prototype._offsetTop=function(e){o.prototype._offsetTop.call(this,e);for(var i=0,a=this._children;i<a.length;i++){var s=a[i];s._offsetTop(e)}},t.prototype._markAllAsDirty=function(){o.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()},t.prototype._getBackgroundColor=function(e){return this._backgroundGradient?this._backgroundGradient.getCanvasGradient(e):this._background},t.prototype._localDraw=function(e){(this._background||this._backgroundGradient)&&(e.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY),e.fillStyle=this._getBackgroundColor(e),e.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),e.restore())},t.prototype._link=function(e){o.prototype._link.call(this,e);for(var i=0,a=this._children;i<a.length;i++){var s=a[i];s._link(e)}},t.prototype._beforeLayout=function(){},t.prototype._processMeasures=function(e,i){(this._isDirty||!this._cachedParentMeasure.isEqualsTo(e))&&(o.prototype._processMeasures.call(this,e,i),this._evaluateClippingState(e),this._renderToIntermediateTexture&&(this._intermediateTexture&&this._host.getScene()!=this._intermediateTexture.getScene()&&(this._intermediateTexture.dispose(),this._intermediateTexture=null),this._intermediateTexture?this._intermediateTexture.scaleTo(this._currentMeasure.width,this._currentMeasure.height):(this._intermediateTexture=new l.DynamicTexture("",{width:this._currentMeasure.width,height:this._currentMeasure.height},this._host.getScene(),!1,l.Texture.NEAREST_SAMPLINGMODE,l.Constants.TEXTUREFORMAT_RGBA,!1),this._intermediateTexture.hasAlpha=!0)))},t.prototype._layout=function(e,i){var a,s;if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++,this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var u=0;i.save(),this._applyStates(i),this._beforeLayout();do{var f=-1,m=-1;if(this._rebuildLayout=!1,this._processMeasures(e,i),!this._isClipped){for(var P=0,y=this._children;P<y.length;P++){var M=y[P];M._tempParentMeasure.copyFrom(this._measureForChildren),M._layout(this._measureForChildren,i)&&M.isVisible&&!M.notRenderable&&(this.adaptWidthToChildren&&M._width.isPixel&&(f=Math.max(f,M._currentMeasure.width+M._paddingLeftInPixels+M._paddingRightInPixels)),this.adaptHeightToChildren&&M._height.isPixel&&(m=Math.max(m,M._currentMeasure.height+M._paddingTopInPixels+M._paddingBottomInPixels)))}this.adaptWidthToChildren&&f>=0&&(f+=this.paddingLeftInPixels+this.paddingRightInPixels,this.width!==f+"px"&&((a=this.parent)===null||a===void 0||a._markAsDirty(),this.width=f+"px",this._width.ignoreAdaptiveScaling=!0,this._rebuildLayout=!0)),this.adaptHeightToChildren&&m>=0&&(m+=this.paddingTopInPixels+this.paddingBottomInPixels,this.height!==m+"px"&&((s=this.parent)===null||s===void 0||s._markAsDirty(),this.height=m+"px",this._height.ignoreAdaptiveScaling=!0,this._rebuildLayout=!0)),this._postMeasure()}u++}while(this._rebuildLayout&&u<this.maxLayoutCycle);return u>=3&&this.logLayoutCycleErrors&&l.Logger.Error("Layout cycle detected in GUI (Container name=".concat(this.name,", uniqueId=").concat(this.uniqueId,")")),i.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0},t.prototype._postMeasure=function(){},t.prototype._draw=function(e,i){var a=this._renderToIntermediateTexture&&this._intermediateTexture,s=a?this._intermediateTexture.getContext():e;a&&(s.save(),s.translate(-this._currentMeasure.left,-this._currentMeasure.top),i?(this._transformMatrix.invertToRef(this._inverseTransformMatrix),i.transformToRef(this._inverseTransformMatrix,this._inverseMeasure),s.clearRect(this._inverseMeasure.left,this._inverseMeasure.top,this._inverseMeasure.width,this._inverseMeasure.height)):s.clearRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._localDraw(s),e.save(),this.clipChildren&&this._clipForChildren(s);for(var u=0,f=this._children;u<f.length;u++){var m=f[u];i&&!m._intersectsRect(i)||m._render(s,i)}a&&(s.restore(),e.save(),e.globalAlpha=this.alpha,e.drawImage(s.canvas,this._currentMeasure.left,this._currentMeasure.top),e.restore()),e.restore()},t.prototype.getDescendantsToRef=function(e,i,a){if(i===void 0&&(i=!1),!!this.children)for(var s=0;s<this.children.length;s++){var u=this.children[s];(!a||a(u))&&e.push(u),i||u.getDescendantsToRef(e,!1,a)}},t.prototype._processPicking=function(e,i,a,s,u,f,m,P){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;var y=o.prototype.contains.call(this,e,i);if(!y&&this.clipChildren)return!1;for(var M=this._children.length-1;M>=0;M--){var O=this._children[M];if(O._processPicking(e,i,a,s,u,f,m,P))return O.hoverCursor&&this._host._changeCursor(O.hoverCursor),!0}return!y||!this.isHitTestVisible?!1:this._processObservables(s,e,i,a,u,f,m,P)},t.prototype._additionalProcessing=function(e,i){o.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(this._currentMeasure)},t.prototype.serialize=function(e){if(o.prototype.serialize.call(this,e),this.backgroundGradient&&(e.backgroundGradient={},this.backgroundGradient.serialize(e.backgroundGradient)),!!this.children.length){e.children=[];for(var i=0,a=this.children;i<a.length;i++){var s=a[i],u={};s.serialize(u),e.children.push(u)}}},t.prototype.dispose=function(){var e;o.prototype.dispose.call(this);for(var i=this.children.length-1;i>=0;i--)this.children[i].dispose();(e=this._intermediateTexture)===null||e===void 0||e.dispose()},t.prototype._parseFromContent=function(e,i){var a;if(o.prototype._parseFromContent.call(this,e,i),this._link(i),e.backgroundGradient){var s=l.Tools.Instantiate("BABYLON.GUI."+e.backgroundGradient.className);this._backgroundGradient=new s,(a=this._backgroundGradient)===null||a===void 0||a.parse(e.backgroundGradient)}if(e.children)for(var u=0,f=e.children;u<f.length;u++){var m=f[u];this.addControl(g.Control.Parse(m,i))}},t.prototype.isReady=function(){for(var e=0,i=this.children;e<i.length;e++){var a=i[e];if(!a.isReady())return!1}return!0},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"renderToIntermediateTexture",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"maxLayoutCycle",void 0),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"adaptHeightToChildren",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"adaptWidthToChildren",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"background",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"backgroundGradient",null),t}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.Container",_)},"../../../dev/gui/src/2D/controls/control.ts":(B,E,d)=>{d.r(E),d.d(E,{Control:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/valueAndUnit.ts"),b=d("../../../dev/gui/src/2D/measure.ts"),v=d("../../../dev/gui/src/2D/math2D.ts"),_=function(){function o(t){this.name=t,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=b.Measure.Empty(),this._tempPaddingMeasure=b.Measure.Empty(),this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new g.ValueAndUnit(18,g.ValueAndUnit.UNITMODE_PIXEL,!1),this._width=new g.ValueAndUnit(1,g.ValueAndUnit.UNITMODE_PERCENTAGE,!1),this._height=new g.ValueAndUnit(1,g.ValueAndUnit.UNITMODE_PERCENTAGE,!1),this._color="",this._style=null,this._horizontalAlignment=o.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=o.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=b.Measure.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=b.Measure.Empty(),this._cachedParentMeasure=b.Measure.Empty(),this._descendantsOnlyPadding=!1,this._paddingLeft=new g.ValueAndUnit(0),this._paddingRight=new g.ValueAndUnit(0),this._paddingTop=new g.ValueAndUnit(0),this._paddingBottom=new g.ValueAndUnit(0),this._left=new g.ValueAndUnit(0),this._top=new g.ValueAndUnit(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=v.Matrix2D.Identity(),this._invertTransformMatrix=v.Matrix2D.Identity(),this._transformedPosition=l.Vector2.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._highlightColor="#4affff",this._highlightLineWidth=2,this._fontSet=!1,this._dummyVector2=l.Vector2.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._evaluatedMeasure=new b.Measure(0,0,0,0),this._evaluatedParentMeasure=new b.Measure(0,0,0,0),this._isEnabled=!0,this._disabledColor="#9a9a9a",this._disabledColorItem="#6a6a6a",this._isReadOnly=!1,this._gradient=null,this._rebuildLayout=!1,this._customData={},this._isClipped=!1,this._automaticSize=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this._clipChildren=!0,this._clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._previousShadowBlur=0,this._shadowColor="black",this.hoverCursor="",this._linkOffsetX=new g.ValueAndUnit(0),this._linkOffsetY=new g.ValueAndUnit(0),this._accessibilityTag=null,this.onAccessibilityTagChangedObservable=new l.Observable,this.onWheelObservable=new l.Observable,this.onPointerMoveObservable=new l.Observable,this.onPointerOutObservable=new l.Observable,this.onPointerDownObservable=new l.Observable,this.onPointerUpObservable=new l.Observable,this.onPointerClickObservable=new l.Observable,this.onPointerEnterObservable=new l.Observable,this.onDirtyObservable=new l.Observable,this.onBeforeDrawObservable=new l.Observable,this.onAfterDrawObservable=new l.Observable,this.onDisposeObservable=new l.Observable,this.onIsVisibleChangedObservable=new l.Observable,this._fixedRatio=0,this._fixedRatioMasterIsWidth=!0,this.animations=null,this._tmpMeasureA=new b.Measure(0,0,0,0)}return Object.defineProperty(o.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(t){this._isReadOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"transformedMeasure",{get:function(){return this._evaluatedMeasure},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"clipChildren",{get:function(){return this._clipChildren},set:function(t){this._clipChildren=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"clipContent",{get:function(){return this._clipContent},set:function(t){this._clipContent=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur!==t&&(this._previousShadowBlur=this._shadowBlur,this._shadowBlur=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!1,configurable:!0}),o.prototype.getClassName=function(){return this._getTypeName()},Object.defineProperty(o.prototype,"accessibilityTag",{get:function(){return this._accessibilityTag},set:function(t){this._accessibilityTag=t,this.onAccessibilityTagChangedObservable.notifyObservers(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"host",{get:function(){return this._host},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontOffset",{get:function(){return this._fontOffset},set:function(t){this._fontOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"highlightLineWidth",{get:function(){return this._highlightLineWidth},set:function(t){this._highlightLineWidth!==t&&(this._highlightLineWidth=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"highlightColor",{get:function(){return this._highlightColor},set:function(t){this._highlightColor!==t&&(this._highlightColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"transformCenterY",{get:function(){return this._transformCenterY},set:function(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"transformCenterX",{get:function(){return this._transformCenterX},set:function(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fixedRatio",{get:function(){return this._fixedRatio},set:function(t){this._fixedRatio!==t&&(this._fixedRatio=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fixedRatioMasterIsWidth",{get:function(){return this._fixedRatioMasterIsWidth},set:function(t){this._fixedRatioMasterIsWidth!==t&&(this._fixedRatioMasterIsWidth=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._fixedRatioMasterIsWidth=!0,this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"widthInPixels",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!0,this.width=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._fixedRatioMasterIsWidth=!1,this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"heightInPixels",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!1,this.height=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"style",{get:function(){return this._style},set:function(t){var e=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add(function(){e._markAsDirty(),e._resetFontCache()})),this._markAsDirty(),this._resetFontCache()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_isFontSizeInPercentage",{get:function(){return this._fontSize.isPercentage},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontSizeInPixels",{get:function(){var t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.fontSize=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gradient",{get:function(){return this._gradient},set:function(t){this._gradient!==t&&(this._gradient=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"notRenderable",{get:function(){return this._doNotRender},set:function(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0),this.onIsVisibleChangedObservable.notifyObservers(t))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"linkedMesh",{get:function(){return this._linkedMesh},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"descendantsOnlyPadding",{get:function(){return this._descendantsOnlyPadding},set:function(t){this._descendantsOnlyPadding!==t&&(this._descendantsOnlyPadding=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingLeft",{get:function(){return this._paddingLeft.toString(this._host)},set:function(t){this._paddingLeft.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingLeftInPixels",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingLeft=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_paddingLeftInPixels",{get:function(){return this._descendantsOnlyPadding?0:this.paddingLeftInPixels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingRight",{get:function(){return this._paddingRight.toString(this._host)},set:function(t){this._paddingRight.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingRightInPixels",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingRight=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_paddingRightInPixels",{get:function(){return this._descendantsOnlyPadding?0:this.paddingRightInPixels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingTop",{get:function(){return this._paddingTop.toString(this._host)},set:function(t){this._paddingTop.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingTopInPixels",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingTop=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_paddingTopInPixels",{get:function(){return this._descendantsOnlyPadding?0:this.paddingTopInPixels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingBottom",{get:function(){return this._paddingBottom.toString(this._host)},set:function(t){this._paddingBottom.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingBottomInPixels",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingBottom=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_paddingBottomInPixels",{get:function(){return this._descendantsOnlyPadding?0:this.paddingBottomInPixels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){return this._left.toString(this._host)},set:function(t){this._left.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"leftInPixels",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.left=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"top",{get:function(){return this._top.toString(this._host)},set:function(t){this._top.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"topInPixels",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.top=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"linkOffsetX",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"linkOffsetXInPixels",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.linkOffsetX=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"linkOffsetY",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"linkOffsetYInPixels",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.linkOffsetY=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"centerX",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"centerY",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){var e=this;if(this._isEnabled!==t){this._isEnabled=t,this._markAsDirty();var i=function(a){if(a.host){for(var s in a.host._lastControlOver)a===e.host._lastControlOver[s]&&(a._onPointerOut(a,null,!0),delete a.host._lastControlOver[s]);a.children!==void 0&&a.children.forEach(i)}};i(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"disabledColor",{get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"disabledColorItem",{get:function(){return this._disabledColorItem},set:function(t){this._disabledColorItem!==t&&(this._disabledColorItem=t,this._markAsDirty())},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"Control"},o.prototype.getAscendantOfClass=function(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null},o.prototype.markAsDirty=function(t){t===void 0&&(t=!1),this._markAsDirty(t)},o.prototype.markAllAsDirty=function(){this._markAllAsDirty()},o.prototype._resetFontCache=function(){this._fontSet=!0,this._markAsDirty()},o.prototype.isAscendant=function(t){return this.parent?this.parent===t?!0:this.parent.isAscendant(t):!1},o.prototype.getLocalCoordinates=function(t){var e=l.Vector2.Zero();return this.getLocalCoordinatesToRef(t,e),e},o.prototype.getLocalCoordinatesToRef=function(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this},o.prototype.getParentLocalCoordinates=function(t){var e=l.Vector2.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e},o.prototype.moveToVector3=function(t,e){if(!this._host||this.parent!==this._host._rootContainer){l.Tools.Error("Cannot move a control to a vector3 if the control is not at root level");return}this.horizontalAlignment=o.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=o.VERTICAL_ALIGNMENT_TOP;var i=this._host._getGlobalViewport(),a=l.Vector3.Project(t,l.Matrix.IdentityReadOnly,e.getTransformMatrix(),i);if(this._moveToProjectedPosition(a),a.z<0||a.z>1){this.notRenderable=!0;return}this.notRenderable=!1},o.prototype.getDescendantsToRef=function(t,e,i){},o.prototype.getDescendants=function(t,e){var i=new Array;return this.getDescendantsToRef(i,t,e),i},o.prototype.linkWithMesh=function(t){if(!this._host||this.parent&&this.parent!==this._host._rootContainer){t&&l.Tools.Error("Cannot link a control to a mesh if the control is not at root level");return}var e=this._host._linkedControls.indexOf(this);if(e!==-1){this._linkedMesh=t,t||this._host._linkedControls.splice(e,1);return}else if(!t)return;this.horizontalAlignment=o.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=o.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=t,this._host._linkedControls.push(this)},o.prototype.setPadding=function(t,e,i,a){var s=t,u=e??s,f=i??s,m=a??u;this.paddingTop=s,this.paddingRight=u,this.paddingBottom=f,this.paddingLeft=m},o.prototype.setPaddingInPixels=function(t,e,i,a){var s=t,u=e??s,f=i??s,m=a??u;this.paddingTopInPixels=s,this.paddingRightInPixels=u,this.paddingBottomInPixels=f,this.paddingLeftInPixels=m},o.prototype._moveToProjectedPosition=function(t){var e,i=this._left.getValue(this._host),a=this._top.getValue(this._host),s=(e=this.parent)===null||e===void 0?void 0:e._currentMeasure;s&&this._processMeasures(s,this._host.getContext());var u=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,f=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2,m=this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling;m&&(Math.abs(u-i)<.5&&(u=i),Math.abs(f-a)<.5&&(f=a)),!(!m&&i===u&&a===f)&&(this.left=u+"px",this.top=f+"px",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty())},o.prototype._offsetLeft=function(t){this._isDirty=!0,this._currentMeasure.left+=t},o.prototype._offsetTop=function(t){this._isDirty=!0,this._currentMeasure.top+=t},o.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()},o.prototype._flagDescendantsAsMatrixDirty=function(){},o.prototype._intersectsRect=function(t,e){return this._transform(e),!(this._evaluatedMeasure.left>=t.left+t.width||this._evaluatedMeasure.top>=t.top+t.height||this._evaluatedMeasure.left+this._evaluatedMeasure.width<=t.left||this._evaluatedMeasure.top+this._evaluatedMeasure.height<=t.top)},o.prototype._computeAdditionalOffsetX=function(){return 0},o.prototype._computeAdditionalOffsetY=function(){return 0},o.prototype.invalidateRect=function(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization){this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),b.Measure.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA);var t=this.shadowOffsetX,e=this.shadowOffsetY,i=Math.max(this._previousShadowBlur,this.shadowBlur),a=Math.min(Math.min(t,0)-i*2,0),s=Math.max(Math.max(t,0)+i*2,0),u=Math.min(Math.min(e,0)-i*2,0),f=Math.max(Math.max(e,0)+i*2,0),m=this._computeAdditionalOffsetX(),P=this._computeAdditionalOffsetY();this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+a-m),Math.floor(this._tmpMeasureA.top+u-P),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+s+m),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+f+P))}},o.prototype._markAsDirty=function(t){t===void 0&&(t=!1),!(!this._isVisible&&!t)&&(this._isDirty=!0,this._markMatrixAsDirty(),this._host&&this._host.markAsDirty())},o.prototype._markAllAsDirty=function(){this._markAsDirty(),this._font&&this._prepareFont()},o.prototype._link=function(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())},o.prototype._transform=function(t){if(!(!this._isMatrixDirty&&this._scaleX===1&&this._scaleY===1&&this._rotation===0)){var e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),v.Matrix2D.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix),this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure))}},o.prototype._renderHighlight=function(t){this.isHighlighted&&(t.save(),t.strokeStyle=this._highlightColor,t.lineWidth=this._highlightLineWidth,this._renderHighlightSpecific(t),t.restore())},o.prototype._renderHighlightSpecific=function(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)},o.prototype._getColor=function(t){return this.gradient?this.gradient.getCanvasGradient(t):this.color},o.prototype._applyStates=function(t){this._isFontSizeInPercentage&&(this._fontSet=!0),this._host&&this._host.useSmallestIdeal&&!this._font&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(t.font=this._font),(this._color||this.gradient)&&(t.fillStyle=this._getColor(t)),o.AllowAlphaInheritance?t.globalAlpha*=this._alpha:this._alphaSet&&(t.globalAlpha=this.parent&&!this.parent.renderToIntermediateTexture?this.parent.alpha*this._alpha:this._alpha)},o.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this.host._numLayoutCalls++,this._currentMeasure.addAndTransformToRef(this._transformMatrix,-this._paddingLeftInPixels|0,-this._paddingTopInPixels|0,this._paddingRightInPixels|0,this._paddingBottomInPixels|0,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);var i=0;do this._rebuildLayout=!1,this._processMeasures(t,e),i++;while(this._rebuildLayout&&i<3);i>=3&&l.Logger.Error("Layout cycle detected in GUI (Control name=".concat(this.name,", uniqueId=").concat(this.uniqueId,")")),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0},o.prototype._processMeasures=function(t,e){this._tempPaddingMeasure.copyFrom(t),this.parent&&this.parent.descendantsOnlyPadding&&(this._tempPaddingMeasure.left+=this.parent.paddingLeftInPixels,this._tempPaddingMeasure.top+=this.parent.paddingTopInPixels,this._tempPaddingMeasure.width-=this.parent.paddingLeftInPixels+this.parent.paddingRightInPixels,this._tempPaddingMeasure.height-=this.parent.paddingTopInPixels+this.parent.paddingBottomInPixels),this._currentMeasure.copyFrom(this._tempPaddingMeasure),this._preMeasure(this._tempPaddingMeasure,e),this._measure(),this._computeAlignment(this._tempPaddingMeasure,e),this._currentMeasure.left=this._currentMeasure.left|0,this._currentMeasure.top=this._currentMeasure.top|0,this._currentMeasure.width=this._currentMeasure.width|0,this._currentMeasure.height=this._currentMeasure.height|0,this._additionalProcessing(this._tempPaddingMeasure,e),this._cachedParentMeasure.copyFrom(this._tempPaddingMeasure),this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)},o.prototype._evaluateClippingState=function(t){if(this._transform(),this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure),this.parent&&this.parent.clipChildren){if(t.transformToRef(this.parent._transformMatrix,this._evaluatedParentMeasure),this._evaluatedMeasure.left>this._evaluatedParentMeasure.left+this._evaluatedParentMeasure.width){this._isClipped=!0;return}if(this._evaluatedMeasure.left+this._evaluatedMeasure.width<this._evaluatedParentMeasure.left){this._isClipped=!0;return}if(this._evaluatedMeasure.top>this._evaluatedParentMeasure.top+this._evaluatedParentMeasure.height){this._isClipped=!0;return}if(this._evaluatedMeasure.top+this._evaluatedMeasure.height<this._evaluatedParentMeasure.top){this._isClipped=!0;return}}this._isClipped=!1},o.prototype._measure=function(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host),this._fixedRatio!==0&&(this._fixedRatioMasterIsWidth?this._currentMeasure.height=this._currentMeasure.width*this._fixedRatio:this._currentMeasure.width=this._currentMeasure.height*this._fixedRatio)},o.prototype._computeAlignment=function(t,e){var i=this._currentMeasure.width,a=this._currentMeasure.height,s=t.width,u=t.height,f=0,m=0;switch(this.horizontalAlignment){case o.HORIZONTAL_ALIGNMENT_LEFT:f=0;break;case o.HORIZONTAL_ALIGNMENT_RIGHT:f=s-i;break;case o.HORIZONTAL_ALIGNMENT_CENTER:f=(s-i)/2;break}switch(this.verticalAlignment){case o.VERTICAL_ALIGNMENT_TOP:m=0;break;case o.VERTICAL_ALIGNMENT_BOTTOM:m=u-a;break;case o.VERTICAL_ALIGNMENT_CENTER:m=(u-a)/2;break}this.descendantsOnlyPadding||(this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=s*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=s*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=s*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=u*this._paddingTop.getValue(this._host),this._currentMeasure.height-=u*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=u*this._paddingBottom.getValue(this._host)),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=s*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=u*this._top.getValue(this._host),this._currentMeasure.left+=f,this._currentMeasure.top+=m},o.prototype._preMeasure=function(t,e){},o.prototype._additionalProcessing=function(t,e){},o.prototype._clipForChildren=function(t){},o.prototype._clip=function(t,e){if(t.beginPath(),o._ClipMeasure.copyFrom(this._currentMeasure),e){e.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);var i=new b.Measure(0,0,0,0);i.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),i.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),i.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-i.left,i.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-i.top,o._ClipMeasure.copyFrom(i)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var a=this.shadowOffsetX,s=this.shadowOffsetY,u=this.shadowBlur,f=Math.min(Math.min(a,0)-u*2,0),m=Math.max(Math.max(a,0)+u*2,0),P=Math.min(Math.min(s,0)-u*2,0),y=Math.max(Math.max(s,0)+u*2,0);t.rect(o._ClipMeasure.left+f,o._ClipMeasure.top+P,o._ClipMeasure.width+m-f,o._ClipMeasure.height+y-P)}else t.rect(o._ClipMeasure.left,o._ClipMeasure.top,o._ClipMeasure.width,o._ClipMeasure.height);t.clip()},o.prototype._render=function(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(this.host._numRenderCalls++,t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)},o.prototype._draw=function(t,e){},o.prototype.contains=function(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,t<this._currentMeasure.left||t>this._currentMeasure.left+this._currentMeasure.width||e<this._currentMeasure.top||e>this._currentMeasure.top+this._currentMeasure.height?!1:(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),!0)},o.prototype._processPicking=function(t,e,i,a,s,u,f,m){return!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this._doNotRender||!this.contains(t,e)?!1:(this._processObservables(a,t,e,i,s,u,f,m),!0)},o.prototype._onPointerMove=function(t,e,i,a){var s=this.onPointerMoveObservable.notifyObservers(e,-1,t,this,a);s&&this.parent!=null&&!this.isPointerBlocker&&this.parent._onPointerMove(t,e,i,a)},o.prototype._onPointerEnter=function(t,e){if(!this._isEnabled||this._enterCount>0)return!1;this._enterCount===-1&&(this._enterCount=0),this._enterCount++;var i=this.onPointerEnterObservable.notifyObservers(this,-1,t,this,e);return i&&this.parent!=null&&!this.isPointerBlocker&&this.parent._onPointerEnter(t,e),!0},o.prototype._onPointerOut=function(t,e,i){if(i===void 0&&(i=!1),!(!i&&(!this._isEnabled||t===this))){this._enterCount=0;var a=!0;t.isAscendant(this)||(a=this.onPointerOutObservable.notifyObservers(this,-1,t,this,e)),a&&this.parent!=null&&!this.isPointerBlocker&&this.parent._onPointerOut(t,e,i)}},o.prototype._onPointerDown=function(t,e,i,a,s){if(this._onPointerEnter(this,s),this._downCount!==0)return!1;this._downCount++,this._downPointerIds[i]=!0;var u=this.onPointerDownObservable.notifyObservers(new v.Vector2WithInfo(e,a),-1,t,this,s);return u&&this.parent!=null&&!this.isPointerBlocker&&this.parent._onPointerDown(t,e,i,a,s),s&&this.uniqueId!==this._host.rootContainer.uniqueId&&this._host._capturedPointerIds.add(s.event.pointerId),!0},o.prototype._onPointerUp=function(t,e,i,a,s,u){if(this._isEnabled){this._downCount=0,delete this._downPointerIds[i];var f=s;s&&(this._enterCount>0||this._enterCount===-1)&&(f=this.onPointerClickObservable.notifyObservers(new v.Vector2WithInfo(e,a),-1,t,this,u));var m=this.onPointerUpObservable.notifyObservers(new v.Vector2WithInfo(e,a),-1,t,this,u);m&&this.parent!=null&&!this.isPointerBlocker&&this.parent._onPointerUp(t,e,i,a,f,u),u&&this.uniqueId!==this._host.rootContainer.uniqueId&&this._host._capturedPointerIds.delete(u.event.pointerId)}},o.prototype._forcePointerUp=function(t){if(t===void 0&&(t=null),t!==null)this._onPointerUp(this,l.Vector2.Zero(),t,0,!0);else for(var e in this._downPointerIds)this._onPointerUp(this,l.Vector2.Zero(),+e,0,!0)},o.prototype._onWheelScroll=function(t,e){if(this._isEnabled){var i=this.onWheelObservable.notifyObservers(new l.Vector2(t,e));i&&this.parent!=null&&this.parent._onWheelScroll(t,e)}},o.prototype._onCanvasBlur=function(){},o.prototype._processObservables=function(t,e,i,a,s,u,f,m){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===l.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,s,a);var P=this._host._lastControlOver[s];return P&&P!==this&&P._onPointerOut(this,a),P!==this&&this._onPointerEnter(this,a),this._host._lastControlOver[s]=this,!0}return t===l.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,s,u,a),this._host._registerLastControlDown(this,s),this._host._lastPickedControl=this,!0):t===l.PointerEventTypes.POINTERUP?(this._host._lastControlDown[s]&&this._host._lastControlDown[s]._onPointerUp(this,this._dummyVector2,s,u,!0,a),delete this._host._lastControlDown[s],!0):t===l.PointerEventTypes.POINTERWHEEL&&this._host._lastControlOver[s]?(this._host._lastControlOver[s]._onWheelScroll(f,m),!0):!1},o.prototype._prepareFont=function(){!this._font&&!this._fontSet||(this._style?this._font=this._style.fontStyle+" "+this._style.fontWeight+" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._font=this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=o._GetFontOffset(this._font),this.getDescendants().forEach(function(t){return t._markAllAsDirty()}))},o.prototype.clone=function(t){var e={};this.serialize(e);var i=l.Tools.Instantiate("BABYLON.GUI."+e.className),a=new i;return a.parse(e,t),a},o.prototype.parse=function(t,e){var i=this;return l.SerializationHelper.Parse(function(){return i},t,null),this.name=t.name,this._parseFromContent(t,e??this._host),this},o.prototype.serialize=function(t){l.SerializationHelper.Serialize(this,t),t.name=this.name,t.className=this.getClassName(),this._prepareFont(),this._font&&(t.fontFamily=this._fontFamily,t.fontSize=this.fontSize,t.fontWeight=this.fontWeight,t.fontStyle=this.fontStyle),this._gradient&&(t.gradient={},this._gradient.serialize(t.gradient)),l.SerializationHelper.AppendSerializedAnimations(this,t)},o.prototype._parseFromContent=function(t,e){var i,a;if(t.fontFamily&&(this.fontFamily=t.fontFamily),t.fontSize&&(this.fontSize=t.fontSize),t.fontWeight&&(this.fontWeight=t.fontWeight),t.fontStyle&&(this.fontStyle=t.fontStyle),t.gradient){var s=l.Tools.Instantiate("BABYLON.GUI."+t.gradient.className);this._gradient=new s,(i=this._gradient)===null||i===void 0||i.parse(t.gradient)}if(t.animations){this.animations=[];for(var u=0;u<t.animations.length;u++){var f=t.animations[u],m=(0,l.GetClass)("BABYLON.Animation");m&&this.animations.push(m.Parse(f))}t.autoAnimate&&this._host&&this._host.getScene()&&this._host.getScene().beginAnimation(this,t.autoAnimateFrom,t.autoAnimateTo,t.autoAnimateLoop,t.autoAnimateSpeed||1)}this.fixedRatioMasterIsWidth=(a=t.fixedRatioMasterIsWidth)!==null&&a!==void 0?a:this.fixedRatioMasterIsWidth},o.prototype.dispose=function(){if(this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this.onWheelObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host){var t=this._host._linkedControls.indexOf(this);t>-1&&this.linkWithMesh(null)}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},Object.defineProperty(o,"HORIZONTAL_ALIGNMENT_LEFT",{get:function(){return o._HORIZONTAL_ALIGNMENT_LEFT},enumerable:!1,configurable:!0}),Object.defineProperty(o,"HORIZONTAL_ALIGNMENT_RIGHT",{get:function(){return o._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!1,configurable:!0}),Object.defineProperty(o,"HORIZONTAL_ALIGNMENT_CENTER",{get:function(){return o._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0}),Object.defineProperty(o,"VERTICAL_ALIGNMENT_TOP",{get:function(){return o._VERTICAL_ALIGNMENT_TOP},enumerable:!1,configurable:!0}),Object.defineProperty(o,"VERTICAL_ALIGNMENT_BOTTOM",{get:function(){return o._VERTICAL_ALIGNMENT_BOTTOM},enumerable:!1,configurable:!0}),Object.defineProperty(o,"VERTICAL_ALIGNMENT_CENTER",{get:function(){return o._VERTICAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0}),o._GetFontOffset=function(t){if(o._FontHeightSizes[t])return o._FontHeightSizes[t];var e=l.EngineStore.LastCreatedEngine;if(!e)throw new Error("Invalid engine. Unable to create a canvas.");var i=e.getFontOffset(t);return o._FontHeightSizes[t]=i,i},o.Parse=function(t,e){var i=l.Tools.Instantiate("BABYLON.GUI."+t.className),a=l.SerializationHelper.Parse(function(){return new i},t,null);return a.name=t.name,a._parseFromContent(t,e),a},o.drawEllipse=function(t,e,i,a,s){s.translate(t,e),s.scale(i,a),s.beginPath(),s.arc(0,0,1,0,2*Math.PI),s.closePath(),s.scale(1/i,1/a),s.translate(-t,-e)},o.prototype.isReady=function(){return!0},o.AllowAlphaInheritance=!1,o._ClipMeasure=new b.Measure(0,0,0,0),o._HORIZONTAL_ALIGNMENT_LEFT=0,o._HORIZONTAL_ALIGNMENT_RIGHT=1,o._HORIZONTAL_ALIGNMENT_CENTER=2,o._VERTICAL_ALIGNMENT_TOP=0,o._VERTICAL_ALIGNMENT_BOTTOM=1,o._VERTICAL_ALIGNMENT_CENTER=2,o._FontHeightSizes={},o.AddHeader=function(){},(0,c.__decorate)([(0,l.serialize)()],o.prototype,"metadata",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isHitTestVisible",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isPointerBlocker",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isFocusInvisible",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"clipChildren",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"clipContent",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"useBitmapCache",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"shadowOffsetX",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"shadowOffsetY",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"shadowBlur",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"shadowColor",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"hoverCursor",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"fontOffset",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"alpha",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"scaleX",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"scaleY",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"rotation",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"transformCenterY",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"transformCenterX",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"horizontalAlignment",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"verticalAlignment",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"fixedRatio",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"fixedRatioMasterIsWidth",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"width",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"height",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"style",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"color",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"gradient",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"zIndex",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"notRenderable",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isVisible",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"descendantsOnlyPadding",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"paddingLeft",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"paddingRight",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"paddingTop",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"paddingBottom",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"left",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"top",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"linkOffsetX",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"linkOffsetY",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isEnabled",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"disabledColor",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"disabledColorItem",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"overlapGroup",void 0),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"overlapDeltaMultiplier",void 0),o}();(0,l.RegisterClass)("BABYLON.GUI.Control",_)},"../../../dev/gui/src/2D/controls/displayGrid.ts":(B,E,d)=>{d.r(E),d.d(E,{DisplayGrid:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/control.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t.name=o,t._cellWidth=20,t._cellHeight=20,t._minorLineTickness=1,t._minorLineColor="DarkGray",t._majorLineTickness=2,t._majorLineColor="White",t._majorLineFrequency=5,t._background="Black",t._displayMajorLines=!0,t._displayMinorLines=!0,t}return Object.defineProperty(_.prototype,"displayMinorLines",{get:function(){return this._displayMinorLines},set:function(o){this._displayMinorLines!==o&&(this._displayMinorLines=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"displayMajorLines",{get:function(){return this._displayMajorLines},set:function(o){this._displayMajorLines!==o&&(this._displayMajorLines=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"background",{get:function(){return this._background},set:function(o){this._background!==o&&(this._background=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(o){this._cellWidth=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(o){this._cellHeight=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"minorLineTickness",{get:function(){return this._minorLineTickness},set:function(o){this._minorLineTickness=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"minorLineColor",{get:function(){return this._minorLineColor},set:function(o){this._minorLineColor=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"majorLineTickness",{get:function(){return this._majorLineTickness},set:function(o){this._majorLineTickness=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"majorLineColor",{get:function(){return this._majorLineColor},set:function(o){this._majorLineColor=o,this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"majorLineFrequency",{get:function(){return this._majorLineFrequency},set:function(o){this._majorLineFrequency=o,this._markAsDirty()},enumerable:!1,configurable:!0}),_.prototype._draw=function(o){if(o.save(),this._applyStates(o),this._isEnabled){this._background&&(o.fillStyle=this._background,o.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));var t=this._currentMeasure.width/this._cellWidth,e=this._currentMeasure.height/this._cellHeight,i=this._currentMeasure.left+this._currentMeasure.width/2,a=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){o.strokeStyle=this._minorLineColor,o.lineWidth=this._minorLineTickness;for(var s=-t/2+1;s<t/2;s++){var u=i+s*this.cellWidth;o.beginPath(),o.moveTo(u,this._currentMeasure.top),o.lineTo(u,this._currentMeasure.top+this._currentMeasure.height),o.stroke()}for(var f=-e/2+1;f<e/2;f++){var m=a+f*this.cellHeight;o.beginPath(),o.moveTo(this._currentMeasure.left,m),o.lineTo(this._currentMeasure.left+this._currentMeasure.width,m),o.stroke()}}if(this._displayMajorLines){o.strokeStyle=this._majorLineColor,o.lineWidth=this._majorLineTickness;for(var s=-t/2+this._majorLineFrequency;s<t/2;s+=this._majorLineFrequency){var u=i+s*this.cellWidth;o.beginPath(),o.moveTo(u,this._currentMeasure.top),o.lineTo(u,this._currentMeasure.top+this._currentMeasure.height),o.stroke()}for(var f=-e/2+this._majorLineFrequency;f<e/2;f+=this._majorLineFrequency){var m=a+f*this.cellHeight;o.moveTo(this._currentMeasure.left,m),o.lineTo(this._currentMeasure.left+this._currentMeasure.width,m),o.closePath(),o.stroke()}}}o.restore()},_.prototype._getTypeName=function(){return"DisplayGrid"},(0,c.__decorate)([(0,g.serialize)()],_.prototype,"displayMinorLines",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"displayMajorLines",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"background",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cellWidth",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cellHeight",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"minorLineTickness",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"minorLineColor",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"majorLineTickness",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"majorLineColor",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"majorLineFrequency",null),_}(l.Control);(0,g.RegisterClass)("BABYLON.GUI.DisplayGrid",b)},"../../../dev/gui/src/2D/controls/ellipse.ts":(B,E,d)=>{d.r(E),d.d(E,{Ellipse:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/container.ts"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("babylonjs/Misc/perfCounter"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._thickness=1,e}return Object.defineProperty(o.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"Ellipse"},o.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),g.Control.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),(this._backgroundGradient||this._background)&&(t.fillStyle=this._getBackgroundColor(t),t.fill()),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._thickness&&(this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.stroke()),t.restore()},o.prototype._additionalProcessing=function(t,e){_.prototype._additionalProcessing.call(this,t,e),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},o.prototype._clipForChildren=function(t){g.Control.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,t),t.clip()},o.prototype._renderHighlightSpecific=function(t){g.Control.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._highlightLineWidth/2,this._currentMeasure.height/2-this._highlightLineWidth/2,t),t.stroke()},(0,c.__decorate)([(0,b.serialize)()],o.prototype,"thickness",null),o}(l.Container);(0,b.RegisterClass)("BABYLON.GUI.Ellipse",v)},"../../../dev/gui/src/2D/controls/focusableButton.ts":(B,E,d)=>{d.r(E),d.d(E,{FocusableButton:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/button.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t.name=o,t.focusedColor=null,t._isFocused=!1,t._unfocusedColor=null,t.onFocusObservable=new g.Observable,t.onBlurObservable=new g.Observable,t.onKeyboardEventProcessedObservable=new g.Observable,t._unfocusedColor=t.color,t}return _.prototype.onBlur=function(){this._isFocused&&(this._isFocused=!1,this.focusedColor&&this._unfocusedColor!=null&&(this.color=this._unfocusedColor),this.onBlurObservable.notifyObservers(this))},_.prototype.onFocus=function(){this._isFocused=!0,this.focusedColor&&(this._unfocusedColor=this.color,this.color=this.focusedColor),this.onFocusObservable.notifyObservers(this)},_.prototype.keepsFocusWith=function(){return null},_.prototype.focus=function(){this._host.moveFocusToControl(this)},_.prototype.blur=function(){this._host.focusedControl=null},_.prototype.processKeyboard=function(o){this.onKeyboardEventProcessedObservable.notifyObservers(o,-1,this)},_.prototype._onPointerDown=function(o,t,e,i,a){return this.isReadOnly||this.focus(),v.prototype._onPointerDown.call(this,o,t,e,i,a)},_.prototype.displose=function(){v.prototype.dispose.call(this),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onKeyboardEventProcessedObservable.clear()},_}(l.Button);(0,g.RegisterClass)("BABYLON.GUI.FocusableButton",b)},"../../../dev/gui/src/2D/controls/focusableControl.ts":(B,E,d)=>{d.r(E)},"../../../dev/gui/src/2D/controls/gradient/BaseGradient.ts":(B,E,d)=>{d.r(E),d.d(E,{BaseGradient:()=>c});var c=function(){function l(){this._colorStops=[],this._gradientDirty=!0}return l.prototype._addColorStopsToCanvasGradient=function(){for(var g=0,b=this._colorStops;g<b.length;g++){var v=b[g];this._canvasGradient.addColorStop(v.offset,v.color)}},l.prototype.getCanvasGradient=function(g){return(this._gradientDirty||this._context!==g)&&(this._context=g,this._canvasGradient=this._createCanvasGradient(g),this._addColorStopsToCanvasGradient(),this._gradientDirty=!1),this._canvasGradient},l.prototype.addColorStop=function(g,b){this._colorStops.push({offset:g,color:b}),this._gradientDirty=!0},l.prototype.removeColorStop=function(g){this._colorStops=this._colorStops.filter(function(b){return b.offset!==g}),this._gradientDirty=!0},l.prototype.clearColorStops=function(){this._colorStops=[],this._gradientDirty=!0},Object.defineProperty(l.prototype,"colorStops",{get:function(){return this._colorStops},enumerable:!1,configurable:!0}),l.prototype.getClassName=function(){return"BaseGradient"},l.prototype.serialize=function(g){g.colorStops=this._colorStops,g.className=this.getClassName()},l.prototype.parse=function(g){this._colorStops=g.colorStops},l}()},"../../../dev/gui/src/2D/controls/gradient/LinearGradient.ts":(B,E,d)=>{d.r(E),d.d(E,{LinearGradient:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/gradient/BaseGradient.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o,t,e,i){var a=v.call(this)||this;return a._x0=o??0,a._y0=t??0,a._x1=e??0,a._y1=i??0,a}return _.prototype._createCanvasGradient=function(o){return o.createLinearGradient(this._x0,this._y0,this._x1,this._y1)},Object.defineProperty(_.prototype,"x0",{get:function(){return this._x0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"x1",{get:function(){return this._x1},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"y0",{get:function(){return this._y0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"y1",{get:function(){return this._y1},enumerable:!1,configurable:!0}),_.prototype.getClassName=function(){return"LinearGradient"},_.prototype.serialize=function(o){v.prototype.serialize.call(this,o),o.x0=this._x0,o.y0=this._y0,o.x1=this._x1,o.y1=this._y1},_.prototype.parse=function(o){v.prototype.parse.call(this,o),this._x0=o.x0,this._y0=o.y0,this._x1=o.x1,this._y1=o.y1},_}(l.BaseGradient);(0,g.RegisterClass)("BABYLON.GUI.LinearGradient",b)},"../../../dev/gui/src/2D/controls/gradient/RadialGradient.ts":(B,E,d)=>{d.r(E),d.d(E,{RadialGradient:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/gradient/BaseGradient.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o,t,e,i,a,s){var u=v.call(this)||this;return u._x0=o??0,u._y0=t??0,u._r0=e??0,u._x1=i??0,u._y1=a??0,u._r1=s??0,u}return _.prototype._createCanvasGradient=function(o){return o.createRadialGradient(this._x0,this._y0,this._r0,this._x1,this._y1,this._r1)},Object.defineProperty(_.prototype,"x0",{get:function(){return this._x0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"x1",{get:function(){return this._x1},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"y0",{get:function(){return this._y0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"y1",{get:function(){return this._y1},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"r0",{get:function(){return this._r0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"r1",{get:function(){return this._r1},enumerable:!1,configurable:!0}),_.prototype.getClassName=function(){return"RadialGradient"},_.prototype.serialize=function(o){v.prototype.serialize.call(this,o),o.x0=this._x0,o.y0=this._y0,o.r0=this._r0,o.x1=this._x1,o.y1=this._y1,o.r1=this._r1},_.prototype.parse=function(o){v.prototype.parse.call(this,o),this._x0=o.x0,this._y0=o.y0,this._r0=o.r0,this._x1=o.x1,this._y1=o.y1,this._r1=o.r1},_}(l.BaseGradient);(0,g.RegisterClass)("BABYLON.GUI.RadialGradient",b)},"../../../dev/gui/src/2D/controls/grid.ts":(B,E,d)=>{d.r(E),d.d(E,{Grid:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/container.ts"),g=d("../../../dev/gui/src/2D/valueAndUnit.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("babylonjs/Misc/perfCounter"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._rowDefinitions=new Array,i._rowDefinitionObservers=[],i._columnDefinitions=new Array,i._columnDefinitionObservers=[],i._cells={},i._childControls=new Array,i}return Object.defineProperty(t.prototype,"clipContent",{get:function(){return this._clipContent},set:function(e){this._clipContent=e;for(var i in this._cells)this._cells[i].clipContent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipChildren",{get:function(){return this._clipChildren},set:function(e){this._clipChildren=e;for(var i in this._cells)this._cells[i].clipChildren=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnCount",{get:function(){return this._columnDefinitions.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._rowDefinitions.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._childControls},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this._cells},enumerable:!1,configurable:!0}),t.prototype.getRowDefinition=function(e){return e<0||e>=this._rowDefinitions.length?null:this._rowDefinitions[e]},t.prototype.getColumnDefinition=function(e){return e<0||e>=this._columnDefinitions.length?null:this._columnDefinitions[e]},t.prototype.addRowDefinition=function(e,i){var a=this;return i===void 0&&(i=!1),this._rowDefinitions.push(new g.ValueAndUnit(e,i?g.ValueAndUnit.UNITMODE_PIXEL:g.ValueAndUnit.UNITMODE_PERCENTAGE)),this._rowDefinitionObservers.push(this._rowDefinitions[this.rowCount-1].onChangedObservable.add(function(){return a._markAsDirty()})),this._markAsDirty(),this},t.prototype.addColumnDefinition=function(e,i){var a=this;return i===void 0&&(i=!1),this._columnDefinitions.push(new g.ValueAndUnit(e,i?g.ValueAndUnit.UNITMODE_PIXEL:g.ValueAndUnit.UNITMODE_PERCENTAGE)),this._columnDefinitionObservers.push(this._columnDefinitions[this.columnCount-1].onChangedObservable.add(function(){return a._markAsDirty()})),this._markAsDirty(),this},t.prototype.setRowDefinition=function(e,i,a){var s=this;if(a===void 0&&(a=!1),e<0||e>=this._rowDefinitions.length)return this;var u=this._rowDefinitions[e];return u&&u.isPixel===a&&u.value===i?this:(this._rowDefinitions[e].onChangedObservable.remove(this._rowDefinitionObservers[e]),this._rowDefinitions[e]=new g.ValueAndUnit(i,a?g.ValueAndUnit.UNITMODE_PIXEL:g.ValueAndUnit.UNITMODE_PERCENTAGE),this._rowDefinitionObservers[e]=this._rowDefinitions[e].onChangedObservable.add(function(){return s._markAsDirty()}),this._markAsDirty(),this)},t.prototype.setColumnDefinition=function(e,i,a){var s=this;if(a===void 0&&(a=!1),e<0||e>=this._columnDefinitions.length)return this;var u=this._columnDefinitions[e];return u&&u.isPixel===a&&u.value===i?this:(this._columnDefinitions[e].onChangedObservable.remove(this._columnDefinitionObservers[e]),this._columnDefinitions[e]=new g.ValueAndUnit(i,a?g.ValueAndUnit.UNITMODE_PIXEL:g.ValueAndUnit.UNITMODE_PERCENTAGE),this._columnDefinitionObservers[e]=this._columnDefinitions[e].onChangedObservable.add(function(){return s._markAsDirty()}),this._markAsDirty(),this)},t.prototype.getChildrenAt=function(e,i){var a=this._cells["".concat(e,":").concat(i)];return a?a.children:null},t.prototype.getChildCellInfo=function(e){return e._tag},t.prototype._removeCell=function(e,i){if(e){o.prototype.removeControl.call(this,e);for(var a=0,s=e.children;a<s.length;a++){var u=s[a],f=this._childControls.indexOf(u);f!==-1&&this._childControls.splice(f,1)}delete this._cells[i]}},t.prototype._offsetCell=function(e,i){if(this._cells[i]){this._cells[e]=this._cells[i];for(var a=0,s=this._cells[e].children;a<s.length;a++){var u=s[a];u._tag=e}delete this._cells[i]}},t.prototype.removeColumnDefinition=function(e){if(e<0||e>=this._columnDefinitions.length)return this;for(var i=0;i<this._rowDefinitions.length;i++){var a="".concat(i,":").concat(e),s=this._cells[a];this._removeCell(s,a)}for(var i=0;i<this._rowDefinitions.length;i++)for(var u=e+1;u<this._columnDefinitions.length;u++){var f="".concat(i,":").concat(u-1),a="".concat(i,":").concat(u);this._offsetCell(f,a)}return this._columnDefinitions[e].onChangedObservable.remove(this._columnDefinitionObservers[e]),this._columnDefinitions.splice(e,1),this._columnDefinitionObservers.splice(e,1),this._markAsDirty(),this},t.prototype.removeRowDefinition=function(e){if(e<0||e>=this._rowDefinitions.length)return this;for(var i=0;i<this._columnDefinitions.length;i++){var a="".concat(e,":").concat(i),s=this._cells[a];this._removeCell(s,a)}for(var i=0;i<this._columnDefinitions.length;i++)for(var u=e+1;u<this._rowDefinitions.length;u++){var f="".concat(u-1,":").concat(i),a="".concat(u,":").concat(i);this._offsetCell(f,a)}return this._rowDefinitions[e].onChangedObservable.remove(this._rowDefinitionObservers[e]),this._rowDefinitions.splice(e,1),this._rowDefinitionObservers.splice(e,1),this._markAsDirty(),this},t.prototype.addControl=function(e,i,a){if(i===void 0&&(i=0),a===void 0&&(a=0),this._rowDefinitions.length===0&&this.addRowDefinition(1,!1),this._columnDefinitions.length===0&&this.addColumnDefinition(1,!1),this._childControls.indexOf(e)!==-1)return v.Tools.Warn("Control (Name:".concat(e.name,", UniqueId:").concat(e.uniqueId,") is already associated with this grid. You must remove it before reattaching it")),this;var s=Math.min(i,this._rowDefinitions.length-1),u=Math.min(a,this._columnDefinitions.length-1),f="".concat(s,":").concat(u),m=this._cells[f];return m||(m=new l.Container(f),this._cells[f]=m,m.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,m.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,m.clipContent=this.clipContent,m.clipChildren=this.clipChildren,o.prototype.addControl.call(this,m)),m.addControl(e),this._childControls.push(e),e._tag=f,e.parent=this,this._markAsDirty(),this},t.prototype.removeControl=function(e){var i=this._childControls.indexOf(e);i!==-1&&this._childControls.splice(i,1);var a=this._cells[e._tag];return a&&(a.removeControl(e),e._tag=null),this._markAsDirty(),this},t.prototype._getTypeName=function(){return"Grid"},t.prototype._getGridDefinitions=function(e){for(var i=[],a=[],s=[],u=[],f=this._currentMeasure.width,m=0,P=this._currentMeasure.height,y=0,M=0,O=0,x=this._rowDefinitions;O<x.length;O++){var R=x[O];if(R.isPixel){var N=R.getValue(this._host);P-=N,a[M]=N}else y+=R.value;M++}var W=0;M=0;for(var Q=0,U=this._rowDefinitions;Q<U.length;Q++){var R=U[Q];if(u.push(W),R.isPixel)W+=R.getValue(this._host);else{var N=Math.round(R.value/y*P);W+=N,a[M]=N}M++}M=0;for(var H=0,Y=this._columnDefinitions;H<Y.length;H++){var J=Y[H];if(J.isPixel){var q=J.getValue(this._host);f-=q,i[M]=q}else m+=J.value;M++}var le=0;M=0;for(var fe=0,ue=this._columnDefinitions;fe<ue.length;fe++){var J=ue[fe];if(s.push(le),J.isPixel)le+=J.getValue(this._host);else{var q=Math.round(J.value/m*f);le+=q,i[M]=q}M++}e(s,u,i,a)},t.prototype._additionalProcessing=function(e,i){var a=this;this._getGridDefinitions(function(s,u,f,m){for(var P in a._cells)if(Object.prototype.hasOwnProperty.call(a._cells,P)){var y=P.split(":"),M=parseInt(y[0]),O=parseInt(y[1]),x=a._cells[P];x.leftInPixels=s[O],x.topInPixels=u[M],x.widthInPixels=f[O],x.heightInPixels=m[M],x._left.ignoreAdaptiveScaling=!0,x._top.ignoreAdaptiveScaling=!0,x._width.ignoreAdaptiveScaling=!0,x._height.ignoreAdaptiveScaling=!0}}),o.prototype._additionalProcessing.call(this,e,i)},t.prototype._flagDescendantsAsMatrixDirty=function(){for(var e in this._cells)if(Object.prototype.hasOwnProperty.call(this._cells,e)){var i=this._cells[e];i._markMatrixAsDirty()}},t.prototype._renderHighlightSpecific=function(e){var i=this;o.prototype._renderHighlightSpecific.call(this,e),this._getGridDefinitions(function(a,s,u,f){for(var m=0;m<a.length;m++){var P=i._currentMeasure.left+a[m]+u[m];e.beginPath(),e.moveTo(P,i._currentMeasure.top),e.lineTo(P,i._currentMeasure.top+i._currentMeasure.height),e.stroke()}for(var m=0;m<s.length;m++){var y=i._currentMeasure.top+s[m]+f[m];e.beginPath(),e.moveTo(i._currentMeasure.left,y),e.lineTo(i._currentMeasure.left+i._currentMeasure.width,y),e.stroke()}}),e.restore()},t.prototype.dispose=function(){o.prototype.dispose.call(this);for(var e=0,i=this._childControls;e<i.length;e++){var a=i[e];a.dispose()}for(var s=0;s<this._rowDefinitions.length;s++)this._rowDefinitions[s].onChangedObservable.remove(this._rowDefinitionObservers[s]);for(var s=0;s<this._columnDefinitions.length;s++)this._columnDefinitions[s].onChangedObservable.remove(this._columnDefinitionObservers[s]);this._rowDefinitionObservers.length=0,this._rowDefinitions.length=0,this._columnDefinitionObservers.length=0,this._columnDefinitions.length=0,this._cells={},this._childControls.length=0},t.prototype.serialize=function(e){o.prototype.serialize.call(this,e),e.columnCount=this.columnCount,e.rowCount=this.rowCount,e.columns=[],e.rows=[],e.tags=[];for(var i=0;i<this.columnCount;++i){var a=this.getColumnDefinition(i),s={value:a==null?void 0:a.getValue(this.host),unit:a==null?void 0:a.unit};e.columns.push(s)}for(var i=0;i<this.rowCount;++i){var u=this.getRowDefinition(i),s={value:u==null?void 0:u.getValue(this.host),unit:u==null?void 0:u.unit};e.rows.push(s)}this.children.forEach(function(f){e.tags.push(f._tag)})},t.prototype._parseFromContent=function(e,i){o.prototype._parseFromContent.call(this,e,i);var a=[];this.children.forEach(function(O){a.push(O)}),this.removeRowDefinition(0),this.removeColumnDefinition(0);for(var s=0;s<e.columnCount;++s){var u=e.columns[s].value,f=e.columns[s].unit;this.addColumnDefinition(u,f===1)}for(var s=0;s<e.rowCount;++s){var m=e.rows[s].value,f=e.rows[s].unit;this.addRowDefinition(m,f===1)}for(var s=0;s<a.length;++s){var P=e.tags[s],y=parseInt(P.substring(0,P.search(":")));isNaN(y)&&(y=0);var M=parseInt(P.substring(P.search(":")+1));isNaN(M)&&(M=0),this.addControl(a[s],y,M)}},(0,c.__decorate)([(0,v.serialize)()],t.prototype,"clipContent",null),t}(l.Container);(0,v.RegisterClass)("BABYLON.GUI.Grid",_)},"../../../dev/gui/src/2D/controls/image.ts":(B,E,d)=>{d.r(E),d.d(E,{Image:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=function(v){(0,c.__extends)(_,v);function _(o,t){t===void 0&&(t=null);var e=v.call(this,o)||this;return e.name=o,e._workingCanvas=null,e._loaded=!1,e._stretch=_.STRETCH_FILL,e._autoScale=!1,e._sourceLeft=0,e._sourceTop=0,e._sourceWidth=0,e._sourceHeight=0,e._svgAttributesComputationCompleted=!1,e._isSVG=!1,e._cellWidth=0,e._cellHeight=0,e._cellId=-1,e._populateNinePatchSlicesFromImage=!1,e._imageDataCache={data:null,key:""},e.onImageLoadedObservable=new l.Observable,e.onSVGAttributesComputedObservable=new l.Observable,e.source=t,e}return Object.defineProperty(_.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),_.prototype.isReady=function(){return this.isLoaded},Object.defineProperty(_.prototype,"detectPointerOnOpaqueOnly",{get:function(){return this._detectPointerOnOpaqueOnly},set:function(o){this._detectPointerOnOpaqueOnly!==o&&(this._detectPointerOnOpaqueOnly=o)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sliceLeft",{get:function(){return this._sliceLeft},set:function(o){this._sliceLeft!==o&&(this._sliceLeft=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sliceRight",{get:function(){return this._sliceRight},set:function(o){this._sliceRight!==o&&(this._sliceRight=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sliceTop",{get:function(){return this._sliceTop},set:function(o){this._sliceTop!==o&&(this._sliceTop=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sliceBottom",{get:function(){return this._sliceBottom},set:function(o){this._sliceBottom!==o&&(this._sliceBottom=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sourceLeft",{get:function(){return this._sourceLeft},set:function(o){this._sourceLeft!==o&&(this._sourceLeft=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sourceTop",{get:function(){return this._sourceTop},set:function(o){this._sourceTop!==o&&(this._sourceTop=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sourceWidth",{get:function(){return this._sourceWidth},set:function(o){this._sourceWidth!==o&&(this._sourceWidth=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"sourceHeight",{get:function(){return this._sourceHeight},set:function(o){this._sourceHeight!==o&&(this._sourceHeight=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"imageWidth",{get:function(){return this._imageWidth},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"imageHeight",{get:function(){return this._imageHeight},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"populateNinePatchSlicesFromImage",{get:function(){return this._populateNinePatchSlicesFromImage},set:function(o){this._populateNinePatchSlicesFromImage!==o&&(this._populateNinePatchSlicesFromImage=o,this._populateNinePatchSlicesFromImage&&this._loaded&&this._extractNinePatchSliceDataFromImage())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isSVG",{get:function(){return this._isSVG},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"svgAttributesComputationCompleted",{get:function(){return this._svgAttributesComputationCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"autoScale",{get:function(){return this._autoScale},set:function(o){this._autoScale!==o&&(this._autoScale=o,o&&this._loaded&&this.synchronizeSizeWithContent())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"stretch",{get:function(){return this._stretch},set:function(o){this._stretch!==o&&(this._stretch=o,this._markAsDirty())},enumerable:!1,configurable:!0}),_.prototype._rotate90=function(o,t){var e,i;t===void 0&&(t=!1);var a=this._domImage.width,s=this._domImage.height,u=((i=(e=this._host)===null||e===void 0?void 0:e.getScene())===null||i===void 0?void 0:i.getEngine())||l.EngineStore.LastCreatedEngine;if(!u)throw new Error("Invalid engine. Unable to create a canvas.");var f=u.createCanvas(s,a),m=f.getContext("2d");m.translate(f.width/2,f.height/2),m.rotate(o*Math.PI/2),m.drawImage(this._domImage,0,0,a,s,-a/2,-s/2,a,s);var P=f.toDataURL("image/jpg"),y=new _(this.name+"rotated",P);return t&&(y._stretch=this._stretch,y._autoScale=this._autoScale,y._cellId=this._cellId,y._cellWidth=o%1?this._cellHeight:this._cellWidth,y._cellHeight=o%1?this._cellWidth:this._cellHeight),this._handleRotationForSVGImage(this,y,o),this._imageDataCache.data=null,y},_.prototype._handleRotationForSVGImage=function(o,t,e){var i=this;o._isSVG&&(o._svgAttributesComputationCompleted?(this._rotate90SourceProperties(o,t,e),this._markAsDirty()):o.onSVGAttributesComputedObservable.addOnce(function(){i._rotate90SourceProperties(o,t,e),i._markAsDirty()}))},_.prototype._rotate90SourceProperties=function(o,t,e){var i,a,s=o.sourceLeft,u=o.sourceTop,f=o.domImage.width,m=o.domImage.height,P=s,y=u,M=o.sourceWidth,O=o.sourceHeight;if(e!=0){var x=e<0?-1:1;e=e%4;for(var R=0;R<Math.abs(e);++R)P=-(u-m/2)*x+m/2,y=(s-f/2)*x+f/2,i=[O,M],M=i[0],O=i[1],e<0?y-=O:P-=M,s=P,u=y,a=[m,f],f=a[0],m=a[1]}t.sourceLeft=P,t.sourceTop=y,t.sourceWidth=M,t.sourceHeight=O},_.prototype._extractNinePatchSliceDataFromImage=function(){var o,t,e=this._domImage.width,i=this._domImage.height;if(!this._workingCanvas){var a=((t=(o=this._host)===null||o===void 0?void 0:o.getScene())===null||t===void 0?void 0:t.getEngine())||l.EngineStore.LastCreatedEngine;if(!a)throw new Error("Invalid engine. Unable to create a canvas.");this._workingCanvas=a.createCanvas(e,i)}var s=this._workingCanvas,u=s.getContext("2d");u.drawImage(this._domImage,0,0,e,i);var f=u.getImageData(0,0,e,i);this._sliceLeft=-1,this._sliceRight=-1;for(var m=0;m<e;m++){var P=f.data[m*4+3];if(P>127&&this._sliceLeft===-1){this._sliceLeft=m;continue}if(P<127&&this._sliceLeft>-1){this._sliceRight=m;break}}this._sliceTop=-1,this._sliceBottom=-1;for(var y=0;y<i;y++){var P=f.data[y*e*4+3];if(P>127&&this._sliceTop===-1){this._sliceTop=y;continue}if(P<127&&this._sliceTop>-1){this._sliceBottom=y;break}}},Object.defineProperty(_.prototype,"domImage",{get:function(){return this._domImage},set:function(o){var t=this;this._domImage=o,this._loaded=!1,this._imageDataCache.data=null,this._domImage.width?this._onImageLoaded():this._domImage.onload=function(){t._onImageLoaded()}},enumerable:!1,configurable:!0}),_.prototype._onImageLoaded=function(){this._imageDataCache.data=null,this._imageWidth=this._domImage.width,this._imageHeight=this._domImage.height,this._loaded=!0,this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage(),this._autoScale&&this.synchronizeSizeWithContent(),this.onImageLoadedObservable.notifyObservers(this),this._markAsDirty()},Object.defineProperty(_.prototype,"source",{get:function(){return this._source},set:function(o){var t=this,e,i;if(this._source!==o){this._removeCacheUsage(this._source),this._loaded=!1,this._source=o,this._imageDataCache.data=null,o&&(o=this._svgCheck(o));var a=((i=(e=this._host)===null||e===void 0?void 0:e.getScene())===null||i===void 0?void 0:i.getEngine())||l.EngineStore.LastCreatedEngine;if(!a)throw new Error("Invalid engine. Unable to create a canvas.");if(o&&_.SourceImgCache.has(o)){var s=_.SourceImgCache.get(o);this._domImage=s.img,s.timesUsed+=1,s.loaded?this._onImageLoaded():s.waitingForLoadCallback.push(this._onImageLoaded.bind(this));return}this._domImage=a.createCanvasImage(),o&&_.SourceImgCache.set(o,{img:this._domImage,timesUsed:1,loaded:!1,waitingForLoadCallback:[this._onImageLoaded.bind(this)]}),this._domImage.onload=function(){if(o){var u=_.SourceImgCache.get(o);if(u){u.loaded=!0;for(var f=0,m=u.waitingForLoadCallback;f<m.length;f++){var P=m[f];P()}u.waitingForLoadCallback.length=0;return}}t._onImageLoaded()},o&&(l.Tools.SetCorsBehavior(o,this._domImage),l.Tools.SetReferrerPolicyBehavior(this.referrerPolicy,this._domImage),this._domImage.src=o)}},enumerable:!1,configurable:!0}),_.ResetImageCache=function(){_.SourceImgCache.clear()},_.prototype._removeCacheUsage=function(o){var t=o&&_.SourceImgCache.get(o);t&&(t.timesUsed-=1,t.timesUsed===0&&_.SourceImgCache.delete(o))},_.prototype._svgCheck=function(o){var t=this;if(window.SVGSVGElement&&o.search(/.svg#/gi)!==-1&&o.indexOf("#")===o.lastIndexOf("#")){this._isSVG=!0;var e=o.split("#")[0],i=o.split("#")[1],a=document.body.querySelector('object[data="'+e+'"]');if(a){var s=a.contentDocument;if(s&&s.documentElement){var u=s.documentElement.getAttribute("viewBox"),f=Number(s.documentElement.getAttribute("width")),m=Number(s.documentElement.getAttribute("height")),P=s.getElementById(i);if(P&&u&&f&&m)return this._getSVGAttribs(a,i),o}a.addEventListener("load",function(){t._getSVGAttribs(a,i)})}else{var y=document.createElement("object");y.data=e,y.type="image/svg+xml",y.width="0%",y.height="0%",document.body.appendChild(y),y.onload=function(){var M=document.body.querySelector('object[data="'+e+'"]');M&&t._getSVGAttribs(M,i)}}return e}else return o},_.prototype._getSVGAttribs=function(o,t){var e=o.contentDocument;if(e&&e.documentElement){var i=e.documentElement.getAttribute("viewBox"),a=Number(e.documentElement.getAttribute("width")),s=Number(e.documentElement.getAttribute("height")),u=e.getElementById(t);if(i&&a&&s&&u){var f=Number(i.split(" ")[2]),m=Number(i.split(" ")[3]),P=u.getBBox(),y=1,M=1,O=0,x=0,R=u.transform.baseVal.consolidate().matrix;u.transform&&u.transform.baseVal.consolidate()&&(y=R.a,M=R.d,O=R.e,x=R.f),this.sourceLeft=(y*P.x+O)*a/f,this.sourceTop=(M*P.y+x)*s/m,this.sourceWidth=P.width*y*(a/f),this.sourceHeight=P.height*M*(s/m),this._svgAttributesComputationCompleted=!0,this.onSVGAttributesComputedObservable.notifyObservers(this)}}},Object.defineProperty(_.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(o){this._cellWidth!==o&&(this._cellWidth=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(o){this._cellHeight!==o&&(this._cellHeight=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cellId",{get:function(){return this._cellId},set:function(o){this._cellId!==o&&(this._cellId=o,this._markAsDirty())},enumerable:!1,configurable:!0}),_.prototype.contains=function(o,t){if(!v.prototype.contains.call(this,o,t))return!1;if(!this._detectPointerOnOpaqueOnly||!this._workingCanvas)return!0;var e=this._currentMeasure.width|0,i=this._currentMeasure.height|0,a=e+"_"+i,s=this._imageDataCache.data;if(!s||this._imageDataCache.key!==a){var u=this._workingCanvas,f=u.getContext("2d");this._imageDataCache.data=s=f.getImageData(0,0,e,i).data,this._imageDataCache.key=a}o=o-this._currentMeasure.left|0,t=t-this._currentMeasure.top|0;var m=s[(o+t*e)*4+3];return m>0},_.prototype._getTypeName=function(){return"Image"},_.prototype.synchronizeSizeWithContent=function(){this._loaded&&(this.width=this._domImage.width+"px",this.height=this._domImage.height+"px")},_.prototype._processMeasures=function(o,t){if(this._loaded)switch(this._stretch){case _.STRETCH_NONE:break;case _.STRETCH_FILL:break;case _.STRETCH_UNIFORM:break;case _.STRETCH_NINE_PATCH:break;case _.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0);break}v.prototype._processMeasures.call(this,o,t)},_.prototype._prepareWorkingCanvasForOpaqueDetection=function(){var o,t;if(this._detectPointerOnOpaqueOnly){var e=this._currentMeasure.width,i=this._currentMeasure.height;if(!this._workingCanvas){var a=((t=(o=this._host)===null||o===void 0?void 0:o.getScene())===null||t===void 0?void 0:t.getEngine())||l.EngineStore.LastCreatedEngine;if(!a)throw new Error("Invalid engine. Unable to create a canvas.");this._workingCanvas=a.createCanvas(e,i)}var s=this._workingCanvas,u=s.getContext("2d");u.clearRect(0,0,e,i)}},_.prototype._drawImage=function(o,t,e,i,a,s,u,f,m){if(o.drawImage(this._domImage,t,e,i,a,s,u,f,m),!!this._detectPointerOnOpaqueOnly){var P=this._workingCanvas;o=P.getContext("2d"),o.drawImage(this._domImage,t,e,i,a,s-this._currentMeasure.left,u-this._currentMeasure.top,f,m)}},_.prototype._draw=function(o){o.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur,o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY);var t,e,i,a;if(this.cellId==-1)t=this._sourceLeft,e=this._sourceTop,i=this._sourceWidth?this._sourceWidth:this._imageWidth,a=this._sourceHeight?this._sourceHeight:this._imageHeight;else{var s=this._domImage.naturalWidth/this.cellWidth,u=this.cellId/s>>0,f=this.cellId%s;t=this.cellWidth*f,e=this.cellHeight*u,i=this.cellWidth,a=this.cellHeight}if(this._prepareWorkingCanvasForOpaqueDetection(),this._applyStates(o),this._loaded)switch(this._stretch){case _.STRETCH_NONE:this._drawImage(o,t,e,i,a,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case _.STRETCH_FILL:this._drawImage(o,t,e,i,a,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case _.STRETCH_UNIFORM:{var m=this._currentMeasure.width/i,P=this._currentMeasure.height/a,y=Math.min(m,P),M=(this._currentMeasure.width-i*y)/2,O=(this._currentMeasure.height-a*y)/2;this._drawImage(o,t,e,i,a,this._currentMeasure.left+M,this._currentMeasure.top+O,i*y,a*y);break}case _.STRETCH_EXTEND:this._drawImage(o,t,e,i,a,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case _.STRETCH_NINE_PATCH:this._renderNinePatch(o,t,e,i,a);break}o.restore()},_.prototype._renderNinePatch=function(o,t,e,i,a){var s=this._sliceLeft,u=this._sliceTop,f=a-this._sliceBottom,m=i-this._sliceRight,P=this._sliceRight-this._sliceLeft,y=this._sliceBottom-this._sliceTop,M=this._currentMeasure.width-m-s+2,O=this._currentMeasure.height-f-u+2,x=this._currentMeasure.left+s-1,R=this._currentMeasure.top+u-1,N=this._currentMeasure.left+this._currentMeasure.width-m,W=this._currentMeasure.top+this._currentMeasure.height-f;this._drawImage(o,t,e,s,u,this._currentMeasure.left,this._currentMeasure.top,s,u),o.clearRect(x,this._currentMeasure.top,M,u),this._drawImage(o,t+this._sliceLeft,e,P,u,x,this._currentMeasure.top,M,u),o.clearRect(N,this._currentMeasure.top,m,u),this._drawImage(o,t+this._sliceRight,e,m,u,N,this._currentMeasure.top,m,u),o.clearRect(this._currentMeasure.left,R,s,O),this._drawImage(o,t,e+this._sliceTop,s,y,this._currentMeasure.left,R,s,O),o.clearRect(x,R,M,O),this._drawImage(o,t+this._sliceLeft,e+this._sliceTop,P,y,x,R,M,O),o.clearRect(N,R,m,O),this._drawImage(o,t+this._sliceRight,e+this._sliceTop,m,y,N,R,m,O),o.clearRect(this._currentMeasure.left,W,s,f),this._drawImage(o,t,e+this._sliceBottom,s,f,this._currentMeasure.left,W,s,f),o.clearRect(x,W,M,f),this._drawImage(o,t+this.sliceLeft,e+this._sliceBottom,P,f,x,W,M,f),o.clearRect(N,W,m,f),this._drawImage(o,t+this._sliceRight,e+this._sliceBottom,m,f,N,W,m,f)},_.prototype.dispose=function(){v.prototype.dispose.call(this),this.onImageLoadedObservable.clear(),this.onSVGAttributesComputedObservable.clear(),this._removeCacheUsage(this._source)},_.SourceImgCache=new Map,_.STRETCH_NONE=0,_.STRETCH_FILL=1,_.STRETCH_UNIFORM=2,_.STRETCH_EXTEND=3,_.STRETCH_NINE_PATCH=4,(0,c.__decorate)([(0,l.serialize)()],_.prototype,"detectPointerOnOpaqueOnly",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sliceLeft",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sliceRight",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sliceTop",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sliceBottom",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sourceLeft",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sourceTop",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sourceWidth",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sourceHeight",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"populateNinePatchSlicesFromImage",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"autoScale",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"stretch",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"source",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"cellWidth",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"cellHeight",null),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"cellId",null),_}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.Image",b)},"../../../dev/gui/src/2D/controls/index.ts":(B,E,d)=>{d.r(E),d.d(E,{BaseGradient:()=>fe.BaseGradient,BaseSlider:()=>U.BaseSlider,Button:()=>c.Button,Checkbox:()=>l.Checkbox,CheckboxGroup:()=>y.CheckboxGroup,ColorPicker:()=>g.ColorPicker,Container:()=>b.Container,Control:()=>v.Control,DisplayGrid:()=>Q.DisplayGrid,Ellipse:()=>_.Ellipse,FocusableButton:()=>o.FocusableButton,Grid:()=>t.Grid,Image:()=>e.Image,ImageBasedSlider:()=>Y.ImageBasedSlider,ImageScrollBar:()=>q.ImageScrollBar,InputPassword:()=>s.InputPassword,InputText:()=>i.InputText,InputTextArea:()=>a.InputTextArea,KeyPropertySet:()=>N.KeyPropertySet,Line:()=>u.Line,LinearGradient:()=>ue.LinearGradient,MultiLine:()=>f.MultiLine,RadialGradient:()=>ae.RadialGradient,RadioButton:()=>m.RadioButton,RadioGroup:()=>y.RadioGroup,Rectangle:()=>W.Rectangle,ScrollBar:()=>J.ScrollBar,ScrollViewer:()=>M.ScrollViewer,SelectionPanel:()=>y.SelectionPanel,SelectorGroup:()=>y.SelectorGroup,Slider:()=>H.Slider,SliderGroup:()=>y.SliderGroup,StackPanel:()=>P.StackPanel,TextBlock:()=>O.TextBlock,TextWrapper:()=>x.TextWrapper,TextWrapping:()=>O.TextWrapping,ToggleButton:()=>R.ToggleButton,VirtualKeyboard:()=>N.VirtualKeyboard,name:()=>le.name});var c=d("../../../dev/gui/src/2D/controls/button.ts"),l=d("../../../dev/gui/src/2D/controls/checkbox.ts"),g=d("../../../dev/gui/src/2D/controls/colorpicker.ts"),b=d("../../../dev/gui/src/2D/controls/container.ts"),v=d("../../../dev/gui/src/2D/controls/control.ts"),_=d("../../../dev/gui/src/2D/controls/ellipse.ts"),o=d("../../../dev/gui/src/2D/controls/focusableButton.ts");d("../../../dev/gui/src/2D/controls/focusableControl.ts");var t=d("../../../dev/gui/src/2D/controls/grid.ts"),e=d("../../../dev/gui/src/2D/controls/image.ts"),i=d("../../../dev/gui/src/2D/controls/inputText.ts"),a=d("../../../dev/gui/src/2D/controls/inputTextArea.ts"),s=d("../../../dev/gui/src/2D/controls/inputPassword.ts"),u=d("../../../dev/gui/src/2D/controls/line.ts"),f=d("../../../dev/gui/src/2D/controls/multiLine.ts"),m=d("../../../dev/gui/src/2D/controls/radioButton.ts"),P=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),y=d("../../../dev/gui/src/2D/controls/selector.ts"),M=d("../../../dev/gui/src/2D/controls/scrollViewers/scrollViewer.ts"),O=d("../../../dev/gui/src/2D/controls/textBlock.ts"),x=d("../../../dev/gui/src/2D/controls/textWrapper.ts"),R=d("../../../dev/gui/src/2D/controls/toggleButton.ts"),N=d("../../../dev/gui/src/2D/controls/virtualKeyboard.ts"),W=d("../../../dev/gui/src/2D/controls/rectangle.ts"),Q=d("../../../dev/gui/src/2D/controls/displayGrid.ts"),U=d("../../../dev/gui/src/2D/controls/sliders/baseSlider.ts"),H=d("../../../dev/gui/src/2D/controls/sliders/slider.ts"),Y=d("../../../dev/gui/src/2D/controls/sliders/imageBasedSlider.ts"),J=d("../../../dev/gui/src/2D/controls/sliders/scrollBar.ts"),q=d("../../../dev/gui/src/2D/controls/sliders/imageScrollBar.ts"),le=d("../../../dev/gui/src/2D/controls/statics.ts"),fe=d("../../../dev/gui/src/2D/controls/gradient/BaseGradient.ts"),ue=d("../../../dev/gui/src/2D/controls/gradient/LinearGradient.ts"),ae=d("../../../dev/gui/src/2D/controls/gradient/RadialGradient.ts")},"../../../dev/gui/src/2D/controls/inputPassword.ts":(B,E,d)=>{d.r(E),d.d(E,{InputPassword:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/inputText.ts"),g=d("babylonjs/Misc/perfCounter"),b=d("../../../dev/gui/src/2D/controls/textWrapper.ts"),v=function(_){(0,c.__extends)(o,_);function o(){return _!==null&&_.apply(this,arguments)||this}return o.prototype._getTypeName=function(){return"InputPassword"},o.prototype._beforeRenderText=function(t){for(var e=new b.TextWrapper,i="",a=0;a<t.length;a++)i+="";return e.text=i,e},o}(l.InputText);(0,g.RegisterClass)("BABYLON.GUI.InputPassword",v)},"../../../dev/gui/src/2D/controls/inputText.ts":(B,E,d)=>{d.r(E),d.d(E,{InputText:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/valueAndUnit.ts"),v=d("../../../dev/gui/src/2D/controls/textWrapper.ts"),_=function(o){(0,c.__extends)(t,o);function t(e,i){i===void 0&&(i="");var a=o.call(this,e)||this;return a.name=e,a._placeholderText="",a._background="#222222",a._focusedBackground="#000000",a._focusedColor="white",a._placeholderColor="gray",a._thickness=1,a._margin=new b.ValueAndUnit(10,b.ValueAndUnit.UNITMODE_PIXEL),a._autoStretchWidth=!0,a._maxWidth=new b.ValueAndUnit(1,b.ValueAndUnit.UNITMODE_PERCENTAGE,!1),a._isFocused=!1,a._blinkIsEven=!1,a._cursorOffset=0,a._deadKey=!1,a._addKey=!0,a._currentKey="",a._isTextHighlightOn=!1,a._textHighlightColor="#d5e0ff",a._highligherOpacity=.4,a._highlightedText="",a._startHighlightIndex=0,a._endHighlightIndex=0,a._cursorIndex=-1,a._onFocusSelectAll=!1,a._isPointerDown=!1,a.promptMessage="Please enter text:",a.disableMobilePrompt=!1,a.onTextChangedObservable=new l.Observable,a.onBeforeKeyAddObservable=new l.Observable,a.onFocusObservable=new l.Observable,a.onBlurObservable=new l.Observable,a.onTextHighlightObservable=new l.Observable,a.onTextCopyObservable=new l.Observable,a.onTextCutObservable=new l.Observable,a.onTextPasteObservable=new l.Observable,a.onKeyboardEventProcessedObservable=new l.Observable,a.text=i,a.isPointerBlocker=!0,a}return Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth.toString(this._host)},set:function(e){this._maxWidth.toString(this._host)!==e&&this._maxWidth.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidthInPixels",{get:function(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highligherOpacity",{get:function(){return this._highligherOpacity},set:function(e){this._highligherOpacity!==e&&(this._highligherOpacity=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusSelectAll",{get:function(){return this._onFocusSelectAll},set:function(e){this._onFocusSelectAll!==e&&(this._onFocusSelectAll=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHighlightColor",{get:function(){return this._textHighlightColor},set:function(e){this._textHighlightColor!==e&&(this._textHighlightColor=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this._margin.toString(this._host)},set:function(e){this._margin.toString(this._host)!==e&&this._margin.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marginInPixels",{get:function(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoStretchWidth",{get:function(){return this._autoStretchWidth},set:function(e){this._autoStretchWidth!==e&&(this._autoStretchWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness!==e&&(this._thickness=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusedBackground",{get:function(){return this._focusedBackground},set:function(e){this._focusedBackground!==e&&(this._focusedBackground=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusedColor",{get:function(){return this._focusedColor},set:function(e){this._focusedColor!==e&&(this._focusedColor=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background!==e&&(this._background=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderColor",{get:function(){return this._placeholderColor},set:function(e){this._placeholderColor!==e&&(this._placeholderColor=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderText",{get:function(){return this._placeholderText},set:function(e){this._placeholderText!==e&&(this._placeholderText=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deadKey",{get:function(){return this._deadKey},set:function(e){this._deadKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highlightedText",{get:function(){return this._highlightedText},set:function(e){this._highlightedText!==e&&(this._highlightedText=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addKey",{get:function(){return this._addKey},set:function(e){this._addKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentKey",{get:function(){return this._currentKey},set:function(e){this._currentKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._textWrapper.text},set:function(e){var i=e.toString();this._textWrapper||(this._textWrapper=new v.TextWrapper),this._textWrapper.text!==i&&(this._textWrapper.text=i,this._textHasChanged())},enumerable:!1,configurable:!0}),t.prototype._textHasChanged=function(){this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(e){this._width.toString(this._host)!==e&&(this._width.fromString(e)&&this._markAsDirty(),this.autoStretchWidth=!1)},enumerable:!1,configurable:!0}),t.prototype.onBlur=function(){this._isFocused=!1,this._scrollLeft=null,this._cursorOffset=0,clearTimeout(this._blinkTimeout),this._markAsDirty(),this.onBlurObservable.notifyObservers(this),this._host.unRegisterClipboardEvents(),this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);var e=this._host.getScene();this._onPointerDblTapObserver&&e&&e.onPointerObservable.remove(this._onPointerDblTapObserver)},t.prototype.onFocus=function(){var e=this;if(this._isEnabled){if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),this._focusedBy==="touch"&&!this.disableMobilePrompt){var i=prompt(this.promptMessage);i!==null&&(this.text=i),this._host.focusedControl=null;return}this._host.registerClipboardEvents(),this._onClipboardObserver=this._host.onClipboardObservable.add(function(s){switch(s.type){case l.ClipboardEventTypes.COPY:e._onCopyText(s.event),e.onTextCopyObservable.notifyObservers(e);break;case l.ClipboardEventTypes.CUT:e._onCutText(s.event),e.onTextCutObservable.notifyObservers(e);break;case l.ClipboardEventTypes.PASTE:e._onPasteText(s.event),e.onTextPasteObservable.notifyObservers(e);break;default:return}});var a=this._host.getScene();a&&(this._onPointerDblTapObserver=a.onPointerObservable.add(function(s){e._isFocused&&s.type===l.PointerEventTypes.POINTERDOUBLETAP&&e._processDblClick(s)})),this._onFocusSelectAll&&this._selectAllText()}},t.prototype.focus=function(){this._host.moveFocusToControl(this)},t.prototype.blur=function(){this._host.focusedControl=null},t.prototype._getTypeName=function(){return"InputText"},t.prototype.keepsFocusWith=function(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null},t.prototype.processKey=function(e,i,a){var s;if(!this.isReadOnly&&!(a&&(a.ctrlKey||a.metaKey)&&(e===67||e===86||e===88))){if(a&&(a.ctrlKey||a.metaKey)&&e===65){this._selectAllText(),a.preventDefault();return}switch(e){case 32:i=" ";break;case 191:a&&a.preventDefault();break;case 8:if(this._textWrapper.text&&this._textWrapper.length>0){if(this.isTextHighlightOn){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this.isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this._blinkIsEven=!1,a&&a.preventDefault();return}if(this._cursorOffset===0)this.text=this._textWrapper.substr(0,this._textWrapper.length-1);else{var u=this._textWrapper.length-this._cursorOffset;u>0&&(this._textWrapper.removePart(u-1,u),this._textHasChanged())}}a&&a.preventDefault();return;case 46:if(this.isTextHighlightOn){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this.isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,a&&a.preventDefault();return}if(this._textWrapper.text&&this._textWrapper.length>0&&this._cursorOffset>0){var u=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(u,u+1),this._textHasChanged(),this._cursorOffset--}a&&a.preventDefault();return;case 13:this._host.focusedControl=null,this.isTextHighlightOn=!1;return;case 35:this._cursorOffset=0,this._blinkIsEven=!1,this.isTextHighlightOn=!1,this._markAsDirty();return;case 36:this._cursorOffset=this._textWrapper.length,this._blinkIsEven=!1,this.isTextHighlightOn=!1,this._markAsDirty();return;case 37:if(this._cursorOffset++,this._cursorOffset>this._textWrapper.length&&(this._cursorOffset=this._textWrapper.length),a&&a.shiftKey){if(this._blinkIsEven=!1,a.ctrlKey||a.metaKey){if(!this.isTextHighlightOn){if(this._textWrapper.length===this._cursorOffset)return;this._endHighlightIndex=this._textWrapper.length-this._cursorOffset+1}this._startHighlightIndex=0,this._cursorIndex=this._textWrapper.length-this._endHighlightIndex,this._cursorOffset=this._textWrapper.length,this.isTextHighlightOn=!0,this._markAsDirty();return}this.isTextHighlightOn?this._cursorIndex===-1&&(this._cursorIndex=this._textWrapper.length-this._endHighlightIndex,this._cursorOffset=this._startHighlightIndex===0?this._textWrapper.length:this._textWrapper.length-this._startHighlightIndex+1):(this.isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._textWrapper.length?this._textWrapper.length:this._cursorOffset-1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this.isTextHighlightOn=!1,this._markAsDirty();return}this.isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this.isTextHighlightOn=!1),a&&(a.ctrlKey||a.metaKey)&&(this._cursorOffset=this._textWrapper.length,a.preventDefault()),this._blinkIsEven=!1,this.isTextHighlightOn=!1,this._cursorIndex=-1,this._markAsDirty();return;case 39:if(this._cursorOffset--,this._cursorOffset<0&&(this._cursorOffset=0),a&&a.shiftKey){if(this._blinkIsEven=!1,a.ctrlKey||a.metaKey){if(!this.isTextHighlightOn){if(this._cursorOffset===0)return;this._startHighlightIndex=this._textWrapper.length-this._cursorOffset-1}this._endHighlightIndex=this._textWrapper.length,this.isTextHighlightOn=!0,this._cursorIndex=this._textWrapper.length-this._startHighlightIndex,this._cursorOffset=0,this._markAsDirty();return}this.isTextHighlightOn?this._cursorIndex===-1&&(this._cursorIndex=this._textWrapper.length-this._startHighlightIndex,this._cursorOffset=this._textWrapper.length===this._endHighlightIndex?0:this._textWrapper.length-this._endHighlightIndex-1):(this.isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset<=0?0:this._cursorOffset+1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this.isTextHighlightOn=!1,this._markAsDirty();return}this.isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._endHighlightIndex,this.isTextHighlightOn=!1),a&&(a.ctrlKey||a.metaKey)&&(this._cursorOffset=0,a.preventDefault()),this._blinkIsEven=!1,this.isTextHighlightOn=!1,this._cursorIndex=-1,this._markAsDirty();return}if(e===32&&(i=(s=a==null?void 0:a.key)!==null&&s!==void 0?s:" "),this._deadKey=i==="Dead",i&&(e===-1||e===32||e===34||e===39||e>47&&e<64||e>64&&e<91||e>159&&e<193||e>218&&e<223||e>95&&e<112)&&(this._currentKey=i,this.onBeforeKeyAddObservable.notifyObservers(this),i=this._currentKey,this._addKey&&!this._deadKey))if(this.isTextHighlightOn)this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex,i),this._textHasChanged(),this._cursorOffset=this._textWrapper.length-(this._startHighlightIndex+1),this.isTextHighlightOn=!1,this._blinkIsEven=!1,this._markAsDirty();else if(this._cursorOffset===0)this.text+=this._deadKey&&(a!=null&&a.key)?a.key:i;else{var f=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(f,f,i),this._textHasChanged()}}},t.prototype._updateValueFromCursorIndex=function(e){if(this._blinkIsEven=!1,this._cursorIndex===-1)this._cursorIndex=e;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset;else if(this._cursorIndex>this._cursorOffset)this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex;else{this.isTextHighlightOn=!1,this._markAsDirty();return}this.isTextHighlightOn=!0,this._markAsDirty()},t.prototype._processDblClick=function(e){this._startHighlightIndex=this._textWrapper.length-this._cursorOffset,this._endHighlightIndex=this._startHighlightIndex;var i,a;do a=this._endHighlightIndex<this._textWrapper.length&&this._textWrapper.isWord(this._endHighlightIndex)?++this._endHighlightIndex:0,i=this._startHighlightIndex>0&&this._textWrapper.isWord(this._startHighlightIndex-1)?--this._startHighlightIndex:0;while(i||a);this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this.isTextHighlightOn=!0,this._clickedCoordinate=null,this._blinkIsEven=!0,this._cursorIndex=-1,this._markAsDirty()},t.prototype._selectAllText=function(){this._blinkIsEven=!0,this.isTextHighlightOn=!0,this._startHighlightIndex=0,this._endHighlightIndex=this._textWrapper.length,this._cursorOffset=this._textWrapper.length,this._cursorIndex=-1,this._markAsDirty()},t.prototype.processKeyboard=function(e){this.processKey(e.keyCode,e.key,e),this.onKeyboardEventProcessedObservable.notifyObservers(e)},t.prototype._onCopyText=function(e){this.isTextHighlightOn=!1;try{e.clipboardData&&e.clipboardData.setData("text/plain",this._highlightedText)}catch{}this._host.clipboardData=this._highlightedText},t.prototype._onCutText=function(e){if(this._highlightedText){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this.isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;try{e.clipboardData&&e.clipboardData.setData("text/plain",this._highlightedText)}catch{}this._host.clipboardData=this._highlightedText,this._highlightedText=""}},t.prototype._onPasteText=function(e){var i="";e.clipboardData&&e.clipboardData.types.indexOf("text/plain")!==-1?i=e.clipboardData.getData("text/plain"):i=this._host.clipboardData;var a=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(a,a,i),this._textHasChanged()},t.prototype._draw=function(e){var i=this;e.save(),this._applyStates(e),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(e.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,e.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(e.fillStyle=this._isEnabled?this._background:this._disabledColor,e.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),(!this._fontOffset||this._wasDirty)&&(this._fontOffset=g.Control._GetFontOffset(e.font));var a=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this.color&&(e.fillStyle=this.color);var s=this._beforeRenderText(this._textWrapper);!this._isFocused&&!this._textWrapper.text&&this._placeholderText&&(s=new v.TextWrapper,s.text=this._placeholderText,this._placeholderColor&&(e.fillStyle=this._placeholderColor)),this._textWidth=e.measureText(s.text).width;var u=this._margin.getValueInPixel(this._host,this._tempParentMeasure.width)*2;this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+u)+"px",this._autoStretchWidth=!0);var f=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2,m=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-u;if(e.save(),e.beginPath(),e.rect(a,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,m+2,this._currentMeasure.height),e.clip(),this._isFocused&&this._textWidth>m){var P=a-this._textWidth+m;this._scrollLeft||(this._scrollLeft=P)}else this._scrollLeft=a;if(e.fillText(s.text,this._scrollLeft,this._currentMeasure.top+f),this._isFocused){if(this._clickedCoordinate){var y=this._scrollLeft+this._textWidth,M=y-this._clickedCoordinate,O=0;this._cursorOffset=0;var x=0;do this._cursorOffset&&(x=Math.abs(M-O)),this._cursorOffset++,O=e.measureText(s.substr(s.length-this._cursorOffset,this._cursorOffset)).width;while(O<M&&s.length>=this._cursorOffset);Math.abs(M-O)>x&&this._cursorOffset--,this._blinkIsEven=!1,this._clickedCoordinate=null}if(!this._blinkIsEven){var R=s.substr(s.length-this._cursorOffset),N=e.measureText(R).width,W=this._scrollLeft+this._textWidth-N;W<a?(this._scrollLeft+=a-W,W=a,this._markAsDirty()):W>a+m&&(this._scrollLeft+=a+m-W,W=a+m,this._markAsDirty()),this.isTextHighlightOn||e.fillRect(W,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height)}if(clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout(function(){i._blinkIsEven=!i._blinkIsEven,i._markAsDirty()},500),this.isTextHighlightOn){clearTimeout(this._blinkTimeout);var Q=e.measureText(s.substring(this._startHighlightIndex)).width,U=this._scrollLeft+this._textWidth-Q;this._highlightedText=s.substring(this._startHighlightIndex,this._endHighlightIndex);var H=e.measureText(s.substring(this._startHighlightIndex,this._endHighlightIndex)).width;U<a&&(H=H-(a-U),H||(H=e.measureText(s.charAt(s.length-this._cursorOffset)).width),U=a),e.globalAlpha=this._highligherOpacity,e.fillStyle=this._textHighlightColor,e.fillRect(U,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,H,this._fontOffset.height),e.globalAlpha=1}}e.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(e.strokeStyle=this.focusedColor):this.color&&(e.strokeStyle=this.color),e.lineWidth=this._thickness,e.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),e.restore()},t.prototype._onPointerDown=function(e,i,a,s,u){return o.prototype._onPointerDown.call(this,e,i,a,s,u)?this.isReadOnly?!0:(this._clickedCoordinate=i.x,this.isTextHighlightOn=!1,this._highlightedText="",this._cursorIndex=-1,this._isPointerDown=!0,this._host._capturingControl[a]=this,this._focusedBy=u.event.pointerType,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),!0):this._isEnabled?(this._host.focusedControl=this,!0):!1):!1},t.prototype._onPointerMove=function(e,i,a,s){this._host.focusedControl===this&&this._isPointerDown&&!this.isReadOnly&&(this._clickedCoordinate=i.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset)),o.prototype._onPointerMove.call(this,e,i,a,s)},t.prototype._onPointerUp=function(e,i,a,s,u){this._isPointerDown=!1,delete this._host._capturingControl[a],o.prototype._onPointerUp.call(this,e,i,a,s,u)},t.prototype._beforeRenderText=function(e){return e},Object.defineProperty(t.prototype,"isTextHighlightOn",{get:function(){return this._isTextHighlightOn},set:function(e){this._isTextHighlightOn!==e&&(e&&this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=e)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){o.prototype.dispose.call(this),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onTextChangedObservable.clear(),this.onTextCopyObservable.clear(),this.onTextCutObservable.clear(),this.onTextPasteObservable.clear(),this.onTextHighlightObservable.clear(),this.onKeyboardEventProcessedObservable.clear()},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"promptMessage",void 0),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"disableMobilePrompt",void 0),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"maxWidth",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"highligherOpacity",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"onFocusSelectAll",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"textHighlightColor",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"margin",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"autoStretchWidth",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"thickness",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"focusedBackground",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"focusedColor",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"background",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"placeholderColor",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"placeholderText",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"deadKey",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"text",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"width",null),t}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.InputText",_)},"../../../dev/gui/src/2D/controls/inputTextArea.ts":(B,E,d)=>{d.r(E),d.d(E,{InputTextArea:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/valueAndUnit.ts"),v=d("../../../dev/gui/src/2D/controls/inputText.ts"),_=function(o){(0,c.__extends)(t,o);function t(e,i){i===void 0&&(i="");var a=o.call(this,e)||this;return a.name=e,a._textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,a._textVerticalAlignment=g.Control.VERTICAL_ALIGNMENT_TOP,a._lineSpacing=new b.ValueAndUnit(0),a._outlineWidth=0,a._outlineColor="white",a._maxHeight=new b.ValueAndUnit(1,b.ValueAndUnit.UNITMODE_PERCENTAGE,!1),a.onLinesReadyObservable=new l.Observable,a.text=i,a.isPointerBlocker=!0,a.onLinesReadyObservable.add(function(){return a._updateCursorPosition()}),a._highlightCursorInfo={initialStartIndex:-1,initialRelativeStartIndex:-1,initialLineIndex:-1},a._cursorInfo={globalStartIndex:0,globalEndIndex:0,relativeEndIndex:0,relativeStartIndex:0,currentLineIndex:0},a}return Object.defineProperty(t.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor!==e&&(this._outlineColor=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoStretchHeight",{get:function(){return this._autoStretchHeight},set:function(e){this._autoStretchHeight!==e&&(this._autoStretchHeight=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{set:function(e){this.fixedRatioMasterIsWidth=!1,this._height.toString(this._host)!==e&&(this._height.fromString(e)&&this._markAsDirty(),this._autoStretchHeight=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight.toString(this._host)},set:function(e){this._maxHeight.toString(this._host)!==e&&this._maxHeight.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHeightInPixels",{get:function(){return this._maxHeight.getValueInPixel(this._host,this._cachedParentMeasure.height)},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"InputTextArea"},t.prototype.processKeyboard=function(e){this.alternativeProcessKey(e.code,e.key,e),this.onKeyboardEventProcessedObservable.notifyObservers(e)},t.prototype.alternativeProcessKey=function(e,i,a){if(!(a&&(a.ctrlKey||a.metaKey)&&(e==="KeyC"||e==="KeyV"||e==="KeyX"))){switch(e){case"KeyA":if(a&&(a.ctrlKey||a.metaKey)){this._selectAllText(),a.preventDefault();return}break;case"Period":a&&a.shiftKey&&a.preventDefault();break;case"Backspace":!this._isTextHighlightOn&&this._cursorInfo.globalStartIndex>0&&(this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._cursorInfo.globalStartIndex--),this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex),this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,a&&a.preventDefault(),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._textHasChanged();break;case"Delete":!this._isTextHighlightOn&&this._cursorInfo.globalEndIndex<this.text.length&&(this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex+1),this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex),this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,a&&a.preventDefault(),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._textHasChanged();break;case"Enter":this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex,`
`),this._cursorInfo.globalStartIndex++,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._textHasChanged();return;case"End":this._cursorInfo.globalStartIndex=this.text.length,this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._markAsDirty();return;case"Home":this._cursorInfo.globalStartIndex=0,this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._markAsDirty();return;case"ArrowLeft":if(this._markAsDirty(),a&&a.shiftKey){(a.ctrlKey||a.metaKey)&&(this._cursorInfo.globalStartIndex-=this._cursorInfo.relativeStartIndex,this._cursorInfo.globalEndIndex=this._highlightCursorInfo.initialStartIndex),this._isTextHighlightOn?this._cursorInfo.globalEndIndex>this._highlightCursorInfo.initialStartIndex?this._cursorInfo.globalEndIndex--:this._cursorInfo.globalStartIndex--:(this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this._highlightCursorInfo.initialRelativeStartIndex=this._cursorInfo.relativeStartIndex,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._cursorInfo.globalStartIndex--,this._isTextHighlightOn=!0),this._blinkIsEven=!0,a.preventDefault();return}this._isTextHighlightOn?this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex:a&&(a.ctrlKey||a.metaKey)?(this._cursorInfo.globalStartIndex-=this._cursorInfo.relativeStartIndex,a.preventDefault()):this._cursorInfo.globalStartIndex>0&&this._cursorInfo.globalStartIndex--,this._blinkIsEven=!1,this._isTextHighlightOn=!1;return;case"ArrowRight":if(this._markAsDirty(),a&&a.shiftKey){if(a.ctrlKey||a.metaKey){var s=this._lines[this._cursorInfo.currentLineIndex].text.length-this._cursorInfo.relativeEndIndex-1;this._cursorInfo.globalEndIndex+=s,this._cursorInfo.globalStartIndex=this._highlightCursorInfo.initialStartIndex}this._isTextHighlightOn?this._cursorInfo.globalStartIndex<this._highlightCursorInfo.initialStartIndex?this._cursorInfo.globalStartIndex++:this._cursorInfo.globalEndIndex++:(this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this._highlightCursorInfo.initialRelativeStartIndex=this._cursorInfo.relativeStartIndex,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex++,this._isTextHighlightOn=!0),this._blinkIsEven=!0,a.preventDefault();return}if(this._isTextHighlightOn)this._cursorInfo.globalStartIndex=this._cursorInfo.globalEndIndex;else if(a&&(a.ctrlKey||a.metaKey)){var s=this._lines[this._cursorInfo.currentLineIndex].text.length-this._cursorInfo.relativeEndIndex;this._cursorInfo.globalStartIndex+=s}else this._cursorInfo.globalStartIndex<this.text.length&&this._cursorInfo.globalStartIndex++;this._blinkIsEven=!1,this._isTextHighlightOn=!1;return;case"ArrowUp":if(this._blinkIsEven=!1,a&&(a.shiftKey?(this._isTextHighlightOn||(this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this._highlightCursorInfo.initialRelativeStartIndex=this._cursorInfo.relativeStartIndex),this._isTextHighlightOn=!0,this._blinkIsEven=!0):this._isTextHighlightOn=!1,a.preventDefault()),this._cursorInfo.currentLineIndex===0)this._cursorInfo.globalStartIndex=0;else{var u=this._lines[this._cursorInfo.currentLineIndex],f=this._lines[this._cursorInfo.currentLineIndex-1],m=0,P=0;!this._isTextHighlightOn||this._cursorInfo.currentLineIndex<this._highlightCursorInfo.initialLineIndex?(m=this._cursorInfo.globalStartIndex,P=this._cursorInfo.relativeStartIndex):(m=this._cursorInfo.globalEndIndex,P=this._cursorInfo.relativeEndIndex);var y=u.text.substr(0,P),M=this._contextForBreakLines.measureText(y).width,O=0,x=0;m-=P,m-=f.text.length+f.lineEnding.length;for(var R=0;O<M&&R<f.text.length;)m++,R++,x=Math.abs(M-O),O=this._contextForBreakLines.measureText(f.text.substr(0,R)).width;Math.abs(M-O)>x&&R>0&&m--,this._isTextHighlightOn?this._cursorInfo.currentLineIndex<=this._highlightCursorInfo.initialLineIndex?(this._cursorInfo.globalStartIndex=m,this._cursorInfo.globalEndIndex=this._highlightCursorInfo.initialStartIndex,this._cursorInfo.relativeEndIndex=this._highlightCursorInfo.initialRelativeStartIndex):this._cursorInfo.globalEndIndex=m:this._cursorInfo.globalStartIndex=m}this._markAsDirty();return;case"ArrowDown":if(this._blinkIsEven=!1,a&&(a.shiftKey?(this._isTextHighlightOn||(this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this._highlightCursorInfo.initialRelativeStartIndex=this._cursorInfo.relativeStartIndex),this._isTextHighlightOn=!0,this._blinkIsEven=!0):this._isTextHighlightOn=!1,a.preventDefault()),this._cursorInfo.currentLineIndex===this._lines.length-1)this._cursorInfo.globalStartIndex=this.text.length;else{var u=this._lines[this._cursorInfo.currentLineIndex],N=this._lines[this._cursorInfo.currentLineIndex+1],m=0,P=0;!this._isTextHighlightOn||this._cursorInfo.currentLineIndex<this._highlightCursorInfo.initialLineIndex?(m=this._cursorInfo.globalStartIndex,P=this._cursorInfo.relativeStartIndex):(m=this._cursorInfo.globalEndIndex,P=this._cursorInfo.relativeEndIndex);var y=u.text.substr(0,P),M=this._contextForBreakLines.measureText(y).width,W=0,x=0;m+=u.text.length-P+u.lineEnding.length;for(var Q=0;W<M&&Q<N.text.length;)m++,Q++,x=Math.abs(M-W),W=this._contextForBreakLines.measureText(N.text.substr(0,Q)).width;Math.abs(M-W)>x&&Q>0&&m--,this._isTextHighlightOn?this._cursorInfo.currentLineIndex<this._highlightCursorInfo.initialLineIndex?(this._cursorInfo.globalStartIndex=m,this._cursorInfo.globalStartIndex>this._cursorInfo.globalEndIndex&&(this._cursorInfo.globalEndIndex+=this._cursorInfo.globalStartIndex,this._cursorInfo.globalStartIndex=this._cursorInfo.globalEndIndex-this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex-=this._cursorInfo.globalStartIndex)):(this._cursorInfo.globalEndIndex=m,this._cursorInfo.globalStartIndex=this._highlightCursorInfo.initialStartIndex):this._cursorInfo.globalStartIndex=m}this._markAsDirty();return}(i==null?void 0:i.length)===1&&(a==null||a.preventDefault(),this._currentKey=i,this.onBeforeKeyAddObservable.notifyObservers(this),i=this._currentKey,this._addKey&&(this._isTextHighlightOn=!1,this._blinkIsEven=!1,this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex,i),this._cursorInfo.globalStartIndex+=i.length,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._textHasChanged()))}},t.prototype._parseLineWordWrap=function(e,i,a){e===void 0&&(e="");for(var s=[],u=e.split(" "),f=0,m=function(y){var M=y>0?e+" "+u[y]:u[0],O=a.measureText(M),x=O.width;if(x>i){y>0&&(f=a.measureText(e).width,s.push({text:e,width:f,lineEnding:" "})),e=u[y];var R="";e.split("").map(function(N){a.measureText(R+N).width>i&&(s.push({text:R,width:a.measureText(R).width,lineEnding:""}),R=""),R+=N}),e=R,f=a.measureText(e).width}else f=x,e=M},P=0;P<u.length;P++)m(P);return s.push({text:e,width:f,lineEnding:" "}),s},t.prototype._breakLines=function(e,i){var a=[],s=this.text.split(`
`);if(this.clipContent)for(var u=0,f=s;u<f.length;u++){var m=f[u];a.push.apply(a,this._parseLineWordWrap(m,e,i))}else for(var P=0,y=s;P<y.length;P++){var m=y[P];a.push(this._parseLine(m,i))}return a[a.length-1].lineEnding=`
`,a},t.prototype._parseLine=function(e,i){return e===void 0&&(e=""),{text:e,width:i.measureText(e).width,lineEnding:" "}},t.prototype._preMeasure=function(e,i){(!this._fontOffset||this._wasDirty)&&(this._fontOffset=g.Control._GetFontOffset(i.font));var a=this._beforeRenderText(this._textWrapper).text;!this._isFocused&&!this.text&&this._placeholderText&&(a=this._placeholderText,this._placeholderColor&&(i.fillStyle=this._placeholderColor)),this._textWidth=i.measureText(a).width;var s=this._margin.getValueInPixel(this._host,e.width)*2;if(this._autoStretchWidth){var u=a.split(`
`),f=u.reduce(function(x,R){var N=i.measureText(R).width,W=i.measureText(x).width;return N>W?R:x},""),m=i.measureText(f).width;this.width=Math.min(this._maxWidth.getValueInPixel(this._host,e.width),m+s)+"px",this.autoStretchWidth=!0}if(this._availableWidth=this._width.getValueInPixel(this._host,e.width)-s,this._lines=this._breakLines(this._availableWidth,i),this._contextForBreakLines=i,this._autoStretchHeight){var P=this._lines.length*this._fontOffset.height,y=P+this._margin.getValueInPixel(this._host,e.height)*2;this.height=Math.min(this._maxHeight.getValueInPixel(this._host,e.height),y)+"px",this._autoStretchHeight=!0}if(this._availableHeight=this._height.getValueInPixel(this._host,e.height)-s,this._isFocused){this._cursorInfo.currentLineIndex=0;for(var M=this._lines[this._cursorInfo.currentLineIndex].text.length+this._lines[this._cursorInfo.currentLineIndex].lineEnding.length,O=0;O+M<=this._cursorInfo.globalStartIndex;)O+=M,this._cursorInfo.currentLineIndex<this._lines.length-1&&(this._cursorInfo.currentLineIndex++,M=this._lines[this._cursorInfo.currentLineIndex].text.length+this._lines[this._cursorInfo.currentLineIndex].lineEnding.length)}},t.prototype._computeScroll=function(){if(this._clipTextLeft=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width),this._clipTextTop=this._currentMeasure.top+this._margin.getValueInPixel(this._host,this._cachedParentMeasure.height),this._isFocused&&this._lines[this._cursorInfo.currentLineIndex].width>this._availableWidth){var e=this._clipTextLeft-this._lines[this._cursorInfo.currentLineIndex].width+this._availableWidth;this._scrollLeft||(this._scrollLeft=e)}else this._scrollLeft=this._clipTextLeft;if(this._isFocused&&!this._autoStretchHeight){var i=(this._cursorInfo.currentLineIndex+1)*this._fontOffset.height,a=this._clipTextTop-i;this._scrollTop||(this._scrollTop=a)}else this._scrollTop=this._clipTextTop},t.prototype._additionalProcessing=function(){this.highlightedText="",this.onLinesReadyObservable.notifyObservers(this)},t.prototype._drawText=function(e,i,a,s){var u=this._currentMeasure.width,f=this._scrollLeft;switch(this._textHorizontalAlignment){case g.Control.HORIZONTAL_ALIGNMENT_LEFT:f+=0;break;case g.Control.HORIZONTAL_ALIGNMENT_RIGHT:f+=u-i;break;case g.Control.HORIZONTAL_ALIGNMENT_CENTER:f+=(u-i)/2;break}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur,s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&s.strokeText(e,this._currentMeasure.left+f,a),s.fillText(e,f,a)},t.prototype._onCopyText=function(e){this._isTextHighlightOn=!1;try{e.clipboardData&&e.clipboardData.setData("text/plain",this._highlightedText)}catch{}this._host.clipboardData=this._highlightedText},t.prototype._onCutText=function(e){if(this._highlightedText){try{e.clipboardData&&e.clipboardData.setData("text/plain",this._highlightedText)}catch{}this._host.clipboardData=this._highlightedText,this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex),this._textHasChanged()}},t.prototype._onPasteText=function(e){var i="";e.clipboardData&&e.clipboardData.types.indexOf("text/plain")!==-1?i=e.clipboardData.getData("text/plain"):i=this._host.clipboardData,this._isTextHighlightOn=!1,this._textWrapper.removePart(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex,i);var a=i.length-(this._cursorInfo.globalEndIndex-this._cursorInfo.globalStartIndex);this._cursorInfo.globalStartIndex+=a,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._textHasChanged()},t.prototype._draw=function(e){var i,a;this._computeScroll(),this._scrollLeft=(i=this._scrollLeft)!==null&&i!==void 0?i:0,this._scrollTop=(a=this._scrollTop)!==null&&a!==void 0?a:0,e.save(),this._applyStates(e),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(e.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,e.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(e.fillStyle=this._isEnabled?this._background:this._disabledColor,e.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),this.color&&(e.fillStyle=this.color);var s=this._currentMeasure.height,u=this._currentMeasure.width,f=0;switch(this._textVerticalAlignment){case g.Control.VERTICAL_ALIGNMENT_TOP:f=this._fontOffset.ascent;break;case g.Control.VERTICAL_ALIGNMENT_BOTTOM:f=s-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case g.Control.VERTICAL_ALIGNMENT_CENTER:f=this._fontOffset.ascent+(s-this._fontOffset.height*this._lines.length)/2;break}e.save(),e.beginPath(),e.fillStyle=this.fontStyle,e.rect(this._clipTextLeft,this._clipTextTop,this._availableWidth+2,this._availableHeight+2),e.clip(),f+=this._scrollTop;for(var m=0;m<this._lines.length;m++){var P=this._lines[m];m!==0&&this._lineSpacing.internalValue!==0&&(this._lineSpacing.isPixel?f+=this._lineSpacing.getValue(this._host):f=f+this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(P.text,P.width,f,e),f+=this._fontOffset.height}if(e.restore(),this._isFocused){if(!this._blinkIsEven||this._isTextHighlightOn){var y=this._scrollLeft+e.measureText(this._lines[this._cursorInfo.currentLineIndex].text.substr(0,this._cursorInfo.relativeStartIndex)).width;y<this._clipTextLeft?(this._scrollLeft+=this._clipTextLeft-y,y=this._clipTextLeft,this._markAsDirty()):y>this._clipTextLeft+this._availableWidth&&(this._scrollLeft+=this._clipTextLeft+this._availableWidth-y,y=this._clipTextLeft+this._availableWidth,this._markAsDirty());var M=this._scrollTop+this._cursorInfo.currentLineIndex*this._fontOffset.height;M<this._clipTextTop?(this._scrollTop+=this._clipTextTop-M,M=this._clipTextTop,this._markAsDirty()):M+this._fontOffset.height>this._clipTextTop+this._availableHeight&&(this._scrollTop+=this._clipTextTop+this._availableHeight-M-this._fontOffset.height,M=this._clipTextTop+this._availableHeight-this._fontOffset.height,this._markAsDirty()),this._isTextHighlightOn||e.fillRect(y,M,2,this._fontOffset.height)}if(this._resetBlinking(),this._isTextHighlightOn){clearTimeout(this._blinkTimeout),this._highlightedText=this.text.substring(this._cursorInfo.globalStartIndex,this._cursorInfo.globalEndIndex),e.globalAlpha=this._highligherOpacity,e.fillStyle=this._textHighlightColor;for(var O=Math.min(this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialLineIndex),x=Math.max(this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialLineIndex),R=this._scrollTop+O*this._fontOffset.height,m=O;m<=x;m++){var P=this._lines[m],N=this._scrollLeft;switch(this._textHorizontalAlignment){case g.Control.HORIZONTAL_ALIGNMENT_LEFT:N+=0;break;case g.Control.HORIZONTAL_ALIGNMENT_RIGHT:N+=u-P.width;break;case g.Control.HORIZONTAL_ALIGNMENT_CENTER:N+=(u-P.width)/2;break}var W=m===O?this._cursorInfo.relativeStartIndex:0,Q=m===x?this._cursorInfo.relativeEndIndex:P.text.length,U=e.measureText(P.text.substr(0,W)).width,H=P.text.substring(W,Q),Y=e.measureText(H).width;e.fillRect(N+U,R,Y,this._fontOffset.height),R+=this._fontOffset.height}this._cursorInfo.globalEndIndex===this._cursorInfo.globalStartIndex&&this._resetBlinking()}}e.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(e.strokeStyle=this.focusedColor):this.color&&(e.strokeStyle=this.color),e.lineWidth=this._thickness,e.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness))},t.prototype._resetBlinking=function(){var e=this;clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout(function(){e._blinkIsEven=!e._blinkIsEven,e._markAsDirty()},500)},t.prototype._applyStates=function(e){o.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor)},t.prototype._onPointerDown=function(e,i,a,s,u){return o.prototype._onPointerDown.call(this,e,i,a,s,u)?(this._clickedCoordinateX=i.x,this._clickedCoordinateY=i.y,this._isTextHighlightOn=!1,this._highlightedText="",this._isPointerDown=!0,this._host._capturingControl[a]=this,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),!0):this._isEnabled?(this._host.focusedControl=this,!0):!1):!1},t.prototype._onPointerMove=function(e,i,a,s){s.event.movementX===0&&s.event.movementY===0||(this._host.focusedControl===this&&this._isPointerDown&&(this._clickedCoordinateX=i.x,this._clickedCoordinateY=i.y,this._isTextHighlightOn||(this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this._highlightCursorInfo.initialRelativeStartIndex=this._cursorInfo.relativeStartIndex,this._isTextHighlightOn=!0),this._markAsDirty()),o.prototype._onPointerMove.call(this,e,i,a,s))},t.prototype._updateCursorPosition=function(){var e;if(this._isFocused)if(this._clickedCoordinateX&&this._clickedCoordinateY){this._isTextHighlightOn||(this._cursorInfo={globalStartIndex:0,globalEndIndex:0,relativeStartIndex:0,relativeEndIndex:0,currentLineIndex:0});var i=0,a=0,s=this._clickedCoordinateY-this._scrollTop,u=Math.floor(s/this._fontOffset.height);this._cursorInfo.currentLineIndex=Math.min(Math.max(u,0),this._lines.length-1);for(var f=0,m=this._clickedCoordinateX-((e=this._scrollLeft)!==null&&e!==void 0?e:0),P=0,y=0;y<this._cursorInfo.currentLineIndex;y++){var M=this._lines[y];i+=M.text.length+M.lineEnding.length}for(;f<m&&this._lines[this._cursorInfo.currentLineIndex].text.length>a;)a++,P=Math.abs(m-f),f=this._contextForBreakLines.measureText(this._lines[this._cursorInfo.currentLineIndex].text.substr(0,a)).width;Math.abs(m-f)>P&&a>0&&a--,i+=a,this._isTextHighlightOn?i<this._highlightCursorInfo.initialStartIndex?(this._cursorInfo.globalStartIndex=i,this._cursorInfo.relativeStartIndex=a,this._cursorInfo.globalEndIndex=this._highlightCursorInfo.initialStartIndex,this._cursorInfo.relativeEndIndex=this._highlightCursorInfo.initialRelativeStartIndex):(this._cursorInfo.globalStartIndex=this._highlightCursorInfo.initialStartIndex,this._cursorInfo.relativeStartIndex=this._highlightCursorInfo.initialRelativeStartIndex,this._cursorInfo.globalEndIndex=i,this._cursorInfo.relativeEndIndex=a):(this._cursorInfo.globalStartIndex=i,this._cursorInfo.relativeStartIndex=a,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex,this._cursorInfo.relativeEndIndex=this._cursorInfo.relativeStartIndex),this._blinkIsEven=this._isTextHighlightOn,this._clickedCoordinateX=null,this._clickedCoordinateY=null}else{this._cursorInfo.relativeStartIndex=0,this._cursorInfo.currentLineIndex=0;for(var O=this._lines[this._cursorInfo.currentLineIndex].text.length+this._lines[this._cursorInfo.currentLineIndex].lineEnding.length,x=0;x+O<=this._cursorInfo.globalStartIndex;)x+=O,this._cursorInfo.currentLineIndex<this._lines.length-1&&(this._cursorInfo.currentLineIndex++,O=this._lines[this._cursorInfo.currentLineIndex].text.length+this._lines[this._cursorInfo.currentLineIndex].lineEnding.length);if(this._cursorInfo.relativeStartIndex=this._cursorInfo.globalStartIndex-x,this._highlightCursorInfo.initialStartIndex!==-1&&this._cursorInfo.globalStartIndex>=this._highlightCursorInfo.initialStartIndex){for(;x+O<=this._cursorInfo.globalEndIndex;)x+=O,this._cursorInfo.currentLineIndex<this._lines.length-1&&(this._cursorInfo.currentLineIndex++,O=this._lines[this._cursorInfo.currentLineIndex].text.length+this._lines[this._cursorInfo.currentLineIndex].lineEnding.length);this._cursorInfo.relativeEndIndex=this._cursorInfo.globalEndIndex-x}else this._isTextHighlightOn||(this._cursorInfo.relativeEndIndex=this._cursorInfo.relativeStartIndex,this._cursorInfo.globalEndIndex=this._cursorInfo.globalStartIndex)}},t.prototype._updateValueFromCursorIndex=function(e){},t.prototype._processDblClick=function(e){var i,a;do i=this._cursorInfo.globalStartIndex>0&&this._textWrapper.isWord(this._cursorInfo.globalStartIndex-1)?--this._cursorInfo.globalStartIndex:0,a=this._cursorInfo.globalEndIndex<this._textWrapper.length&&this._textWrapper.isWord(this._cursorInfo.globalEndIndex)?++this._cursorInfo.globalEndIndex:0;while(i||a);this._highlightCursorInfo.initialLineIndex=this._cursorInfo.currentLineIndex,this._highlightCursorInfo.initialStartIndex=this._cursorInfo.globalStartIndex,this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=!0,this._blinkIsEven=!0,this._markAsDirty()},t.prototype._selectAllText=function(){this._isTextHighlightOn=!0,this._blinkIsEven=!0,this._highlightCursorInfo={initialStartIndex:0,initialRelativeStartIndex:0,initialLineIndex:0},this._cursorInfo={globalStartIndex:0,globalEndIndex:this._textWrapper.length,relativeEndIndex:this._lines[this._lines.length-1].text.length,relativeStartIndex:0,currentLineIndex:this._lines.length-1},this._markAsDirty()},t.prototype.dipose=function(){o.prototype.dispose.call(this),this.onLinesReadyObservable.clear()},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"autoStretchHeight",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"maxHeight",null),t}(v.InputText);(0,l.RegisterClass)("BABYLON.GUI.InputTextArea",_)},"../../../dev/gui/src/2D/controls/line.ts":(B,E,d)=>{d.r(E),d.d(E,{Line:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/valueAndUnit.ts"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._lineWidth=1,e._x1=new b.ValueAndUnit(0),e._y1=new b.ValueAndUnit(0),e._x2=new b.ValueAndUnit(0),e._y2=new b.ValueAndUnit(0),e._dash=new Array,e._automaticSize=!0,e.isHitTestVisible=!1,e._horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,e._verticalAlignment=g.Control.VERTICAL_ALIGNMENT_TOP,e}return Object.defineProperty(o.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"connectedControl",{get:function(){return this._connectedControl},set:function(t){var e=this;this._connectedControl!==t&&(this._connectedControlDirtyObserver&&this._connectedControl&&(this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver),this._connectedControlDirtyObserver=null),t&&(this._connectedControlDirtyObserver=t.onDirtyObservable.add(function(){return e._markAsDirty()})),this._connectedControl=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"x1",{get:function(){return this._x1.toString(this._host)},set:function(t){this._x1.toString(this._host)!==t&&this._x1.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y1",{get:function(){return this._y1.toString(this._host)},set:function(t){this._y1.toString(this._host)!==t&&this._y1.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"x2",{get:function(){return this._x2.toString(this._host)},set:function(t){this._x2.toString(this._host)!==t&&this._x2.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y2",{get:function(){return this._y2.toString(this._host)},set:function(t){this._y2.toString(this._host)!==t&&this._y2.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"horizontalAlignment",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"verticalAlignment",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_effectiveX2",{get:function(){return(this._connectedControl?this._connectedControl.centerX:0)+this._x2.getValue(this._host)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_effectiveY2",{get:function(){return(this._connectedControl?this._connectedControl.centerY:0)+this._y2.getValue(this._host)},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"Line"},o.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this._getColor(t),t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath(),t.moveTo(this._cachedParentMeasure.left+this._x1.getValue(this._host),this._cachedParentMeasure.top+this._y1.getValue(this._host)),t.lineTo(this._cachedParentMeasure.left+this._effectiveX2,this._cachedParentMeasure.top+this._effectiveY2),t.stroke(),t.restore()},o.prototype._measure=function(){this._currentMeasure.width=Math.abs(this._x1.getValue(this._host)-this._effectiveX2)+this._lineWidth,this._currentMeasure.height=Math.abs(this._y1.getValue(this._host)-this._effectiveY2)+this._lineWidth},o.prototype._computeAlignment=function(t){this._currentMeasure.left=t.left+Math.min(this._x1.getValue(this._host),this._effectiveX2)-this._lineWidth/2,this._currentMeasure.top=t.top+Math.min(this._y1.getValue(this._host),this._effectiveY2)-this._lineWidth/2},o.prototype.moveToVector3=function(t,e,i){if(i===void 0&&(i=!1),!this._host||this.parent!==this._host._rootContainer){l.Tools.Error("Cannot move a control to a vector3 if the control is not at root level");return}var a=this._host._getGlobalViewport(),s=l.Vector3.Project(t,l.Matrix.IdentityReadOnly,e.getTransformMatrix(),a);if(this._moveToProjectedPosition(s,i),s.z<0||s.z>1){this.notRenderable=!0;return}this.notRenderable=!1},o.prototype._moveToProjectedPosition=function(t,e){e===void 0&&(e=!1);var i=t.x+this._linkOffsetX.getValue(this._host)+"px",a=t.y+this._linkOffsetY.getValue(this._host)+"px";e?(this.x2=i,this.y2=a,this._x2.ignoreAdaptiveScaling=!0,this._y2.ignoreAdaptiveScaling=!0):(this.x1=i,this.y1=a,this._x1.ignoreAdaptiveScaling=!0,this._y1.ignoreAdaptiveScaling=!0)},(0,c.__decorate)([(0,l.serialize)()],o.prototype,"dash",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"x1",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"y1",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"x2",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"y2",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"lineWidth",null),o}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.Line",v)},"../../../dev/gui/src/2D/controls/multiLine.ts":(B,E,d)=>{d.r(E),d.d(E,{MultiLine:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/multiLinePoint.ts"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._lineWidth=1,e.onPointUpdate=function(){e._markAsDirty()},e._automaticSize=!0,e.isHitTestVisible=!1,e._horizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,e._verticalAlignment=g.Control.VERTICAL_ALIGNMENT_TOP,e._dash=[],e._points=[],e}return Object.defineProperty(o.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!1,configurable:!0}),o.prototype.getAt=function(t){return this._points[t]||(this._points[t]=new b.MultiLinePoint(this)),this._points[t]},o.prototype.add=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.map(function(a){return t.push(a)})},o.prototype.push=function(t){var e=this.getAt(this._points.length);return t==null||(t instanceof l.AbstractMesh?e.mesh=t:t instanceof g.Control?e.control=t:t.x!=null&&t.y!=null&&(e.x=t.x,e.y=t.y)),e},o.prototype.remove=function(t){var e;if(t instanceof b.MultiLinePoint){if(e=this._points.indexOf(t),e===-1)return}else e=t;var i=this._points[e];i&&(i.dispose(),this._points.splice(e,1))},o.prototype.reset=function(){for(;this._points.length>0;)this.remove(this._points.length-1)},o.prototype.resetLinks=function(){this._points.forEach(function(t){t!=null&&t.resetLinks()})},Object.defineProperty(o.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"horizontalAlignment",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"verticalAlignment",{set:function(t){},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"MultiLine"},o.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath();var e=!0,i;this._points.forEach(function(a){a&&(e?(t.moveTo(a._point.x,a._point.y),e=!1):a._point.z<1&&i.z<1?t.lineTo(a._point.x,a._point.y):t.moveTo(a._point.x,a._point.y),i=a._point)}),t.stroke(),t.restore()},o.prototype._additionalProcessing=function(){var t=this;this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._points.forEach(function(e){e&&(e.translate(),(t._minX==null||e._point.x<t._minX)&&(t._minX=e._point.x),(t._minY==null||e._point.y<t._minY)&&(t._minY=e._point.y),(t._maxX==null||e._point.x>t._maxX)&&(t._maxX=e._point.x),(t._maxY==null||e._point.y>t._maxY)&&(t._maxY=e._point.y))}),this._minX==null&&(this._minX=0),this._minY==null&&(this._minY=0),this._maxX==null&&(this._maxX=0),this._maxY==null&&(this._maxY=0)},o.prototype._measure=function(){this._minX==null||this._maxX==null||this._minY==null||this._maxY==null||(this._currentMeasure.width=Math.abs(this._maxX-this._minX)+this._lineWidth,this._currentMeasure.height=Math.abs(this._maxY-this._minY)+this._lineWidth)},o.prototype._computeAlignment=function(){this._minX==null||this._minY==null||(this._currentMeasure.left=this._minX-this._lineWidth/2,this._currentMeasure.top=this._minY-this._lineWidth/2)},o.prototype.dispose=function(){this.reset(),_.prototype.dispose.call(this)},(0,c.__decorate)([(0,l.serialize)()],o.prototype,"dash",null),o}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.MultiLine",v)},"../../../dev/gui/src/2D/controls/radioButton.ts":(B,E,d)=>{d.r(E),d.d(E,{RadioButton:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),v=d("../../../dev/gui/src/2D/controls/textBlock.ts"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.group="",i.onIsCheckedChangedObservable=new l.Observable,i.isPointerBlocker=!0,i}return Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness!==e&&(this._thickness=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(e){e=Math.max(Math.min(1,e),0),this._checkSizeRatio!==e&&(this._checkSizeRatio=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(e){this._background!==e&&(this._background=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChecked",{get:function(){return this._isChecked},set:function(e){var i=this;this._isChecked!==e&&(this._isChecked=e,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(e),this._isChecked&&this._host&&this._host.executeOnAllControls(function(a){if(a!==i&&a.group!==void 0){var s=a;s.group===i.group&&(s.isChecked=!1)}}))},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"RadioButton"},t.prototype._draw=function(e){e.save(),this._applyStates(e);var i=this._currentMeasure.width-this._thickness,a=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY),g.Control.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,e),e.fillStyle=this._isEnabled?this._background:this._disabledColor,e.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.strokeStyle=this.color,e.lineWidth=this._thickness,e.stroke(),this._isChecked){e.fillStyle=this._isEnabled?this.color:this._disabledColor;var s=i*this._checkSizeRatio,u=a*this._checkSizeRatio;g.Control.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,s/2-this._thickness/2,u/2-this._thickness/2,e),e.fill()}e.restore()},t.prototype._onPointerDown=function(e,i,a,s,u){return o.prototype._onPointerDown.call(this,e,i,a,s,u)?(this.isReadOnly||this.isChecked||(this.isChecked=!0),!0):!1},t.AddRadioButtonWithHeader=function(e,i,a,s){var u=new b.StackPanel;u.isVertical=!1,u.height="30px";var f=new t;f.width="20px",f.height="20px",f.isChecked=a,f.color="green",f.group=i,f.onIsCheckedChangedObservable.add(function(P){return s(f,P)}),u.addControl(f);var m=new v.TextBlock;return m.text=e,m.width="180px",m.paddingLeft="5px",m.textHorizontalAlignment=g.Control.HORIZONTAL_ALIGNMENT_LEFT,m.color="white",u.addControl(m),u},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"thickness",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"group",void 0),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"checkSizeRatio",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"background",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"isChecked",null),t}(g.Control);(0,l.RegisterClass)("BABYLON.GUI.RadioButton",_)},"../../../dev/gui/src/2D/controls/rectangle.ts":(B,E,d)=>{d.r(E),d.d(E,{Rectangle:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/container.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t.name=o,t._thickness=1,t._cornerRadius=[0,0,0,0],t._cachedRadius=[0,0,0,0],t}return Object.defineProperty(_.prototype,"thickness",{get:function(){return this._thickness},set:function(o){this._thickness!==o&&(this._thickness=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cornerRadius",{get:function(){return this._cornerRadius[0]},set:function(o){o<0&&(o=0),!(this._cornerRadius[0]===o&&this._cornerRadius[1]===o&&this._cornerRadius[2]===o&&this._cornerRadius[3]===o)&&(this._cornerRadius[0]=this._cornerRadius[1]=this._cornerRadius[2]=this._cornerRadius[3]=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cornerRadiusX",{get:function(){return this._cornerRadius[0]},set:function(o){this._cornerRadius[0]!==o&&(this._cornerRadius[0]=o)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cornerRadiusY",{get:function(){return this._cornerRadius[1]},set:function(o){this._cornerRadius[1]!==o&&(this._cornerRadius[1]=o)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cornerRadiusZ",{get:function(){return this._cornerRadius[2]},set:function(o){this._cornerRadius[2]!==o&&(this._cornerRadius[2]=o)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cornerRadiusW",{get:function(){return this._cornerRadius[3]},set:function(o){this._cornerRadius[3]!==o&&(this._cornerRadius[3]=o)},enumerable:!1,configurable:!0}),_.prototype._getTypeName=function(){return"Rectangle"},_.prototype._computeAdditionalOffsetX=function(){var o=0;return(this._cornerRadius[0]!==0||this._cornerRadius[1]!==0||this._cornerRadius[2]!==0||this._cornerRadius[3]!==0)&&(o+=1),this.thickness&&(o+=this.thickness/2),o},_.prototype._computeAdditionalOffsetY=function(){var o=0;return(this._cornerRadius[0]!==0||this._cornerRadius[1]!==0||this._cornerRadius[2]!==0||this._cornerRadius[3]!==0)&&(o+=1),this.thickness&&(o+=this.thickness/2),o},_.prototype._getRectangleFill=function(o){return this._getBackgroundColor(o)},_.prototype._localDraw=function(o){o.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur,o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY),(this._background||this._backgroundGradient)&&(o.fillStyle=this._getRectangleFill(o),this._cornerRadius[0]!==0||this._cornerRadius[1]!==0||this._cornerRadius[2]!==0||this._cornerRadius[3]!==0?(this._drawRoundedRect(o,this._thickness/2),o.fill()):o.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._thickness&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),(this.color||this.gradient)&&(o.strokeStyle=this.gradient?this.gradient.getCanvasGradient(o):this.color),o.lineWidth=this._thickness,this._cornerRadius[0]!==0||this._cornerRadius[1]!==0||this._cornerRadius[2]!==0||this._cornerRadius[3]!==0?(this._drawRoundedRect(o,this._thickness/2),o.stroke()):o.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),o.restore()},_.prototype._additionalProcessing=function(o,t){v.prototype._additionalProcessing.call(this,o,t),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},_.prototype._drawRoundedRect=function(o,t){t===void 0&&(t=0);for(var e=this._currentMeasure.left+t,i=this._currentMeasure.top+t,a=this._currentMeasure.width-t*2,s=this._currentMeasure.height-t*2,u=0;u<this._cornerRadius.length;u++)this._cachedRadius[u]=Math.abs(Math.min(s/2,Math.min(a/2,this._cornerRadius[u])));o.beginPath(),o.moveTo(e+this._cachedRadius[0],i),o.lineTo(e+a-this._cachedRadius[1],i),o.arc(e+a-this._cachedRadius[1],i+this._cachedRadius[1],this._cachedRadius[1],3*Math.PI/2,Math.PI*2),o.lineTo(e+a,i+s-this._cachedRadius[2]),o.arc(e+a-this._cachedRadius[2],i+s-this._cachedRadius[2],this._cachedRadius[2],0,Math.PI/2),o.lineTo(e+this._cachedRadius[3],i+s),o.arc(e+this._cachedRadius[3],i+s-this._cachedRadius[3],this._cachedRadius[3],Math.PI/2,Math.PI),o.lineTo(e,i+this._cachedRadius[0]),o.arc(e+this._cachedRadius[0],i+this._cachedRadius[0],this._cachedRadius[0],Math.PI,3*Math.PI/2),o.closePath()},_.prototype._clipForChildren=function(o){(this._cornerRadius[0]!==0||this._cornerRadius[1]!==0||this._cornerRadius[2]!==0||this._cornerRadius[3]!==0)&&(this._drawRoundedRect(o,this._thickness),o.clip())},(0,c.__decorate)([(0,g.serialize)()],_.prototype,"thickness",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cornerRadius",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cornerRadiusX",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cornerRadiusY",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cornerRadiusZ",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"cornerRadiusW",null),_}(l.Container);(0,g.RegisterClass)("BABYLON.GUI.Rectangle",b)},"../../../dev/gui/src/2D/controls/scrollViewers/scrollViewer.ts":(B,E,d)=>{d.r(E),d.d(E,{ScrollViewer:()=>e});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/rectangle.ts"),g=d("../../../dev/gui/src/2D/controls/grid.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("../../../dev/gui/src/2D/controls/scrollViewers/scrollViewerWindow.ts"),_=d("../../../dev/gui/src/2D/controls/sliders/scrollBar.ts"),o=d("../../../dev/gui/src/2D/controls/sliders/imageScrollBar.ts"),t=d("babylonjs/Misc/perfCounter"),e=function(i){(0,c.__extends)(a,i);function a(s,u){var f=i.call(this,s)||this;return f._barSize=20,f._pointerIsOver=!1,f._wheelPrecision=.05,f._thumbLength=.5,f._thumbHeight=1,f._barImageHeight=1,f._horizontalBarImageHeight=1,f._verticalBarImageHeight=1,f._oldWindowContentsWidth=0,f._oldWindowContentsHeight=0,f._forceHorizontalBar=!1,f._forceVerticalBar=!1,f._useImageBar=u||!1,f.onDirtyObservable.add(function(){f._horizontalBarSpace.color=f.color,f._verticalBarSpace.color=f.color,f._dragSpace.color=f.color}),f.onPointerEnterObservable.add(function(){f._pointerIsOver=!0}),f.onPointerOutObservable.add(function(){f._pointerIsOver=!1}),f._grid=new g.Grid,f._useImageBar?(f._horizontalBar=new o.ImageScrollBar,f._verticalBar=new o.ImageScrollBar):(f._horizontalBar=new _.ScrollBar,f._verticalBar=new _.ScrollBar),f._window=new v._ScrollViewerWindow("scrollViewer_window"),f._window.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,f._window.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,f._grid.addColumnDefinition(1),f._grid.addColumnDefinition(0,!0),f._grid.addRowDefinition(1),f._grid.addRowDefinition(0,!0),i.prototype.addControl.call(f,f._grid),f._grid.addControl(f._window,0,0),f._verticalBarSpace=new l.Rectangle,f._verticalBarSpace.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,f._verticalBarSpace.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,f._verticalBarSpace.thickness=1,f._grid.addControl(f._verticalBarSpace,0,1),f._addBar(f._verticalBar,f._verticalBarSpace,!0,Math.PI),f._horizontalBarSpace=new l.Rectangle,f._horizontalBarSpace.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,f._horizontalBarSpace.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,f._horizontalBarSpace.thickness=1,f._grid.addControl(f._horizontalBarSpace,1,0),f._addBar(f._horizontalBar,f._horizontalBarSpace,!1,0),f._dragSpace=new l.Rectangle,f._dragSpace.thickness=1,f._grid.addControl(f._dragSpace,1,1),f._useImageBar||(f.barColor="grey",f.barBackground="transparent"),f}return Object.defineProperty(a.prototype,"horizontalBar",{get:function(){return this._horizontalBar},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticalBar",{get:function(){return this._verticalBar},enumerable:!1,configurable:!0}),a.prototype.addControl=function(s){return s?(this._window.addControl(s),this):this},a.prototype.removeControl=function(s){return this._window.removeControl(s),this},Object.defineProperty(a.prototype,"children",{get:function(){return this._window.children},enumerable:!1,configurable:!0}),a.prototype._flagDescendantsAsMatrixDirty=function(){for(var s=0,u=this._children;s<u.length;s++){var f=u[s];f._markMatrixAsDirty()}},Object.defineProperty(a.prototype,"freezeControls",{get:function(){return this._window.freezeControls},set:function(s){this._window.freezeControls=s},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bucketWidth",{get:function(){return this._window.bucketWidth},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bucketHeight",{get:function(){return this._window.bucketHeight},enumerable:!1,configurable:!0}),a.prototype.setBucketSizes=function(s,u){this._window.setBucketSizes(s,u)},Object.defineProperty(a.prototype,"forceHorizontalBar",{get:function(){return this._forceHorizontalBar},set:function(s){this._grid.setRowDefinition(1,s?this._barSize:0,!0),this._horizontalBar.isVisible=s,this._forceHorizontalBar=s},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"forceVerticalBar",{get:function(){return this._forceVerticalBar},set:function(s){this._grid.setColumnDefinition(1,s?this._barSize:0,!0),this._verticalBar.isVisible=s,this._forceVerticalBar=s},enumerable:!1,configurable:!0}),a.prototype.resetWindow=function(){this._window.width="100%",this._window.height="100%"},a.prototype._getTypeName=function(){return"ScrollViewer"},a.prototype._buildClientSizes=function(){var s=this.host.idealRatio;this._window.parentClientWidth=this._currentMeasure.width-(this._verticalBar.isVisible||this.forceVerticalBar?this._barSize*s:0)-2*this.thickness,this._window.parentClientHeight=this._currentMeasure.height-(this._horizontalBar.isVisible||this.forceHorizontalBar?this._barSize*s:0)-2*this.thickness,this._clientWidth=this._window.parentClientWidth,this._clientHeight=this._window.parentClientHeight},a.prototype._additionalProcessing=function(s,u){i.prototype._additionalProcessing.call(this,s,u),this._buildClientSizes()},a.prototype._postMeasure=function(){i.prototype._postMeasure.call(this),this._updateScroller(),this._setWindowPosition(!1)},Object.defineProperty(a.prototype,"wheelPrecision",{get:function(){return this._wheelPrecision},set:function(s){this._wheelPrecision!==s&&(s<0&&(s=0),s>1&&(s=1),this._wheelPrecision=s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scrollBackground",{get:function(){return this._horizontalBarSpace.background},set:function(s){this._horizontalBarSpace.background!==s&&(this._horizontalBarSpace.background=s,this._verticalBarSpace.background=s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"barColor",{get:function(){return this._barColor},set:function(s){this._barColor!==s&&(this._barColor=s,this._horizontalBar.color=s,this._verticalBar.color=s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"thumbImage",{get:function(){return this._barImage},set:function(s){if(this._barImage!==s){this._barImage=s;var u=this._horizontalBar,f=this._verticalBar;u.thumbImage=s,f.thumbImage=s}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"horizontalThumbImage",{get:function(){return this._horizontalBarImage},set:function(s){if(this._horizontalBarImage!==s){this._horizontalBarImage=s;var u=this._horizontalBar;u.thumbImage=s}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticalThumbImage",{get:function(){return this._verticalBarImage},set:function(s){if(this._verticalBarImage!==s){this._verticalBarImage=s;var u=this._verticalBar;u.thumbImage=s}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"barSize",{get:function(){return this._barSize},set:function(s){this._barSize!==s&&(this._barSize=s,this._markAsDirty(),this._horizontalBar.isVisible&&this._grid.setRowDefinition(1,this._barSize,!0),this._verticalBar.isVisible&&this._grid.setColumnDefinition(1,this._barSize,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(s){if(this._thumbLength!==s){s<=0&&(s=.1),s>1&&(s=1),this._thumbLength=s;var u=this._horizontalBar,f=this._verticalBar;u.thumbLength=s,f.thumbLength=s,this._markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(s){if(this._thumbHeight!==s){s<=0&&(s=.1),s>1&&(s=1),this._thumbHeight=s;var u=this._horizontalBar,f=this._verticalBar;u.thumbHeight=s,f.thumbHeight=s,this._markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(s){if(this._barImageHeight!==s){s<=0&&(s=.1),s>1&&(s=1),this._barImageHeight=s;var u=this._horizontalBar,f=this._verticalBar;u.barImageHeight=s,f.barImageHeight=s,this._markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"horizontalBarImageHeight",{get:function(){return this._horizontalBarImageHeight},set:function(s){if(this._horizontalBarImageHeight!==s){s<=0&&(s=.1),s>1&&(s=1),this._horizontalBarImageHeight=s;var u=this._horizontalBar;u.barImageHeight=s,this._markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticalBarImageHeight",{get:function(){return this._verticalBarImageHeight},set:function(s){if(this._verticalBarImageHeight!==s){s<=0&&(s=.1),s>1&&(s=1),this._verticalBarImageHeight=s;var u=this._verticalBar;u.barImageHeight=s,this._markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"barBackground",{get:function(){return this._barBackground},set:function(s){if(this._barBackground!==s){this._barBackground=s;var u=this._horizontalBar,f=this._verticalBar;u.background=s,f.background=s,this._dragSpace.background=s}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"barImage",{get:function(){return this._barBackgroundImage},set:function(s){this._barBackgroundImage=s;var u=this._horizontalBar,f=this._verticalBar;u.backgroundImage=s,f.backgroundImage=s},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"horizontalBarImage",{get:function(){return this._horizontalBarBackgroundImage},set:function(s){this._horizontalBarBackgroundImage=s;var u=this._horizontalBar;u.backgroundImage=s},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticalBarImage",{get:function(){return this._verticalBarBackgroundImage},set:function(s){this._verticalBarBackgroundImage=s;var u=this._verticalBar;u.backgroundImage=s},enumerable:!1,configurable:!0}),a.prototype._setWindowPosition=function(s){s===void 0&&(s=!0);var u=this.host.idealRatio,f=this._window._currentMeasure.width,m=this._window._currentMeasure.height;if(!(!s&&this._oldWindowContentsWidth===f&&this._oldWindowContentsHeight===m)){this._oldWindowContentsWidth=f,this._oldWindowContentsHeight=m;var P=this._clientWidth-f,y=this._clientHeight-m,M=this._horizontalBar.value/u*P+"px",O=this._verticalBar.value/u*y+"px";M!==this._window.left&&(this._window.left=M,this.freezeControls||(this._rebuildLayout=!0)),O!==this._window.top&&(this._window.top=O,this.freezeControls||(this._rebuildLayout=!0))}},a.prototype._updateScroller=function(){var s=this._window._currentMeasure.width,u=this._window._currentMeasure.height;this._horizontalBar.isVisible&&s<=this._clientWidth&&!this.forceHorizontalBar?(this._grid.setRowDefinition(1,0,!0),this._horizontalBar.isVisible=!1,this._horizontalBar.value=0,this._rebuildLayout=!0):!this._horizontalBar.isVisible&&(s>this._clientWidth||this.forceHorizontalBar)&&(this._grid.setRowDefinition(1,this._barSize,!0),this._horizontalBar.isVisible=!0,this._rebuildLayout=!0),this._verticalBar.isVisible&&u<=this._clientHeight&&!this.forceVerticalBar?(this._grid.setColumnDefinition(1,0,!0),this._verticalBar.isVisible=!1,this._verticalBar.value=0,this._rebuildLayout=!0):!this._verticalBar.isVisible&&(u>this._clientHeight||this.forceVerticalBar)&&(this._grid.setColumnDefinition(1,this._barSize,!0),this._verticalBar.isVisible=!0,this._rebuildLayout=!0),this._buildClientSizes();var f=this.host.idealRatio;this._horizontalBar.thumbWidth=this._thumbLength*.9*(this._clientWidth/f)+"px",this._verticalBar.thumbWidth=this._thumbLength*.9*(this._clientHeight/f)+"px"},a.prototype._link=function(s){i.prototype._link.call(this,s),this._attachWheel()},a.prototype._addBar=function(s,u,f,m){var P=this;s.paddingLeft=0,s.width="100%",s.height="100%",s.barOffset=0,s.value=0,s.maximum=1,s.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_CENTER,s.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_CENTER,s.isVertical=f,s.rotation=m,s.isVisible=!1,u.addControl(s),s.onValueChangedObservable.add(function(){P._setWindowPosition()})},a.prototype._attachWheel=function(){var s=this;!this._host||this._onWheelObserver||(this._onWheelObserver=this.onWheelObservable.add(function(u){!s._pointerIsOver||s.isReadOnly||(s._verticalBar.isVisible==!0&&(u.y<0&&s._verticalBar.value>0?s._verticalBar.value-=s._wheelPrecision:u.y>0&&s._verticalBar.value<s._verticalBar.maximum&&(s._verticalBar.value+=s._wheelPrecision)),s._horizontalBar.isVisible==!0&&(u.x<0&&s._horizontalBar.value<s._horizontalBar.maximum?s._horizontalBar.value+=s._wheelPrecision:u.x>0&&s._horizontalBar.value>0&&(s._horizontalBar.value-=s._wheelPrecision)))}))},a.prototype._renderHighlightSpecific=function(s){this.isHighlighted&&(i.prototype._renderHighlightSpecific.call(this,s),this._grid._renderHighlightSpecific(s),s.restore())},a.prototype.dispose=function(){this.onWheelObservable.remove(this._onWheelObserver),this._onWheelObserver=null,i.prototype.dispose.call(this)},(0,c.__decorate)([(0,t.serialize)()],a.prototype,"wheelPrecision",null),(0,c.__decorate)([(0,t.serialize)()],a.prototype,"scrollBackground",null),(0,c.__decorate)([(0,t.serialize)()],a.prototype,"barColor",null),(0,c.__decorate)([(0,t.serialize)()],a.prototype,"barSize",null),(0,c.__decorate)([(0,t.serialize)()],a.prototype,"barBackground",null),a}(l.Rectangle);(0,t.RegisterClass)("BABYLON.GUI.ScrollViewer",e)},"../../../dev/gui/src/2D/controls/scrollViewers/scrollViewerWindow.ts":(B,E,d)=>{d.r(E),d.d(E,{_ScrollViewerWindow:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/measure.ts"),g=d("../../../dev/gui/src/2D/controls/container.ts"),b=d("../../../dev/gui/src/2D/valueAndUnit.ts"),v=d("../../../dev/gui/src/2D/controls/control.ts"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i._freezeControls=!1,i._bucketWidth=0,i._bucketHeight=0,i._buckets={},i}return Object.defineProperty(t.prototype,"freezeControls",{get:function(){return this._freezeControls},set:function(e){if(this._freezeControls!==e){e||this._restoreMeasures(),this._freezeControls=!1;var i=this.host.getSize(),a=i.width,s=i.height,u=this.host.getContext(),f=new l.Measure(0,0,a,s);this.host._numLayoutCalls=0,this.host._rootContainer._layout(f,u),e&&(this._updateMeasures(),this._useBuckets()&&this._makeBuckets()),this._freezeControls=e,this.host.markAsDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucketWidth",{get:function(){return this._bucketWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucketHeight",{get:function(){return this._bucketHeight},enumerable:!1,configurable:!0}),t.prototype.setBucketSizes=function(e,i){this._bucketWidth=e,this._bucketHeight=i,this._useBuckets()?this._freezeControls&&this._makeBuckets():this._buckets={}},t.prototype._useBuckets=function(){return this._bucketWidth>0&&this._bucketHeight>0},t.prototype._makeBuckets=function(){this._buckets={},this._bucketLen=Math.ceil(this.widthInPixels/this._bucketWidth),this._dispatchInBuckets(this._children),this._oldLeft=null,this._oldTop=null},t.prototype._dispatchInBuckets=function(e){for(var i=0;i<e.length;++i){for(var a=e[i],s=Math.max(0,Math.floor((a._customData._origLeft-this._customData.origLeft)/this._bucketWidth)),u=Math.floor((a._customData._origLeft-this._customData.origLeft+a._currentMeasure.width-1)/this._bucketWidth),f=Math.floor((a._customData._origTop-this._customData.origTop+a._currentMeasure.height-1)/this._bucketHeight),m=Math.max(0,Math.floor((a._customData._origTop-this._customData.origTop)/this._bucketHeight));m<=f;){for(var P=s;P<=u;++P){var y=m*this._bucketLen+P,M=this._buckets[y];M||(M=[],this._buckets[y]=M),M.push(a)}m++}a instanceof g.Container&&a._children.length>0&&this._dispatchInBuckets(a._children)}},t.prototype._updateMeasures=function(){var e=this.leftInPixels|0,i=this.topInPixels|0;this._measureForChildren.left-=e,this._measureForChildren.top-=i,this._currentMeasure.left-=e,this._currentMeasure.top-=i,this._customData.origLeftForChildren=this._measureForChildren.left,this._customData.origTopForChildren=this._measureForChildren.top,this._customData.origLeft=this._currentMeasure.left,this._customData.origTop=this._currentMeasure.top,this._updateChildrenMeasures(this._children,e,i)},t.prototype._updateChildrenMeasures=function(e,i,a){for(var s=0;s<e.length;++s){var u=e[s];u._currentMeasure.left-=i,u._currentMeasure.top-=a,u._customData._origLeft=u._currentMeasure.left,u._customData._origTop=u._currentMeasure.top,u instanceof g.Container&&u._children.length>0&&this._updateChildrenMeasures(u._children,i,a)}},t.prototype._restoreMeasures=function(){var e=this.leftInPixels|0,i=this.topInPixels|0;this._measureForChildren.left=this._customData.origLeftForChildren+e,this._measureForChildren.top=this._customData.origTopForChildren+i,this._currentMeasure.left=this._customData.origLeft+e,this._currentMeasure.top=this._customData.origTop+i},t.prototype._getTypeName=function(){return"ScrollViewerWindow"},t.prototype._additionalProcessing=function(e,i){o.prototype._additionalProcessing.call(this,e,i),this._parentMeasure=e,this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this._measureForChildren.width=e.width,this._measureForChildren.height=e.height},t.prototype._layout=function(e,i){return this._freezeControls?(this.invalidateRect(),!1):o.prototype._layout.call(this,e,i)},t.prototype._scrollChildren=function(e,i,a){for(var s=0;s<e.length;++s){var u=e[s];u._currentMeasure.left=u._customData._origLeft+i,u._currentMeasure.top=u._customData._origTop+a,u._isClipped=!1,u instanceof g.Container&&u._children.length>0&&this._scrollChildren(u._children,i,a)}},t.prototype._scrollChildrenWithBuckets=function(e,i,a,s){for(var u=Math.max(0,Math.floor(-e/this._bucketWidth)),f=Math.floor((-e+this._parentMeasure.width-1)/this._bucketWidth),m=Math.floor((-i+this._parentMeasure.height-1)/this._bucketHeight),P=Math.max(0,Math.floor(-i/this._bucketHeight));P<=m;){for(var y=u;y<=f;++y){var M=P*this._bucketLen+y,O=this._buckets[M];if(O)for(var x=0;x<O.length;++x){var R=O[x];R._currentMeasure.left=R._customData._origLeft+a,R._currentMeasure.top=R._customData._origTop+s,R._isClipped=!1}}P++}},t.prototype._draw=function(e,i){if(!this._freezeControls){o.prototype._draw.call(this,e,i);return}this._localDraw(e),this.clipChildren&&this._clipForChildren(e);var a=this.leftInPixels|0,s=this.topInPixels|0;this._useBuckets()?this._oldLeft!==null&&this._oldTop!==null?(this._scrollChildrenWithBuckets(this._oldLeft,this._oldTop,a,s),this._scrollChildrenWithBuckets(a,s,a,s)):this._scrollChildren(this._children,a,s):this._scrollChildren(this._children,a,s),this._oldLeft=a,this._oldTop=s;for(var u=0,f=this._children;u<f.length;u++){var m=f[u];m._intersectsRect(this._parentMeasure)&&m._render(e,this._parentMeasure)}},t.prototype._postMeasure=function(){if(this._freezeControls){o.prototype._postMeasure.call(this);return}for(var e=this.parentClientWidth,i=this.parentClientHeight,a=0,s=this.children;a<s.length;a++){var u=s[a];!u.isVisible||u.notRenderable||(u.horizontalAlignment===v.Control.HORIZONTAL_ALIGNMENT_CENTER&&u._offsetLeft(this._currentMeasure.left-u._currentMeasure.left),u.verticalAlignment===v.Control.VERTICAL_ALIGNMENT_CENTER&&u._offsetTop(this._currentMeasure.top-u._currentMeasure.top),e=Math.max(e,u._currentMeasure.left-this._currentMeasure.left+u._currentMeasure.width+u.paddingRightInPixels),i=Math.max(i,u._currentMeasure.top-this._currentMeasure.top+u._currentMeasure.height+u.paddingBottomInPixels))}this._currentMeasure.width!==e&&(this._width.updateInPlace(e,b.ValueAndUnit.UNITMODE_PIXEL),this._currentMeasure.width=e,this._rebuildLayout=!0,this._isDirty=!0),this._currentMeasure.height!==i&&(this._height.updateInPlace(i,b.ValueAndUnit.UNITMODE_PIXEL),this._currentMeasure.height=i,this._rebuildLayout=!0,this._isDirty=!0),o.prototype._postMeasure.call(this)},t}(g.Container)},"../../../dev/gui/src/2D/controls/selector.ts":(B,E,d)=>{d.r(E),d.d(E,{CheckboxGroup:()=>a,RadioGroup:()=>s,SelectionPanel:()=>f,SelectorGroup:()=>i,SliderGroup:()=>u});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/rectangle.ts"),g=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("../../../dev/gui/src/2D/controls/textBlock.ts"),_=d("../../../dev/gui/src/2D/controls/checkbox.ts"),o=d("../../../dev/gui/src/2D/controls/radioButton.ts"),t=d("../../../dev/gui/src/2D/controls/sliders/slider.ts"),e=d("../../../dev/gui/src/2D/controls/container.ts"),i=function(){function m(P){this.name=P,this._groupPanel=new g.StackPanel,this._selectors=new Array,this._groupPanel.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,this._groupPanel.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,this._groupHeader=this._addGroupHeader(P)}return Object.defineProperty(m.prototype,"groupPanel",{get:function(){return this._groupPanel},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectors",{get:function(){return this._selectors},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"header",{get:function(){return this._groupHeader.text},set:function(P){this._groupHeader.text!=="label"&&(this._groupHeader.text=P)},enumerable:!1,configurable:!0}),m.prototype._addGroupHeader=function(P){var y=new v.TextBlock("groupHead",P);return y.width=.9,y.height="30px",y.textWrapping=!0,y.color="black",y.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,y.textHorizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,y.left="2px",this._groupPanel.addControl(y),y},m.prototype._getSelector=function(P){if(!(P<0||P>=this._selectors.length))return this._selectors[P]},m.prototype.removeSelector=function(P){P<0||P>=this._selectors.length||(this._groupPanel.removeControl(this._selectors[P]),this._selectors.splice(P,1))},m}(),a=function(m){(0,c.__extends)(P,m);function P(){return m!==null&&m.apply(this,arguments)||this}return P.prototype.addCheckbox=function(y,M,O){M===void 0&&(M=function(N){}),O===void 0&&(O=!1),O=O||!1;var x=new _.Checkbox;x.width="20px",x.height="20px",x.color="#364249",x.background="#CCCCCC",x.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,x.onIsCheckedChangedObservable.add(function(N){M(N)});var R=b.Control.AddHeader(x,y,"200px",{isHorizontal:!0,controlFirst:!0});R.height="30px",R.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,R.left="4px",this.groupPanel.addControl(R),this.selectors.push(R),x.isChecked=O,this.groupPanel.parent&&this.groupPanel.parent.parent&&(x.color=this.groupPanel.parent.parent.buttonColor,x.background=this.groupPanel.parent.parent.buttonBackground)},P.prototype._setSelectorLabel=function(y,M){this.selectors[y].children[1].text=M},P.prototype._setSelectorLabelColor=function(y,M){this.selectors[y].children[1].color=M},P.prototype._setSelectorButtonColor=function(y,M){this.selectors[y].children[0].color=M},P.prototype._setSelectorButtonBackground=function(y,M){this.selectors[y].children[0].background=M},P}(i),s=function(m){(0,c.__extends)(P,m);function P(){var y=m!==null&&m.apply(this,arguments)||this;return y._selectNb=0,y}return P.prototype.addRadio=function(y,M,O){M===void 0&&(M=function(W){}),O===void 0&&(O=!1);var x=this._selectNb++,R=new o.RadioButton;R.name=y,R.width="20px",R.height="20px",R.color="#364249",R.background="#CCCCCC",R.group=this.name,R.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,R.onIsCheckedChangedObservable.add(function(W){W&&M(x)});var N=b.Control.AddHeader(R,y,"200px",{isHorizontal:!0,controlFirst:!0});N.height="30px",N.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,N.left="4px",this.groupPanel.addControl(N),this.selectors.push(N),R.isChecked=O,this.groupPanel.parent&&this.groupPanel.parent.parent&&(R.color=this.groupPanel.parent.parent.buttonColor,R.background=this.groupPanel.parent.parent.buttonBackground)},P.prototype._setSelectorLabel=function(y,M){this.selectors[y].children[1].text=M},P.prototype._setSelectorLabelColor=function(y,M){this.selectors[y].children[1].color=M},P.prototype._setSelectorButtonColor=function(y,M){this.selectors[y].children[0].color=M},P.prototype._setSelectorButtonBackground=function(y,M){this.selectors[y].children[0].background=M},P}(i),u=function(m){(0,c.__extends)(P,m);function P(){return m!==null&&m.apply(this,arguments)||this}return P.prototype.addSlider=function(y,M,O,x,R,N,W){M===void 0&&(M=function(H){}),O===void 0&&(O="Units"),x===void 0&&(x=0),R===void 0&&(R=0),N===void 0&&(N=0),W===void 0&&(W=function(H){return H|0});var Q=new t.Slider;Q.name=O,Q.value=N,Q.minimum=x,Q.maximum=R,Q.width=.9,Q.height="20px",Q.color="#364249",Q.background="#CCCCCC",Q.borderColor="black",Q.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,Q.left="4px",Q.paddingBottom="4px",Q.onValueChangedObservable.add(function(H){Q.parent.children[0].text=Q.parent.children[0].name+": "+W(H)+" "+Q.name,M(H)});var U=b.Control.AddHeader(Q,y+": "+W(N)+" "+O,"30px",{isHorizontal:!1,controlFirst:!1});U.height="60px",U.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,U.left="4px",U.children[0].name=y,this.groupPanel.addControl(U),this.selectors.push(U),this.groupPanel.parent&&this.groupPanel.parent.parent&&(Q.color=this.groupPanel.parent.parent.buttonColor,Q.background=this.groupPanel.parent.parent.buttonBackground)},P.prototype._setSelectorLabel=function(y,M){this.selectors[y].children[0].name=M,this.selectors[y].children[0].text=M+": "+this.selectors[y].children[1].value+" "+this.selectors[y].children[1].name},P.prototype._setSelectorLabelColor=function(y,M){this.selectors[y].children[0].color=M},P.prototype._setSelectorButtonColor=function(y,M){this.selectors[y].children[1].color=M},P.prototype._setSelectorButtonBackground=function(y,M){this.selectors[y].children[1].background=M},P}(i),f=function(m){(0,c.__extends)(P,m);function P(y,M){M===void 0&&(M=[]);var O=m.call(this,y)||this;if(O.name=y,O.groups=M,O._buttonColor="#364249",O._buttonBackground="#CCCCCC",O._headerColor="black",O._barColor="white",O._barHeight="2px",O._spacerHeight="20px",O._bars=new Array,O._groups=M,O.thickness=2,O._panel=new g.StackPanel,O._panel.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP,O._panel.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,O._panel.top=5,O._panel.left=5,O._panel.width=.95,M.length>0){for(var x=0;x<M.length-1;x++)O._panel.addControl(M[x].groupPanel),O._addSpacer();O._panel.addControl(M[M.length-1].groupPanel)}return O.addControl(O._panel),O}return P.prototype._getTypeName=function(){return"SelectionPanel"},Object.defineProperty(P.prototype,"panel",{get:function(){return this._panel},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"headerColor",{get:function(){return this._headerColor},set:function(y){this._headerColor!==y&&(this._headerColor=y,this._setHeaderColor())},enumerable:!1,configurable:!0}),P.prototype._setHeaderColor=function(){for(var y=0;y<this._groups.length;y++)this._groups[y].groupPanel.children[0].color=this._headerColor},Object.defineProperty(P.prototype,"buttonColor",{get:function(){return this._buttonColor},set:function(y){this._buttonColor!==y&&(this._buttonColor=y,this._setbuttonColor())},enumerable:!1,configurable:!0}),P.prototype._setbuttonColor=function(){for(var y=0;y<this._groups.length;y++)for(var M=0;M<this._groups[y].selectors.length;M++)this._groups[y]._setSelectorButtonColor(M,this._buttonColor)},Object.defineProperty(P.prototype,"labelColor",{get:function(){return this._labelColor},set:function(y){this._labelColor!==y&&(this._labelColor=y,this._setLabelColor())},enumerable:!1,configurable:!0}),P.prototype._setLabelColor=function(){for(var y=0;y<this._groups.length;y++)for(var M=0;M<this._groups[y].selectors.length;M++)this._groups[y]._setSelectorLabelColor(M,this._labelColor)},Object.defineProperty(P.prototype,"buttonBackground",{get:function(){return this._buttonBackground},set:function(y){this._buttonBackground!==y&&(this._buttonBackground=y,this._setButtonBackground())},enumerable:!1,configurable:!0}),P.prototype._setButtonBackground=function(){for(var y=0;y<this._groups.length;y++)for(var M=0;M<this._groups[y].selectors.length;M++)this._groups[y]._setSelectorButtonBackground(M,this._buttonBackground)},Object.defineProperty(P.prototype,"barColor",{get:function(){return this._barColor},set:function(y){this._barColor!==y&&(this._barColor=y,this._setBarColor())},enumerable:!1,configurable:!0}),P.prototype._setBarColor=function(){for(var y=0;y<this._bars.length;y++)this._bars[y].children[0].background=this._barColor},Object.defineProperty(P.prototype,"barHeight",{get:function(){return this._barHeight},set:function(y){this._barHeight!==y&&(this._barHeight=y,this._setBarHeight())},enumerable:!1,configurable:!0}),P.prototype._setBarHeight=function(){for(var y=0;y<this._bars.length;y++)this._bars[y].children[0].height=this._barHeight},Object.defineProperty(P.prototype,"spacerHeight",{get:function(){return this._spacerHeight},set:function(y){this._spacerHeight!==y&&(this._spacerHeight=y,this._setSpacerHeight())},enumerable:!1,configurable:!0}),P.prototype._setSpacerHeight=function(){for(var y=0;y<this._bars.length;y++)this._bars[y].height=this._spacerHeight},P.prototype._addSpacer=function(){var y=new e.Container;y.width=1,y.height=this._spacerHeight,y.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT;var M=new l.Rectangle;M.width=1,M.height=this._barHeight,M.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,M.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_CENTER,M.background=this._barColor,M.color="transparent",y.addControl(M),this._panel.addControl(y),this._bars.push(y)},P.prototype.addGroup=function(y){this._groups.length>0&&this._addSpacer(),this._panel.addControl(y.groupPanel),this._groups.push(y),y.groupPanel.children[0].color=this._headerColor;for(var M=0;M<y.selectors.length;M++)y._setSelectorButtonColor(M,this._buttonColor),y._setSelectorButtonBackground(M,this._buttonBackground)},P.prototype.removeGroup=function(y){if(!(y<0||y>=this._groups.length)){var M=this._groups[y];this._panel.removeControl(M.groupPanel),this._groups.splice(y,1),y<this._bars.length&&(this._panel.removeControl(this._bars[y]),this._bars.splice(y,1))}},P.prototype.setHeaderName=function(y,M){if(!(M<0||M>=this._groups.length)){var O=this._groups[M];O.groupPanel.children[0].text=y}},P.prototype.relabel=function(y,M,O){if(!(M<0||M>=this._groups.length)){var x=this._groups[M];O<0||O>=x.selectors.length||x._setSelectorLabel(O,y)}},P.prototype.removeFromGroupSelector=function(y,M){if(!(y<0||y>=this._groups.length)){var O=this._groups[y];M<0||M>=O.selectors.length||O.removeSelector(M)}},P.prototype.addToGroupCheckbox=function(y,M,O,x){if(O===void 0&&(O=function(){}),x===void 0&&(x=!1),!(y<0||y>=this._groups.length)){var R=this._groups[y];R.addCheckbox(M,O,x)}},P.prototype.addToGroupRadio=function(y,M,O,x){if(O===void 0&&(O=function(){}),x===void 0&&(x=!1),!(y<0||y>=this._groups.length)){var R=this._groups[y];R.addRadio(M,O,x)}},P.prototype.addToGroupSlider=function(y,M,O,x,R,N,W,Q){if(O===void 0&&(O=function(){}),x===void 0&&(x="Units"),R===void 0&&(R=0),N===void 0&&(N=0),W===void 0&&(W=0),Q===void 0&&(Q=function(H){return H|0}),!(y<0||y>=this._groups.length)){var U=this._groups[y];U.addSlider(M,O,x,R,N,W,Q)}},P}(l.Rectangle)},"../../../dev/gui/src/2D/controls/sliders/baseSlider.ts":(B,E,d)=>{d.r(E),d.d(E,{BaseSlider:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/control.ts"),b=d("../../../dev/gui/src/2D/valueAndUnit.ts"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._thumbWidth=new b.ValueAndUnit(20,b.ValueAndUnit.UNITMODE_PIXEL,!1),e._minimum=0,e._maximum=100,e._value=50,e._isVertical=!1,e._barOffset=new b.ValueAndUnit(5,b.ValueAndUnit.UNITMODE_PIXEL,!1),e._isThumbClamped=!1,e._displayThumb=!0,e._step=0,e._lastPointerDownId=-1,e._effectiveBarOffset=0,e.onValueChangedObservable=new l.Observable,e._pointerIsDown=!1,e.isPointerBlocker=!0,e}return Object.defineProperty(o.prototype,"displayThumb",{get:function(){return this._displayThumb},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"step",{get:function(){return this._step},set:function(t){this._step!==t&&(this._step=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"barOffset",{get:function(){return this._barOffset.toString(this._host)},set:function(t){this._barOffset.toString(this._host)!==t&&this._barOffset.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"barOffsetInPixels",{get:function(){return this._barOffset.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"thumbWidth",{get:function(){return this._thumbWidth.toString(this._host)},set:function(t){this._thumbWidth.toString(this._host)!==t&&this._thumbWidth.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"thumbWidthInPixels",{get:function(){return this._thumbWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._minimum!==t&&(this._minimum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum!==t&&(this._maximum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(t){t=Math.max(Math.min(t,this._maximum),this._minimum),this._value!==t&&(this._value=t,this._markAsDirty(),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isThumbClamped",{get:function(){return this._isThumbClamped},set:function(t){this._isThumbClamped!==t&&(this._isThumbClamped=t,this._markAsDirty())},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"BaseSlider"},o.prototype._getThumbPosition=function(){return this.isVertical?(this.maximum-this.value)/(this.maximum-this.minimum)*this._backgroundBoxLength:(this.value-this.minimum)/(this.maximum-this.minimum)*this._backgroundBoxLength},o.prototype._getThumbThickness=function(t){var e=0;switch(t){case"circle":this._thumbWidth.isPixel?e=Math.max(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):e=this._backgroundBoxThickness*this._thumbWidth.getValue(this._host);break;case"rectangle":this._thumbWidth.isPixel?e=Math.min(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):e=this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)}return e},o.prototype._prepareRenderingData=function(t){if(this._effectiveBarOffset=0,this._renderLeft=this._currentMeasure.left,this._renderTop=this._currentMeasure.top,this._renderWidth=this._currentMeasure.width,this._renderHeight=this._currentMeasure.height,this._backgroundBoxLength=Math.max(this._currentMeasure.width,this._currentMeasure.height),this._backgroundBoxThickness=Math.min(this._currentMeasure.width,this._currentMeasure.height),this._effectiveThumbThickness=this._getThumbThickness(t),this.displayThumb&&(this._backgroundBoxLength-=this._effectiveThumbThickness),this.isVertical&&this._currentMeasure.height<this._currentMeasure.width){console.error("Height should be greater than width");return}this._barOffset.isPixel?this._effectiveBarOffset=Math.min(this._barOffset.getValue(this._host),this._backgroundBoxThickness):this._effectiveBarOffset=this._backgroundBoxThickness*this._barOffset.getValue(this._host),this._backgroundBoxThickness-=this._effectiveBarOffset*2,this.isVertical?(this._renderLeft+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderTop+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxLength,this._renderWidth=this._backgroundBoxThickness):(this._renderTop+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderLeft+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxThickness,this._renderWidth=this._backgroundBoxLength)},o.prototype._updateValueFromPointer=function(t,e){this.rotation!=0&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y);var i;this._isVertical?i=this._minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this._maximum-this._minimum):i=this._minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this._maximum-this._minimum),this.value=this._step?Math.round(i/this._step)*this._step:i},o.prototype._onPointerDown=function(t,e,i,a,s){return _.prototype._onPointerDown.call(this,t,e,i,a,s)?(this.isReadOnly||(this._pointerIsDown=!0,this._updateValueFromPointer(e.x,e.y),this._host._capturingControl[i]=this,this._lastPointerDownId=i),!0):!1},o.prototype._onPointerMove=function(t,e,i,a){i==this._lastPointerDownId&&(this._pointerIsDown&&!this.isReadOnly&&this._updateValueFromPointer(e.x,e.y),_.prototype._onPointerMove.call(this,t,e,i,a))},o.prototype._onPointerUp=function(t,e,i,a,s){this._pointerIsDown=!1,delete this._host._capturingControl[i],_.prototype._onPointerUp.call(this,t,e,i,a,s)},o.prototype._onCanvasBlur=function(){this._forcePointerUp(),_.prototype._onCanvasBlur.call(this)},(0,c.__decorate)([(0,l.serialize)()],o.prototype,"displayThumb",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"step",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"barOffset",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"thumbWidth",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"minimum",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"maximum",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"value",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isVertical",null),(0,c.__decorate)([(0,l.serialize)()],o.prototype,"isThumbClamped",null),o}(g.Control)},"../../../dev/gui/src/2D/controls/sliders/imageBasedSlider.ts":(B,E,d)=>{d.r(E),d.d(E,{ImageBasedSlider:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/sliders/baseSlider.ts"),g=d("../../../dev/gui/src/2D/measure.ts"),b=d("../../../dev/gui/src/2D/controls/image.ts"),v=d("babylonjs/Misc/perfCounter"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._tempMeasure=new g.Measure(0,0,0,0),i}return Object.defineProperty(t.prototype,"displayThumb",{get:function(){return this._displayThumb&&this.thumbImage!=null},set:function(e){this._displayThumb!==e&&(this._displayThumb=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(e){var i=this;this._backgroundImage!==e&&(this._backgroundImage=e,e&&!e.isLoaded&&e.onImageLoadedObservable.addOnce(function(){return i._markAsDirty()}),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueBarImage",{get:function(){return this._valueBarImage},set:function(e){var i=this;this._valueBarImage!==e&&(this._valueBarImage=e,e&&!e.isLoaded&&e.onImageLoadedObservable.addOnce(function(){return i._markAsDirty()}),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbImage",{get:function(){return this._thumbImage},set:function(e){var i=this;this._thumbImage!==e&&(this._thumbImage=e,e&&!e.isLoaded&&e.onImageLoadedObservable.addOnce(function(){return i._markAsDirty()}),this._markAsDirty())},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"ImageBasedSlider"},t.prototype._draw=function(e){e.save(),this._applyStates(e),this._prepareRenderingData("rectangle");var i=this._getThumbPosition(),a=this._renderLeft,s=this._renderTop,u=this._renderWidth,f=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(a,s,u,f),this.isThumbClamped&&this.displayThumb&&(this.isVertical?this._tempMeasure.height+=this._effectiveThumbThickness:this._tempMeasure.width+=this._effectiveThumbThickness),this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure),this._backgroundImage._draw(e)),this._valueBarImage&&(this.isVertical?this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(a,s+i,u,f-i+this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(a,s+i,u,f-i):this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(a,s,i+this._effectiveThumbThickness/2,f):this._tempMeasure.copyFromFloats(a,s,i,f),this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure),this._valueBarImage._draw(e)),this.displayThumb&&(this.isVertical?this._tempMeasure.copyFromFloats(a-this._effectiveBarOffset,this._currentMeasure.top+i,this._currentMeasure.width,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+i,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(e)),e.restore()},t.prototype.serialize=function(e){o.prototype.serialize.call(this,e);var i={},a={},s={};this.backgroundImage.serialize(i),this.thumbImage.serialize(a),this.valueBarImage.serialize(s),e.backgroundImage=i,e.thumbImage=a,e.valueBarImage=s},t.prototype._parseFromContent=function(e,i){o.prototype._parseFromContent.call(this,e,i),this.backgroundImage=b.Image.Parse(e.backgroundImage,i),this.thumbImage=b.Image.Parse(e.thumbImage,i),this.valueBarImage=b.Image.Parse(e.valueBarImage,i)},(0,c.__decorate)([(0,v.serialize)()],t.prototype,"displayThumb",null),t}(l.BaseSlider);(0,v.RegisterClass)("BABYLON.GUI.ImageBasedSlider",_)},"../../../dev/gui/src/2D/controls/sliders/imageScrollBar.ts":(B,E,d)=>{d.r(E),d.d(E,{ImageScrollBar:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/sliders/baseSlider.ts"),g=d("../../../dev/gui/src/2D/measure.ts"),b=d("babylonjs/Misc/perfCounter"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._thumbLength=.5,e._thumbHeight=1,e._barImageHeight=1,e._tempMeasure=new g.Measure(0,0,0,0),e._invertScrollDirection=!1,e.num90RotationInVerticalMode=1,e}return Object.defineProperty(o.prototype,"invertScrollDirection",{get:function(){return this._invertScrollDirection},set:function(t){this._invertScrollDirection=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"backgroundImage",{get:function(){return this._backgroundBaseImage},set:function(t){var e=this;this._backgroundBaseImage!==t&&(this._backgroundBaseImage=t,this.isVertical&&this.num90RotationInVerticalMode!==0?t.isLoaded?(this._backgroundImage=t._rotate90(this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(e.num90RotationInVerticalMode,!0);e._backgroundImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"thumbImage",{get:function(){return this._thumbBaseImage},set:function(t){var e=this;this._thumbBaseImage!==t&&(this._thumbBaseImage=t,this.isVertical&&this.num90RotationInVerticalMode!==0?t.isLoaded?(this._thumbImage=t._rotate90(-this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(-e.num90RotationInVerticalMode,!0);e._thumbImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(t){this._thumbLength!==t&&(this._thumbLength=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(t){this._thumbLength!==t&&(this._thumbHeight=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(t){this._barImageHeight!==t&&(this._barImageHeight=t,this._markAsDirty())},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"ImageScrollBar"},o.prototype._getThumbThickness=function(){var t=0;return this._thumbWidth.isPixel?t=this._thumbWidth.getValue(this._host):t=this._backgroundBoxThickness*this._thumbWidth.getValue(this._host),t},o.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._getThumbPosition(),i=this._renderLeft,a=this._renderTop,s=this._renderWidth,u=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(i,a,s,u),this.isVertical?(this._tempMeasure.copyFromFloats(i+s*(1-this._barImageHeight)*.5,this._currentMeasure.top,s*this._barImageHeight,u),this._tempMeasure.height+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)):(this._tempMeasure.copyFromFloats(this._currentMeasure.left,a+u*(1-this._barImageHeight)*.5,s,u*this._barImageHeight),this._tempMeasure.width+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)),this._backgroundImage._draw(t)),this.isVertical?this._tempMeasure.copyFromFloats(i-this._effectiveBarOffset+this._currentMeasure.width*(1-this._thumbHeight)*.5,this._currentMeasure.top+e,this._currentMeasure.width*this._thumbHeight,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+e,this._currentMeasure.top+this._currentMeasure.height*(1-this._thumbHeight)*.5,this._effectiveThumbThickness,this._currentMeasure.height*this._thumbHeight),this._thumbImage&&(this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},o.prototype._updateValueFromPointer=function(t,e){this.rotation!=0&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y);var i=this._invertScrollDirection?-1:1;this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var a=0;this.isVertical?a=-((e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness)):a=(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*a*(this.maximum-this.minimum),this._originX=t,this._originY=e},o.prototype._onPointerDown=function(t,e,i,a,s){return this._first=!0,_.prototype._onPointerDown.call(this,t,e,i,a,s)},(0,c.__decorate)([(0,b.serialize)()],o.prototype,"num90RotationInVerticalMode",void 0),(0,c.__decorate)([(0,b.serialize)()],o.prototype,"invertScrollDirection",null),o}(l.BaseSlider)},"../../../dev/gui/src/2D/controls/sliders/scrollBar.ts":(B,E,d)=>{d.r(E),d.d(E,{ScrollBar:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/sliders/baseSlider.ts"),g=d("../../../dev/gui/src/2D/measure.ts"),b=d("babylonjs/Misc/perfCounter"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e.name=t,e._background="black",e._borderColor="white",e._tempMeasure=new g.Measure(0,0,0,0),e._invertScrollDirection=!1,e._backgroundGradient=null,e}return Object.defineProperty(o.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"backgroundGradient",{get:function(){return this._backgroundGradient},set:function(t){this._backgroundGradient!==t&&(this._backgroundGradient=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"invertScrollDirection",{get:function(){return this._invertScrollDirection},set:function(t){this._invertScrollDirection=t},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"Scrollbar"},o.prototype._getThumbThickness=function(){var t=0;return this._thumbWidth.isPixel?t=this._thumbWidth.getValue(this._host):t=this._backgroundBoxThickness*this._thumbWidth.getValue(this._host),t},o.prototype._getBackgroundColor=function(t){return this._backgroundGradient?this._backgroundGradient.getCanvasGradient(t):this._background},o.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._renderLeft,i=this._getThumbPosition();t.fillStyle=this._getBackgroundColor(t),t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.fillStyle=this._getColor(t),this.isVertical?(this._tempMeasure.left=e-this._effectiveBarOffset,this._tempMeasure.top=this._currentMeasure.top+i,this._tempMeasure.width=this._currentMeasure.width,this._tempMeasure.height=this._effectiveThumbThickness):(this._tempMeasure.left=this._currentMeasure.left+i,this._tempMeasure.top=this._currentMeasure.top,this._tempMeasure.width=this._effectiveThumbThickness,this._tempMeasure.height=this._currentMeasure.height),t.fillRect(this._tempMeasure.left,this._tempMeasure.top,this._tempMeasure.width,this._tempMeasure.height),t.restore()},o.prototype._updateValueFromPointer=function(t,e){this.rotation!=0&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y);var i=this._invertScrollDirection?-1:1;this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var a=0;this.isVertical?a=-((e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness)):a=(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*a*(this.maximum-this.minimum),this._originX=t,this._originY=e},o.prototype._onPointerDown=function(t,e,i,a,s){return this._first=!0,_.prototype._onPointerDown.call(this,t,e,i,a,s)},o.prototype.serialize=function(t){_.prototype.serialize.call(this,t),this.backgroundGradient&&(t.backgroundGradient={},this.backgroundGradient.serialize(t.backgroundGradient))},o.prototype._parseFromContent=function(t,e){if(_.prototype._parseFromContent.call(this,t,e),t.backgroundGradient){var i=b.Tools.Instantiate("BABYLON.GUI."+t.backgroundGradient.className);this.backgroundGradient=new i,this.backgroundGradient.parse(t.backgroundGradient)}},(0,c.__decorate)([(0,b.serialize)()],o.prototype,"borderColor",null),(0,c.__decorate)([(0,b.serialize)()],o.prototype,"background",null),(0,c.__decorate)([(0,b.serialize)()],o.prototype,"invertScrollDirection",null),o}(l.BaseSlider);(0,b.RegisterClass)("BABYLON.GUI.Scrollbar",v)},"../../../dev/gui/src/2D/controls/sliders/slider.ts":(B,E,d)=>{d.r(E),d.d(E,{Slider:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/controls/sliders/baseSlider.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t.name=o,t._background="black",t._borderColor="white",t._thumbColor="",t._isThumbCircle=!1,t._displayValueBar=!0,t._backgroundGradient=null,t}return Object.defineProperty(_.prototype,"displayValueBar",{get:function(){return this._displayValueBar},set:function(o){this._displayValueBar!==o&&(this._displayValueBar=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"borderColor",{get:function(){return this._borderColor},set:function(o){this._borderColor!==o&&(this._borderColor=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"background",{get:function(){return this._background},set:function(o){this._background!==o&&(this._background=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"backgroundGradient",{get:function(){return this._backgroundGradient},set:function(o){this._backgroundGradient!==o&&(this._backgroundGradient=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"thumbColor",{get:function(){return this._thumbColor},set:function(o){this._thumbColor!==o&&(this._thumbColor=o,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isThumbCircle",{get:function(){return this._isThumbCircle},set:function(o){this._isThumbCircle!==o&&(this._isThumbCircle=o,this._markAsDirty())},enumerable:!1,configurable:!0}),_.prototype._getTypeName=function(){return"Slider"},_.prototype._getBackgroundColor=function(o){return this._backgroundGradient?this._backgroundGradient.getCanvasGradient(o):this._background},_.prototype._draw=function(o){o.save(),this._applyStates(o),this._prepareRenderingData(this.isThumbCircle?"circle":"rectangle");var t=this._renderLeft,e=this._renderTop,i=this._renderWidth,a=this._renderHeight,s=0;this.isThumbClamped&&this.isThumbCircle?(this.isVertical?e+=this._effectiveThumbThickness/2:t+=this._effectiveThumbThickness/2,s=this._backgroundBoxThickness/2):s=(this._effectiveThumbThickness-this._effectiveBarOffset)/2,(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur,o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY);var u=this._getThumbPosition();o.fillStyle=this._getBackgroundColor(o),this.isVertical?this.isThumbClamped?this.isThumbCircle?(o.beginPath(),o.arc(t+this._backgroundBoxThickness/2,e,s,Math.PI,2*Math.PI),o.fill(),o.fillRect(t,e,i,a)):o.fillRect(t,e,i,a+this._effectiveThumbThickness):o.fillRect(t,e,i,a):this.isThumbClamped?this.isThumbCircle?(o.beginPath(),o.arc(t+this._backgroundBoxLength,e+this._backgroundBoxThickness/2,s,0,2*Math.PI),o.fill(),o.fillRect(t,e,i,a)):o.fillRect(t,e,i+this._effectiveThumbThickness,a):o.fillRect(t,e,i,a),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),o.fillStyle=this._getColor(o),this._displayValueBar&&(this.isVertical?this.isThumbClamped?this.isThumbCircle?(o.beginPath(),o.arc(t+this._backgroundBoxThickness/2,e+this._backgroundBoxLength,s,0,2*Math.PI),o.fill(),o.fillRect(t,e+u,i,a-u)):o.fillRect(t,e+u,i,a-u+this._effectiveThumbThickness):o.fillRect(t,e+u,i,a-u):(this.isThumbClamped&&this.isThumbCircle&&(o.beginPath(),o.arc(t,e+this._backgroundBoxThickness/2,s,0,2*Math.PI),o.fill()),o.fillRect(t,e,u,a))),o.fillStyle=this._thumbColor||this._getColor(o),this.displayThumb&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur,o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY),this._isThumbCircle?(o.beginPath(),this.isVertical?o.arc(t+this._backgroundBoxThickness/2,e+u,s,0,2*Math.PI):o.arc(t+u,e+this._backgroundBoxThickness/2,s,0,2*Math.PI),o.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),o.strokeStyle=this._borderColor,o.stroke()):(this.isVertical?o.fillRect(t-this._effectiveBarOffset,this._currentMeasure.top+u,this._currentMeasure.width,this._effectiveThumbThickness):o.fillRect(this._currentMeasure.left+u,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0),o.strokeStyle=this._borderColor,this.isVertical?o.strokeRect(t-this._effectiveBarOffset,this._currentMeasure.top+u,this._currentMeasure.width,this._effectiveThumbThickness):o.strokeRect(this._currentMeasure.left+u,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height))),o.restore()},_.prototype.serialize=function(o){v.prototype.serialize.call(this,o),this.backgroundGradient&&(o.backgroundGradient={},this.backgroundGradient.serialize(o.backgroundGradient))},_.prototype._parseFromContent=function(o,t){if(v.prototype._parseFromContent.call(this,o,t),o.backgroundGradient){var e=g.Tools.Instantiate("BABYLON.GUI."+o.backgroundGradient.className);this.backgroundGradient=new e,this.backgroundGradient.parse(o.backgroundGradient)}},(0,c.__decorate)([(0,g.serialize)()],_.prototype,"displayValueBar",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"borderColor",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"background",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"thumbColor",null),(0,c.__decorate)([(0,g.serialize)()],_.prototype,"isThumbCircle",null),_}(l.BaseSlider);(0,g.RegisterClass)("BABYLON.GUI.Slider",b)},"../../../dev/gui/src/2D/controls/stackPanel.ts":(B,E,d)=>{d.r(E),d.d(E,{StackPanel:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/container.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("../../../dev/gui/src/2D/controls/textBlock.ts"),_=function(o){(0,c.__extends)(t,o);function t(e){var i=o.call(this,e)||this;return i.name=e,i._isVertical=!0,i._manualWidth=!1,i._manualHeight=!1,i._doNotTrackManualChanges=!1,i._spacing=0,i.ignoreLayoutWarnings=!1,i}return Object.defineProperty(t.prototype,"isVertical",{get:function(){return this._isVertical},set:function(e){this._isVertical!==e&&(this._isVertical=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(e){this._doNotTrackManualChanges||(this._manualWidth=!0),this._width.toString(this._host)!==e&&this._width.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(e){this._doNotTrackManualChanges||(this._manualHeight=!0),this._height.toString(this._host)!==e&&this._height.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"StackPanel"},t.prototype._preMeasure=function(e,i){for(var a=0,s=this._children;a<s.length;a++){var u=s[a];this._isVertical?u.verticalAlignment=b.Control.VERTICAL_ALIGNMENT_TOP:u.horizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT}o.prototype._preMeasure.call(this,e,i)},t.prototype._additionalProcessing=function(e,i){o.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(e),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,(!this.isVertical||this._manualWidth)&&(this._measureForChildren.width=this._currentMeasure.width),(this.isVertical||this._manualHeight)&&(this._measureForChildren.height=this._currentMeasure.height)},t.prototype._postMeasure=function(){for(var e=0,i=0,a=this._children.length,s=0;s<a;s++){var u=this._children[s];!u.isVisible||u.notRenderable||(this._isVertical?(u.top!==i+"px"&&(u.top=i+"px",this._rebuildLayout=!0,u._top.ignoreAdaptiveScaling=!0),u._height.isPercentage&&!u._automaticSize?this.ignoreLayoutWarnings||l.Tools.Warn("Control (Name:".concat(u.name,", UniqueId:").concat(u.uniqueId,") is using height in percentage mode inside a vertical StackPanel")):i+=u._currentMeasure.height+u._paddingTopInPixels+u._paddingBottomInPixels+(s<a-1?this._spacing:0)):(u.left!==e+"px"&&(u.left=e+"px",this._rebuildLayout=!0,u._left.ignoreAdaptiveScaling=!0),u._width.isPercentage&&!u._automaticSize&&u.getClassName()==="TextBlock"&&u.textWrapping!==v.TextWrapping.Clip&&!u.forceResizeWidth?this.ignoreLayoutWarnings||l.Tools.Warn("Control (Name:".concat(u.name,", UniqueId:").concat(u.uniqueId,") is using width in percentage mode inside a horizontal StackPanel")):e+=u._currentMeasure.width+u._paddingLeftInPixels+u._paddingRightInPixels+(s<a-1?this._spacing:0)))}e+=this._paddingLeftInPixels+this._paddingRightInPixels,i+=this._paddingTopInPixels+this._paddingBottomInPixels,this._doNotTrackManualChanges=!0;var f=!1,m=!1;if((!this._manualHeight||this.adaptHeightToChildren)&&this._isVertical){var P=this.height;this.height=i+"px",m=P!==this.height||!this._height.ignoreAdaptiveScaling}if((!this._manualWidth||this.adaptWidthToChildren)&&!this._isVertical){var y=this.width;this.width=e+"px",f=y!==this.width||!this._width.ignoreAdaptiveScaling}m&&(this._height.ignoreAdaptiveScaling=!0),f&&(this._width.ignoreAdaptiveScaling=!0),this._doNotTrackManualChanges=!1,(f||m)&&(this._rebuildLayout=!0),o.prototype._postMeasure.call(this)},t.prototype.serialize=function(e){o.prototype.serialize.call(this,e),e.manualWidth=this._manualWidth,e.manualHeight=this._manualHeight},t.prototype._parseFromContent=function(e,i){this._manualWidth=e.manualWidth,this._manualHeight=e.manualHeight,o.prototype._parseFromContent.call(this,e,i)},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"ignoreLayoutWarnings",void 0),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"isVertical",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"spacing",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"width",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"height",null),t}(g.Container);(0,l.RegisterClass)("BABYLON.GUI.StackPanel",_)},"../../../dev/gui/src/2D/controls/statics.ts":(B,E,d)=>{d.r(E),d.d(E,{name:()=>b});var c=d("../../../dev/gui/src/2D/controls/control.ts"),l=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),g=d("../../../dev/gui/src/2D/controls/textBlock.ts"),b="Statics";c.Control.AddHeader=function(v,_,o,t){var e=new l.StackPanel("panel"),i=t?t.isHorizontal:!0,a=t?t.controlFirst:!0;e.isVertical=!i;var s=new g.TextBlock("header");return s.text=_,s.textHorizontalAlignment=c.Control.HORIZONTAL_ALIGNMENT_LEFT,i?s.width=o:s.height=o,a?(e.addControl(v),e.addControl(s),s.paddingLeft="5px"):(e.addControl(s),e.addControl(v),s.paddingRight="5px"),s.shadowBlur=v.shadowBlur,s.shadowColor=v.shadowColor,s.shadowOffsetX=v.shadowOffsetX,s.shadowOffsetY=v.shadowOffsetY,e}},"../../../dev/gui/src/2D/controls/textBlock.ts":(B,E,d)=>{d.r(E),d.d(E,{TextBlock:()=>_,TextWrapping:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/valueAndUnit.ts"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v;(function(o){o[o.Clip=0]="Clip",o[o.WordWrap=1]="WordWrap",o[o.Ellipsis=2]="Ellipsis",o[o.WordWrapEllipsis=3]="WordWrapEllipsis"})(v||(v={}));var _=function(o){(0,c.__extends)(t,o);function t(e,i){i===void 0&&(i="");var a=o.call(this,e)||this;return a.name=e,a._text="",a._textWrapping=v.Clip,a._textHorizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_CENTER,a._textVerticalAlignment=b.Control.VERTICAL_ALIGNMENT_CENTER,a._resizeToFit=!1,a._lineSpacing=new g.ValueAndUnit(0),a._outlineWidth=0,a._outlineColor="white",a._underline=!1,a._lineThrough=!1,a._wordDivider=" ",a._forceResizeWidth=!1,a._applyOutlineToUnderline=!1,a.onTextChangedObservable=new l.Observable,a.onLinesReadyObservable=new l.Observable,a._linesTemp=[],a.text=i,a}return Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizeToFit",{get:function(){return this._resizeToFit},set:function(e){this._resizeToFit!==e&&(this._resizeToFit=e,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWrapping",{get:function(){return this._textWrapping},set:function(e){this._textWrapping!==e&&(this._textWrapping=+e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e+"",this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHorizontalAlignment",{get:function(){return this._textHorizontalAlignment},set:function(e){this._textHorizontalAlignment!==e&&(this._textHorizontalAlignment=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textVerticalAlignment",{get:function(){return this._textVerticalAlignment},set:function(e){this._textVerticalAlignment!==e&&(this._textVerticalAlignment=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineSpacing",{get:function(){return this._lineSpacing.toString(this._host)},set:function(e){this._lineSpacing.fromString(e)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return this._underline},set:function(e){this._underline!==e&&(this._underline=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineThrough",{get:function(){return this._lineThrough},set:function(e){this._lineThrough!==e&&(this._lineThrough=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"applyOutlineToUnderline",{get:function(){return this._applyOutlineToUnderline},set:function(e){this._applyOutlineToUnderline!==e&&(this._applyOutlineToUnderline=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(e){this._outlineColor!==e&&(this._outlineColor=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordDivider",{get:function(){return this._wordDivider},set:function(e){this._wordDivider!==e&&(this._wordDivider=e,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceResizeWidth",{get:function(){return this._forceResizeWidth},set:function(e){this._forceResizeWidth!==e&&(this._forceResizeWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0}),t.prototype._getTypeName=function(){return"TextBlock"},t.prototype._processMeasures=function(e,i){(!this._fontOffset||this.isDirty)&&(this._fontOffset=b.Control._GetFontOffset(i.font)),o.prototype._processMeasures.call(this,e,i),this._lines=this._breakLines(this._currentMeasure.width,this._currentMeasure.height,i),this.onLinesReadyObservable.notifyObservers(this);for(var a=0,s=0;s<this._lines.length;s++){var u=this._lines[s];u.width>a&&(a=u.width)}if(this._resizeToFit){if(this._textWrapping===v.Clip||this._forceResizeWidth){var f=Math.ceil(this._paddingLeftInPixels)+Math.ceil(this._paddingRightInPixels)+Math.ceil(a);f!==this._width.getValueInPixel(this._host,this._tempParentMeasure.width)&&(this._width.updateInPlace(f,g.ValueAndUnit.UNITMODE_PIXEL),this._rebuildLayout=!0)}var m=this._paddingTopInPixels+this._paddingBottomInPixels+this._fontOffset.height*this._lines.length|0;if(this._lines.length>0&&this._lineSpacing.internalValue!==0){var P=0;this._lineSpacing.isPixel?P=this._lineSpacing.getValue(this._host):P=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),m+=(this._lines.length-1)*P}m!==this._height.internalValue&&(this._height.updateInPlace(m,g.ValueAndUnit.UNITMODE_PIXEL),this._rebuildLayout=!0)}},t.prototype._drawText=function(e,i,a,s){var u=this._currentMeasure.width,f=0;switch(this._textHorizontalAlignment){case b.Control.HORIZONTAL_ALIGNMENT_LEFT:f=0;break;case b.Control.HORIZONTAL_ALIGNMENT_RIGHT:f=u-i;break;case b.Control.HORIZONTAL_ALIGNMENT_CENTER:f=(u-i)/2;break}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur,s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&s.strokeText(e,this._currentMeasure.left+f,a),s.fillText(e,this._currentMeasure.left+f,a),this._underline&&this._drawLine(this._currentMeasure.left+f,a+3,this._currentMeasure.left+f+i,a+3,s),this._lineThrough&&this._drawLine(this._currentMeasure.left+f,a-this.fontSizeInPixels/3,this._currentMeasure.left+f+i,a-this.fontSizeInPixels/3,s)},t.prototype._drawLine=function(e,i,a,s,u){if(u.beginPath(),u.lineWidth=Math.round(this.fontSizeInPixels*.05),u.moveTo(e,i),u.lineTo(a,s),this.outlineWidth&&this.applyOutlineToUnderline)u.stroke(),u.fill();else{var f=u.strokeStyle;u.strokeStyle=u.fillStyle,u.stroke(),u.strokeStyle=f}u.closePath()},t.prototype._draw=function(e){e.save(),this._applyStates(e),this._renderLines(e),e.restore()},t.prototype._applyStates=function(e){o.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor,e.lineJoin="miter",e.miterLimit=2)},t.prototype._breakLines=function(e,i,a){var s,u;this._linesTemp.length=0;var f=this.text.split(`
`);if(this._textWrapping===v.Ellipsis)for(var m=0,P=f;m<P.length;m++){var y=P[m];this._linesTemp.push(this._parseLineEllipsis(y,e,a))}else if(this._textWrapping===v.WordWrap)for(var M=0,O=f;M<O.length;M++){var y=O[M];(s=this._linesTemp).push.apply(s,this._parseLineWordWrap(y,e,a))}else if(this._textWrapping===v.WordWrapEllipsis)for(var x=0,R=f;x<R.length;x++){var y=R[x];(u=this._linesTemp).push.apply(u,this._parseLineWordWrapEllipsis(y,e,i,a))}else for(var N=0,W=f;N<W.length;N++){var y=W[N];this._linesTemp.push(this._parseLine(y,a))}return this._linesTemp},t.prototype._parseLine=function(e,i){return e===void 0&&(e=""),{text:e,width:this._getTextMetricsWidth(i.measureText(e))}},t.prototype._getCharsToRemove=function(e,i,a){var s=e>i?e-i:0,u=e/a,f=Math.max(Math.floor(s/u),1);return f},t.prototype._parseLineEllipsis=function(e,i,a){e===void 0&&(e="");var s=this._getTextMetricsWidth(a.measureText(e)),u=this._getCharsToRemove(s,i,e.length),f=Array.from&&Array.from(e);if(f)for(;f.length&&s>i;)f.splice(f.length-u,u),e="".concat(f.join(""),""),s=this._getTextMetricsWidth(a.measureText(e)),u=this._getCharsToRemove(s,i,e.length);else{for(;e.length>2&&s>i;)e=e.slice(0,-u),s=this._getTextMetricsWidth(a.measureText(e+"")),u=this._getCharsToRemove(s,i,e.length);e+=""}return{text:e,width:s}},t.prototype._getTextMetricsWidth=function(e){return e.actualBoundingBoxLeft!==void 0?Math.abs(e.actualBoundingBoxLeft)+Math.abs(e.actualBoundingBoxRight):e.width},t.prototype._parseLineWordWrap=function(e,i,a){e===void 0&&(e="");for(var s=[],u=this.wordSplittingFunction?this.wordSplittingFunction(e):e.split(this._wordDivider),f=this._getTextMetricsWidth(a.measureText(e)),m=0;m<u.length;m++){var P=m>0?e+this._wordDivider+u[m]:u[0],y=this._getTextMetricsWidth(a.measureText(P));y>i&&m>0?(s.push({text:e,width:f}),e=u[m],f=this._getTextMetricsWidth(a.measureText(e))):(f=y,e=P)}return s.push({text:e,width:f}),s},t.prototype._parseLineWordWrapEllipsis=function(e,i,a,s){e===void 0&&(e="");for(var u=this._parseLineWordWrap(e,i,s),f=1;f<=u.length;f++){var m=this._computeHeightForLinesOf(f);if(m>a&&f>1){var P=u[f-2],y=u[f-1];u[f-2]=this._parseLineEllipsis(P.text+this._wordDivider+y.text,i,s);for(var M=u.length-f+1,O=0;O<M;O++)u.pop();return u}}return u},t.prototype._renderLines=function(e){if(!(!this._fontOffset||!this._lines)){var i=this._currentMeasure.height,a=0;switch(this._textVerticalAlignment){case b.Control.VERTICAL_ALIGNMENT_TOP:a=this._fontOffset.ascent;break;case b.Control.VERTICAL_ALIGNMENT_BOTTOM:a=i-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case b.Control.VERTICAL_ALIGNMENT_CENTER:a=this._fontOffset.ascent+(i-this._fontOffset.height*this._lines.length)/2;break}a+=this._currentMeasure.top;for(var s=0;s<this._lines.length;s++){var u=this._lines[s];s!==0&&this._lineSpacing.internalValue!==0&&(this._lineSpacing.isPixel?a+=this._lineSpacing.getValue(this._host):a=a+this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(u.text,u.width,a,e),a+=this._fontOffset.height}}},t.prototype._computeHeightForLinesOf=function(e){var i=this._paddingTopInPixels+this._paddingBottomInPixels+this._fontOffset.height*e;if(e>0&&this._lineSpacing.internalValue!==0){var a=0;this._lineSpacing.isPixel?a=this._lineSpacing.getValue(this._host):a=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),i+=(e-1)*a}return i},t.prototype.computeExpectedHeight=function(){var e;if(this.text&&this.widthInPixels){var i=(e=l.EngineStore.LastCreatedEngine)===null||e===void 0?void 0:e.createCanvas(0,0).getContext("2d");if(i){this._applyStates(i),this._fontOffset||(this._fontOffset=b.Control._GetFontOffset(i.font));var a=this._lines?this._lines:this._breakLines(this.widthInPixels-this._paddingLeftInPixels-this._paddingRightInPixels,this.heightInPixels-this._paddingTopInPixels-this._paddingBottomInPixels,i);return this._computeHeightForLinesOf(a.length)}}return 0},t.prototype.dispose=function(){o.prototype.dispose.call(this),this.onTextChangedObservable.clear()},(0,c.__decorate)([(0,l.serialize)()],t.prototype,"resizeToFit",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"textWrapping",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"text",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"textHorizontalAlignment",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"textVerticalAlignment",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"lineSpacing",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"outlineWidth",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"underline",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"lineThrough",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"applyOutlineToUnderline",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"outlineColor",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"wordDivider",null),(0,c.__decorate)([(0,l.serialize)()],t.prototype,"forceResizeWidth",null),t}(b.Control);(0,l.RegisterClass)("BABYLON.GUI.TextBlock",_)},"../../../dev/gui/src/2D/controls/textWrapper.ts":(B,E,d)=>{d.r(E),d.d(E,{TextWrapper:()=>l});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=function(){function g(){}return Object.defineProperty(g.prototype,"text",{get:function(){return this._characters?this._characters.join(""):this._text},set:function(b){this._text=b,this._characters=Array.from&&Array.from(b)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"length",{get:function(){return this._characters?this._characters.length:this._text.length},enumerable:!1,configurable:!0}),g.prototype.removePart=function(b,v,_){var o;if(this._text=this._text.slice(0,b)+(_||"")+this._text.slice(v),this._characters){var t=_?Array.from(_):[];(o=this._characters).splice.apply(o,(0,c.__spreadArray)([b,v-b],t,!1))}},g.prototype.charAt=function(b){return this._characters?this._characters[b]:this._text.charAt(b)},g.prototype.substr=function(b,v){if(this._characters){isNaN(b)?b=0:b>=0?b=Math.min(b,this._characters.length):b=this._characters.length+Math.max(b,-this._characters.length),v===void 0?v=this._characters.length-b:(isNaN(v)||v<0)&&(v=0);for(var _=[];--v>=0;)_[v]=this._characters[b+v];return _.join("")}return this._text.substr(b,v)},g.prototype.substring=function(b,v){if(this._characters){isNaN(b)?b=0:b>this._characters.length?b=this._characters.length:b<0&&(b=0),v===void 0?v=this._characters.length:isNaN(v)?v=0:v>this._characters.length?v=this._characters.length:v<0&&(v=0);for(var _=[],o=0;b<v;)_[o++]=this._characters[b++];return _.join("")}return this._text.substring(b,v)},g.prototype.isWord=function(b){var v=/\w/g;return this._characters?this._characters[b].search(v)!==-1:this._text.search(v)!==-1},g}()},"../../../dev/gui/src/2D/controls/toggleButton.ts":(B,E,d)=>{d.r(E),d.d(E,{ToggleButton:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/rectangle.ts"),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o)||this;e.name=o,e.onIsActiveChangedObservable=new l.Observable,e.delegatePickingToChildren=!1,e._isActive=!1,e.group=t??"",e.thickness=0,e.isPointerBlocker=!0;var i=null;return e.toActiveAnimation=function(){e.thickness=1},e.toInactiveAnimation=function(){e.thickness=0},e.pointerEnterActiveAnimation=function(){i=e.alpha,e.alpha-=.1},e.pointerOutActiveAnimation=function(){i!==null&&(e.alpha=i)},e.pointerDownActiveAnimation=function(){e.scaleX-=.05,e.scaleY-=.05},e.pointerUpActiveAnimation=function(){e.scaleX+=.05,e.scaleY+=.05},e.pointerEnterInactiveAnimation=function(){i=e.alpha,e.alpha-=.1},e.pointerOutInactiveAnimation=function(){i!==null&&(e.alpha=i)},e.pointerDownInactiveAnimation=function(){e.scaleX-=.05,e.scaleY-=.05},e.pointerUpInactiveAnimation=function(){e.scaleX+=.05,e.scaleY+=.05},e}return Object.defineProperty(_.prototype,"group",{get:function(){return this._group},set:function(o){this._group!==o&&(this._group=o)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isActive",{get:function(){return this._isActive},set:function(o){var t=this,e,i;this._isActive!==o&&(this._isActive=o,this._isActive?(e=this.toActiveAnimation)===null||e===void 0||e.call(this):(i=this.toInactiveAnimation)===null||i===void 0||i.call(this),this._markAsDirty(),this.onIsActiveChangedObservable.notifyObservers(o),this._isActive&&this._host&&this._group&&this._host.executeOnAllControls(function(a){if(a.typeName==="ToggleButton"){if(a===t)return;var s=a;s.group===t.group&&(s.isActive=!1)}}))},enumerable:!1,configurable:!0}),_.prototype._getTypeName=function(){return"ToggleButton"},_.prototype._processPicking=function(o,t,e,i,a,s,u,f){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable||!v.prototype.contains.call(this,o,t))return!1;if(this.delegatePickingToChildren){for(var m=!1,P=this._children.length-1;P>=0;P--){var y=this._children[P];if(y.isEnabled&&y.isHitTestVisible&&y.isVisible&&!y.notRenderable&&y.contains(o,t)){m=!0;break}}if(!m)return!1}return this._processObservables(i,o,t,e,a,s,u,f),!0},_.prototype._onPointerEnter=function(o,t){return v.prototype._onPointerEnter.call(this,o,t)?(this.isReadOnly||(this._isActive?this.pointerEnterActiveAnimation&&this.pointerEnterActiveAnimation():this.pointerEnterInactiveAnimation&&this.pointerEnterInactiveAnimation()),!0):!1},_.prototype._onPointerOut=function(o,t,e){e===void 0&&(e=!1),this.isReadOnly||(this._isActive?this.pointerOutActiveAnimation&&this.pointerOutActiveAnimation():this.pointerOutInactiveAnimation&&this.pointerOutInactiveAnimation()),v.prototype._onPointerOut.call(this,o,t,e)},_.prototype._onPointerDown=function(o,t,e,i,a){return v.prototype._onPointerDown.call(this,o,t,e,i,a)?(this.isReadOnly||(this._isActive?this.pointerDownActiveAnimation&&this.pointerDownActiveAnimation():this.pointerDownInactiveAnimation&&this.pointerDownInactiveAnimation()),!0):!1},_.prototype._onPointerUp=function(o,t,e,i,a,s){this.isReadOnly||(this._isActive?this.pointerUpActiveAnimation&&this.pointerUpActiveAnimation():this.pointerUpInactiveAnimation&&this.pointerUpInactiveAnimation()),v.prototype._onPointerUp.call(this,o,t,e,i,a,s)},_}(g.Rectangle);(0,l.RegisterClass)("BABYLON.GUI.ToggleButton",b)},"../../../dev/gui/src/2D/controls/virtualKeyboard.ts":(B,E,d)=>{d.r(E),d.d(E,{KeyPropertySet:()=>_,VirtualKeyboard:()=>o});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),b=d("../../../dev/gui/src/2D/controls/button.ts"),v=d("../../../dev/gui/src/2D/controls/inputTextArea.ts"),_=function(){function t(){}return t}(),o=function(t){(0,c.__extends)(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.onKeyPressObservable=new l.Observable,i.defaultButtonWidth="40px",i.defaultButtonHeight="40px",i.defaultButtonPaddingLeft="2px",i.defaultButtonPaddingRight="2px",i.defaultButtonPaddingTop="2px",i.defaultButtonPaddingBottom="2px",i.defaultButtonColor="#DDD",i.defaultButtonBackground="#070707",i.shiftButtonColor="#7799FF",i.selectedShiftThickness=1,i.shiftState=0,i._currentlyConnectedInputText=null,i._connectedInputTexts=[],i._onKeyPressObserver=null,i}return e.prototype._getTypeName=function(){return"VirtualKeyboard"},e.prototype._createKey=function(i,a){var s=this,u=b.Button.CreateSimpleButton(i,i);return u.width=a&&a.width?a.width:this.defaultButtonWidth,u.height=a&&a.height?a.height:this.defaultButtonHeight,u.color=a&&a.color?a.color:this.defaultButtonColor,u.background=a&&a.background?a.background:this.defaultButtonBackground,u.paddingLeft=a&&a.paddingLeft?a.paddingLeft:this.defaultButtonPaddingLeft,u.paddingRight=a&&a.paddingRight?a.paddingRight:this.defaultButtonPaddingRight,u.paddingTop=a&&a.paddingTop?a.paddingTop:this.defaultButtonPaddingTop,u.paddingBottom=a&&a.paddingBottom?a.paddingBottom:this.defaultButtonPaddingBottom,u.thickness=0,u.isFocusInvisible=!0,u.shadowColor=this.shadowColor,u.shadowBlur=this.shadowBlur,u.shadowOffsetX=this.shadowOffsetX,u.shadowOffsetY=this.shadowOffsetY,u.onPointerUpObservable.add(function(){s.onKeyPressObservable.notifyObservers(i)}),u},e.prototype.addKeysRow=function(i,a){var s=new g.StackPanel;s.isVertical=!1,s.isFocusInvisible=!0;for(var u=null,f=0;f<i.length;f++){var m=null;a&&a.length===i.length&&(m=a[f]);var P=this._createKey(i[f],m);(!u||P.heightInPixels>u.heightInPixels)&&(u=P),s.addControl(P)}s.height=u?u.height:this.defaultButtonHeight,this.addControl(s)},e.prototype.applyShiftState=function(i){if(this.children)for(var a=0;a<this.children.length;a++){var s=this.children[a];if(!(!s||!s.children))for(var u=s,f=0;f<u.children.length;f++){var m=u.children[f];if(!(!m||!m.children[0])){var P=m.children[0];P.text===""&&(m.color=i?this.shiftButtonColor:this.defaultButtonColor,m.thickness=i>1?this.selectedShiftThickness:0),P.text=i>0?P.text.toUpperCase():P.text.toLowerCase()}}}},Object.defineProperty(e.prototype,"connectedInputText",{get:function(){return this._currentlyConnectedInputText},enumerable:!1,configurable:!0}),e.prototype.connect=function(i){var a=this,s=this._connectedInputTexts.some(function(m){return m.input===i});if(!s){this._onKeyPressObserver===null&&(this._onKeyPressObserver=this.onKeyPressObservable.add(function(m){if(a._currentlyConnectedInputText){switch(a._currentlyConnectedInputText._host.focusedControl=a._currentlyConnectedInputText,m){case"":a.shiftState++,a.shiftState>2&&(a.shiftState=0),a.applyShiftState(a.shiftState);return;case"":a._currentlyConnectedInputText instanceof v.InputTextArea?a._currentlyConnectedInputText.alternativeProcessKey("Backspace"):a._currentlyConnectedInputText.processKey(8);return;case"":a._currentlyConnectedInputText instanceof v.InputTextArea?a._currentlyConnectedInputText.alternativeProcessKey("Enter"):a._currentlyConnectedInputText.processKey(13);return}a._currentlyConnectedInputText instanceof v.InputTextArea?a._currentlyConnectedInputText.alternativeProcessKey("",a.shiftState?m.toUpperCase():m):a._currentlyConnectedInputText.processKey(-1,a.shiftState?m.toUpperCase():m),a.shiftState===1&&(a.shiftState=0,a.applyShiftState(a.shiftState))}})),this.isVisible=!1,this._currentlyConnectedInputText=i,i._connectedVirtualKeyboard=this;var u=i.onFocusObservable.add(function(){a._currentlyConnectedInputText=i,i._connectedVirtualKeyboard=a,a.isVisible=!0}),f=i.onBlurObservable.add(function(){i._connectedVirtualKeyboard=null,a._currentlyConnectedInputText=null,a.isVisible=!1});this._connectedInputTexts.push({input:i,onBlurObserver:f,onFocusObserver:u})}},e.prototype.disconnect=function(i){var a=this;if(i){var s=this._connectedInputTexts.filter(function(u){return u.input===i});s.length===1&&(this._removeConnectedInputObservables(s[0]),this._connectedInputTexts=this._connectedInputTexts.filter(function(u){return u.input!==i}),this._currentlyConnectedInputText===i&&(this._currentlyConnectedInputText=null))}else this._connectedInputTexts.forEach(function(u){a._removeConnectedInputObservables(u)}),this._connectedInputTexts.length=0;this._connectedInputTexts.length===0&&(this._currentlyConnectedInputText=null,this.onKeyPressObservable.remove(this._onKeyPressObserver),this._onKeyPressObserver=null)},e.prototype._removeConnectedInputObservables=function(i){i.input._connectedVirtualKeyboard=null,i.input.onFocusObservable.remove(i.onFocusObserver),i.input.onBlurObservable.remove(i.onBlurObserver)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disconnect()},e.CreateDefaultLayout=function(i){var a=new e(i);return a.addKeysRow(["1","2","3","4","5","6","7","8","9","0",""]),a.addKeysRow(["q","w","e","r","t","y","u","i","o","p"]),a.addKeysRow(["a","s","d","f","g","h","j","k","l",";","'",""]),a.addKeysRow(["","z","x","c","v","b","n","m",",",".","/"]),a.addKeysRow([" "],[{width:"200px"}]),a},e.prototype._parseFromContent=function(i,a){var s=this;t.prototype._parseFromContent.call(this,i,a);for(var u=0,f=this.children;u<f.length;u++){var m=f[u];if(m.getClassName()==="StackPanel")for(var P=m,y=function(R){R.getClassName()==="Button"&&R.name&&R.onPointerUpObservable.add(function(){s.onKeyPressObservable.notifyObservers(R.name)})},M=0,O=P.children;M<O.length;M++){var x=O[M];y(x)}}},e}(g.StackPanel);(0,l.RegisterClass)("BABYLON.GUI.VirtualKeyboard",o)},"../../../dev/gui/src/2D/index.ts":(B,E,d)=>{d.r(E),d.d(E,{AdvancedDynamicTexture:()=>l.AdvancedDynamicTexture,AdvancedDynamicTextureInstrumentation:()=>g.AdvancedDynamicTextureInstrumentation,BaseGradient:()=>c.BaseGradient,BaseSlider:()=>c.BaseSlider,Button:()=>c.Button,Checkbox:()=>c.Checkbox,CheckboxGroup:()=>c.CheckboxGroup,ColorPicker:()=>c.ColorPicker,Container:()=>c.Container,Control:()=>c.Control,DisplayGrid:()=>c.DisplayGrid,Ellipse:()=>c.Ellipse,FocusableButton:()=>c.FocusableButton,Grid:()=>c.Grid,Image:()=>c.Image,ImageBasedSlider:()=>c.ImageBasedSlider,ImageScrollBar:()=>c.ImageScrollBar,InputPassword:()=>c.InputPassword,InputText:()=>c.InputText,InputTextArea:()=>c.InputTextArea,KeyPropertySet:()=>c.KeyPropertySet,Line:()=>c.Line,LinearGradient:()=>c.LinearGradient,MathTools:()=>b.MathTools,Matrix2D:()=>b.Matrix2D,Measure:()=>v.Measure,MultiLine:()=>c.MultiLine,MultiLinePoint:()=>_.MultiLinePoint,RadialGradient:()=>c.RadialGradient,RadioButton:()=>c.RadioButton,RadioGroup:()=>c.RadioGroup,Rectangle:()=>c.Rectangle,ScrollBar:()=>c.ScrollBar,ScrollViewer:()=>c.ScrollViewer,SelectionPanel:()=>c.SelectionPanel,SelectorGroup:()=>c.SelectorGroup,Slider:()=>c.Slider,SliderGroup:()=>c.SliderGroup,StackPanel:()=>c.StackPanel,Style:()=>o.Style,TextBlock:()=>c.TextBlock,TextWrapper:()=>c.TextWrapper,TextWrapping:()=>c.TextWrapping,ToggleButton:()=>c.ToggleButton,ValueAndUnit:()=>t.ValueAndUnit,Vector2WithInfo:()=>b.Vector2WithInfo,VirtualKeyboard:()=>c.VirtualKeyboard,XmlLoader:()=>e.XmlLoader,name:()=>c.name});var c=d("../../../dev/gui/src/2D/controls/index.ts"),l=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),g=d("../../../dev/gui/src/2D/adtInstrumentation.ts"),b=d("../../../dev/gui/src/2D/math2D.ts"),v=d("../../../dev/gui/src/2D/measure.ts"),_=d("../../../dev/gui/src/2D/multiLinePoint.ts"),o=d("../../../dev/gui/src/2D/style.ts"),t=d("../../../dev/gui/src/2D/valueAndUnit.ts"),e=d("../../../dev/gui/src/2D/xmlLoader.ts")},"../../../dev/gui/src/2D/math2D.ts":(B,E,d)=>{d.r(E),d.d(E,{MathTools:()=>v,Matrix2D:()=>b,Vector2WithInfo:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=function(_){(0,c.__extends)(o,_);function o(t,e){e===void 0&&(e=0);var i=_.call(this,t.x,t.y)||this;return i.buttonIndex=e,i}return o}(l.Vector2),b=function(){function _(o,t,e,i,a,s){this.m=new Float32Array(6),this.fromValues(o,t,e,i,a,s)}return _.prototype.fromValues=function(o,t,e,i,a,s){return this.m[0]=o,this.m[1]=t,this.m[2]=e,this.m[3]=i,this.m[4]=a,this.m[5]=s,this},_.prototype.determinant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},_.prototype.invertToRef=function(o){var t=this.m[0],e=this.m[1],i=this.m[2],a=this.m[3],s=this.m[4],u=this.m[5],f=this.determinant();if(f<l.Epsilon*l.Epsilon)return o.m[0]=0,o.m[1]=0,o.m[2]=0,o.m[3]=0,o.m[4]=0,o.m[5]=0,this;var m=1/f,P=i*u-a*s,y=e*s-t*u;return o.m[0]=a*m,o.m[1]=-e*m,o.m[2]=-i*m,o.m[3]=t*m,o.m[4]=P*m,o.m[5]=y*m,this},_.prototype.multiplyToRef=function(o,t){var e=this.m[0],i=this.m[1],a=this.m[2],s=this.m[3],u=this.m[4],f=this.m[5],m=o.m[0],P=o.m[1],y=o.m[2],M=o.m[3],O=o.m[4],x=o.m[5];return t.m[0]=e*m+i*y,t.m[1]=e*P+i*M,t.m[2]=a*m+s*y,t.m[3]=a*P+s*M,t.m[4]=u*m+f*y+O,t.m[5]=u*P+f*M+x,this},_.prototype.transformCoordinates=function(o,t,e){return e.x=o*this.m[0]+t*this.m[2]+this.m[4],e.y=o*this.m[1]+t*this.m[3]+this.m[5],this},_.Identity=function(){return new _(1,0,0,1,0,0)},_.IdentityToRef=function(o){o.m[0]=1,o.m[1]=0,o.m[2]=0,o.m[3]=1,o.m[4]=0,o.m[5]=0},_.TranslationToRef=function(o,t,e){e.fromValues(1,0,0,1,o,t)},_.ScalingToRef=function(o,t,e){e.fromValues(o,0,0,t,0,0)},_.RotationToRef=function(o,t){var e=Math.sin(o),i=Math.cos(o);t.fromValues(i,e,-e,i,0,0)},_.ComposeToRef=function(o,t,e,i,a,s,u){_.TranslationToRef(o,t,_._TempPreTranslationMatrix),_.ScalingToRef(i,a,_._TempScalingMatrix),_.RotationToRef(e,_._TempRotationMatrix),_.TranslationToRef(-o,-t,_._TempPostTranslationMatrix),_._TempPreTranslationMatrix.multiplyToRef(_._TempScalingMatrix,_._TempCompose0),_._TempCompose0.multiplyToRef(_._TempRotationMatrix,_._TempCompose1),s?(_._TempCompose1.multiplyToRef(_._TempPostTranslationMatrix,_._TempCompose2),_._TempCompose2.multiplyToRef(s,u)):_._TempCompose1.multiplyToRef(_._TempPostTranslationMatrix,u)},_._TempPreTranslationMatrix=_.Identity(),_._TempPostTranslationMatrix=_.Identity(),_._TempRotationMatrix=_.Identity(),_._TempScalingMatrix=_.Identity(),_._TempCompose0=_.Identity(),_._TempCompose1=_.Identity(),_._TempCompose2=_.Identity(),_}(),v=function(){function _(){}return _.Round=function(o,t){return t===void 0&&(t=_.DefaultRoundingPrecision),Math.round(o*t)/t},_.DefaultRoundingPrecision=100,_}()},"../../../dev/gui/src/2D/measure.ts":(B,E,d)=>{d.r(E),d.d(E,{Measure:()=>_});var c=d("babylonjs/Misc/perfCounter"),l=[new c.Vector2(0,0),new c.Vector2(0,0),new c.Vector2(0,0),new c.Vector2(0,0)],g=[new c.Vector2(0,0),new c.Vector2(0,0),new c.Vector2(0,0),new c.Vector2(0,0)],b=new c.Vector2(0,0),v=new c.Vector2(0,0),_=function(){function o(t,e,i,a){this.left=t,this.top=e,this.width=i,this.height=a}return o.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},o.prototype.copyFromFloats=function(t,e,i,a){this.left=t,this.top=e,this.width=i,this.height=a},o.CombineToRef=function(t,e,i){var a=Math.min(t.left,e.left),s=Math.min(t.top,e.top),u=Math.max(t.left+t.width,e.left+e.width),f=Math.max(t.top+t.height,e.top+e.height);i.left=a,i.top=s,i.width=u-a,i.height=f-s},o.prototype.addAndTransformToRef=function(t,e,i,a,s,u){var f=this.left+e,m=this.top+i,P=this.width+a,y=this.height+s;l[0].copyFromFloats(f,m),l[1].copyFromFloats(f+P,m),l[2].copyFromFloats(f+P,m+y),l[3].copyFromFloats(f,m+y),b.copyFromFloats(Number.MAX_VALUE,Number.MAX_VALUE),v.copyFromFloats(0,0);for(var M=0;M<4;M++)t.transformCoordinates(l[M].x,l[M].y,g[M]),b.x=Math.floor(Math.min(b.x,g[M].x)),b.y=Math.floor(Math.min(b.y,g[M].y)),v.x=Math.ceil(Math.max(v.x,g[M].x)),v.y=Math.ceil(Math.max(v.y,g[M].y));u.left=b.x,u.top=b.y,u.width=v.x-b.x,u.height=v.y-b.y},o.prototype.transformToRef=function(t,e){this.addAndTransformToRef(t,0,0,0,0,e)},o.prototype.isEqualsTo=function(t){return!(this.left!==t.left||this.top!==t.top||this.width!==t.width||this.height!==t.height)},o.Empty=function(){return new o(0,0,0,0)},o}()},"../../../dev/gui/src/2D/multiLinePoint.ts":(B,E,d)=>{d.r(E),d.d(E,{MultiLinePoint:()=>g});var c=d("babylonjs/Misc/perfCounter"),l=d("../../../dev/gui/src/2D/valueAndUnit.ts"),g=function(){function b(v){this._multiLine=v,this._x=new l.ValueAndUnit(0),this._y=new l.ValueAndUnit(0),this._point=new c.Vector3(0,0,0)}return Object.defineProperty(b.prototype,"x",{get:function(){return this._x.toString(this._multiLine._host)},set:function(v){this._x.toString(this._multiLine._host)!==v&&this._x.fromString(v)&&this._multiLine._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y.toString(this._multiLine._host)},set:function(v){this._y.toString(this._multiLine._host)!==v&&this._y.fromString(v)&&this._multiLine._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"control",{get:function(){return this._control},set:function(v){this._control!==v&&(this._control&&this._controlObserver&&(this._control.onDirtyObservable.remove(this._controlObserver),this._controlObserver=null),this._control=v,this._control&&(this._controlObserver=this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"mesh",{get:function(){return this._mesh},set:function(v){this._mesh!==v&&(this._mesh&&this._meshObserver&&this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver),this._mesh=v,this._mesh&&(this._meshObserver=this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!1,configurable:!0}),b.prototype.resetLinks=function(){this.control=null,this.mesh=null},b.prototype.translate=function(){return this._point=this._translatePoint(),this._point},b.prototype._translatePoint=function(){if(this._mesh!=null)return this._multiLine._host.getProjectedPositionWithZ(this._mesh.getBoundingInfo().boundingSphere.center,this._mesh.getWorldMatrix());if(this._control!=null)return new c.Vector3(this._control.centerX,this._control.centerY,1-c.Epsilon);var v=this._multiLine._host,_=this._x.getValueInPixel(v,Number(v._canvas.width)),o=this._y.getValueInPixel(v,Number(v._canvas.height));return new c.Vector3(_,o,1-c.Epsilon)},b.prototype.dispose=function(){this.resetLinks()},b}()},"../../../dev/gui/src/2D/style.ts":(B,E,d)=>{d.r(E),d.d(E,{Style:()=>g});var c=d("babylonjs/Misc/perfCounter"),l=d("../../../dev/gui/src/2D/valueAndUnit.ts"),g=function(){function b(v){this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new l.ValueAndUnit(18,l.ValueAndUnit.UNITMODE_PIXEL,!1),this.onChangedObservable=new c.Observable,this._host=v}return Object.defineProperty(b.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(v){this._fontSize.toString(this._host)!==v&&this._fontSize.fromString(v)&&this.onChangedObservable.notifyObservers(this)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(v){this._fontFamily!==v&&(this._fontFamily=v,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(v){this._fontStyle!==v&&(this._fontStyle=v,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(v){this._fontWeight!==v&&(this._fontWeight=v,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this.onChangedObservable.clear()},b}()},"../../../dev/gui/src/2D/valueAndUnit.ts":(B,E,d)=>{d.r(E),d.d(E,{ValueAndUnit:()=>l});var c=d("babylonjs/Misc/perfCounter"),l=function(){function g(b,v,_){v===void 0&&(v=g.UNITMODE_PIXEL),_===void 0&&(_=!0),this.negativeValueAllowed=_,this._value=1,this._unit=g.UNITMODE_PIXEL,this.ignoreAdaptiveScaling=!1,this.onChangedObservable=new c.Observable,this._value=b,this._unit=v,this._originalUnit=v}return Object.defineProperty(g.prototype,"isPercentage",{get:function(){return this._unit===g.UNITMODE_PERCENTAGE},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isPixel",{get:function(){return this._unit===g.UNITMODE_PIXEL},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"internalValue",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return this._value},set:function(b){b!==this._value&&(this._value=b,this.onChangedObservable.notifyObservers())},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"unit",{get:function(){return this._unit},set:function(b){b!==this._unit&&(this._unit=b,this.onChangedObservable.notifyObservers())},enumerable:!1,configurable:!0}),g.prototype.getValueInPixel=function(b,v){return this.isPixel?this.getValue(b):this.getValue(b)*v},g.prototype.updateInPlace=function(b,v){return v===void 0&&(v=g.UNITMODE_PIXEL),(this.value!==b||this.unit!==v)&&(this._value=b,this._unit=v,this.onChangedObservable.notifyObservers()),this},g.prototype.getValue=function(b){if(b&&!this.ignoreAdaptiveScaling&&this.unit!==g.UNITMODE_PERCENTAGE){var v=0,_=0;if(b.idealWidth&&(v=Math.ceil(this._value*b.getSize().width/b.idealWidth)),b.idealHeight&&(_=Math.ceil(this._value*b.getSize().height/b.idealHeight)),b.useSmallestIdeal&&b.idealWidth&&b.idealHeight)return window.innerWidth<window.innerHeight?v:_;if(b.idealWidth)return v;if(b.idealHeight)return _}return this._value},g.prototype.toString=function(b,v){switch(this._unit){case g.UNITMODE_PERCENTAGE:{var _=this.getValue(b)*100;return(v?_.toFixed(v):_)+"%"}case g.UNITMODE_PIXEL:{var o=this.getValue(b);return(v?o.toFixed(v):o)+"px"}}return this._unit.toString()},g.prototype.fromString=function(b){var v=g._Regex.exec(b.toString());if(!v||v.length===0)return!1;var _=parseFloat(v[1]),o=this._originalUnit;if(this.negativeValueAllowed||_<0&&(_=0),v.length===4)switch(v[3]){case"px":o=g.UNITMODE_PIXEL;break;case"%":o=g.UNITMODE_PERCENTAGE,_/=100;break}return _===this._value&&o===this._unit?!1:(this._value=_,this._unit=o,this.onChangedObservable.notifyObservers(),!0)},Object.defineProperty(g,"UNITMODE_PERCENTAGE",{get:function(){return g._UNITMODE_PERCENTAGE},enumerable:!1,configurable:!0}),Object.defineProperty(g,"UNITMODE_PIXEL",{get:function(){return g._UNITMODE_PIXEL},enumerable:!1,configurable:!0}),g._Regex=/(^-?\d*(\.\d+)?)(%|px)?/,g._UNITMODE_PERCENTAGE=0,g._UNITMODE_PIXEL=1,g}()},"../../../dev/gui/src/2D/xmlLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{XmlLoader:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g="XmlLoader Exception : XML file is malformed or corrupted.",b=function(){function v(_){_===void 0&&(_=null),this._nodes={},this._nodeTypes={element:1,attribute:2,text:3},this._isLoaded=!1,this._objectAttributes={textHorizontalAlignment:1,textVerticalAlignment:2,horizontalAlignment:3,verticalAlignment:4,stretch:5},_&&(this._parentClass=_)}return v.prototype._getChainElement=function(_){var o=window;this._parentClass&&(o=this._parentClass);var t=_;t=t.split(".");for(var e=0;e<t.length;e++)o=o[t[e]];return o},v.prototype._getClassAttribute=function(_){var o=_.split("."),t=(0,l.GetClass)("BABYLON.GUI."+o[0]);return t[o[1]]},v.prototype._createGuiElement=function(_,o,t){t===void 0&&(t=!0);try{var e=(0,l.GetClass)("BABYLON.GUI."+_.nodeName),i=new e;o&&t&&o.addControl(i);for(var a=0;a<_.attributes.length;a++)if(!_.attributes[a].name.toLowerCase().includes("datasource"))if(_.attributes[a].name.toLowerCase().includes("observable")){var s=this._getChainElement(_.attributes[a].value);i[_.attributes[a].name].add(s);continue}else if(_.attributes[a].name=="linkWithMesh")this._parentClass?i.linkWithMesh(this._parentClass[_.attributes[a].value]):i.linkWithMesh(window[_.attributes[a].value]);else if(_.attributes[a].value.startsWith("{{")&&_.attributes[a].value.endsWith("}}")){var s=this._getChainElement(_.attributes[a].value.substring(2,_.attributes[a].value.length-2));i[_.attributes[a].name]=s}else this._objectAttributes[_.attributes[a].name]?i[_.attributes[a].name]=this._getClassAttribute(_.attributes[a].value):_.attributes[a].value=="true"||_.attributes[a].value=="false"?i[_.attributes[a].name]=_.attributes[a].value=="true":i[_.attributes[a].name]=isNaN(Number(_.attributes[a].value))?_.attributes[a].value:Number(_.attributes[a].value);if(!_.attributes.getNamedItem("id"))return this._nodes[_.nodeName+Object.keys(this._nodes).length+"_gen"]=i,i;var u=_.attributes.getNamedItem("id").value;if(u.startsWith("{{")&&u.endsWith("}}")&&(u=this._getChainElement(u.substring(2,u.length-2))),!this._nodes[u])this._nodes[u]=i;else throw"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute";return i}catch(f){throw"XmlLoader Exception : Error parsing Control "+_.nodeName+","+f+"."}},v.prototype._parseGrid=function(_,o,t){for(var e,i,a,s=_.children,u,f=!1,m,P=-1,y=-1,M=0,O=0;O<s.length;O++)if(s[O].nodeType==this._nodeTypes.element){if(s[O].nodeName!="Row")throw"XmlLoader Exception : Expecting Row node, received "+s[O].nodeName;if(P+=1,a=s[O].children,!s[O].attributes.getNamedItem("height"))throw"XmlLoader Exception : Height must be defined for grid rows";i=Number(s[O].attributes.getNamedItem("height").nodeValue),f=s[O].attributes.getNamedItem("isPixel")?JSON.parse(s[O].attributes.getNamedItem("isPixel").nodeValue):!1,o.addRowDefinition(i,f);for(var x=0;x<a.length;x++)if(a[x].nodeType==this._nodeTypes.element){if(a[x].nodeName!="Column")throw"XmlLoader Exception : Expecting Column node, received "+a[x].nodeName;if(y+=1,P>0&&y>M)throw"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.";if(P==0){if(!a[x].attributes.getNamedItem("width"))throw"XmlLoader Exception : Width must be defined for all the grid columns in the first row";e=Number(a[x].attributes.getNamedItem("width").nodeValue),f=a[x].attributes.getNamedItem("isPixel")?JSON.parse(a[x].attributes.getNamedItem("isPixel").nodeValue):!1,o.addColumnDefinition(e,f)}u=a[x].children;for(var R=0;R<u.length;R++)u[R].nodeType==this._nodeTypes.element&&(m=this._createGuiElement(u[R],o,!1),o.addControl(m,P,y),u[R].firstChild&&this._parseXml(u[R].firstChild,m))}P==0&&(M=y),y=-1}_.nextSibling&&this._parseXml(_.nextSibling,t)},v.prototype._parseElement=function(_,o,t){_.firstChild&&this._parseXml(_.firstChild,o),_.nextSibling&&this._parseXml(_.nextSibling,t)},v.prototype._prepareSourceElement=function(_,o,t,e,i){this._parentClass?this._parentClass[t]=e[i]:window[t]=e[i],_.firstChild&&this._parseXml(_.firstChild,o,!0)},v.prototype._parseElementsFromSource=function(_,o,t){var e=_.attributes.getNamedItem("dataSource").value;if(e.includes(" in ")){var i=!0,a=e.split(" in ");if(a.length<2)throw"XmlLoader Exception : Malformed XML, Data Source must have an iterator and a source";var s=a[1];if(s.startsWith("{")&&s.endsWith("}")&&(i=!1),(!i||s.startsWith("[")&&s.endsWith("]"))&&(s=s.substring(1,s.length-1)),this._parentClass?s=this._parentClass[s]:s=window[s],i)for(var u=0;u<s.length;u++)this._prepareSourceElement(_,o,a[0],s,u);else for(var u in s)this._prepareSourceElement(_,o,a[0],s,u);_.nextSibling&&this._parseXml(_.nextSibling,t)}else throw"XmlLoader Exception : Malformed XML, Data Source must include an in"},v.prototype._parseXml=function(_,o,t){if(t===void 0&&(t=!1),_.nodeType!=this._nodeTypes.element){_.nextSibling&&this._parseXml(_.nextSibling,o,t);return}t&&_.setAttribute("id",o.id+(o._children.length+1));var e=this._createGuiElement(_,o);this._rootNode||(this._rootNode=e),_.nodeName=="Grid"?this._parseGrid(_,e,o):_.attributes.getNamedItem("dataSource")?this._parseElementsFromSource(_,e,o):this._parseElement(_,e,o)},v.prototype.isLoaded=function(){return this._isLoaded},v.prototype.getNodeById=function(_){return this._nodes[_]},v.prototype.getNodes=function(){return this._nodes},v.prototype.dispose=function(){this._rootNode&&(this._rootNode.dispose(),this._rootNode=null,this._nodes={})},v.prototype.loadLayout=function(_,o,t,e){var i=this;t===void 0&&(t=null),e===void 0&&(e=null);var a=new XMLHttpRequest;a.onload=function(){if(a.readyState===4&&a.status===200){if(!a.responseXML)if(e){e(g);return}else throw g;var s=a.responseXML.documentElement;i._parseXml(s.firstChild,o),i._isLoaded=!0,t&&t()}},a.onerror=function(){e&&e("an error occurred during loading the layout")},a.open("GET",_,!0),a.send()},v.prototype.loadLayoutAsync=function(_,o){return(0,c.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,c.__generator)(this,function(e){return[2,new Promise(function(i,a){t.loadLayout(_,o,i,a)})]})})},v}()},"../../../dev/gui/src/3D/behaviors/defaultBehavior.ts":(B,E,d)=>{d.r(E),d.d(E,{DefaultBehavior:()=>l});var c=d("babylonjs/Misc/perfCounter"),l=function(){function g(){this.followBehaviorEnabled=!1,this.sixDofDragBehaviorEnabled=!0,this.surfaceMagnetismBehaviorEnabled=!0,this._followBehavior=new c.FollowBehavior,this._sixDofDragBehavior=new c.SixDofDragBehavior,this._surfaceMagnetismBehavior=new c.SurfaceMagnetismBehavior}return Object.defineProperty(g.prototype,"name",{get:function(){return"Default"},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"followBehavior",{get:function(){return this._followBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"sixDofDragBehavior",{get:function(){return this._sixDofDragBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"surfaceMagnetismBehavior",{get:function(){return this._surfaceMagnetismBehavior},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.attach=function(b,v,_){this._scene=b.getScene(),this.attachedNode=b,this._addObservables(),this._followBehavior.attach(b),this._sixDofDragBehavior.attach(b),this._sixDofDragBehavior.draggableMeshes=v||null,this._sixDofDragBehavior.faceCameraOnDragStart=!0,this._surfaceMagnetismBehavior.attach(b,this._scene),_&&(this._surfaceMagnetismBehavior.meshes=_),this._surfaceMagnetismBehavior.enabled=!1},g.prototype.detach=function(){this.attachedNode=null,this._removeObservables(),this._followBehavior.detach(),this._sixDofDragBehavior.detach(),this._surfaceMagnetismBehavior.detach()},g.prototype._addObservables=function(){var b=this;this._onBeforeRenderObserver=this._scene.onBeforeRenderObservable.add(function(){b._followBehavior._enabled=!b._sixDofDragBehavior.isMoving&&b.followBehaviorEnabled}),this._onDragObserver=this._sixDofDragBehavior.onDragObservable.add(function(v){b._sixDofDragBehavior.disableMovement=b._surfaceMagnetismBehavior.findAndUpdateTarget(v.pickInfo)})},g.prototype._removeObservables=function(){this._scene.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._sixDofDragBehavior.onDragObservable.remove(this._onDragObserver)},g}()},"../../../dev/gui/src/3D/controls/MRTK3/touchHolographicButton.ts":(B,E,d)=>{d.r(E),d.d(E,{TouchHolographicButton:()=>m});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),g=d("babylonjs/Misc/perfCounter"),b=d("../../../dev/gui/src/2D/controls/control.ts"),v=d("../../../dev/gui/src/2D/controls/grid.ts"),_=d("../../../dev/gui/src/2D/controls/image.ts"),o=d("../../../dev/gui/src/3D/materials/mrdl/mrdlBackglowMaterial.ts"),t=d("../../../dev/gui/src/3D/materials/mrdl/mrdlBackplateMaterial.ts"),e=d("../../../dev/gui/src/3D/materials/mrdl/mrdlFrontplateMaterial.ts"),i=d("../../../dev/gui/src/3D/materials/mrdl/mrdlInnerquadMaterial.ts"),a=d("../../../dev/gui/src/2D/controls/rectangle.ts"),s=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),u=d("../../../dev/gui/src/2D/controls/textBlock.ts"),f=d("../../../dev/gui/src/3D/controls/touchButton3D.ts"),m=function(P){(0,c.__extends)(y,P);function y(M,O){O===void 0&&(O=!0);var x=P.call(this,M)||this;return x.width=1,x.height=1,x.radius=.14,x.textSizeInPixels=18,x.imageSizeInPixels=40,x.plateMaterialColor=new g.Color3(.4,.4,.4),x.frontPlateDepth=.2,x.backPlateDepth=.04,x.backGlowOffset=.1,x.flatPlaneDepth=.001,x.innerQuadRadius=x.radius-.04,x.innerQuadColor=new g.Color4(0,0,0,0),x.innerQuadToggledColor=new g.Color4(.5197843,.6485234,.9607843,.6),x.innerQuadHoverColor=new g.Color4(1,1,1,.05),x.innerQuadToggledHoverColor=new g.Color4(.5197843,.6485234,.9607843,1),x._isBackplateVisible=!0,x._shareMaterials=!0,x._shareMaterials=O,x.pointerEnterAnimation=function(){x._frontPlate&&x._textPlate&&!x.isToggleButton&&x._performEnterExitAnimation(1),x.isToggleButton&&x._innerQuadMaterial&&(x.isToggled?x._innerQuadMaterial.color=x.innerQuadToggledHoverColor:x._innerQuadMaterial.color=x.innerQuadHoverColor)},x.pointerOutAnimation=function(){x._frontPlate&&x._textPlate&&!x.isToggleButton&&x._performEnterExitAnimation(-.8),x.isToggleButton&&x._innerQuadMaterial&&x._onToggle(x.isToggled)},x.pointerDownAnimation=function(){},x.pointerUpAnimation=function(){},x._pointerClickObserver=x.onPointerClickObservable.add(function(){x._frontPlate&&x._backGlow&&!x.isActiveNearInteraction&&x._performClickAnimation(),x.isToggleButton&&x._innerQuadMaterial&&x._onToggle(x.isToggled)}),x._pointerEnterObserver=x.onPointerEnterObservable.add(function(){x.pointerEnterAnimation()}),x._pointerOutObserver=x.onPointerOutObservable.add(function(){x.pointerOutAnimation()}),x._toggleObserver=x.onToggleObservable.add(function(R){R?x._innerQuadMaterial.color=x.innerQuadToggledColor:x._innerQuadMaterial.color=x.innerQuadColor}),x}return y.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(y.prototype,"renderingGroupId",{get:function(){return this._backPlate.renderingGroupId},set:function(M){this._backPlate.renderingGroupId=M,this._textPlate.renderingGroupId=M,this._frontPlate.renderingGroupId=M,this._backGlow.renderingGroupId=M,this._innerQuad.renderingGroupId=M,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=M)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mesh",{get:function(){return this._backPlate},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"tooltipText",{get:function(){var M;return((M=this._tooltipTextBlock)===null||M===void 0?void 0:M.text)||null},set:function(M){var O=this;if(!M){this._disposeTooltip();return}if(!this._tooltipFade){var x=this._backPlate._scene.useRightHandedSystem;this._tooltipMesh=(0,g.CreatePlane)("",{size:1},this._backPlate._scene),this._tooltipMesh.position=g.Vector3.Down().scale(.7).add(g.Vector3.Forward(x).scale(-.15)),this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._frontPlateCollisionMesh,this._tooltipTexture=l.AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh);var R=new a.Rectangle;R.height=.25,R.width=.8,R.cornerRadius=25,R.color="#ffffff",R.thickness=20,R.background="#060668",this._tooltipTexture.addControl(R),this._tooltipTextBlock=new u.TextBlock,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=100,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new g.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){O._tooltipFade&&O._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){O._tooltipFade&&O._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=M)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"text",{get:function(){return this._text},set:function(M){this._text!==M&&(this._text=M,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"subtext",{get:function(){return this._subtext},set:function(M){this._subtext!==M&&(this._subtext=M,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(M){this._imageUrl!==M&&(this._imageUrl=M,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"backMaterial",{get:function(){return this._backMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"frontMaterial",{get:function(){return this._frontMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"backGlowMaterial",{get:function(){return this._backGlowMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"innerQuadMaterial",{get:function(){return this._innerQuadMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"plateMaterial",{get:function(){return this._plateMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isBackplateVisible",{set:function(M){this.mesh&&this._backMaterial&&(M&&!this._isBackplateVisible?this._backPlate.visibility=1:!M&&this._isBackplateVisible&&(this._backPlate.visibility=0)),this._isBackplateVisible=M},enumerable:!1,configurable:!0}),y.prototype._getTypeName=function(){return"TouchHolographicButton"},y.prototype._rebuildContent=function(){var M;this._getAspectRatio()<=1?M=this._alignContentVertically():M=this._alignContentHorizontally(),this.content=M},y.prototype._getAspectRatio=function(){return this.width/this.height},y.prototype._alignContentVertically=function(){var M=new s.StackPanel;if(M.isVertical=!0,(0,g.IsDocumentAvailable)()&&document.createElement&&this._imageUrl){var O=new _.Image;O.source=this._imageUrl,O.heightInPixels=180,O.widthInPixels=100,O.paddingTopInPixels=40,O.paddingBottomInPixels=40,M.addControl(O)}if(this._text){var x=new u.TextBlock;x.text=this._text,x.color="white",x.heightInPixels=30,x.fontSize=24,M.addControl(x)}return M},y.prototype._alignContentHorizontally=function(){var M=240,O=15,x=new a.Rectangle;x.widthInPixels=M,x.heightInPixels=M,x.color="transparent",x.setPaddingInPixels(O,O,O,O),M-=O*2;var R=new s.StackPanel;if(R.isVertical=!1,R.scaleY=this._getAspectRatio(),(0,g.IsDocumentAvailable)()&&document.createElement&&this._imageUrl){var N=new a.Rectangle("".concat(this.name,"_image"));N.widthInPixels=this.imageSizeInPixels,N.heightInPixels=this.imageSizeInPixels,N.color="transparent",M-=this.imageSizeInPixels;var W=new _.Image;W.source=this._imageUrl,N.addControl(W),R.addControl(N)}if(this._text){var Q=new u.TextBlock("".concat(this.name,"_text"));if(Q.text=this._text,Q.color="white",Q.fontSize=this.textSizeInPixels,Q.widthInPixels=M,this._imageUrl&&(Q.textHorizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,Q.paddingLeftInPixels=O),this._subtext){var U=new v.Grid;U.addColumnDefinition(1),U.addRowDefinition(.5),U.addRowDefinition(.5),U.widthInPixels=M,U.heightInPixels=45;var H=new u.TextBlock("".concat(this.name,"_subtext"));H.text=this._subtext,H.color="#EEEEEEAB",H.fontSize=this.textSizeInPixels*.75,H.fontWeight="600",this._imageUrl&&(H.textHorizontalAlignment=b.Control.HORIZONTAL_ALIGNMENT_LEFT,H.paddingLeftInPixels=O),U.addControl(Q,0),U.addControl(H,1),R.addControl(U)}else R.addControl(Q)}return x.addControl(R),x},y.prototype._createNode=function(M){var O;this.name=(O=this.name)!==null&&O!==void 0?O:"TouchHolographicButton";var x=this._createBackPlate(M),R=this._createFrontPlate(M),N=this._createInnerQuad(M),W=this._createBackGlow(M);this._frontPlateCollisionMesh=R,this._textPlate=P.prototype._createNode.call(this,M),this._textPlate.name="".concat(this.name,"_textPlate"),this._textPlate.isPickable=!1,this._textPlate.scaling.x=this.width,this._textPlate.parent=R,this._backPlate=x,this._backPlate.position=g.Vector3.Forward(M.useRightHandedSystem).scale(this.backPlateDepth/2),this._backPlate.isPickable=!1,this._backPlate.addChild(R),this._backPlate.addChild(N),W&&this._backPlate.addChild(W);var Q=new g.TransformNode("".concat(this.name,"_root"),M);return this._backPlate.setParent(Q),this.collisionMesh=R,this.collidableFrontDirection=this._backPlate.forward.negate(),Q},y.prototype._createBackPlate=function(M){var O=this,x=(0,g.CreateBox)("".concat(this.name,"_backPlate"),{},M);return x.isPickable=!1,x.visibility=0,x.scaling.z=.2,g.SceneLoader.ImportMeshAsync(void 0,y.MRTK_ASSET_BASE_URL,y.BACKPLATE_MODEL_FILENAME,M).then(function(R){var N=R.meshes[1];N.visibility=0,O._isBackplateVisible&&(N.visibility=1,N.name="".concat(O.name,"_backPlate"),N.isPickable=!1,N.scaling.x=O.width,N.scaling.y=O.height,N.parent=x),O._backMaterial&&(N.material=O._backMaterial),O._backPlate=N}),x},y.prototype._createFrontPlate=function(M){var O=this,x=(0,g.CreateBox)("".concat(this.name,"_frontPlate"),{width:this.width,height:this.height,depth:this.frontPlateDepth},M);return x.isPickable=!0,x.isNearPickable=!0,x.visibility=0,x.position=g.Vector3.Forward(M.useRightHandedSystem).scale((this.backPlateDepth-this.frontPlateDepth)/2),g.SceneLoader.ImportMeshAsync(void 0,y.MRTK_ASSET_BASE_URL,y.FRONTPLATE_MODEL_FILENAME,M).then(function(R){var N=(0,g.CreateBox)("".concat(O.name,"_collisionPlate"),{width:O.width,height:O.height},M);N.isPickable=!1,N.scaling.z=O.frontPlateDepth,N.visibility=0,N.parent=x,O._collisionPlate=N;var W=R.meshes[1];W.name="".concat(O.name,"_frontPlate"),W.isPickable=!1,W.scaling.x=O.width-O.backGlowOffset,W.scaling.y=O.height-O.backGlowOffset,W.position=g.Vector3.Forward(M.useRightHandedSystem).scale(-.5),W.parent=N,O.isToggleButton&&(W.visibility=0),O._frontMaterial&&(W.material=O._frontMaterial),O._textPlate.scaling.x=1,O._textPlate.parent=W,O._frontPlate=W}),x},y.prototype._createInnerQuad=function(M){var O=this,x=(0,g.CreateBox)("".concat(this.name,"_innerQuad"),{},M);return x.isPickable=!1,x.visibility=0,x.scaling.z=this.flatPlaneDepth,x.position.z+=this.backPlateDepth/2-this.flatPlaneDepth,g.SceneLoader.ImportMeshAsync(void 0,y.MRTK_ASSET_BASE_URL,y.INNERQUAD_MODEL_FILENAME,M).then(function(R){var N=R.meshes[1];N.name="".concat(O.name,"_innerQuad"),N.isPickable=!1,N.scaling.x=O.width-O.backGlowOffset,N.scaling.y=O.height-O.backGlowOffset,N.parent=x,O._innerQuadMaterial&&(N.material=O._innerQuadMaterial),O._innerQuad=N}),x},y.prototype._createBackGlow=function(M){var O=this;if(!this.isToggleButton){var x=(0,g.CreateBox)("".concat(this.name,"_backGlow"),{},M);return x.isPickable=!1,x.visibility=0,x.scaling.z=this.flatPlaneDepth,x.position.z+=this.backPlateDepth/2-this.flatPlaneDepth*2,g.SceneLoader.ImportMeshAsync(void 0,y.MRTK_ASSET_BASE_URL,y.BACKGLOW_MODEL_FILENAME,M).then(function(R){var N=R.meshes[1];N.name="".concat(O.name,"_backGlow"),N.isPickable=!1,N.scaling.x=O.width-O.backGlowOffset,N.scaling.y=O.height-O.backGlowOffset,N.parent=x,O._backGlowMaterial&&(N.material=O._backGlowMaterial),O._backGlow=N}),x}},y.prototype._applyFacade=function(M){this._plateMaterial.emissiveTexture=M,this._plateMaterial.opacityTexture=M,this._plateMaterial.diffuseColor=this.plateMaterialColor},y.prototype._performClickAnimation=function(){for(var M=60,O=new g.AnimationGroup("Click Animation Group"),x=[{name:"backGlowMotion",mesh:this._backGlow,property:"material.motion",keys:[{frame:0,values:[0,0,0]},{frame:20,values:[1,.0144,.0144]},{frame:40,values:[.0027713229489760476,0,0]},{frame:45,values:[.0027713229489760476]}]},{name:"_collisionPlateZSlide",mesh:this._collisionPlate,property:"position.z",keys:[{frame:0,values:[0,0,0]},{frame:20,values:[g.Vector3.Forward(this._collisionPlate._scene.useRightHandedSystem).scale(this.frontPlateDepth/2).z,0,0]},{frame:40,values:[0,.005403332496794331]},{frame:45,values:[0]}]},{name:"_collisionPlateZScale",mesh:this._collisionPlate,property:"scaling.z",keys:[{frame:0,values:[this.frontPlateDepth,0,0]},{frame:20,values:[this.backPlateDepth,0,0]},{frame:40,values:[this.frontPlateDepth,.0054]},{frame:45,values:[this.frontPlateDepth]}]}],R=0,N=x;R<N.length;R++){for(var W=N[R],Q=new g.Animation(W.name,W.property,M,g.Animation.ANIMATIONTYPE_FLOAT,g.Animation.ANIMATIONLOOPMODE_CYCLE),U=[],H=0,Y=W.keys;H<Y.length;H++){var J=Y[H];U.push({frame:J.frame,value:J.values[0],inTangent:J.values[1],outTangent:J.values[2],interpolation:J.values[3]})}Q.setKeys(U),W.mesh&&O.addTargetedAnimation(Q,W.mesh)}O.normalize(0,45),O.speedRatio=1,O.play()},y.prototype._performEnterExitAnimation=function(M){for(var O=60,x=new g.AnimationGroup("Enter Exit Animation Group"),R=[{name:"frontPlateFadeOut",mesh:this._frontPlate,property:"material.fadeOut",keys:[{frame:0,values:[0,0,.025045314830017686,0]},{frame:40,values:[1.00205599570012,.025045314830017686,0,0]}]},{name:"textPlateZSlide",mesh:this._textPlate,property:"position.z",keys:[{frame:0,values:[0,0,0]},{frame:40,values:[g.Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-.15).z,0,0]}]}],N=0,W=R;N<W.length;N++){for(var Q=W[N],U=new g.Animation(Q.name,Q.property,O,g.Animation.ANIMATIONTYPE_FLOAT,g.Animation.ANIMATIONLOOPMODE_CYCLE),H=[],Y=0,J=Q.keys;Y<J.length;Y++){var q=J[Y];H.push({frame:q.frame,value:q.values[0],inTangent:q.values[1],outTangent:q.values[2],interpolation:q.values[3]})}U.setKeys(H),Q.mesh&&x.addTargetedAnimation(U,Q.mesh)}x.normalize(0,45),x.speedRatio=M,x.play()},y.prototype._createBackMaterial=function(M){var O;this._backMaterial=(O=this._backMaterial)!==null&&O!==void 0?O:new t.MRDLBackplateMaterial(this.name+"backPlateMaterial",M.getScene()),this._backMaterial.absoluteSizes=!0,this._backMaterial.radius=this.radius,this._backMaterial.lineWidth=.02},y.prototype._createFrontMaterial=function(M){var O;this._frontMaterial=(O=this._frontMaterial)!==null&&O!==void 0?O:new e.MRDLFrontplateMaterial(this.name+"Front Material",M.getScene()),this.frontMaterial.radius=this.innerQuadRadius,this.frontMaterial.fadeOut=0},y.prototype._createBackGlowMaterial=function(M){var O,x=this.radius+.04;this._backGlowMaterial=(O=this._backGlowMaterial)!==null&&O!==void 0?O:new o.MRDLBackglowMaterial(this.name+"Back Glow Material",M.getScene()),this._backGlowMaterial.bevelRadius=x,this._backGlowMaterial.lineWidth=x,this._backGlowMaterial.motion=0},y.prototype._createInnerQuadMaterial=function(M){var O;this._innerQuadMaterial=(O=this._innerQuadMaterial)!==null&&O!==void 0?O:new i.MRDLInnerquadMaterial("inner_quad",M.getScene()),this._innerQuadMaterial.radius=this.innerQuadRadius,this.isToggleButton&&(this._innerQuadMaterial.color=this.innerQuadColor)},y.prototype._createPlateMaterial=function(M){var O;this._plateMaterial=(O=this._plateMaterial)!==null&&O!==void 0?O:new g.StandardMaterial(this.name+"Plate Material",M.getScene()),this._plateMaterial.specularColor=g.Color3.Black()},y.prototype._onToggle=function(M){P.prototype._onToggle.call(this,M)},y.prototype._affectMaterial=function(M){this._shareMaterials?(this._host._touchSharedMaterials.mrdlBackplateMaterial?this._backMaterial=this._host._touchSharedMaterials.mrdlBackplateMaterial:(this._createBackMaterial(M),this._host._touchSharedMaterials.mrdlBackplateMaterial=this._backMaterial),this._host._touchSharedMaterials.mrdlFrontplateMaterial?this._frontMaterial=this._host._touchSharedMaterials.mrdlFrontplateMaterial:(this._createFrontMaterial(M),this._host._touchSharedMaterials.mrdlFrontplateMaterial=this._frontMaterial),this._host._touchSharedMaterials.mrdlBackglowMaterial?this._backGlowMaterial=this._host._touchSharedMaterials.mrdlBackglowMaterial:(this._createBackGlowMaterial(M),this._host._touchSharedMaterials.mrdlBackglowMaterial=this._backGlowMaterial),this._host._touchSharedMaterials.mrdlInnerQuadMaterial?this._innerQuadMaterial=this._host._touchSharedMaterials.mrdlInnerQuadMaterial:(this._createInnerQuadMaterial(M),this._host._touchSharedMaterials.mrdlInnerQuadMaterial=this._innerQuadMaterial)):(this._createBackMaterial(M),this._createFrontMaterial(M),this._createBackGlowMaterial(M),this._createInnerQuadMaterial(M)),this._createPlateMaterial(M),this._backPlate.material=this._backMaterial,this._textPlate.material=this._plateMaterial,this._isBackplateVisible||(this._backPlate.visibility=0),this._frontPlate&&(this._frontPlate.material=this._frontMaterial),this._backGlow&&(this._backGlow.material=this._backGlowMaterial),this._innerQuad&&(this._innerQuad.material=this._innerQuadMaterial),this._rebuildContent()},y.prototype.dispose=function(){P.prototype.dispose.call(this),this._disposeTooltip(),this.onPointerClickObservable.remove(this._pointerClickObserver),this.onPointerEnterObservable.remove(this._pointerEnterObserver),this.onPointerOutObservable.remove(this._pointerOutObserver),this.onToggleObservable.remove(this._toggleObserver),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._backGlowMaterial.dispose(),this._innerQuadMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},y.MRTK_ASSET_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",y.FRONTPLATE_MODEL_FILENAME="mrtk-fluent-frontplate.glb",y.BACKPLATE_MODEL_FILENAME="mrtk-fluent-backplate.glb",y.BACKGLOW_MODEL_FILENAME="mrtk-fluent-button.glb",y.INNERQUAD_MODEL_FILENAME="SlateProximity.glb",y}(f.TouchButton3D)},"../../../dev/gui/src/3D/controls/abstractButton3D.ts":(B,E,d)=>{d.r(E),d.d(E,{AbstractButton3D:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/contentDisplay3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o){return v.call(this,o)||this}return _.prototype._getTypeName=function(){return"AbstractButton3D"},_.prototype._createNode=function(o){return new l.TransformNode("button"+this.name,o)},_}(g.ContentDisplay3D)},"../../../dev/gui/src/3D/controls/button3D.ts":(B,E,d)=>{d.r(E),d.d(E,{Button3D:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/abstractButton3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o)||this;return e._options=(0,c.__assign)({width:1,height:1,depth:.08},t),e.pointerEnterAnimation=function(){e.mesh&&(e._currentMaterial.emissiveColor=l.Color3.Red())},e.pointerOutAnimation=function(){e._currentMaterial.emissiveColor=l.Color3.Black()},e.pointerDownAnimation=function(){e.mesh&&e.mesh.scaling.scaleInPlace(.95)},e.pointerUpAnimation=function(){e.mesh&&e.mesh.scaling.scaleInPlace(1/.95)},e}return _.prototype._applyFacade=function(o){this._currentMaterial.emissiveTexture=o},_.prototype._getTypeName=function(){return"Button3D"},_.prototype._createNode=function(o){for(var t=new Array(6),e=0;e<6;e++)t[e]=new l.Vector4(0,0,0,0);o.useRightHandedSystem?t[0].copyFromFloats(1,0,0,1):t[1].copyFromFloats(0,0,1,1);var i=(0,l.CreateBox)(this.name+"_rootMesh",{width:this._options.width,height:this._options.height,depth:this._options.depth,faceUV:t,wrap:!0},o);return this._contentScaleRatioY=this._contentScaleRatio*this._options.width/this._options.height,this._setFacadeTextureScaling(),i},_.prototype._affectMaterial=function(o){var t=new l.StandardMaterial(this.name+"Material",o.getScene());t.specularColor=l.Color3.Black(),o.material=t,this._currentMaterial=t,this._resetContent()},_.prototype.dispose=function(){v.prototype.dispose.call(this),this._disposeFacadeTexture(),this._currentMaterial&&this._currentMaterial.dispose()},_}(g.AbstractButton3D)},"../../../dev/gui/src/3D/controls/container3D.ts":(B,E,d)=>{d.r(E),d.d(E,{Container3D:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/control3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t._blockLayout=!1,t._children=new Array,t}return Object.defineProperty(_.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"blockLayout",{get:function(){return this._blockLayout},set:function(o){this._blockLayout!==o&&(this._blockLayout=o,this._blockLayout||this._arrangeChildren())},enumerable:!1,configurable:!0}),_.prototype.updateLayout=function(){return this._arrangeChildren(),this},_.prototype.containsControl=function(o){return this._children.indexOf(o)!==-1},_.prototype.addControl=function(o){var t=this._children.indexOf(o);return t!==-1?this:(o.parent=this,o._host=this._host,this._children.push(o),this._host.utilityLayer&&(o._prepareNode(this._host.utilityLayer.utilityLayerScene),o.node&&(o.node.parent=this.node),this.blockLayout||this._arrangeChildren()),this)},_.prototype._arrangeChildren=function(){},_.prototype._createNode=function(o){return new l.TransformNode("ContainerNode",o)},_.prototype.removeControl=function(o){var t=this._children.indexOf(o);return t!==-1&&(this._children.splice(t,1),o.parent=null,o._disposeNode()),this},_.prototype._getTypeName=function(){return"Container3D"},_.prototype.dispose=function(){for(var o=0,t=this._children;o<t.length;o++){var e=t[o];e.dispose()}this._children.length=0,v.prototype.dispose.call(this)},_.UNSET_ORIENTATION=0,_.FACEORIGIN_ORIENTATION=1,_.FACEORIGINREVERSED_ORIENTATION=2,_.FACEFORWARD_ORIENTATION=3,_.FACEFORWARDREVERSED_ORIENTATION=4,_}(g.Control3D)},"../../../dev/gui/src/3D/controls/contentDisplay3D.ts":(B,E,d)=>{d.r(E),d.d(E,{ContentDisplay3D:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),g=d("../../../dev/gui/src/3D/controls/control3D.ts"),b=d("babylonjs/Misc/perfCounter"),v=function(_){(0,c.__extends)(o,_);function o(){var t=_!==null&&_.apply(this,arguments)||this;return t._contentResolution=512,t._contentScaleRatio=2,t}return Object.defineProperty(o.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,!(!t||!this._host||!this._host.utilityLayer)&&(this._facadeTexture?this._facadeTexture.rootContainer.clearControls():(this._facadeTexture=new l.AdvancedDynamicTexture("Facade",this._contentResolution,this._contentResolution,this._host.utilityLayer.utilityLayerScene,!0,b.Texture.TRILINEAR_SAMPLINGMODE),this._setFacadeTextureScaling(),this._facadeTexture.premulAlpha=!0),this._facadeTexture.addControl(t),this._applyFacade(this._facadeTexture))},enumerable:!1,configurable:!0}),o.prototype._setFacadeTextureScaling=function(){var t;this._facadeTexture&&(this._facadeTexture.rootContainer.scaleX=this._contentScaleRatio,this._facadeTexture.rootContainer.scaleY=(t=this._contentScaleRatioY)!==null&&t!==void 0?t:this._contentScaleRatio)},Object.defineProperty(o.prototype,"contentResolution",{get:function(){return this._contentResolution},set:function(t){this._contentResolution!==t&&(this._contentResolution=t,this._resetContent())},enumerable:!1,configurable:!0}),o.prototype._disposeFacadeTexture=function(){this._facadeTexture&&(this._facadeTexture.dispose(),this._facadeTexture=null)},o.prototype._resetContent=function(){this._disposeFacadeTexture(),this.content=this._content},o.prototype._applyFacade=function(t){},o}(g.Control3D)},"../../../dev/gui/src/3D/controls/control3D.ts":(B,E,d)=>{d.r(E),d.d(E,{Control3D:()=>g});var c=d("babylonjs/Misc/perfCounter"),l=d("../../../dev/gui/src/3D/vector3WithInfo.ts"),g=function(){function b(v){this.name=v,this._downCount=0,this._enterCount=-1,this._downPointerIds={},this._isVisible=!0,this._isScaledByManager=!1,this.onPointerMoveObservable=new c.Observable,this.onPointerOutObservable=new c.Observable,this.onPointerDownObservable=new c.Observable,this.onPointerUpObservable=new c.Observable,this.onPointerClickObservable=new c.Observable,this.onPointerEnterObservable=new c.Observable,this._behaviors=new Array}return Object.defineProperty(b.prototype,"position",{get:function(){return this._node?this._node.position:c.Vector3.Zero()},set:function(v){this._node&&(this._node.position=v)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"scaling",{get:function(){return this._node?this._node.scaling:new c.Vector3(1,1,1)},set:function(v){this._node&&(this._isScaledByManager=!1,this._node.scaling=v)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!1,configurable:!0}),b.prototype.addBehavior=function(v){var _=this,o=this._behaviors.indexOf(v);if(o!==-1)return this;v.init();var t=this._host.scene;return t.isLoading?t.onDataLoadedObservable.addOnce(function(){v.attach(_)}):v.attach(this),this._behaviors.push(v),this},b.prototype.removeBehavior=function(v){var _=this._behaviors.indexOf(v);return _===-1?this:(this._behaviors[_].detach(),this._behaviors.splice(_,1),this)},b.prototype.getBehaviorByName=function(v){for(var _=0,o=this._behaviors;_<o.length;_++){var t=o[_];if(t.name===v)return t}return null},Object.defineProperty(b.prototype,"isVisible",{get:function(){return this._isVisible},set:function(v){if(this._isVisible!==v){this._isVisible=v;var _=this.mesh;_&&_.setEnabled(v)}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!1,configurable:!0}),b.prototype.getClassName=function(){return this._getTypeName()},b.prototype._getTypeName=function(){return"Control3D"},Object.defineProperty(b.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"mesh",{get:function(){return this._node instanceof c.AbstractMesh?this._node:null},enumerable:!1,configurable:!0}),b.prototype.linkToTransformNode=function(v){return this._node&&(this._node.parent=v),this},b.prototype._prepareNode=function(v){if(!this._node){if(this._node=this._createNode(v),!this.node)return;this._injectGUI3DReservedDataStore(this.node).control=this;var _=this.mesh;_&&(_.isPickable=!0,this._affectMaterial(_))}},b.prototype._injectGUI3DReservedDataStore=function(v){var _,o;return v.reservedDataStore=(_=v.reservedDataStore)!==null&&_!==void 0?_:{},v.reservedDataStore.GUI3D=(o=v.reservedDataStore.GUI3D)!==null&&o!==void 0?o:{},v.reservedDataStore.GUI3D},b.prototype._createNode=function(v){return null},b.prototype._affectMaterial=function(v){v.material=null},b.prototype._isTouchButton3D=function(v){return v._generatePointerEventType!==void 0},b.prototype._onPointerMove=function(v,_){this.onPointerMoveObservable.notifyObservers(_,-1,v,this)},b.prototype._onPointerEnter=function(v){return this._enterCount===-1&&(this._enterCount=0),this._enterCount++,this._enterCount>1?!1:(this.onPointerEnterObservable.notifyObservers(this,-1,v,this),this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},b.prototype._onPointerOut=function(v){this._enterCount--,!(this._enterCount>0)&&(this._enterCount=0,this.onPointerOutObservable.notifyObservers(this,-1,v,this),this.pointerOutAnimation&&this.pointerOutAnimation())},b.prototype._onPointerDown=function(v,_,o,t){return this._downCount++,this._downPointerIds[o]=this._downPointerIds[o]+1||1,this._downCount!==1?!1:(this.onPointerDownObservable.notifyObservers(new l.Vector3WithInfo(_,t),-1,v,this),this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},b.prototype._onPointerUp=function(v,_,o,t,e){if(this._downCount--,this._downPointerIds[o]--,this._downPointerIds[o]<=0&&delete this._downPointerIds[o],this._downCount<0){this._downCount=0;return}this._downCount==0&&(e&&(this._enterCount>0||this._enterCount===-1)&&this.onPointerClickObservable.notifyObservers(new l.Vector3WithInfo(_,t),-1,v,this),this.onPointerUpObservable.notifyObservers(new l.Vector3WithInfo(_,t),-1,v,this),this.pointerUpAnimation&&this.pointerUpAnimation())},b.prototype.forcePointerUp=function(v){if(v===void 0&&(v=null),v!==null)this._onPointerUp(this,c.Vector3.Zero(),v,0,!0);else{for(var _ in this._downPointerIds)this._onPointerUp(this,c.Vector3.Zero(),+_,0,!0);this._downCount>0&&(this._downCount=1,this._onPointerUp(this,c.Vector3.Zero(),0,0,!0))}},b.prototype._processObservables=function(v,_,o,t,e){if(this._isTouchButton3D(this)&&o&&(v=this._generatePointerEventType(v,o,this._downCount)),v===c.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,_);var i=this._host._lastControlOver[t];return i&&i!==this&&i._onPointerOut(this),i!==this&&this._onPointerEnter(this),this._host._lastControlOver[t]=this,!0}return v===c.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,_,t,e),this._host._lastControlDown[t]=this,this._host._lastPickedControl=this,!0):v===c.PointerEventTypes.POINTERUP||v===c.PointerEventTypes.POINTERDOUBLETAP?(this._host._lastControlDown[t]&&this._host._lastControlDown[t]._onPointerUp(this,_,t,e,!0),delete this._host._lastControlDown[t],!0):!1},b.prototype._disposeNode=function(){this._node&&(this._node.dispose(),this._node=null)},b.prototype.dispose=function(){this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._disposeNode();for(var v=0,_=this._behaviors;v<_.length;v++){var o=_[v];o.detach()}},b}()},"../../../dev/gui/src/3D/controls/cylinderPanel.ts":(B,E,d)=>{d.r(E),d.d(E,{CylinderPanel:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),b=d("../../../dev/gui/src/3D/controls/container3D.ts"),v=function(_){(0,c.__extends)(o,_);function o(){var t=_!==null&&_.apply(this,arguments)||this;return t._radius=5,t}return Object.defineProperty(o.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,l.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!1,configurable:!0}),o.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var a=this._cylindricalMapping(e);switch(t.position=a,this.orientation){case b.Container3D.FACEORIGIN_ORIENTATION:i.lookAt(new l.Vector3(2*a.x,a.y,2*a.z));break;case b.Container3D.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new l.Vector3(-a.x,a.y,-a.z));break;case b.Container3D.FACEFORWARD_ORIENTATION:break;case b.Container3D.FACEFORWARDREVERSED_ORIENTATION:i.rotate(l.Axis.Y,Math.PI,l.Space.LOCAL);break}}},o.prototype._cylindricalMapping=function(t){var e=new l.Vector3(0,t.y,this._radius),i=t.x/this._radius;return l.Matrix.RotationYawPitchRollToRef(i,0,0,l.TmpVectors.Matrix[0]),l.Vector3.TransformNormal(e,l.TmpVectors.Matrix[0])},o}(g.VolumeBasedPanel)},"../../../dev/gui/src/3D/controls/handMenu.ts":(B,E,d)=>{d.r(E),d.d(E,{HandMenu:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/touchHolographicMenu.ts"),g=d("babylonjs/Misc/perfCounter"),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,t)||this;return e._handConstraintBehavior=new g.HandConstraintBehavior,e._handConstraintBehavior.linkToXRExperience(o),e.backPlateMargin=.15,e.rows=3,e}return Object.defineProperty(_.prototype,"handConstraintBehavior",{get:function(){return this._handConstraintBehavior},enumerable:!1,configurable:!0}),_.prototype._createNode=function(o){var t=v.prototype._createNode.call(this,o);return this._handConstraintBehavior.attach(t),t},_.prototype.dispose=function(){v.prototype.dispose.call(this),this._handConstraintBehavior.detach()},_}(l.TouchHolographicMenu)},"../../../dev/gui/src/3D/controls/holographicBackplate.ts":(B,E,d)=>{d.r(E),d.d(E,{HolographicBackplate:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/materials/fluentBackplate/fluentBackplateMaterial.ts"),b=d("../../../dev/gui/src/3D/controls/control3D.ts"),v=function(_){(0,c.__extends)(o,_);function o(t,e){e===void 0&&(e=!0);var i=_.call(this,t)||this;return i._shareMaterials=e,i}return Object.defineProperty(o.prototype,"renderingGroupId",{get:function(){return this._model.renderingGroupId},set:function(t){this._model.renderingGroupId=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!1,configurable:!0}),o.prototype._getTypeName=function(){return"HolographicBackplate"},o.prototype._createNode=function(t){var e=this,i,a=(0,l.CreateBox)(((i=this.name)!==null&&i!==void 0?i:"HolographicBackplate")+"_CollisionMesh",{width:1,height:1,depth:1},t);return a.isPickable=!0,a.visibility=0,l.SceneLoader.ImportMeshAsync(void 0,o.MODEL_BASE_URL,o.MODEL_FILENAME,t).then(function(s){var u=s.meshes[1];u.name="".concat(e.name,"_frontPlate"),u.isPickable=!1,u.parent=a,e._material&&(u.material=e._material),e._model=u}),a},o.prototype._createMaterial=function(t){this._material=new g.FluentBackplateMaterial(this.name+" Material",t.getScene())},o.prototype._affectMaterial=function(t){this._shareMaterials?this._host._touchSharedMaterials.fluentBackplateMaterial?this._material=this._host._touchSharedMaterials.fluentBackplateMaterial:(this._createMaterial(t),this._host._touchSharedMaterials.fluentBackplateMaterial=this._material):this._createMaterial(t)},o.prototype.dispose=function(){_.prototype.dispose.call(this),this.shareMaterials||this._material.dispose(),this._model.dispose()},o.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",o.MODEL_FILENAME="mrtk-fluent-backplate.glb",o}(b.Control3D)},"../../../dev/gui/src/3D/controls/holographicButton.ts":(B,E,d)=>{d.r(E),d.d(E,{HolographicButton:()=>e});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/button3D.ts"),g=d("babylonjs/Misc/perfCounter"),b=d("../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts"),v=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),_=d("../../../dev/gui/src/2D/controls/image.ts"),o=d("../../../dev/gui/src/2D/controls/textBlock.ts"),t=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),e=function(i){(0,c.__extends)(a,i);function a(s,u){u===void 0&&(u=!0);var f=i.call(this,s)||this;return f._shareMaterials=!0,f._shareMaterials=u,f.pointerEnterAnimation=function(){f.mesh&&f._frontPlate.setEnabled(!0)},f.pointerOutAnimation=function(){f.mesh&&f._frontPlate.setEnabled(!1)},f}return a.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(a.prototype,"renderingGroupId",{get:function(){return this._backPlate.renderingGroupId},set:function(s){this._backPlate.renderingGroupId=s,this._textPlate.renderingGroupId=s,this._frontPlate.renderingGroupId=s,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tooltipText",{get:function(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null},set:function(s){var u=this;if(!s){this._disposeTooltip();return}if(!this._tooltipFade){var f=this._backPlate._scene.useRightHandedSystem;this._tooltipMesh=(0,g.CreatePlane)("",{size:1},this._backPlate._scene);var m=(0,g.CreatePlane)("",{size:1,sideOrientation:g.Mesh.DOUBLESIDE},this._backPlate._scene),P=new g.StandardMaterial("",this._backPlate._scene);P.diffuseColor=g.Color3.FromHexString("#212121"),m.material=P,m.isPickable=!1,this._tooltipMesh.addChild(m),m.position=g.Vector3.Forward(f).scale(.05),this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position=g.Vector3.Up().scale(.7).add(g.Vector3.Forward(f).scale(-.15)),this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=t.AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new o.TextBlock,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new g.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){u._tooltipFade&&u._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){u._tooltipFade&&u._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=s)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(s){this._text!==s&&(this._text=s,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(s){this._imageUrl!==s&&(this._imageUrl=s,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"backMaterial",{get:function(){return this._backMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frontMaterial",{get:function(){return this._frontMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"plateMaterial",{get:function(){return this._plateMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!1,configurable:!0}),a.prototype._getTypeName=function(){return"HolographicButton"},a.prototype._rebuildContent=function(){this._disposeFacadeTexture();var s=new v.StackPanel;if(s.isVertical=!0,(0,g.IsDocumentAvailable)()&&document.createElement&&this._imageUrl){var u=new _.Image;u.source=this._imageUrl,u.paddingTop="40px",u.height="180px",u.width="100px",u.paddingBottom="40px",s.addControl(u)}if(this._text){var f=new o.TextBlock;f.text=this._text,f.color="white",f.height="30px",f.fontSize=24,s.addControl(f)}this._frontPlate&&(this.content=s)},a.prototype._createNode=function(s){return this._backPlate=(0,g.CreateBox)(this.name+"BackMesh",{width:1,height:1,depth:.08},s),this._frontPlate=(0,g.CreateBox)(this.name+"FrontMesh",{width:1,height:1,depth:.08},s),this._frontPlate.parent=this._backPlate,this._frontPlate.position=g.Vector3.Forward(s.useRightHandedSystem).scale(-.08),this._frontPlate.isPickable=!1,this._frontPlate.setEnabled(!1),this._textPlate=i.prototype._createNode.call(this,s),this._textPlate.parent=this._backPlate,this._textPlate.position=g.Vector3.Forward(s.useRightHandedSystem).scale(-.08),this._textPlate.isPickable=!1,this._backPlate},a.prototype._applyFacade=function(s){this._plateMaterial.emissiveTexture=s,this._plateMaterial.opacityTexture=s},a.prototype._createBackMaterial=function(s){var u=this;this._backMaterial=new b.FluentMaterial(this.name+"Back Material",s.getScene()),this._backMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add(function(f){f?(u._backMaterial.hoverPosition=f,u._backMaterial.hoverColor.a=1):u._backMaterial.hoverColor.a=0})},a.prototype._createFrontMaterial=function(s){this._frontMaterial=new b.FluentMaterial(this.name+"Front Material",s.getScene()),this._frontMaterial.innerGlowColorIntensity=0,this._frontMaterial.alpha=.5,this._frontMaterial.renderBorders=!0},a.prototype._createPlateMaterial=function(s){this._plateMaterial=new g.StandardMaterial(this.name+"Plate Material",s.getScene()),this._plateMaterial.specularColor=g.Color3.Black()},a.prototype._affectMaterial=function(s){this._shareMaterials?(this._host._sharedMaterials.backFluentMaterial?this._backMaterial=this._host._sharedMaterials.backFluentMaterial:(this._createBackMaterial(s),this._host._sharedMaterials.backFluentMaterial=this._backMaterial),this._host._sharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._sharedMaterials.frontFluentMaterial:(this._createFrontMaterial(s),this._host._sharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(s),this._createFrontMaterial(s)),this._createPlateMaterial(s),this._backPlate.material=this._backMaterial,this._frontPlate.material=this._frontMaterial,this._textPlate.material=this._plateMaterial,this._rebuildContent()},a.prototype.dispose=function(){i.prototype.dispose.call(this),this._disposeTooltip(),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},a}(l.Button3D)},"../../../dev/gui/src/3D/controls/holographicSlate.ts":(B,E,d)=>{d.r(E),d.d(E,{HolographicSlate:()=>s});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/contentDisplay3D.ts"),g=d("../../../dev/gui/src/3D/controls/touchHolographicButton.ts"),b=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),v=d("../../../dev/gui/src/2D/controls/control.ts"),_=d("../../../dev/gui/src/2D/controls/textBlock.ts"),o=d("../../../dev/gui/src/3D/behaviors/defaultBehavior.ts"),t=d("../../../dev/gui/src/3D/gizmos/slateGizmo.ts"),e=d("../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts"),i=d("../../../dev/gui/src/3D/materials/fluentBackplate/fluentBackplateMaterial.ts"),a=d("babylonjs/Misc/perfCounter"),s=function(u){(0,c.__extends)(f,u);function f(m){var P=u.call(this,m)||this;return P.titleBarMargin=.005,P.origin=new a.Vector3(0,0,0),P._dimensions=new a.Vector2(21.875,12.5),P._titleBarHeight=.625,P._titleText="",P._contentScaleRatio=1,P.minDimensions=new a.Vector2(15.625,6.25),P.defaultDimensions=P._dimensions.clone(),P._followButton=new g.TouchHolographicButton("followButton"+P.name),P._followButton.isToggleButton=!0,P._closeButton=new g.TouchHolographicButton("closeButton"+P.name),P._contentViewport=new a.Viewport(0,0,1,1),P._contentDragBehavior=new a.PointerDragBehavior({dragPlaneNormal:new a.Vector3(0,0,-1)}),P}return Object.defineProperty(f.prototype,"defaultBehavior",{get:function(){return this._defaultBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"dimensions",{get:function(){return this._dimensions},set:function(m){var P=1;if(m.x<this.minDimensions.x||m.y<this.minDimensions.y){var y=m.x/m.y,M=this.minDimensions.x/this.minDimensions.y;M>y?P=this.minDimensions.x/m.x:P=this.minDimensions.y/m.y}this._dimensions.copyFrom(m).scaleInPlace(P),this._updatePivot(),this._positionElements()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"titleBarHeight",{get:function(){return this._titleBarHeight},set:function(m){this._titleBarHeight=m},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"renderingGroupId",{get:function(){return this._titleBar.renderingGroupId},set:function(m){this._titleBar.renderingGroupId=m,this._titleBarTitle.renderingGroupId=m,this._contentPlate.renderingGroupId=m,this._backPlate.renderingGroupId=m},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"title",{get:function(){return this._titleText},set:function(m){this._titleText=m,this._titleTextComponent&&(this._titleTextComponent.text=m)},enumerable:!1,configurable:!0}),f.prototype._applyFacade=function(m){this._contentMaterial.albedoTexture=m,this._resetContentPositionAndZoom(),this._applyContentViewport(),m.attachToMesh(this._contentPlate,!0)},f.prototype._addControl=function(m){m._host=this._host,this._host.utilityLayer&&m._prepareNode(this._host.utilityLayer.utilityLayerScene)},f.prototype._getTypeName=function(){return"HolographicSlate"},f.prototype._positionElements=function(){var m=this._followButton,P=this._closeButton,y=this._titleBar,M=this._titleBarTitle,O=this._contentPlate,x=this._backPlate;if(m&&P&&y){P.scaling.setAll(this.titleBarHeight),m.scaling.setAll(this.titleBarHeight),P.position.copyFromFloats(this.dimensions.x-this.titleBarHeight/2,-this.titleBarHeight/2,0).addInPlace(this.origin),m.position.copyFromFloats(this.dimensions.x-3*this.titleBarHeight/2,-this.titleBarHeight/2,0).addInPlace(this.origin);var R=this.dimensions.y-this.titleBarHeight-this.titleBarMargin,N=O.getScene().useRightHandedSystem;y.scaling.set(this.dimensions.x,this.titleBarHeight,a.Epsilon),M.scaling.set(this.dimensions.x-2*this.titleBarHeight,this.titleBarHeight,a.Epsilon),O.scaling.copyFromFloats(this.dimensions.x,R,a.Epsilon),x.scaling.copyFromFloats(this.dimensions.x,R,a.Epsilon),y.position.copyFromFloats(this.dimensions.x/2,-(this.titleBarHeight/2),0).addInPlace(this.origin),M.position.copyFromFloats(this.dimensions.x/2-this.titleBarHeight,-(this.titleBarHeight/2),N?a.Epsilon:-a.Epsilon).addInPlace(this.origin),O.position.copyFromFloats(this.dimensions.x/2,-(this.titleBarHeight+this.titleBarMargin+R/2),0).addInPlace(this.origin),x.position.copyFromFloats(this.dimensions.x/2,-(this.titleBarHeight+this.titleBarMargin+R/2),N?-a.Epsilon:a.Epsilon).addInPlace(this.origin),this._titleTextComponent.host.scaleTo(f._DEFAULT_TEXT_RESOLUTION_Y*M.scaling.x/M.scaling.y,f._DEFAULT_TEXT_RESOLUTION_Y);var W=this.dimensions.x/R;this._contentViewport.width=this._contentScaleRatio,this._contentViewport.height=this._contentScaleRatio/W,this._applyContentViewport(),this._gizmo&&this._gizmo.updateBoundingBox()}},f.prototype._applyContentViewport=function(){var m;if(!((m=this._contentPlate)===null||m===void 0)&&m.material&&this._contentPlate.material.albedoTexture){var P=this._contentPlate.material.albedoTexture;P.uScale=this._contentScaleRatio,P.vScale=this._contentScaleRatio/this._contentViewport.width*this._contentViewport.height,P.uOffset=this._contentViewport.x,P.vOffset=this._contentViewport.y}},f.prototype._resetContentPositionAndZoom=function(){this._contentViewport.x=0,this._contentViewport.y=1-this._contentViewport.height/this._contentViewport.width,this._contentScaleRatio=1},f.prototype._updatePivot=function(){if(this.mesh){var m=new a.Vector3(this.dimensions.x*.5,-this.dimensions.y*.5,a.Epsilon);m.addInPlace(this.origin),m.z=0;var P=new a.Vector3(0,0,0);a.Vector3.TransformCoordinatesToRef(P,this.mesh.computeWorldMatrix(!0),P),this.mesh.setPivotPoint(m);var y=new a.Vector3(0,0,0);a.Vector3.TransformCoordinatesToRef(y,this.mesh.computeWorldMatrix(!0),y),this.mesh.position.addInPlace(P).subtractInPlace(y)}},f.prototype._createNode=function(m){var P=this,y=new a.Mesh("slate_"+this.name,m);this._titleBar=(0,a.CreateBox)("titleBar_"+this.name,{size:1},m),this._titleBarTitle=(0,a.CreatePlane)("titleText_"+this.name,{size:1},m),this._titleBarTitle.parent=y,this._titleBarTitle.isPickable=!1;var M=b.AdvancedDynamicTexture.CreateForMesh(this._titleBarTitle);if(this._titleTextComponent=new _.TextBlock("titleText_"+this.name,this._titleText),this._titleTextComponent.textWrapping=_.TextWrapping.Ellipsis,this._titleTextComponent.textHorizontalAlignment=v.Control.HORIZONTAL_ALIGNMENT_LEFT,this._titleTextComponent.color="white",this._titleTextComponent.fontSize=f._DEFAULT_TEXT_RESOLUTION_Y/2,this._titleTextComponent.paddingLeft=f._DEFAULT_TEXT_RESOLUTION_Y/4,M.addControl(this._titleTextComponent),m.useRightHandedSystem){var O=new a.Vector4(0,0,1,1);this._contentPlate=(0,a.CreatePlane)("contentPlate_"+this.name,{size:1,sideOrientation:a.VertexData.BACKSIDE,frontUVs:O},m),this._backPlate=(0,a.CreatePlane)("backPlate_"+this.name,{size:1,sideOrientation:a.VertexData.FRONTSIDE},m)}else{var O=new a.Vector4(0,0,1,1);this._contentPlate=(0,a.CreatePlane)("contentPlate_"+this.name,{size:1,sideOrientation:a.VertexData.FRONTSIDE,frontUVs:O},m),this._backPlate=(0,a.CreatePlane)("backPlate_"+this.name,{size:1,sideOrientation:a.VertexData.BACKSIDE},m)}this._titleBar.parent=y,this._titleBar.isNearGrabbable=!0,this._contentPlate.parent=y,this._backPlate.parent=y,this._attachContentPlateBehavior(),this._addControl(this._followButton),this._addControl(this._closeButton);var x=this._followButton,R=this._closeButton;return x.node.parent=y,R.node.parent=y,this._positionElements(),this._followButton.imageUrl=f.ASSETS_BASE_URL+f.FOLLOW_ICON_FILENAME,this._closeButton.imageUrl=f.ASSETS_BASE_URL+f.CLOSE_ICON_FILENAME,this._followButton.isBackplateVisible=!1,this._closeButton.isBackplateVisible=!1,this._followButton.onToggleObservable.add(function(N){P._defaultBehavior.followBehaviorEnabled=N,P._defaultBehavior.followBehaviorEnabled&&P._defaultBehavior.followBehavior.recenter()}),this._closeButton.onPointerClickObservable.add(function(){P.dispose()}),y.rotationQuaternion=a.Quaternion.Identity(),y.isVisible=!1,y},f.prototype._attachContentPlateBehavior=function(){var m=this;this._contentDragBehavior.attach(this._contentPlate),this._contentDragBehavior.moveAttached=!1,this._contentDragBehavior.useObjectOrientationForDragging=!0,this._contentDragBehavior.updateDragPlane=!1;var P=new a.Vector3,y=new a.Vector3,M=new a.Vector3,O=new a.Vector3,x=new a.Vector2,R,N;this._contentDragBehavior.onDragStartObservable.add(function(Q){m.node&&(R=m._contentViewport.clone(),N=m.node.computeWorldMatrix(!0),P.copyFrom(Q.dragPlanePoint),y.set(m.dimensions.x,m.dimensions.y,a.Epsilon),y.y-=m.titleBarHeight+m.titleBarMargin,a.Vector3.TransformNormalToRef(y,N,y),M.copyFromFloats(0,1,0),a.Vector3.TransformNormalToRef(M,N,M),O.copyFromFloats(1,0,0),a.Vector3.TransformNormalToRef(O,N,O),M.normalize(),M.scaleInPlace(1/a.Vector3.Dot(M,y)),O.normalize(),O.scaleInPlace(1/a.Vector3.Dot(O,y)))});var W=new a.Vector3;this._contentDragBehavior.onDragObservable.add(function(Q){W.copyFrom(Q.dragPlanePoint),W.subtractInPlace(P),x.copyFromFloats(a.Vector3.Dot(W,O),a.Vector3.Dot(W,M)),m._contentViewport.x=a.Scalar.Clamp(R.x-W.x,0,1-m._contentViewport.width*m._contentScaleRatio),m._contentViewport.y=a.Scalar.Clamp(R.y-W.y,0,1-m._contentViewport.height*m._contentScaleRatio),m._applyContentViewport()})},f.prototype._affectMaterial=function(m){this._titleBarMaterial=new i.FluentBackplateMaterial("".concat(this.name," plateMaterial"),m.getScene()),this._contentMaterial=new e.FluentMaterial("".concat(this.name," contentMaterial"),m.getScene()),this._contentMaterial.renderBorders=!0,this._backMaterial=new i.FluentBackplateMaterial("".concat(this.name," backPlate"),m.getScene()),this._backMaterial.lineWidth=a.Epsilon,this._backMaterial.radius=.005,this._backMaterial.backFaceCulling=!0,this._titleBar.material=this._titleBarMaterial,this._contentPlate.material=this._contentMaterial,this._backPlate.material=this._backMaterial,this._resetContent(),this._applyContentViewport()},f.prototype._prepareNode=function(m){var P=this;u.prototype._prepareNode.call(this,m),this._gizmo=new t.SlateGizmo(this._host.utilityLayer),this._gizmo.attachedSlate=this,this._defaultBehavior=new o.DefaultBehavior,this._defaultBehavior.attach(this.node,[this._titleBar]),this._defaultBehavior.sixDofDragBehavior.onDragStartObservable.add(function(){P._followButton.isToggled=!1}),this._positionChangedObserver=this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.add(function(){P._gizmo.updateBoundingBox()}),this._updatePivot(),this.resetDefaultAspectAndPose(!1)},f.prototype.resetDefaultAspectAndPose=function(m){if(m===void 0&&(m=!0),!(!this._host||!this._host.utilityLayer||!this.node)){var P=this._host.utilityLayer.utilityLayerScene,y=P.activeCamera;if(y){var M=y.getWorldMatrix(),O=a.Vector3.TransformNormal(a.Vector3.Backward(P.useRightHandedSystem),M);this.origin.setAll(0),this._gizmo.updateBoundingBox();var x=this.node.getAbsolutePivotPoint();this.node.position.copyFrom(y.position).subtractInPlace(O).subtractInPlace(x),this.node.rotationQuaternion=a.Quaternion.FromLookDirectionLH(O,new a.Vector3(0,1,0)),m&&(this.dimensions=this.defaultDimensions)}}},f.prototype.dispose=function(){u.prototype.dispose.call(this),this._titleBarMaterial.dispose(),this._contentMaterial.dispose(),this._titleBar.dispose(),this._titleBarTitle.dispose(),this._contentPlate.dispose(),this._backPlate.dispose(),this._followButton.dispose(),this._closeButton.dispose(),this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.remove(this._positionChangedObserver),this._defaultBehavior.detach(),this._gizmo.dispose(),this._contentDragBehavior.detach()},f.ASSETS_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",f.CLOSE_ICON_FILENAME="IconClose.png",f.FOLLOW_ICON_FILENAME="IconFollowMe.png",f._DEFAULT_TEXT_RESOLUTION_Y=102.4,f}(l.ContentDisplay3D)},"../../../dev/gui/src/3D/controls/index.ts":(B,E,d)=>{d.r(E),d.d(E,{AbstractButton3D:()=>c.AbstractButton3D,Button3D:()=>l.Button3D,Container3D:()=>g.Container3D,Control3D:()=>b.Control3D,CylinderPanel:()=>v.CylinderPanel,HandMenu:()=>_.HandMenu,HolographicBackplate:()=>o.HolographicBackplate,HolographicButton:()=>t.HolographicButton,HolographicSlate:()=>e.HolographicSlate,MeshButton3D:()=>i.MeshButton3D,NearMenu:()=>a.NearMenu,PlanePanel:()=>s.PlanePanel,ScatterPanel:()=>u.ScatterPanel,Slider3D:()=>f.Slider3D,SpherePanel:()=>m.SpherePanel,StackPanel3D:()=>P.StackPanel3D,TouchButton3D:()=>y.TouchButton3D,TouchHolographicButton:()=>O.TouchHolographicButton,TouchHolographicButtonV3:()=>N.TouchHolographicButton,TouchHolographicMenu:()=>x.TouchHolographicMenu,TouchMeshButton3D:()=>M.TouchMeshButton3D,VolumeBasedPanel:()=>R.VolumeBasedPanel});var c=d("../../../dev/gui/src/3D/controls/abstractButton3D.ts"),l=d("../../../dev/gui/src/3D/controls/button3D.ts"),g=d("../../../dev/gui/src/3D/controls/container3D.ts"),b=d("../../../dev/gui/src/3D/controls/control3D.ts"),v=d("../../../dev/gui/src/3D/controls/cylinderPanel.ts"),_=d("../../../dev/gui/src/3D/controls/handMenu.ts"),o=d("../../../dev/gui/src/3D/controls/holographicBackplate.ts"),t=d("../../../dev/gui/src/3D/controls/holographicButton.ts"),e=d("../../../dev/gui/src/3D/controls/holographicSlate.ts"),i=d("../../../dev/gui/src/3D/controls/meshButton3D.ts"),a=d("../../../dev/gui/src/3D/controls/nearMenu.ts"),s=d("../../../dev/gui/src/3D/controls/planePanel.ts"),u=d("../../../dev/gui/src/3D/controls/scatterPanel.ts"),f=d("../../../dev/gui/src/3D/controls/slider3D.ts"),m=d("../../../dev/gui/src/3D/controls/spherePanel.ts"),P=d("../../../dev/gui/src/3D/controls/stackPanel3D.ts"),y=d("../../../dev/gui/src/3D/controls/touchButton3D.ts"),M=d("../../../dev/gui/src/3D/controls/touchMeshButton3D.ts"),O=d("../../../dev/gui/src/3D/controls/touchHolographicButton.ts"),x=d("../../../dev/gui/src/3D/controls/touchHolographicMenu.ts"),R=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),N=d("../../../dev/gui/src/3D/controls/MRTK3/touchHolographicButton.ts")},"../../../dev/gui/src/3D/controls/meshButton3D.ts":(B,E,d)=>{d.r(E),d.d(E,{MeshButton3D:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/button3D.ts"),g=function(b){(0,c.__extends)(v,b);function v(_,o){var t=b.call(this,o)||this;return t._currentMesh=_,t.pointerEnterAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1.1)},t.pointerOutAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1/1.1)},t.pointerDownAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(.95)},t.pointerUpAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1/.95)},t}return v.prototype._getTypeName=function(){return"MeshButton3D"},v.prototype._createNode=function(_){var o=this;return this._currentMesh.getChildMeshes().forEach(function(t){o._injectGUI3DReservedDataStore(t).control=o}),this._currentMesh},v.prototype._affectMaterial=function(_){},v}(l.Button3D)},"../../../dev/gui/src/3D/controls/nearMenu.ts":(B,E,d)=>{d.r(E),d.d(E,{NearMenu:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/touchHolographicButton.ts"),g=d("../../../dev/gui/src/3D/behaviors/defaultBehavior.ts"),b=d("../../../dev/gui/src/3D/controls/touchHolographicMenu.ts"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e._isPinned=!1,e._defaultBehavior=new g.DefaultBehavior,e._dragObserver=e._defaultBehavior.sixDofDragBehavior.onDragObservable.add(function(){e.isPinned=!0}),e.backPlateMargin=1,e}return Object.defineProperty(o.prototype,"defaultBehavior",{get:function(){return this._defaultBehavior},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPinned",{get:function(){return this._isPinned},set:function(t){if(this._pinButton.isToggled!==t){this._pinButton.isToggled=t;return}this._isPinned=t,t?this._defaultBehavior.followBehaviorEnabled=!1:this._defaultBehavior.followBehaviorEnabled=!0},enumerable:!1,configurable:!0}),o.prototype._createPinButton=function(t){var e=this,i=new l.TouchHolographicButton("pin"+this.name,!1);return i.imageUrl=o._ASSETS_BASE_URL+o._PIN_ICON_FILENAME,i.parent=this,i._host=this._host,i.isToggleButton=!0,i.onToggleObservable.add(function(a){e.isPinned=a}),this._host.utilityLayer&&(i._prepareNode(this._host.utilityLayer.utilityLayerScene),i.scaling.scaleInPlace(b.TouchHolographicMenu.MENU_BUTTON_SCALE),i.node&&(i.node.parent=t)),i},o.prototype._createNode=function(t){var e=_.prototype._createNode.call(this,t);return this._pinButton=this._createPinButton(e),this.isPinned=!1,this._defaultBehavior.attach(e,[this._backPlate]),this._defaultBehavior.followBehavior.ignoreCameraPitchAndRoll=!0,this._defaultBehavior.followBehavior.pitchOffset=-15,this._defaultBehavior.followBehavior.minimumDistance=.3,this._defaultBehavior.followBehavior.defaultDistance=.4,this._defaultBehavior.followBehavior.maximumDistance=.6,this._backPlate.isNearGrabbable=!0,e.isVisible=!1,e},o.prototype._finalProcessing=function(){_.prototype._finalProcessing.call(this),this._pinButton.position.copyFromFloats((this._backPlate.scaling.x+b.TouchHolographicMenu.MENU_BUTTON_SCALE)/2,this._backPlate.scaling.y/2,0)},o.prototype.dispose=function(){_.prototype.dispose.call(this),this._defaultBehavior.sixDofDragBehavior.onDragObservable.remove(this._dragObserver),this._defaultBehavior.detach()},o._ASSETS_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",o._PIN_ICON_FILENAME="IconPin.png",o}(b.TouchHolographicMenu)},"../../../dev/gui/src/3D/controls/planePanel.ts":(B,E,d)=>{d.r(E),d.d(E,{PlanePanel:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/container3D.ts"),b=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),v=function(_){(0,c.__extends)(o,_);function o(){return _!==null&&_.apply(this,arguments)||this}return o.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){t.position=e.clone();var a=l.TmpVectors.Vector3[0];switch(a.copyFrom(e),this.orientation){case g.Container3D.FACEORIGIN_ORIENTATION:case g.Container3D.FACEFORWARD_ORIENTATION:a.addInPlace(new l.Vector3(0,0,1)),i.lookAt(a);break;case g.Container3D.FACEFORWARDREVERSED_ORIENTATION:case g.Container3D.FACEORIGINREVERSED_ORIENTATION:a.addInPlace(new l.Vector3(0,0,-1)),i.lookAt(a);break}}},o}(b.VolumeBasedPanel)},"../../../dev/gui/src/3D/controls/scatterPanel.ts":(B,E,d)=>{d.r(E),d.d(E,{ScatterPanel:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),b=d("../../../dev/gui/src/3D/controls/container3D.ts"),v=function(_){(0,c.__extends)(o,_);function o(){var t=_!==null&&_.apply(this,arguments)||this;return t._iteration=100,t}return Object.defineProperty(o.prototype,"iteration",{get:function(){return this._iteration},set:function(t){var e=this;this._iteration!==t&&(this._iteration=t,l.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!1,configurable:!0}),o.prototype._mapGridNode=function(t,e){var i=t.mesh,a=this._scatterMapping(e);if(i){switch(this.orientation){case b.Container3D.FACEORIGIN_ORIENTATION:case b.Container3D.FACEFORWARD_ORIENTATION:i.lookAt(new l.Vector3(0,0,1));break;case b.Container3D.FACEFORWARDREVERSED_ORIENTATION:case b.Container3D.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new l.Vector3(0,0,-1));break}t.position=a}},o.prototype._scatterMapping=function(t){return t.x=(1-Math.random()*2)*this._cellWidth,t.y=(1-Math.random()*2)*this._cellHeight,t},o.prototype._finalProcessing=function(){for(var t=[],e=0,i=this._children;e<i.length;e++){var a=i[e];a.mesh&&t.push(a.mesh)}for(var s=0;s<this._iteration;s++){t.sort(function(N,W){var Q=N.position.lengthSquared(),U=W.position.lengthSquared();return Q<U?1:Q>U?-1:0});for(var u=Math.pow(this.margin,2),f=Math.max(this._cellWidth,this._cellHeight),m=l.TmpVectors.Vector2[0],P=l.TmpVectors.Vector3[0],y=0;y<t.length-1;y++)for(var M=y+1;M<t.length;M++)if(y!=M){t[M].position.subtractToRef(t[y].position,P),m.x=P.x,m.y=P.y;var O=f,x=m.lengthSquared()-u,R=Math.min(x,u);x-=R,x<Math.pow(O,2)&&(m.normalize(),P.scaleInPlace((O-Math.sqrt(x))*.5),t[M].position.addInPlace(P),t[y].position.subtractInPlace(P))}}},o}(g.VolumeBasedPanel)},"../../../dev/gui/src/3D/controls/slider3D.ts":(B,E,d)=>{d.r(E),d.d(E,{Slider3D:()=>u});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/control3D.ts"),b=d("../../../dev/gui/src/3D/materials/mrdl/mrdlSliderBarMaterial.ts"),v=d("../../../dev/gui/src/3D/materials/mrdl/mrdlSliderThumbMaterial.ts"),_=d("../../../dev/gui/src/3D/materials/mrdl/mrdlBackplateMaterial.ts"),o=0,t=100,e=50,i=0,a=1,s=.2,u=function(f){(0,c.__extends)(m,f);function m(P,y){var M=f.call(this,P)||this;return M.onValueChangedObservable=new l.Observable,M._sliderBackplateVisible=y||!1,M._minimum=o,M._maximum=t,M._step=i,M._value=e,M}return Object.defineProperty(m.prototype,"mesh",{get:function(){return this.node?this._sliderThumb:null},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"minimum",{get:function(){return this._minimum},set:function(P){this._minimum!==P&&(this._minimum=Math.max(P,o),this._value=Math.max(Math.min(this._value,this._maximum),this._minimum))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maximum",{get:function(){return this._maximum},set:function(P){this._maximum!==P&&(this._maximum=Math.max(P,this._minimum),this._value=Math.max(Math.min(this._value,this._maximum),this._minimum))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"step",{get:function(){return this._step},set:function(P){this._step!==P&&(this._step=Math.max(Math.min(P,this._maximum-this._minimum),i))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"value",{get:function(){return this._value},set:function(P){this._value!==P&&(this._value=Math.max(Math.min(P,this._maximum),this._minimum),this._sliderThumb&&(this._sliderThumb.position.x=this._convertToPosition(this.value)),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"start",{get:function(){return this.node?this._sliderBar.position.x-this._sliderBar.scaling.x/2:-a/2},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this.node?this._sliderBar.position.x+this._sliderBar.scaling.x/2:a/2},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"sliderBarMaterial",{get:function(){return this._sliderBarMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"sliderThumbMaterial",{get:function(){return this._sliderThumbMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"sliderBackplateMaterial",{get:function(){return this._sliderBackplateMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isVisible",{set:function(P){var y;this._isVisible!==P&&(this._isVisible=P,(y=this.node)===null||y===void 0||y.setEnabled(P))},enumerable:!1,configurable:!0}),m.prototype._createNode=function(P){var y=this,M=(0,l.CreateBox)("".concat(this.name,"_sliderbackplate"),{width:1,height:1,depth:1},P);return M.isPickable=!1,M.visibility=0,M.scaling=new l.Vector3(1,.5,.8),l.SceneLoader.ImportMeshAsync(void 0,m.MODEL_BASE_URL,m.MODEL_FILENAME,P).then(function(O){O.meshes.forEach(function(W){W.isPickable=!1});var x=O.meshes[1],R=O.meshes[1].clone("".concat(y.name,"_sliderbar"),M),N=O.meshes[1].clone("".concat(y.name,"_sliderthumb"),M);x.visibility=0,y._sliderBackplateVisible&&(x.visibility=1,x.name="".concat(y.name,"_sliderbackplate"),x.scaling.x=1,x.scaling.z=.2,x.parent=M,y._sliderBackplateMaterial&&(x.material=y._sliderBackplateMaterial),y._sliderBackplate=x),R&&(R.parent=M,R.position.z=-.1,R.scaling=new l.Vector3(a-s,.04,.3),y._sliderBarMaterial&&(R.material=y._sliderBarMaterial),y._sliderBar=R),N&&(N.parent=M,N.isPickable=!0,N.position.z=-.115,N.scaling=new l.Vector3(.025,.3,.6),N.position.x=y._convertToPosition(y.value),N.addBehavior(y._createBehavior()),y._sliderThumbMaterial&&(N.material=y._sliderThumbMaterial),y._sliderThumb=N),y._injectGUI3DReservedDataStore(M).control=y,M.getChildMeshes().forEach(function(W){y._injectGUI3DReservedDataStore(W).control=y})}),this._affectMaterial(M),M},m.prototype._affectMaterial=function(P){var y,M,O;this._sliderBackplateMaterial=(y=this._sliderBackplateMaterial)!==null&&y!==void 0?y:new _.MRDLBackplateMaterial("".concat(this.name,"_sliderbackplate_material"),P.getScene()),this._sliderBarMaterial=(M=this._sliderBarMaterial)!==null&&M!==void 0?M:new b.MRDLSliderBarMaterial("".concat(this.name,"_sliderbar_material"),P.getScene()),this._sliderThumbMaterial=(O=this._sliderThumbMaterial)!==null&&O!==void 0?O:new v.MRDLSliderThumbMaterial("".concat(this.name,"_sliderthumb_material"),P.getScene())},m.prototype._createBehavior=function(){var P=this,y=new l.PointerDragBehavior({dragAxis:l.Vector3.Right()});return y.moveAttached=!1,y.onDragStartObservable.add(function(){P._draggedPosition=P._sliderThumb.position.x}),y.onDragObservable.add(function(M){P._draggedPosition+=M.dragDistance/P.scaling.x,P.value=P._convertToValue(P._draggedPosition)}),y},m.prototype._convertToPosition=function(P){var y=(P-this.minimum)/(this.maximum-this.minimum)*(this.end-this.start)+this.start;return Math.min(Math.max(y,this.start),this.end)},m.prototype._convertToValue=function(P){var y=(P-this.start)/(this.end-this.start)*(this.maximum-this.minimum);return y=this.step?Math.round(y/this.step)*this.step:y,Math.max(Math.min(this.minimum+y,this._maximum),this._minimum)},m.prototype.dispose=function(){var P,y,M,O,x,R;f.prototype.dispose.call(this),(P=this._sliderBar)===null||P===void 0||P.dispose(),(y=this._sliderThumb)===null||y===void 0||y.dispose(),(M=this._sliderBarMaterial)===null||M===void 0||M.dispose(),(O=this._sliderThumbMaterial)===null||O===void 0||O.dispose(),(x=this._sliderBackplate)===null||x===void 0||x.dispose(),(R=this._sliderBackplateMaterial)===null||R===void 0||R.dispose()},m.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",m.MODEL_FILENAME="mrtk-fluent-backplate.glb",m}(g.Control3D)},"../../../dev/gui/src/3D/controls/spherePanel.ts":(B,E,d)=>{d.r(E),d.d(E,{SpherePanel:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),b=d("../../../dev/gui/src/3D/controls/container3D.ts"),v=function(_){(0,c.__extends)(o,_);function o(){var t=_!==null&&_.apply(this,arguments)||this;return t._radius=5,t}return Object.defineProperty(o.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,l.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!1,configurable:!0}),o.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var a=this._sphericalMapping(e);switch(t.position=a,this.orientation){case b.Container3D.FACEORIGIN_ORIENTATION:i.lookAt(new l.Vector3(2*a.x,2*a.y,2*a.z));break;case b.Container3D.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new l.Vector3(-a.x,-a.y,-a.z));break;case b.Container3D.FACEFORWARD_ORIENTATION:break;case b.Container3D.FACEFORWARDREVERSED_ORIENTATION:i.rotate(l.Axis.Y,Math.PI,l.Space.LOCAL);break}}},o.prototype._sphericalMapping=function(t){var e=new l.Vector3(0,0,this._radius),i=t.y/this._radius,a=-(t.x/this._radius);return l.Matrix.RotationYawPitchRollToRef(a,i,0,l.TmpVectors.Matrix[0]),l.Vector3.TransformNormal(e,l.TmpVectors.Matrix[0])},o}(g.VolumeBasedPanel)},"../../../dev/gui/src/3D/controls/stackPanel3D.ts":(B,E,d)=>{d.r(E),d.d(E,{StackPanel3D:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/container3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o){o===void 0&&(o=!1);var t=v.call(this)||this;return t._isVertical=!1,t.margin=.1,t._isVertical=o,t}return Object.defineProperty(_.prototype,"isVertical",{get:function(){return this._isVertical},set:function(o){var t=this;this._isVertical!==o&&(this._isVertical=o,l.Tools.SetImmediate(function(){t._arrangeChildren()}))},enumerable:!1,configurable:!0}),_.prototype._arrangeChildren=function(){for(var o=0,t=0,e=0,i=[],a=l.Matrix.Invert(this.node.computeWorldMatrix(!0)),s=0,u=this._children;s<u.length;s++){var f=u[s];if(f.mesh){e++,f.mesh.computeWorldMatrix(!0),f.mesh.getWorldMatrix().multiplyToRef(a,l.TmpVectors.Matrix[0]);var m=f.mesh.getBoundingInfo().boundingBox,P=l.Vector3.TransformNormal(m.extendSize,l.TmpVectors.Matrix[0]);i.push(P),this._isVertical?t+=P.y:o+=P.x}}this._isVertical?t+=(e-1)*this.margin/2:o+=(e-1)*this.margin/2;var y;this._isVertical?y=-t:y=-o;for(var M=0,O=0,x=this._children;O<x.length;O++){var f=x[O];if(f.mesh){e--;var P=i[M++];this._isVertical?(f.position.y=y+P.y,f.position.x=0,y+=P.y*2):(f.position.x=y+P.x,f.position.y=0,y+=P.x*2),y+=e>0?this.margin:0}}},_}(g.Container3D)},"../../../dev/gui/src/3D/controls/touchButton3D.ts":(B,E,d)=>{d.r(E),d.d(E,{TouchButton3D:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/button3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o)||this;return e._isNearPressed=!1,e._interactionSurfaceHeight=0,e._isToggleButton=!1,e._toggleState=!1,e._toggleButtonCallback=function(){e._onToggle(!e._toggleState)},e.onToggleObservable=new l.Observable,e.collidableFrontDirection=l.Vector3.Zero(),t&&(e.collisionMesh=t),e}return Object.defineProperty(_.prototype,"isActiveNearInteraction",{get:function(){return this._isNearPressed},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"collidableFrontDirection",{get:function(){if(this._collisionMesh){var o=l.TmpVectors.Vector3[0];return l.Vector3.TransformNormalToRef(this._collidableFrontDirection,this._collisionMesh.getWorldMatrix(),o),o.normalize()}return this._collidableFrontDirection},set:function(o){if(this._collidableFrontDirection=o.normalize(),this._collisionMesh){var t=l.TmpVectors.Matrix[0];t.copyFrom(this._collisionMesh.getWorldMatrix()),t.invert(),l.Vector3.TransformNormalToRef(this._collidableFrontDirection,t,this._collidableFrontDirection),this._collidableFrontDirection.normalize()}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"collisionMesh",{set:function(o){var t=this,e;this._collisionMesh&&(this._collisionMesh.isNearPickable=!1,!((e=this._collisionMesh.reservedDataStore)===null||e===void 0)&&e.GUI3D&&(this._collisionMesh.reservedDataStore.GUI3D={}),this._collisionMesh.getChildMeshes().forEach(function(i){var a;i.isNearPickable=!1,!((a=i.reservedDataStore)===null||a===void 0)&&a.GUI3D&&(i.reservedDataStore.GUI3D={})})),this._collisionMesh=o,this._injectGUI3DReservedDataStore(this._collisionMesh).control=this,this._collisionMesh.isNearPickable=!0,this._collisionMesh.getChildMeshes().forEach(function(i){t._injectGUI3DReservedDataStore(i).control=t,i.isNearPickable=!0}),this.collidableFrontDirection=o.forward},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isToggleButton",{get:function(){return this._isToggleButton},set:function(o){o!==this._isToggleButton&&(this._isToggleButton=o,o?this.onPointerUpObservable.add(this._toggleButtonCallback):(this.onPointerUpObservable.removeCallback(this._toggleButtonCallback),this._toggleState&&this._onToggle(!1)))},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isToggled",{get:function(){return this._toggleState},set:function(o){this._isToggleButton&&this._toggleState!==o&&this._onToggle(o)},enumerable:!1,configurable:!0}),_.prototype._onToggle=function(o){this._toggleState=o,this.onToggleObservable.notifyObservers(o)},_.prototype._isInteractionInFrontOfButton=function(o){return this._getInteractionHeight(o,this._collisionMesh.getAbsolutePosition())>0},_.prototype.getPressDepth=function(o){if(!this._isNearPressed)return 0;var t=this._getInteractionHeight(o,this._collisionMesh.getAbsolutePosition());return this._interactionSurfaceHeight-t},_.prototype._getInteractionHeight=function(o,t){var e=this.collidableFrontDirection;if(e.length()===0)return l.Vector3.Distance(o,t);var i=l.Vector3.Dot(t,e),a=l.Vector3.Dot(o,e);return a-i},_.prototype._generatePointerEventType=function(o,t,e){if(o===l.PointerEventTypes.POINTERDOWN||o===l.PointerEventTypes.POINTERMOVE)if(this._isInteractionInFrontOfButton(t))this._isNearPressed=!0,this._interactionSurfaceHeight=this._getInteractionHeight(t,this._collisionMesh.getAbsolutePosition());else return l.PointerEventTypes.POINTERMOVE;if(o===l.PointerEventTypes.POINTERUP){if(e==0)return l.PointerEventTypes.POINTERMOVE;this._isNearPressed=!1}return o},_.prototype._getTypeName=function(){return"TouchButton3D"},_.prototype._createNode=function(o){return v.prototype._createNode.call(this,o)},_.prototype.dispose=function(){v.prototype.dispose.call(this),this.onPointerUpObservable.removeCallback(this._toggleButtonCallback),this.onToggleObservable.clear(),this._collisionMesh&&this._collisionMesh.dispose()},_}(g.Button3D)},"../../../dev/gui/src/3D/controls/touchHolographicButton.ts":(B,E,d)=>{d.r(E),d.d(E,{TouchHolographicButton:()=>i});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts"),b=d("../../../dev/gui/src/3D/materials/fluentButton/fluentButtonMaterial.ts"),v=d("../../../dev/gui/src/2D/controls/stackPanel.ts"),_=d("../../../dev/gui/src/2D/controls/image.ts"),o=d("../../../dev/gui/src/2D/controls/textBlock.ts"),t=d("../../../dev/gui/src/2D/advancedDynamicTexture.ts"),e=d("../../../dev/gui/src/3D/controls/touchButton3D.ts"),i=function(a){(0,c.__extends)(s,a);function s(u,f){f===void 0&&(f=!0);var m=a.call(this,u)||this;return m._shareMaterials=!0,m._isBackplateVisible=!0,m._frontPlateDepth=.5,m._backPlateDepth=.04,m._backplateColor=new l.Color3(.08,.15,.55),m._backplateToggledColor=new l.Color3(.25,.4,.95),m._shareMaterials=f,m.pointerEnterAnimation=function(){m._frontMaterial.leftBlobEnable=!0,m._frontMaterial.rightBlobEnable=!0},m.pointerOutAnimation=function(){m._frontMaterial.leftBlobEnable=!1,m._frontMaterial.rightBlobEnable=!1},m.pointerDownAnimation=function(){m._frontPlate&&!m.isActiveNearInteraction&&(m._frontPlate.scaling.z=m._frontPlateDepth*.2,m._frontPlate.position=l.Vector3.Forward(m._frontPlate._scene.useRightHandedSystem).scale((m._frontPlateDepth-.2*m._frontPlateDepth)/2),m._textPlate.position=l.Vector3.Forward(m._textPlate._scene.useRightHandedSystem).scale(-(m._backPlateDepth+.2*m._frontPlateDepth)/2))},m.pointerUpAnimation=function(){m._frontPlate&&(m._frontPlate.scaling.z=m._frontPlateDepth,m._frontPlate.position=l.Vector3.Forward(m._frontPlate._scene.useRightHandedSystem).scale((m._frontPlateDepth-m._frontPlateDepth)/2),m._textPlate.position=l.Vector3.Forward(m._textPlate._scene.useRightHandedSystem).scale(-(m._backPlateDepth+m._frontPlateDepth)/2))},m.onPointerMoveObservable.add(function(P){if(m._frontPlate&&m.isActiveNearInteraction){var y=l.Vector3.Zero();if(m._backPlate.getWorldMatrix().decompose(y,void 0,void 0)){var M=m._getInteractionHeight(P,m._backPlate.getAbsolutePosition())/y.z;M=l.Scalar.Clamp(M-m._backPlateDepth/2,.2*m._frontPlateDepth,m._frontPlateDepth),m._frontPlate.scaling.z=M,m._frontPlate.position=l.Vector3.Forward(m._frontPlate._scene.useRightHandedSystem).scale((m._frontPlateDepth-M)/2),m._textPlate.position=l.Vector3.Forward(m._textPlate._scene.useRightHandedSystem).scale(-(m._backPlateDepth+M)/2)}}}),m._pointerHoverObserver=m.onPointerMoveObservable.add(function(P){m._frontMaterial.globalLeftIndexTipPosition=P}),m}return s.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(s.prototype,"renderingGroupId",{get:function(){return this._backPlate.renderingGroupId},set:function(u){this._backPlate.renderingGroupId=u,this._textPlate.renderingGroupId=u,this._frontPlate.renderingGroupId=u,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=u)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"mesh",{get:function(){return this._backPlate},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tooltipText",{get:function(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null},set:function(u){var f=this;if(!u){this._disposeTooltip();return}if(!this._tooltipFade){var m=this._backPlate._scene.useRightHandedSystem;this._tooltipMesh=(0,l.CreatePlane)("",{size:1},this._backPlate._scene);var P=(0,l.CreatePlane)("",{size:1,sideOrientation:l.Mesh.DOUBLESIDE},this._backPlate._scene),y=new l.StandardMaterial("",this._backPlate._scene);y.diffuseColor=l.Color3.FromHexString("#212121"),P.material=y,P.isPickable=!1,this._tooltipMesh.addChild(P),P.position=l.Vector3.Forward(m).scale(.05),this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position=l.Vector3.Up().scale(.7).add(l.Vector3.Forward(m).scale(-.15)),this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=t.AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new o.TextBlock,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new l.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){f._tooltipFade&&f._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){f._tooltipFade&&f._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=u)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(u){this._text!==u&&(this._text=u,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(u){this._imageUrl!==u&&(this._imageUrl=u,this._rebuildContent())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"backMaterial",{get:function(){return this._backMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"frontMaterial",{get:function(){return this._frontMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"plateMaterial",{get:function(){return this._plateMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isBackplateVisible",{set:function(u){this.mesh&&this._backMaterial&&(u&&!this._isBackplateVisible?this._backPlate.visibility=1:!u&&this._isBackplateVisible&&(this._backPlate.visibility=0)),this._isBackplateVisible=u},enumerable:!1,configurable:!0}),s.prototype._getTypeName=function(){return"TouchHolographicButton"},s.prototype._rebuildContent=function(){this._disposeFacadeTexture();var u=new v.StackPanel;if(u.isVertical=!0,(0,l.IsDocumentAvailable)()&&document.createElement&&this._imageUrl){var f=new _.Image;f.source=this._imageUrl,f.paddingTop="40px",f.height="180px",f.width="100px",f.paddingBottom="40px",u.addControl(f)}if(this._text){var m=new o.TextBlock;m.text=this._text,m.color="white",m.height="30px",m.fontSize=24,u.addControl(m)}this.content=u},s.prototype._createNode=function(u){var f=this,m;this.name=(m=this.name)!==null&&m!==void 0?m:"TouchHolographicButton";var P=(0,l.CreateBox)("".concat(this.name,"_collisionMesh"),{width:1,height:1,depth:this._frontPlateDepth},u);P.isPickable=!0,P.isNearPickable=!0,P.visibility=0,P.position=l.Vector3.Forward(u.useRightHandedSystem).scale(-this._frontPlateDepth/2),l.SceneLoader.ImportMeshAsync(void 0,s.MODEL_BASE_URL,s.MODEL_FILENAME,u).then(function(M){var O=(0,l.CreateBox)("${this.name}_alphaMesh",{width:1,height:1,depth:1},u);O.isPickable=!1,O.material=new l.StandardMaterial("${this.name}_alphaMesh_material",u),O.material.alpha=.15;var x=M.meshes[1];x.name="".concat(f.name,"_frontPlate"),x.isPickable=!1,x.scaling.z=f._frontPlateDepth,O.parent=x,x.parent=P,f._frontMaterial&&(x.material=f._frontMaterial),f._frontPlate=x}),this._backPlate=(0,l.CreateBox)("".concat(this.name,"_backPlate"),{width:1,height:1,depth:this._backPlateDepth},u),this._backPlate.position=l.Vector3.Forward(u.useRightHandedSystem).scale(this._backPlateDepth/2),this._backPlate.isPickable=!1,this._textPlate=a.prototype._createNode.call(this,u),this._textPlate.name="".concat(this.name,"_textPlate"),this._textPlate.isPickable=!1,this._textPlate.position=l.Vector3.Forward(u.useRightHandedSystem).scale(-this._frontPlateDepth/2),this._backPlate.addChild(P),this._backPlate.addChild(this._textPlate);var y=new l.TransformNode("{this.name}_root",u);return this._backPlate.setParent(y),this.collisionMesh=P,this.collidableFrontDirection=this._backPlate.forward.negate(),y},s.prototype._applyFacade=function(u){this._plateMaterial.emissiveTexture=u,this._plateMaterial.opacityTexture=u,this._plateMaterial.diffuseColor=new l.Color3(.4,.4,.4)},s.prototype._createBackMaterial=function(u){this._backMaterial=new g.FluentMaterial(this.name+"backPlateMaterial",u.getScene()),this._backMaterial.albedoColor=this._backplateColor,this._backMaterial.renderBorders=!0,this._backMaterial.renderHoverLight=!1},s.prototype._createFrontMaterial=function(u){this._frontMaterial=new b.FluentButtonMaterial(this.name+"Front Material",u.getScene())},s.prototype._createPlateMaterial=function(u){this._plateMaterial=new l.StandardMaterial(this.name+"Plate Material",u.getScene()),this._plateMaterial.specularColor=l.Color3.Black()},s.prototype._onToggle=function(u){this._backMaterial&&(u?this._backMaterial.albedoColor=this._backplateToggledColor:this._backMaterial.albedoColor=this._backplateColor),a.prototype._onToggle.call(this,u)},s.prototype._affectMaterial=function(u){this._shareMaterials?(this._host._touchSharedMaterials.backFluentMaterial?this._backMaterial=this._host._touchSharedMaterials.backFluentMaterial:(this._createBackMaterial(u),this._host._touchSharedMaterials.backFluentMaterial=this._backMaterial),this._host._touchSharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._touchSharedMaterials.frontFluentMaterial:(this._createFrontMaterial(u),this._host._touchSharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(u),this._createFrontMaterial(u)),this._createPlateMaterial(u),this._backPlate.material=this._backMaterial,this._textPlate.material=this._plateMaterial,this._isBackplateVisible||(this._backPlate.visibility=0),this._frontPlate&&(this._frontPlate.material=this._frontMaterial),this._rebuildContent()},s.prototype.dispose=function(){a.prototype.dispose.call(this),this._disposeTooltip(),this.onPointerMoveObservable.remove(this._pointerHoverObserver),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},s.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",s.MODEL_FILENAME="mrtk-fluent-button.glb",s}(e.TouchButton3D)},"../../../dev/gui/src/3D/controls/touchHolographicMenu.ts":(B,E,d)=>{d.r(E),d.d(E,{TouchHolographicMenu:()=>v});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/volumeBasedPanel.ts"),g=d("babylonjs/Misc/perfCounter"),b=d("../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts"),v=function(_){(0,c.__extends)(o,_);function o(t){var e=_.call(this,t)||this;return e._backPlateMargin=1.25,e}return Object.defineProperty(o.prototype,"backPlateMargin",{get:function(){return this._backPlateMargin},set:function(t){var e=this;this._backPlateMargin=t,this._children.length>=1&&(this.children.forEach(function(i){e._updateCurrentMinMax(i.position)}),this._updateMargins())},enumerable:!1,configurable:!0}),o.prototype._createNode=function(t){var e=new g.Mesh("menu_".concat(this.name),t);return this._backPlate=(0,g.CreateBox)("backPlate"+this.name,{size:1},t),this._backPlate.parent=e,e},o.prototype._affectMaterial=function(t){var e=this;this._backPlateMaterial=new b.FluentMaterial(this.name+"backPlateMaterial",t.getScene()),this._backPlateMaterial.albedoColor=new g.Color3(.08,.15,.55),this._backPlateMaterial.renderBorders=!0,this._backPlateMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add(function(i){i?(e._backPlateMaterial.hoverPosition=i,e._backPlateMaterial.hoverColor.a=1):e._backPlateMaterial.hoverColor.a=0}),this._backPlate.material=this._backPlateMaterial},o.prototype._mapGridNode=function(t,e){var i=t.mesh;i&&(t.position=e.clone(),this._updateCurrentMinMax(e))},o.prototype._finalProcessing=function(){this._updateMargins()},o.prototype._updateCurrentMinMax=function(t){this._currentMin||(this._currentMin=t.clone(),this._currentMax=t.clone()),this._currentMin.minimizeInPlace(t),this._currentMax.maximizeInPlace(t)},o.prototype._updateMargins=function(){if(this._children.length>0){this._currentMin.addInPlaceFromFloats(-this._cellWidth/2,-this._cellHeight/2,0),this._currentMax.addInPlaceFromFloats(this._cellWidth/2,this._cellHeight/2,0);var t=this._currentMax.subtract(this._currentMin);this._backPlate.scaling.x=t.x+this._cellWidth*this.backPlateMargin,this._backPlate.scaling.y=t.y+this._cellHeight*this.backPlateMargin,this._backPlate.scaling.z=.001;for(var e=0;e<this._children.length;e++)this._children[e].position.subtractInPlace(this._currentMin).subtractInPlace(t.scale(.5)),this._children[e].position.z-=.01}this._currentMin=null,this._currentMax=null},o.prototype.addButton=function(t){var e=this.blockLayout;return e||(this.blockLayout=!0),_.prototype.addControl.call(this,t),t.isBackplateVisible=!1,t.scaling.scaleInPlace(o.MENU_BUTTON_SCALE),e||(this.blockLayout=!1),this},o.prototype.addControl=function(t){return g.Logger.Warn("TouchHolographicMenu can only contain buttons. Please use the method `addButton` instead."),this},o.prototype.dispose=function(){_.prototype.dispose.call(this),this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver)},o.MENU_BUTTON_SCALE=1,o}(l.VolumeBasedPanel)},"../../../dev/gui/src/3D/controls/touchMeshButton3D.ts":(B,E,d)=>{d.r(E),d.d(E,{TouchMeshButton3D:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/gui/src/3D/controls/touchButton3D.ts"),g=function(b){(0,c.__extends)(v,b);function v(_,o){var t=b.call(this,o,_)||this;return t._currentMesh=_,t.pointerEnterAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1.1)},t.pointerOutAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1/1.1)},t.pointerDownAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(.95)},t.pointerUpAnimation=function(){t.mesh&&t.mesh.scaling.scaleInPlace(1/.95)},t}return v.prototype._getTypeName=function(){return"TouchMeshButton3D"},v.prototype._createNode=function(){var _=this;return this._currentMesh.getChildMeshes().forEach(function(o){_._injectGUI3DReservedDataStore(o).control=_}),this._currentMesh},v.prototype._affectMaterial=function(_){},v}(l.TouchButton3D)},"../../../dev/gui/src/3D/controls/volumeBasedPanel.ts":(B,E,d)=>{d.r(E),d.d(E,{VolumeBasedPanel:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/controls/container3D.ts"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t._columns=10,t._rows=0,t._rowThenColum=!0,t._orientation=g.Container3D.FACEORIGIN_ORIENTATION,t.margin=0,t}return Object.defineProperty(_.prototype,"orientation",{get:function(){return this._orientation},set:function(o){var t=this;this._orientation!==o&&(this._orientation=o,l.Tools.SetImmediate(function(){t._arrangeChildren()}))},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"columns",{get:function(){return this._columns},set:function(o){var t=this;this._columns!==o&&(this._columns=o,this._rowThenColum=!0,l.Tools.SetImmediate(function(){t._arrangeChildren()}))},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"rows",{get:function(){return this._rows},set:function(o){var t=this;this._rows!==o&&(this._rows=o,this._rowThenColum=!1,l.Tools.SetImmediate(function(){t._arrangeChildren()}))},enumerable:!1,configurable:!0}),_.prototype._arrangeChildren=function(){this._cellWidth=0,this._cellHeight=0;for(var o=0,t=0,e=0,i=l.Matrix.Invert(this.node.computeWorldMatrix(!0)),a=0,s=this._children;a<s.length;a++){var u=s[a];if(u.mesh){e++,u.mesh.computeWorldMatrix(!0);var f=u.mesh.getHierarchyBoundingVectors(),m=l.TmpVectors.Vector3[0],P=l.TmpVectors.Vector3[1];f.max.subtractToRef(f.min,P),P.scaleInPlace(.5),l.Vector3.TransformNormalToRef(P,i,m),this._cellWidth=Math.max(this._cellWidth,m.x*2),this._cellHeight=Math.max(this._cellHeight,m.y*2)}}this._cellWidth+=this.margin*2,this._cellHeight+=this.margin*2,this._rowThenColum?(t=this._columns,o=Math.ceil(e/this._columns)):(o=this._rows,t=Math.ceil(e/this._rows));var y=t*.5*this._cellWidth,M=o*.5*this._cellHeight,O=[],x=0;if(this._rowThenColum)for(var R=0;R<o;R++)for(var N=0;N<t&&(O.push(new l.Vector3(N*this._cellWidth-y+this._cellWidth/2,R*this._cellHeight-M+this._cellHeight/2,0)),x++,!(x>e));N++);else for(var N=0;N<t;N++)for(var R=0;R<o&&(O.push(new l.Vector3(N*this._cellWidth-y+this._cellWidth/2,R*this._cellHeight-M+this._cellHeight/2,0)),x++,!(x>e));R++);x=0;for(var W=0,Q=this._children;W<Q.length;W++){var u=Q[W];u.mesh&&(this._mapGridNode(u,O[x]),x++)}this._finalProcessing()},_.prototype._finalProcessing=function(){},_}(g.Container3D)},"../../../dev/gui/src/3D/gizmos/gizmoHandle.ts":(B,E,d)=>{d.r(E),d.d(E,{CornerHandle:()=>o,GizmoHandle:()=>v,HandleState:()=>b,SideHandle:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/materials/handle/handleMaterial.ts"),b;(function(t){t[t.IDLE=0]="IDLE",t[t.HOVER=1]="HOVER",t[t.DRAG=2]="DRAG"})(b||(b={}));var v=function(){function t(e,i){this._state=b.IDLE,this._materials=[],this._scene=i,this._gizmo=e,this.node=this.createNode(),this.node.reservedDataStore={handle:this}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gizmo",{get:function(){return this._gizmo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hover",{set:function(e){e?this._state|=b.HOVER:this._state&=~b.HOVER,this._updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drag",{set:function(e){e?this._state|=b.DRAG:this._state&=~b.DRAG,this._updateMaterial()},enumerable:!1,configurable:!0}),t.prototype._createMaterial=function(e){var i=new g.HandleMaterial("handle",this._scene);return e&&(i._positionOffset=e),i},t.prototype._updateMaterial=function(){for(var e=this._state,i=0,a=this._materials;i<a.length;i++){var s=a[i];s.hover=!1,s.drag=!1}if(e&b.DRAG)for(var u=0,f=this._materials;u<f.length;u++){var s=f[u];s.drag=!0}else if(e&b.HOVER)for(var m=0,P=this._materials;m<P.length;m++){var s=P[m];s.hover=!0}},t.prototype.setDragBehavior=function(e,i,a){var s=new l.BaseSixDofDragBehavior;this._dragBehavior=s,this._dragStartObserver=s.onDragStartObservable.add(e),this._draggingObserver=s.onDragObservable.add(i),this._dragEndObserver=s.onDragEndObservable.add(a),this._dragBehavior.attach(this.node)},t.prototype.dispose=function(){this._dragBehavior.onDragStartObservable.remove(this._dragStartObserver),this._dragBehavior.onDragObservable.remove(this._draggingObserver),this._dragBehavior.onDragEndObservable.remove(this._dragEndObserver),this._dragBehavior.detach();for(var e=0,i=this._materials;e<i.length;e++){var a=i[e];a.dispose()}this.node.dispose()},t}(),_=function(t){(0,c.__extends)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createNode=function(){var i=(0,l.CreateBox)("sideVert",{width:1,height:10,depth:.1},this._scene),a=new l.TransformNode("side",this._scene);i.parent=a;var s=this._createMaterial();return i.material=s,i.isNearGrabbable=!0,this._materials.push(s),a},e}(v),o=function(t){(0,c.__extends)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createNode=function(){var i=(0,l.CreateBox)("angleHor",{width:3,height:1,depth:.1},this._scene),a=(0,l.CreateBox)("angleVert",{width:1,height:3,depth:.1},this._scene),s=new l.TransformNode("angle",this._scene);return i.parent=s,a.parent=s,i.material=this._createMaterial(new l.Vector3(1,0,0)),a.material=this._createMaterial(new l.Vector3(0,1,0)),a.isNearGrabbable=!0,i.isNearGrabbable=!0,this._materials.push(i.material),this._materials.push(a.material),s},e}(v)},"../../../dev/gui/src/3D/gizmos/index.ts":(B,E,d)=>{d.r(E),d.d(E,{CornerHandle:()=>l.CornerHandle,GizmoHandle:()=>l.GizmoHandle,HandleState:()=>l.HandleState,SideHandle:()=>l.SideHandle,SlateGizmo:()=>c.SlateGizmo});var c=d("../../../dev/gui/src/3D/gizmos/slateGizmo.ts"),l=d("../../../dev/gui/src/3D/gizmos/gizmoHandle.ts")},"../../../dev/gui/src/3D/gizmos/slateGizmo.ts":(B,E,d)=>{d.r(E),d.d(E,{SlateGizmo:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=d("../../../dev/gui/src/3D/gizmos/gizmoHandle.ts"),b=function(v){(0,c.__extends)(_,v);function _(o){var t=v.call(this,o)||this;return t._boundingDimensions=new l.Vector3(0,0,0),t._renderObserver=null,t._tmpQuaternion=new l.Quaternion,t._tmpVector=new l.Vector3(0,0,0),t._corners=[],t._sides=[],t._boundingBoxGizmo={min:new l.Vector3,max:new l.Vector3},t._margin=.35,t._handleSize=.075,t._attachedSlate=null,t._existingSlateScale=new l.Vector3,t.fixedScreenSize=!1,t.fixedScreenSizeDistanceFactor=10,t._createNode(),t.updateScale=!1,t._renderObserver=t.gizmoLayer.originalScene.onBeforeRenderObservable.add(function(){t.attachedMesh&&!t._existingSlateScale.equals(t.attachedMesh.scaling)&&t.updateBoundingBox()}),t}return Object.defineProperty(_.prototype,"attachedSlate",{get:function(){return this._attachedSlate},set:function(o){var t=this;o?(this.attachedMesh=o.mesh,this.updateBoundingBox(),this._pickedPointObserver=o._host.onPickingObservable.add(function(e){if(t._handleHovered&&(!e||e.parent!==t._handleHovered.node)&&(t._handleHovered.hover=!1,t._handleHovered=null),e&&e.parent&&e.parent.reservedDataStore&&e.parent.reservedDataStore.handle){var i=e.parent.reservedDataStore.handle;i.gizmo===t&&(t._handleHovered=i,t._handleHovered.hover=!0)}})):this._attachedSlate&&this._attachedSlate._host.onPickingObservable.remove(this._pickedPointObserver),this._attachedSlate=o},enumerable:!1,configurable:!0}),_.prototype._createNode=function(){var o=this;this._handlesParent=new l.TransformNode("handlesParent",this.gizmoLayer.utilityLayerScene),this._handlesParent.rotationQuaternion=l.Quaternion.Identity();for(var t=[{dimensions:new l.Vector3(-1,-1,0),origin:new l.Vector3(1,0,0)},{dimensions:new l.Vector3(1,-1,0),origin:new l.Vector3(0,0,0)},{dimensions:new l.Vector3(1,1,0),origin:new l.Vector3(0,1,0)},{dimensions:new l.Vector3(-1,1,0),origin:new l.Vector3(1,1,0)}],e=0;e<4;e++){var i=new g.CornerHandle(this,this.gizmoLayer.utilityLayerScene);this._corners.push(i),i.node.rotation.z=Math.PI/2*e,i.node.parent=this._handlesParent,this._assignDragBehaviorCorners(i,function(s,u,f,m){return o._moveHandle(s,u,f,m,!0)},t[e])}for(var e=0;e<4;e++){var a=new g.SideHandle(this,this.gizmoLayer.utilityLayerScene);this._sides.push(a),a.node.rotation.z=Math.PI/2*e,a.node.parent=this._handlesParent,this._assignDragBehaviorSides(a,e%2===0?new l.Vector3(0,1,0):new l.Vector3(1,0,0))}this._handlesParent.parent=this._rootMesh},_.prototype._keepAspectRatio=function(o,t,e){e===void 0&&(e=!1);var i=l.TmpVectors.Vector3[0];i.copyFromFloats(t,1,0).normalize(),e&&(i.y*=-1);var a=l.Vector3.Dot(o,i);o.copyFrom(i).scaleInPlace(a)},_.prototype._clampDimensions=function(o,t,e,i){i===void 0&&(i=!1);var a=l.TmpVectors.Vector3[0];a.copyFrom(o).multiplyInPlace(e);var s=l.TmpVectors.Vector3[1];if(s.copyFromFloats(Math.max(this._attachedSlate.minDimensions.x,a.x+t.x),Math.max(this._attachedSlate.minDimensions.y,a.y+t.y),0),i){var u=t.x/t.y;s.x=Math.max(s.x,s.y*u),s.y=Math.max(s.y,s.x/u)}a.copyFrom(s).subtractInPlace(t),o.x=Math.sign(o.x)*Math.abs(a.x),o.y=Math.sign(o.y)*Math.abs(a.y)},_.prototype._moveHandle=function(o,t,e,i,a){if(this._attachedSlate){if(a){var s=t.x/t.y;this._keepAspectRatio(e,s,i.dimensions.x*i.dimensions.y<0)}this._clampDimensions(e,t,i.dimensions,a);var u=l.TmpVectors.Vector3[0],f=l.TmpVectors.Vector3[1];u.copyFrom(e).multiplyInPlace(i.origin),f.copyFrom(e).multiplyInPlace(i.dimensions),this._attachedSlate.origin.copyFrom(o).addInPlace(u),this._attachedSlate.dimensions.set(t.x+f.x,t.y+f.y)}},_.prototype._assignDragBehaviorCorners=function(o,t,e){var i=this,a=new l.Vector3,s=new l.Vector3,u=new l.Vector3,f=new l.Matrix,m=new l.Vector3,P=function(x,R,N,W){x.subtractToRef(N,l.TmpVectors.Vector3[0]);var Q=l.Vector3.Dot(l.TmpVectors.Vector3[0],R);l.TmpVectors.Vector3[1].copyFrom(R).scaleInPlace(Q),l.TmpVectors.Vector3[0].subtractInPlace(l.TmpVectors.Vector3[1]),l.TmpVectors.Vector3[0].addToRef(N,W)},y=function(x){i.attachedSlate&&i.attachedMesh&&(a.set(i.attachedSlate.dimensions.x,i.attachedSlate.dimensions.y,l.Epsilon),s.copyFrom(i.attachedSlate.origin),u.copyFrom(x.position),f.copyFrom(i.attachedMesh.computeWorldMatrix(!0)),f.invert(),i.attachedSlate._followButton.isToggled=!1,l.Vector3.TransformNormalToRef(l.Vector3.Forward(),i.attachedMesh.getWorldMatrix(),m),m.normalize(),i._handleHovered&&(i._handleDragged=i._handleHovered,i._handleDragged.drag=!0))},M=function(x){i.attachedSlate&&i.attachedMesh&&(P(x.position,m,u,i._tmpVector),i._tmpVector.subtractInPlace(u),l.Vector3.TransformNormalToRef(i._tmpVector,f,i._tmpVector),t(s,a,i._tmpVector,e),i.attachedSlate._positionElements(),i.updateBoundingBox())},O=function(){i.attachedSlate&&i.attachedNode&&(i.attachedSlate._updatePivot(),i._handleDragged&&(i._handleDragged.drag=!1,i._handleDragged=null))};o.setDragBehavior(y,M,O)},_.prototype._assignDragBehaviorSides=function(o,t){var e=this,i=new l.Quaternion,a=new l.Vector3,s=new l.Vector3,u=new l.Vector3,f=new l.Vector3,m=function(M){e.attachedSlate&&e.attachedMesh&&(i.copyFrom(e.attachedMesh.rotationQuaternion),a.copyFrom(M.position),u.copyFrom(e.attachedMesh.getAbsolutePivotPoint()),s.copyFrom(a).subtractInPlace(u).normalize(),e.attachedSlate._followButton.isToggled=!1,l.Vector3.TransformNormalToRef(t,e.attachedMesh.getWorldMatrix(),f),f.normalize(),e._handleHovered&&(e._handleDragged=e._handleHovered,e._handleDragged.drag=!0))},P=function(M){if(e.attachedSlate&&e.attachedMesh){e._tmpVector.copyFrom(M.position),e._tmpVector.subtractInPlace(u),e._tmpVector.normalize();var O=-l.Vector3.GetAngleBetweenVectorsOnPlane(e._tmpVector,s,f);l.Quaternion.RotationAxisToRef(t,O,e._tmpQuaternion),i.multiplyToRef(e._tmpQuaternion,e.attachedMesh.rotationQuaternion)}},y=function(){e.attachedSlate&&e.attachedNode&&(e.attachedSlate._updatePivot(),e._handleDragged&&(e._handleDragged.drag=!1,e._handleDragged=null))};o.setDragBehavior(m,P,y)},_.prototype._attachedNodeChanged=function(o){o&&this.updateBoundingBox()},_.prototype.updateBoundingBox=function(){if(this.attachedMesh){l.PivotTools._RemoveAndStorePivotPoint(this.attachedMesh);var o=this.attachedMesh.parent;this.attachedMesh.setParent(null),this._update(),this.attachedMesh.rotationQuaternion||(this.attachedMesh.rotationQuaternion=l.Quaternion.RotationYawPitchRoll(this.attachedMesh.rotation.y,this.attachedMesh.rotation.x,this.attachedMesh.rotation.z)),this._tmpQuaternion.copyFrom(this.attachedMesh.rotationQuaternion),this._tmpVector.copyFrom(this.attachedMesh.position),this.attachedMesh.rotationQuaternion.set(0,0,0,1),this.attachedMesh.position.set(0,0,0);var t=this.attachedMesh.getHierarchyBoundingVectors();t.max.subtractToRef(t.min,this._boundingDimensions),this._boundingBoxGizmo.min=t.min,this._boundingBoxGizmo.max=t.max,this._updateHandlesPosition(),this._updateHandlesScaling(),this.attachedMesh.rotationQuaternion.copyFrom(this._tmpQuaternion),this.attachedMesh.position.copyFrom(this._tmpVector),l.PivotTools._RestorePivotPoint(this.attachedMesh),this.attachedMesh.setParent(o),this.attachedMesh.computeWorldMatrix(!0),this._existingSlateScale.copyFrom(this.attachedMesh.scaling)}},_.prototype._updateHandlesPosition=function(){var o=this._boundingBoxGizmo.min.clone(),t=this._boundingBoxGizmo.max.clone(),e=this._corners[0].node.scaling.length();o.x-=this._margin*e,o.y-=this._margin*e,t.x+=this._margin*e,t.y+=this._margin*e;var i=o.add(t).scaleInPlace(.5);this._corners[0].node.position.copyFromFloats(o.x,o.y,0),this._corners[1].node.position.copyFromFloats(t.x,o.y,0),this._corners[2].node.position.copyFromFloats(t.x,t.y,0),this._corners[3].node.position.copyFromFloats(o.x,t.y,0),this._sides[0].node.position.copyFromFloats(o.x,i.y,0),this._sides[1].node.position.copyFromFloats(i.x,o.y,0),this._sides[2].node.position.copyFromFloats(t.x,i.y,0),this._sides[3].node.position.copyFromFloats(i.x,t.y,0)},_.prototype._updateHandlesScaling=function(){if(this._attachedSlate&&this._attachedSlate.mesh){for(var o=this._attachedSlate.mesh.scaling.x*this._attachedSlate.dimensions.x,t=this._attachedSlate.mesh.scaling.y*this._attachedSlate.dimensions.y,e=Math.min(o,t)*this._handleSize,i=0;i<this._corners.length;i++)this._corners[i].node.scaling.setAll(e);for(var i=0;i<this._sides.length;i++)this._sides[i].node.scaling.setAll(e)}},_.prototype._update=function(){if(v.prototype._update.call(this),!!this.gizmoLayer.utilityLayerScene.activeCamera&&this._attachedSlate&&this._attachedSlate.mesh){if(this.fixedScreenSize){this._attachedSlate.mesh.absolutePosition.subtractToRef(this.gizmoLayer.utilityLayerScene.activeCamera.position,this._tmpVector);for(var o=this._handleSize*this._tmpVector.length()/this.fixedScreenSizeDistanceFactor,t=0;t<this._corners.length;t++)this._corners[t].node.scaling.set(o,o,o);for(var t=0;t<this._sides.length;t++)this._sides[t].node.scaling.set(o,o,o)}this._updateHandlesPosition()}},_.prototype.dispose=function(){this.gizmoLayer.originalScene.onBeforeRenderObservable.remove(this._renderObserver),v.prototype.dispose.call(this);for(var o=0,t=this._corners;o<t.length;o++){var e=t[o];e.dispose()}for(var i=0,a=this._sides;i<a.length;i++){var s=a[i];s.dispose()}},_}(l.Gizmo)},"../../../dev/gui/src/3D/gui3DManager.ts":(B,E,d)=>{d.r(E),d.d(E,{GUI3DManager:()=>g});var c=d("babylonjs/Misc/perfCounter"),l=d("../../../dev/gui/src/3D/controls/container3D.ts"),g=function(){function b(v){var _=this;this._customControlScaling=1,this._lastControlOver={},this._lastControlDown={},this.onPickedPointChangedObservable=new c.Observable,this.onPickingObservable=new c.Observable,this._sharedMaterials={},this._touchSharedMaterials={},this._scene=v||c.EngineStore.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){_._sceneDisposeObserver=null,_._utilityLayer=null,_.dispose()}),this._utilityLayer=c.UtilityLayerRenderer._CreateDefaultUtilityLayerFromScene(this._scene),this._utilityLayer.onlyCheckPointerDownEvents=!1,this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.mainSceneTrackerPredicate=function(t){var e,i,a;return t&&((a=(i=(e=t.reservedDataStore)===null||e===void 0?void 0:e.GUI3D)===null||i===void 0?void 0:i.control)===null||a===void 0?void 0:a._node)},this._rootContainer=new l.Container3D("RootContainer"),this._rootContainer._host=this;var o=this._utilityLayer.utilityLayerScene;this._pointerOutObserver=this._utilityLayer.onPointerOutObservable.add(function(t){_._handlePointerOut(t,!0)}),this._pointerObserver=o.onPointerObservable.add(function(t){_._doPicking(t)}),this._utilityLayer.utilityLayerScene.autoClear=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,new c.HemisphericLight("hemi",c.Vector3.Up(),this._utilityLayer.utilityLayerScene)}return Object.defineProperty(b.prototype,"scene",{get:function(){return this._scene},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"utilityLayer",{get:function(){return this._utilityLayer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"controlScaling",{get:function(){return this._customControlScaling},set:function(v){if(this._customControlScaling!==v&&v>0){var _=v/this._customControlScaling;this._customControlScaling=v,this._rootContainer.children.forEach(function(o){o.scaling.scaleInPlace(_),v!==1&&(o._isScaledByManager=!0)})}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"useRealisticScaling",{get:function(){return this.controlScaling===b.MRTK_REALISTIC_SCALING},set:function(v){this.controlScaling=v?b.MRTK_REALISTIC_SCALING:1},enumerable:!1,configurable:!0}),b.prototype._handlePointerOut=function(v,_){var o=this._lastControlOver[v];o&&(o._onPointerOut(o),delete this._lastControlOver[v]),_&&this._lastControlDown[v]&&(this._lastControlDown[v].forcePointerUp(),delete this._lastControlDown[v]),this.onPickedPointChangedObservable.notifyObservers(null)},b.prototype._doPicking=function(v){var _,o,t;if(!this._utilityLayer||!this._utilityLayer.shouldRender||!this._utilityLayer.utilityLayerScene.activeCamera)return!1;var e=v.event,i=e.pointerId||0,a=e.button,s=v.pickInfo;if(s&&this.onPickingObservable.notifyObservers(s.pickedMesh),!s||!s.hit)return this._handlePointerOut(i,v.type===c.PointerEventTypes.POINTERUP),!1;s.pickedPoint&&this.onPickedPointChangedObservable.notifyObservers(s.pickedPoint);var u=(o=(_=s.pickedMesh.reservedDataStore)===null||_===void 0?void 0:_.GUI3D)===null||o===void 0?void 0:o.control;return u&&!u._processObservables(v.type,s.pickedPoint,((t=s.originMesh)===null||t===void 0?void 0:t.position)||null,i,a)&&v.type===c.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[i]&&this._lastControlOver[i]._onPointerOut(this._lastControlOver[i]),delete this._lastControlOver[i]),v.type===c.PointerEventTypes.POINTERUP&&(this._lastControlDown[e.pointerId]&&(this._lastControlDown[e.pointerId].forcePointerUp(),delete this._lastControlDown[e.pointerId]),(e.pointerType==="touch"||e.pointerType==="xr"&&this._scene.getEngine().hostInformation.isMobile)&&this._handlePointerOut(i,!1)),!0},Object.defineProperty(b.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!1,configurable:!0}),b.prototype.containsControl=function(v){return this._rootContainer.containsControl(v)},b.prototype.addControl=function(v){return this._rootContainer.addControl(v),this._customControlScaling!==1&&(v.scaling.scaleInPlace(this._customControlScaling),v._isScaledByManager=!0),this},b.prototype.removeControl=function(v){return this._rootContainer.removeControl(v),v._isScaledByManager&&(v.scaling.scaleInPlace(1/this._customControlScaling),v._isScaledByManager=!1),this},b.prototype.dispose=function(){this._rootContainer.dispose();for(var v in this._sharedMaterials)Object.prototype.hasOwnProperty.call(this._sharedMaterials,v)&&this._sharedMaterials[v].dispose();this._sharedMaterials={};for(var v in this._touchSharedMaterials)Object.prototype.hasOwnProperty.call(this._touchSharedMaterials,v)&&this._touchSharedMaterials[v].dispose();this._touchSharedMaterials={},this._pointerOutObserver&&this._utilityLayer&&(this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver),this._pointerOutObserver=null),this.onPickedPointChangedObservable.clear(),this.onPickingObservable.clear();var _=this._utilityLayer?this._utilityLayer.utilityLayerScene:null;_&&this._pointerObserver&&(_.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=null),this._scene&&this._sceneDisposeObserver&&(this._scene.onDisposeObservable.remove(this._sceneDisposeObserver),this._sceneDisposeObserver=null),this._utilityLayer&&this._utilityLayer.dispose()},b.MRTK_REALISTIC_SCALING=.032,b}()},"../../../dev/gui/src/3D/index.ts":(B,E,d)=>{d.r(E),d.d(E,{AbstractButton3D:()=>c.AbstractButton3D,Button3D:()=>c.Button3D,Container3D:()=>c.Container3D,Control3D:()=>c.Control3D,CornerHandle:()=>g.CornerHandle,CylinderPanel:()=>c.CylinderPanel,FluentBackplateMaterial:()=>l.FluentBackplateMaterial,FluentButtonMaterial:()=>l.FluentButtonMaterial,FluentMaterial:()=>l.FluentMaterial,FluentMaterialDefines:()=>l.FluentMaterialDefines,GUI3DManager:()=>b.GUI3DManager,GizmoHandle:()=>g.GizmoHandle,HandMenu:()=>c.HandMenu,HandleMaterial:()=>l.HandleMaterial,HandleState:()=>g.HandleState,HolographicBackplate:()=>c.HolographicBackplate,HolographicButton:()=>c.HolographicButton,HolographicSlate:()=>c.HolographicSlate,MRDLBackplateMaterial:()=>l.MRDLBackplateMaterial,MRDLSliderBarMaterial:()=>l.MRDLSliderBarMaterial,MRDLSliderThumbMaterial:()=>l.MRDLSliderThumbMaterial,MeshButton3D:()=>c.MeshButton3D,NearMenu:()=>c.NearMenu,PlanePanel:()=>c.PlanePanel,ScatterPanel:()=>c.ScatterPanel,SideHandle:()=>g.SideHandle,SlateGizmo:()=>g.SlateGizmo,Slider3D:()=>c.Slider3D,SpherePanel:()=>c.SpherePanel,StackPanel3D:()=>c.StackPanel3D,TouchButton3D:()=>c.TouchButton3D,TouchHolographicButton:()=>c.TouchHolographicButton,TouchHolographicButtonV3:()=>c.TouchHolographicButtonV3,TouchHolographicMenu:()=>c.TouchHolographicMenu,TouchMeshButton3D:()=>c.TouchMeshButton3D,Vector3WithInfo:()=>v.Vector3WithInfo,VolumeBasedPanel:()=>c.VolumeBasedPanel});var c=d("../../../dev/gui/src/3D/controls/index.ts"),l=d("../../../dev/gui/src/3D/materials/index.ts"),g=d("../../../dev/gui/src/3D/gizmos/index.ts"),b=d("../../../dev/gui/src/3D/gui3DManager.ts"),v=d("../../../dev/gui/src/3D/vector3WithInfo.ts")},"../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentMaterial:()=>b,FluentMaterialDefines:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/fluent/shaders/fluent.vertex.ts"),d("../../../dev/gui/src/3D/materials/fluent/shaders/fluent.fragment.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.INNERGLOW=!1,o.BORDER=!1,o.HOVERLIGHT=!1,o.TEXTURE=!1,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.innerGlowColorIntensity=.5,e.innerGlowColor=new l.Color3(1,1,1),e.albedoColor=new l.Color3(.3,.35,.4),e.renderBorders=!1,e.borderWidth=.5,e.edgeSmoothingValue=.02,e.borderMinValue=.1,e.renderHoverLight=!1,e.hoverRadius=.01,e.hoverColor=new l.Color4(.3,.3,.3,1),e.hoverPosition=l.Vector3.Zero(),e}return _.prototype.needAlphaBlending=function(){return this.alpha!==1},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=this.getScene(),i=t.materialDefines;if(!this.checkReadyOnEveryCall&&t.effect&&i._renderId===e.getRenderId())return!0;if(i._areTexturesDirty)if(i.INNERGLOW=this.innerGlowColorIntensity>0,i.BORDER=this.renderBorders,i.HOVERLIGHT=this.renderHoverLight,this._albedoTexture)if(this._albedoTexture.isReadyOrNotBlocking())i.TEXTURE=!0;else return!1;else i.TEXTURE=!1;var a=e.getEngine();if(i.isDirty){i.markAsProcessed(),e.resetCachedMaterial();var s=[l.VertexBuffer.PositionKind];s.push(l.VertexBuffer.NormalKind),s.push(l.VertexBuffer.UVKind);var u="fluent",f=["world","viewProjection","innerGlowColor","albedoColor","borderWidth","edgeSmoothingValue","scaleFactor","borderMinValue","hoverColor","hoverPosition","hoverRadius","textureMatrix"],m=["albedoSampler"],P=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:f,uniformBuffersNames:P,samplers:m,defines:i,maxSimultaneousLights:4});var y=i.toString();t.setEffect(e.getEngine().createEffect(u,{attributes:s,uniformsNames:f,uniformBuffersNames:P,samplers:m,defines:y,fallbacks:null,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),i,this._materialContext)}return!t.effect||!t.effect.isReady()?!1:(i._renderId=e.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=this.getScene(),a=e.materialDefines;if(a){var s=e.effect;if(s){if(this._activeEffect=s,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",i.getTransformMatrix()),this._mustRebind(i,s)&&(this._activeEffect.setColor4("albedoColor",this.albedoColor,this.alpha),a.INNERGLOW&&this._activeEffect.setColor4("innerGlowColor",this.innerGlowColor,this.innerGlowColorIntensity),a.BORDER&&(this._activeEffect.setFloat("borderWidth",this.borderWidth),this._activeEffect.setFloat("edgeSmoothingValue",this.edgeSmoothingValue),this._activeEffect.setFloat("borderMinValue",this.borderMinValue),t.getBoundingInfo().boundingBox.extendSize.multiplyToRef(t.scaling,l.TmpVectors.Vector3[0]),this._activeEffect.setVector3("scaleFactor",l.TmpVectors.Vector3[0])),a.HOVERLIGHT&&(this._activeEffect.setDirectColor4("hoverColor",this.hoverColor),this._activeEffect.setFloat("hoverRadius",this.hoverRadius),this._activeEffect.setVector3("hoverPosition",this.hoverPosition)),a.TEXTURE&&this._albedoTexture)){this._activeEffect.setTexture("albedoSampler",this._albedoTexture);var u=this._albedoTexture.getTextureMatrix();this._activeEffect.setMatrix("textureMatrix",u)}this._afterBind(t,this._activeEffect)}}},_.prototype.getActiveTextures=function(){var o=v.prototype.getActiveTextures.call(this);return o},_.prototype.hasTexture=function(o){return!!v.prototype.hasTexture.call(this,o)},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.GUI.FluentMaterial",o},_.prototype.getClassName=function(){return"FluentMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},(0,c.__decorate)([(0,l.serialize)(),(0,l.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],_.prototype,"innerGlowColorIntensity",void 0),(0,c.__decorate)([(0,l.serializeAsColor3)()],_.prototype,"innerGlowColor",void 0),(0,c.__decorate)([(0,l.serializeAsColor3)()],_.prototype,"albedoColor",void 0),(0,c.__decorate)([(0,l.serialize)(),(0,l.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],_.prototype,"renderBorders",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"borderWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeSmoothingValue",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"borderMinValue",void 0),(0,c.__decorate)([(0,l.serialize)(),(0,l.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],_.prototype,"renderHoverLight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"hoverRadius",void 0),(0,c.__decorate)([(0,l.serializeAsColor4)()],_.prototype,"hoverColor",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"hoverPosition",void 0),(0,c.__decorate)([(0,l.serializeAsTexture)("albedoTexture")],_.prototype,"_albedoTexture",void 0),(0,c.__decorate)([(0,l.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],_.prototype,"albedoTexture",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.FluentMaterial",b)},"../../../dev/gui/src/3D/materials/fluent/index.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentMaterial:()=>c.FluentMaterial,FluentMaterialDefines:()=>c.FluentMaterialDefines});var c=d("../../../dev/gui/src/3D/materials/fluent/fluentMaterial.ts")},"../../../dev/gui/src/3D/materials/fluent/shaders/fluent.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentPixelShader",g=`precision highp float;varying vec2 vUV;uniform vec4 albedoColor;
#ifdef INNERGLOW
uniform vec4 innerGlowColor;
#endif
#ifdef BORDER
varying vec2 scaleInfo;uniform float edgeSmoothingValue;uniform float borderMinValue;
#endif
#ifdef HOVERLIGHT
varying vec3 worldPosition;uniform vec3 hoverPosition;uniform vec4 hoverColor;uniform float hoverRadius;
#endif
#ifdef TEXTURE
uniform sampler2D albedoSampler;uniform mat4 textureMatrix;vec2 finalUV;
#endif
void main(void) {vec3 albedo=albedoColor.rgb;float alpha=albedoColor.a;
#ifdef TEXTURE
finalUV=vec2(textureMatrix*vec4(vUV,1.0,0.0));albedo=texture2D(albedoSampler,finalUV).rgb;
#endif
#ifdef HOVERLIGHT
float pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;albedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);
#else
float pointToHover=1.0;
#endif
#ifdef BORDER 
float borderPower=10.0;float inverseBorderPower=1.0/borderPower;vec3 borderColor=albedo*borderPower;vec2 distanceToEdge;distanceToEdge.x=abs(vUV.x-0.5)*2.0;distanceToEdge.y=abs(vUV.y-0.5)*2.0;float borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),
smoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));borderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover); 
albedo+=borderColor;alpha=max(alpha,borderValue);
#endif
#ifdef INNERGLOW
vec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);uvGlow=uvGlow*uvGlow;uvGlow=uvGlow*uvGlow;albedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y); 
#endif
gl_FragColor=vec4(albedo,alpha);}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/fluent/shaders/fluent.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentVertexShader",g=`precision highp float;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;uniform mat4 world;uniform mat4 viewProjection;varying vec2 vUV;
#ifdef BORDER
varying vec2 scaleInfo;uniform float borderWidth;uniform vec3 scaleFactor;
#endif
#ifdef HOVERLIGHT
varying vec3 worldPosition;
#endif
void main(void) {vUV=uv;
#ifdef BORDER
vec3 scale=scaleFactor;float minScale=min(min(scale.x,scale.y),scale.z);float maxScale=max(max(scale.x,scale.y),scale.z);float minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);float areaYZ=scale.y*scale.z;float areaXZ=scale.x*scale.z;float areaXY=scale.x*scale.y;float scaledBorderWidth=borderWidth; 
if (abs(normal.x)==1.0) 
{scale.x=scale.y;scale.y=scale.z;if (areaYZ>areaXZ && areaYZ>areaXY)
{scaledBorderWidth*=minOverMiddleScale;}}
else if (abs(normal.y)==1.0) 
{scale.x=scale.z;if (areaXZ>areaXY && areaXZ>areaYZ)
{scaledBorderWidth*=minOverMiddleScale;}}
else 
{if (areaXY>areaYZ && areaXY>areaXZ)
{scaledBorderWidth*=minOverMiddleScale;}}
float scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);if (scale.x>scale.y)
{scaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);scaleInfo.y=1.0-scaledBorderWidth;}
else
{scaleInfo.x=1.0-scaledBorderWidth;scaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);} 
#endif 
vec4 worldPos=world*vec4(position,1.0);
#ifdef HOVERLIGHT
worldPosition=worldPos.xyz;
#endif
gl_Position=viewProjection*worldPos;}
`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/fluentBackplate/fluentBackplateMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentBackplateMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.fragment.ts"),d("../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.BLOB_ENABLE=!0,o.BLOB_ENABLE_2=!0,o.SMOOTH_EDGES=!0,o.IRIDESCENT_MAP_ENABLE=!0,o._needNormals=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.radius=.03,e.lineWidth=.01,e.absoluteSizes=!1,e._filterWidth=1,e.baseColor=new l.Color4(.0392157,.0666667,.207843,1),e.lineColor=new l.Color4(.14902,.133333,.384314,1),e.blobIntensity=.98,e.blobFarSize=.04,e.blobNearDistance=0,e.blobFarDistance=.08,e.blobFadeLength=.08,e.blobNearSize=.22,e.blobPulse=0,e.blobFade=0,e.blobNearSize2=.22,e.blobPulse2=0,e.blobFade2=0,e._rate=.135,e.highlightColor=new l.Color4(.98,.98,.98,1),e.highlightWidth=.25,e._highlightTransform=new l.Vector4(1,1,0,0),e._highlight=1,e.iridescenceIntensity=0,e.iridescenceEdgeIntensity=1,e._angle=-45,e.fadeOut=1,e._reflected=!0,e._frequency=1,e._verticalOffset=0,e.globalLeftIndexTipPosition=l.Vector3.Zero(),e._globalLeftIndexTipPosition4=l.Vector4.Zero(),e.globalRightIndexTipPosition=l.Vector3.Zero(),e._globalRightIndexTipPosition4=l.Vector4.Zero(),e.alphaMode=l.Constants.ALPHA_DISABLE,e.backFaceCulling=!1,e._blobTexture=new l.Texture(_.BLOB_TEXTURE_URL,e.getScene(),!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e._iridescentMap=new l.Texture(_.IM_TEXTURE_URL,e.getScene(),!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e}return _.prototype.needAlphaBlending=function(){return!1},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="fluentBackplate",m=e.toString(),P=["world","viewProjection","cameraPosition","_Radius_","_Line_Width_","_Absolute_Sizes_","_Filter_Width_","_Base_Color_","_Line_Color_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Rate_","_Highlight_Color_","_Highlight_Width_","_Highlight_Transform_","_Highlight_","_Iridescence_Intensity_","_Iridescence_Edge_Intensity_","_Angle_","_Fade_Out_","_Reflected_","_Frequency_","_Vertical_Offset_","_Iridescent_Map_","_Use_Global_Left_Index_","_Use_Global_Right_Index_","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position"],y=["_Blob_Texture_","_Iridescent_Map_"],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e,this._materialContext)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i,a,s=e.materialDefines;if(s){var u=e.effect;u&&(this._activeEffect=u,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",(a=(i=this.getScene().activeCamera)===null||i===void 0?void 0:i.position)!==null&&a!==void 0?a:l.Vector3.ZeroReadOnly),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Absolute_Sizes_",this.absoluteSizes?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setDirectColor4("_Base_Color_",this.baseColor),this._activeEffect.setDirectColor4("_Line_Color_",this.lineColor),this._activeEffect.setFloat("_Radius_Top_Left_",1),this._activeEffect.setFloat("_Radius_Top_Right_",1),this._activeEffect.setFloat("_Radius_Bottom_Left_",1),this._activeEffect.setFloat("_Radius_Bottom_Right_",1),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this._blobTexture),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setFloat("_Rate_",this._rate),this._activeEffect.setDirectColor4("_Highlight_Color_",this.highlightColor),this._activeEffect.setFloat("_Highlight_Width_",this.highlightWidth),this._activeEffect.setVector4("_Highlight_Transform_",this._highlightTransform),this._activeEffect.setFloat("_Highlight_",this._highlight),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setFloat("_Iridescence_Edge_Intensity_",this.iridescenceEdgeIntensity),this._activeEffect.setFloat("_Angle_",this._angle),this._activeEffect.setFloat("_Fade_Out_",this.fadeOut),this._activeEffect.setFloat("_Reflected_",this._reflected?1:0),this._activeEffect.setFloat("_Frequency_",this._frequency),this._activeEffect.setFloat("_Vertical_Offset_",this._verticalOffset),this._activeEffect.setTexture("_Iridescent_Map_",this._iridescentMap),this._activeEffect.setFloat("_Use_Global_Left_Index_",1),this._activeEffect.setFloat("_Use_Global_Right_Index_",1),this._globalLeftIndexTipPosition4.set(this.globalLeftIndexTipPosition.x,this.globalLeftIndexTipPosition.y,this.globalLeftIndexTipPosition.z,1),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this._globalLeftIndexTipPosition4),this._globalRightIndexTipPosition4.set(this.globalRightIndexTipPosition.x,this.globalRightIndexTipPosition.y,this.globalRightIndexTipPosition.z,1),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this._globalRightIndexTipPosition4),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o),this._blobTexture.dispose(),this._iridescentMap.dispose()},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.FluentBackplateMaterial",o},_.prototype.getClassName=function(){return"FluentBackplateMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.BLOB_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-blob.png",_.IM_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-iridescence.png",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"absoluteSizes",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"baseColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"highlightColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"highlightWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceEdgeIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fadeOut",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"globalLeftIndexTipPosition",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"globalRightIndexTipPosition",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.FluentBackplateMaterial",b)},"../../../dev/gui/src/3D/materials/fluentBackplate/index.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentBackplateMaterial:()=>c.FluentBackplateMaterial});var c=d("../../../dev/gui/src/3D/materials/fluentBackplate/fluentBackplateMaterial.ts")},"../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentBackplatePixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentBackplatePixelShader",g=`uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform float _Angle_;uniform float _Fade_Out_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform sampler2D _Iridescent_Map_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;void Round_Rect_Fragment_B31(
float Radius,
float Line_Width,
vec4 Line_Color,
float Filter_Width,
vec2 UV,
float Line_Visibility,
vec4 Rect_Parms,
vec4 Fill_Color,
out vec4 Color)
{float d=length(max(abs(UV)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);float g=min(Rect_Parms.z,Rect_Parms.w);float dgrad=max(fwidth(g)*Filter_Width,0.00001);float Inside_Rect=clamp(g/dgrad,0.0,1.0);float inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);Color=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;}
void Blob_Fragment_B71(
sampler2D Blob_Texture,
vec4 Blob_Info1,
vec4 Blob_Info2,
out vec4 Blob_Color)
{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}
void Line_Fragment_B48(
vec4 Base_Color,
vec4 Highlight_Color,
float Highlight_Width,
vec3 Line_Vertex,
float Highlight,
out vec4 Line_Color)
{float k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);Line_Color=mix(Base_Color,Highlight_Color,Highlight*k2);}
void Scale_RGB_B54(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Conditional_Float_B38(
bool Which,
float If_True,
float If_False,
out float Result)
{Result=Which ? If_True : If_False;}
void main()
{float R_Q72;float G_Q72;float B_Q72;float A_Q72;R_Q72=vColor.r; G_Q72=vColor.g; B_Q72=vColor.b; A_Q72=vColor.a;vec4 Blob_Color_Q71;
#if BLOB_ENABLE
float k1=dot(vExtra2.xy,vExtra2.xy);float k2=dot(vExtra3.xy,vExtra3.xy);vec3 closer=k1<k2 ? vec3(k1,vExtra2.z,vExtra2.w) : vec3(k2,vExtra3.z,vExtra3.w);Blob_Color_Q71=closer.z*texture(_Blob_Texture_,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);
#else
Blob_Color_Q71=vec4(0,0,0,0);
#endif
vec4 Line_Color_Q48;Line_Fragment_B48(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q48);float X_Q67;float Y_Q67;X_Q67=vUV.x;Y_Q67=vUV.y;vec3 Incident_Q66=normalize(vPosition-cameraPosition);vec3 Reflected_Q60=reflect(Incident_Q66,vBinormal);float Product_Q63=Y_Q67*_Vertical_Offset_;float Dot_Q68=dot(Incident_Q66, Reflected_Q60);float Dot_Q57=dot(vNormal, Incident_Q66);float Result_Q38;Conditional_Float_B38(_Reflected_,Dot_Q68,Dot_Q57,Result_Q38);float Product_Q64=Result_Q38*_Frequency_;float Sum_Q69=Product_Q64+1.0;float Product_Q70=Sum_Q69*0.5;float Sum_Q62=Product_Q63+Product_Q70;float FractF_Q59=fract(Sum_Q62);vec2 Vec2_Q65=vec2(FractF_Q59,0.5);vec4 Color_Q58;
#if IRIDESCENT_MAP_ENABLE
Color_Q58=texture(_Iridescent_Map_,Vec2_Q65);
#else
Color_Q58=vec4(0,0,0,0);
#endif
vec4 Result_Q54;Scale_RGB_B54(Color_Q58,_Iridescence_Edge_Intensity_,Result_Q54);vec4 Result_Q55;Scale_RGB_B54(Color_Q58,_Iridescence_Intensity_,Result_Q55);vec4 Base_And_Iridescent_Q53;Base_And_Iridescent_Q53=Line_Color_Q48+vec4(Result_Q54.rgb,0.0);vec4 Base_And_Iridescent_Q56;Base_And_Iridescent_Q56=_Base_Color_+vec4(Result_Q55.rgb,0.0);vec4 Result_Q52=Base_And_Iridescent_Q53; Result_Q52.a=1.0;vec4 Result_Q35=Blob_Color_Q71+(1.0-Blob_Color_Q71.a)*Base_And_Iridescent_Q56;vec4 Color_Q31;Round_Rect_Fragment_B31(R_Q72,G_Q72,Result_Q52,_Filter_Width_,vUV,1.0,vExtra1,Result_Q35,Color_Q31);vec4 Result_Q47=_Fade_Out_*Color_Q31;vec4 Out_Color=Result_Q47;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/fluentBackplate/shaders/fluentBackplate.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentBackplateVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentBackplateVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;
#ifdef TANGENT
attribute vec3 tangent;
#else
const vec3 tangent=vec3(0.);
#endif
uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform float _Angle_;uniform float _Fade_Out_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform sampler2D _Iridescent_Map_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B115(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void PickDir_B140(
float Degrees,
vec3 DirX,
vec3 DirY,
out vec3 Dir)
{float a=Degrees*3.14159/180.0;Dir=cos(a)*DirX+sin(a)*DirY;}
void Round_Rect_Vertex_B139(
vec2 UV,
float Radius,
float Margin,
float Anisotropy,
float Gradient1,
float Gradient2,
out vec2 Rect_UV,
out vec4 Rect_Parms,
out vec2 Scale_XY,
out vec2 Line_UV)
{Scale_XY=vec2(Anisotropy,1.0);Line_UV=(UV-vec2(0.5,0.5));Rect_UV=Line_UV*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);Rect_Parms.z=Gradient1; 
Rect_Parms.w=Gradient2;}
void Line_Vertex_B135(
vec2 Scale_XY,
vec2 UV,
float Time,
float Rate,
vec4 Highlight_Transform,
out vec3 Line_Vertex)
{float angle2=(Rate*Time)*2.0*3.1416;float sinAngle2=sin(angle2);float cosAngle2=cos(angle2);vec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;Line_Vertex.x=0.0;Line_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;Line_Vertex.z=0.0; }
void Blob_Vertex_B180(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
float Blob_Fade_Length,
float Blob_Pulse,
float Blob_Fade,
out vec4 Blob_Info)
{vec3 blob=Blob_Position;vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}
void Move_Verts_B129(
float Anisotropy,
vec3 P,
float Radius,
out vec3 New_P,
out vec2 New_UV,
out float Radial_Gradient,
out vec3 Radial_Dir)
{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);New_UV=center+r2*(UV-2.0*center+0.5);New_P=vec3(New_UV-0.5,P.z);Radial_Gradient=1.0-length(delta)*2.0;Radial_Dir=vec3(delta*r2,0.0);}
void Object_To_World_Dir_B132(
vec3 Dir_Object,
out vec3 Binormal_World,
out vec3 Binormal_World_N,
out float Binormal_Length)
{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}
void RelativeOrAbsoluteDetail_B147(
float Nominal_Radius,
float Nominal_LineWidth,
bool Absolute_Measurements,
float Height,
out float Radius,
out float Line_Width)
{float scale=Absolute_Measurements ? 1.0/Height : 1.0;Radius=Nominal_Radius*scale;Line_Width=Nominal_LineWidth*scale;}
void Edge_AA_Vertex_B130(
vec3 Position_World,
vec3 Position_Object,
vec3 Normal_Object,
vec3 Eye,
float Radial_Gradient,
vec3 Radial_Dir,
vec3 Tangent,
out float Gradient1,
out float Gradient2)
{vec3 I=(Eye-Position_World);vec3 T=(world* vec4(Tangent,0.0)).xyz;float g=(dot(T,I)<0.0) ? 0.0 : 1.0;if (Normal_Object.z==0.0) { 
Gradient1=Position_Object.z>0.0 ? g : 1.0;Gradient2=Position_Object.z>0.0 ? 1.0 : g;} else {Gradient1=g+(1.0-g)*(Radial_Gradient);Gradient2=1.0;}}
void Pick_Radius_B144(
float Radius,
float Radius_Top_Left,
float Radius_Top_Right,
float Radius_Bottom_Left,
float Radius_Bottom_Right,
vec3 Position,
out float Result)
{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}
void main()
{vec3 Nrm_World_Q128;Nrm_World_Q128=normalize((world*vec4(normal,0.0)).xyz);vec3 Tangent_World_Q131;vec3 Tangent_World_N_Q131;float Tangent_Length_Q131;Tangent_World_Q131=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q131=length(Tangent_World_Q131);Tangent_World_N_Q131=Tangent_World_Q131/Tangent_Length_Q131;vec3 Binormal_World_Q132;vec3 Binormal_World_N_Q132;float Binormal_Length_Q132;Object_To_World_Dir_B132(vec3(0,1,0),Binormal_World_Q132,Binormal_World_N_Q132,Binormal_Length_Q132);float Anisotropy_Q133=Tangent_Length_Q131/Binormal_Length_Q132;vec3 Result_Q177;Result_Q177=mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(_Use_Global_Left_Index_));vec3 Result_Q178;Result_Q178=mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(_Use_Global_Right_Index_));float Result_Q144;Pick_Radius_B144(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q144);vec3 Dir_Q140;PickDir_B140(_Angle_,Tangent_World_N_Q131,Binormal_World_N_Q132,Dir_Q140);float Radius_Q147;float Line_Width_Q147;RelativeOrAbsoluteDetail_B147(Result_Q144,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q132,Radius_Q147,Line_Width_Q147);vec4 Out_Color_Q145=vec4(Radius_Q147,Line_Width_Q147,0,1);vec3 New_P_Q129;vec2 New_UV_Q129;float Radial_Gradient_Q129;vec3 Radial_Dir_Q129;Move_Verts_B129(Anisotropy_Q133,position,Radius_Q147,New_P_Q129,New_UV_Q129,Radial_Gradient_Q129,Radial_Dir_Q129);vec3 Pos_World_Q115;Object_To_World_Pos_B115(New_P_Q129,Pos_World_Q115);vec4 Blob_Info_Q180;
#if BLOB_ENABLE
Blob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q177,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q180);
#else
Blob_Info_Q180=vec4(0,0,0,0);
#endif
vec4 Blob_Info_Q181;
#if BLOB_ENABLE_2
Blob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q178,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q181);
#else
Blob_Info_Q181=vec4(0,0,0,0);
#endif
float Gradient1_Q130;float Gradient2_Q130;
#if SMOOTH_EDGES
Edge_AA_Vertex_B130(Pos_World_Q115,position,normal,cameraPosition,Radial_Gradient_Q129,Radial_Dir_Q129,tangent,Gradient1_Q130,Gradient2_Q130);
#else
Gradient1_Q130=1.0;Gradient2_Q130=1.0;
#endif
vec2 Rect_UV_Q139;vec4 Rect_Parms_Q139;vec2 Scale_XY_Q139;vec2 Line_UV_Q139;Round_Rect_Vertex_B139(New_UV_Q129,Radius_Q147,0.0,Anisotropy_Q133,Gradient1_Q130,Gradient2_Q130,Rect_UV_Q139,Rect_Parms_Q139,Scale_XY_Q139,Line_UV_Q139);vec3 Line_Vertex_Q135;Line_Vertex_B135(Scale_XY_Q139,Line_UV_Q139,0.0,_Rate_,_Highlight_Transform_,Line_Vertex_Q135);vec3 Position=Pos_World_Q115;vec3 Normal=Dir_Q140;vec2 UV=Rect_UV_Q139;vec3 Tangent=Line_Vertex_Q135;vec3 Binormal=Nrm_World_Q128;vec4 Color=Out_Color_Q145;vec4 Extra1=Rect_Parms_Q139;vec4 Extra2=Blob_Info_Q180;vec4 Extra3=Blob_Info_Q181;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/fluentButton/fluentButtonMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentButtonMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.fragment.ts"),d("../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.RELATIVE_WIDTH=!0,o.ENABLE_FADE=!0,o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.edgeWidth=.04,e.edgeColor=new l.Color4(.592157,.592157,.592157,1),e.proximityMaxIntensity=.45,e.proximityFarDistance=.16,e.proximityNearRadius=1.5,e.proximityAnisotropy=1,e.selectionFuzz=.5,e.selected=0,e.selectionFade=0,e.selectionFadeSize=.3,e.selectedDistance=.08,e.selectedFadeLength=.08,e.blobIntensity=.5,e.blobFarSize=.05,e.blobNearDistance=0,e.blobFarDistance=.08,e.blobFadeLength=.08,e.leftBlobEnable=!0,e.leftBlobNearSize=.025,e.leftBlobPulse=0,e.leftBlobFade=1,e.leftBlobInnerFade=.01,e.rightBlobEnable=!0,e.rightBlobNearSize=.025,e.rightBlobPulse=0,e.rightBlobFade=1,e.rightBlobInnerFade=.01,e.activeFaceDir=new l.Vector3(0,0,-1),e.activeFaceUp=new l.Vector3(0,1,0),e.enableFade=!0,e.fadeWidth=1.5,e.smoothActiveFace=!0,e.showFrame=!1,e.useBlobTexture=!0,e.globalLeftIndexTipPosition=l.Vector3.Zero(),e.globalRightIndexTipPosition=l.Vector3.Zero(),e.alphaMode=l.Constants.ALPHA_ADD,e.disableDepthWrite=!0,e.backFaceCulling=!1,e._blobTexture=new l.Texture(_.BLOB_TEXTURE_URL,e.getScene(),!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e}return _.prototype.needAlphaBlending=function(){return!0},_.prototype.needAlphaTesting=function(){return!0},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!0,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="fluentButton",m=e.toString(),P=["world","viewProjection","cameraPosition","_Edge_Width_","_Edge_Color_","_Relative_Width_","_Proximity_Max_Intensity_","_Proximity_Far_Distance_","_Proximity_Near_Radius_","_Proximity_Anisotropy_","_Selection_Fuzz_","_Selected_","_Selection_Fade_","_Selection_Fade_Size_","_Selected_Distance_","_Selected_Fade_Length_","_Blob_Enable_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Inner_Fade_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Enable_2_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Inner_Fade_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Active_Face_Dir_","_Active_Face_Up_","_Enable_Fade_","_Fade_Width_","_Smooth_Active_Face_","_Show_Frame_","_Use_Blob_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],y=["_Blob_Texture_"],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e,this._materialContext)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=this.getScene(),a=e.materialDefines;if(a){var s=e.effect;s&&(this._activeEffect=s,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",i.getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",i.activeCamera.position),this._activeEffect.setTexture("_Blob_Texture_",this._blobTexture),this._activeEffect.setFloat("_Edge_Width_",this.edgeWidth),this._activeEffect.setColor4("_Edge_Color_",new l.Color3(this.edgeColor.r,this.edgeColor.g,this.edgeColor.b),this.edgeColor.a),this._activeEffect.setFloat("_Proximity_Max_Intensity_",this.proximityMaxIntensity),this._activeEffect.setFloat("_Proximity_Far_Distance_",this.proximityFarDistance),this._activeEffect.setFloat("_Proximity_Near_Radius_",this.proximityNearRadius),this._activeEffect.setFloat("_Proximity_Anisotropy_",this.proximityAnisotropy),this._activeEffect.setFloat("_Selection_Fuzz_",this.selectionFuzz),this._activeEffect.setFloat("_Selected_",this.selected),this._activeEffect.setFloat("_Selection_Fade_",this.selectionFade),this._activeEffect.setFloat("_Selection_Fade_Size_",this.selectionFadeSize),this._activeEffect.setFloat("_Selected_Distance_",this.selectedDistance),this._activeEffect.setFloat("_Selected_Fade_Length_",this.selectedFadeLength),this._activeEffect.setFloat("_Blob_Enable_",this.leftBlobEnable?1:0),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.leftBlobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Inner_Fade_",this.leftBlobInnerFade),this._activeEffect.setFloat("_Blob_Pulse_",this.leftBlobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.leftBlobFade),this._activeEffect.setFloat("_Blob_Enable_2_",this.rightBlobEnable?1:0),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.rightBlobNearSize),this._activeEffect.setFloat("_Blob_Inner_Fade_2_",this.rightBlobInnerFade),this._activeEffect.setFloat("_Blob_Pulse_2_",this.rightBlobPulse),this._activeEffect.setFloat("_Blob_Fade_2_",this.rightBlobFade),this._activeEffect.setVector3("_Active_Face_Dir_",this.activeFaceDir),this._activeEffect.setVector3("_Active_Face_Up_",this.activeFaceUp),this._activeEffect.setFloat("_Fade_Width_",this.fadeWidth),this._activeEffect.setFloat("_Smooth_Active_Face_",this.smoothActiveFace?1:0),this._activeEffect.setFloat("_Show_Frame_",this.showFrame?1:0),this._activeEffect.setFloat("_Use_Blob_Texture_",this.useBlobTexture?1:0),this._activeEffect.setFloat("Use_Global_Left_Index",1),this._activeEffect.setFloat("Use_Global_Right_Index",1),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",new l.Vector4(this.globalLeftIndexTipPosition.x,this.globalLeftIndexTipPosition.y,this.globalLeftIndexTipPosition.z,1)),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",new l.Vector4(this.globalRightIndexTipPosition.x,this.globalRightIndexTipPosition.y,this.globalRightIndexTipPosition.z,1)),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.FluentButtonMaterial",o},_.prototype.getClassName=function(){return"FluentButtonMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.BLOB_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-button-blob.png",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeWidth",void 0),(0,c.__decorate)([(0,l.serializeAsColor4)()],_.prototype,"edgeColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityMaxIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityNearRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityAnisotropy",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selected",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFadeSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectedDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectedFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftBlobEnable",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftBlobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftBlobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftBlobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftBlobInnerFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightBlobEnable",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightBlobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightBlobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightBlobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightBlobInnerFade",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"activeFaceDir",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"activeFaceUp",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"enableFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fadeWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"smoothActiveFace",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"showFrame",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"useBlobTexture",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"globalLeftIndexTipPosition",void 0),(0,c.__decorate)([(0,l.serializeAsVector3)()],_.prototype,"globalRightIndexTipPosition",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.FluentButtonMaterial",b)},"../../../dev/gui/src/3D/materials/fluentButton/index.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentButtonMaterial:()=>c.FluentButtonMaterial});var c=d("../../../dev/gui/src/3D/materials/fluentButton/fluentButtonMaterial.ts")},"../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentButtonPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentButtonPixelShader",g=`uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;uniform float _Edge_Width_;uniform vec4 _Edge_Color_;uniform bool _Relative_Width_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Active_Face_Dir_;uniform vec3 _Active_Face_Up_;uniform bool Enable_Fade;uniform float _Fade_Width_;uniform bool _Smooth_Active_Face_;uniform bool _Show_Frame_;uniform bool _Use_Blob_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Holo_Edge_Fragment_B35(
vec4 Edges,
float Edge_Width,
out float NotEdge)
{vec2 c=vec2(min(Edges.r,Edges.g),min(Edges.b,Edges.a));vec2 df=fwidth(c)*Edge_Width;vec2 g=clamp(c/df,0.0,1.0);NotEdge=g.x*g.y;}
void Blob_Fragment_B39(
vec2 UV,
vec3 Blob_Info,
sampler2D Blob_Texture,
out vec4 Blob_Color)
{float k=dot(UV,UV);Blob_Color=Blob_Info.y*texture(Blob_Texture,vec2(vec2(sqrt(k),Blob_Info.x).x,1.0-vec2(sqrt(k),Blob_Info.x).y))*(1.0-clamp(k,0.0,1.0));}
vec2 FilterStep(vec2 Edge,vec2 X)
{vec2 dX=max(fwidth(X),vec2(0.00001,0.00001));return clamp( (X+dX-max(Edge,X-dX))/(dX*2.0),0.0,1.0);}
void Wireframe_Fragment_B59(
vec3 Widths,
vec2 UV,
float Proximity,
vec4 Edge_Color,
out vec4 Wireframe)
{vec2 c=min(UV,vec2(1.0,1.0)-UV);vec2 g=FilterStep(Widths.xy*0.5,c); 
Wireframe=(1.0-min(g.x,g.y))*Proximity*Edge_Color;}
void Proximity_B53(
vec3 Proximity_Center,
vec3 Proximity_Center_2,
float Proximity_Max_Intensity,
float Proximity_Near_Radius,
vec3 Position,
vec3 Show_Selection,
vec4 Extra1,
float Dist_To_Face,
float Intensity,
out float Proximity)
{vec2 delta1=Extra1.xy;vec2 delta2=Extra1.zw;float d2=sqrt(min(dot(delta1,delta1),dot(delta2,delta2))+Dist_To_Face*Dist_To_Face);Proximity=Intensity*Proximity_Max_Intensity*(1.0-clamp(d2/Proximity_Near_Radius,0.0,1.0))*(1.0-Show_Selection.x)+Show_Selection.x;}
void To_XYZ_B46(
vec3 Vec3,
out float X,
out float Y,
out float Z)
{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}
void main()
{float NotEdge_Q35;
#if ENABLE_FADE
Holo_Edge_Fragment_B35(vColor,_Fade_Width_,NotEdge_Q35);
#else
NotEdge_Q35=1.0;
#endif
vec4 Blob_Color_Q39;float k=dot(vUV,vUV);vec2 blobTextureCoord=vec2(vec2(sqrt(k),vTangent.x).x,1.0-vec2(sqrt(k),vTangent.x).y);vec4 blobColor=mix(vec4(1.0,1.0,1.0,1.0)*step(1.0-vTangent.x,clamp(sqrt(k)+0.1,0.0,1.0)),texture(_Blob_Texture_,blobTextureCoord),float(_Use_Blob_Texture_));Blob_Color_Q39=vTangent.y*blobColor*(1.0-clamp(k,0.0,1.0));float Is_Quad_Q24;Is_Quad_Q24=vNormal.z;vec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));vec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));float X_Q46;float Y_Q46;float Z_Q46;To_XYZ_B46(vBinormal,X_Q46,Y_Q46,Z_Q46);float Proximity_Q53;Proximity_B53(Blob_Position_Q41,Blob_Position_Q42,_Proximity_Max_Intensity_,_Proximity_Near_Radius_,vPosition,vBinormal,vExtra1,Y_Q46,Z_Q46,Proximity_Q53);vec4 Wireframe_Q59;Wireframe_Fragment_B59(vNormal,vUV,Proximity_Q53,_Edge_Color_,Wireframe_Q59);vec4 Wire_Or_Blob_Q23=mix(Wireframe_Q59,Blob_Color_Q39,Is_Quad_Q24);vec4 Result_Q22;Result_Q22=mix(Wire_Or_Blob_Q23,vec4(0.3,0.3,0.3,0.3),float(_Show_Frame_));vec4 Final_Color_Q37=NotEdge_Q35*Result_Q22;vec4 Out_Color=Final_Color_Q37;float Clip_Threshold=0.0;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/fluentButton/shaders/fluentButton.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{fluentButtonVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="fluentButtonVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform float _Edge_Width_;uniform vec4 _Edge_Color_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Active_Face_Dir_;uniform vec3 _Active_Face_Up_;uniform bool _Enable_Fade_;uniform float _Fade_Width_;uniform bool _Smooth_Active_Face_;uniform bool _Show_Frame_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;void Blob_Vertex_B47(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
vec4 Vx_Color,
vec2 UV,
vec3 Face_Center,
vec2 Face_Size,
vec2 In_UV,
float Blob_Fade_Length,
float Selection_Fade,
float Selection_Fade_Size,
float Inner_Fade,
vec3 Active_Face_Center,
float Blob_Pulse,
float Blob_Fade,
float Blob_Enabled,
out vec3 Out_Position,
out vec2 Out_UV,
out vec3 Blob_Info)
{float blobSize,fadeIn;vec3 Hit_Position;Blob_Info=vec3(0.0,0.0,0.0);float Hit_Distance=dot(Blob_Position-Face_Center,Normal);Hit_Position=Blob_Position-Hit_Distance*Normal;float absD=abs(Hit_Distance);float lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);fadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);float farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);float size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;blobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;Blob_Info.x=lerpVal*0.5+0.5;Blob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;Blob_Info.x*=(1.0-Blob_Pulse);vec3 delta=Hit_Position-Face_Center;vec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));vec2 quadUVin=2.0*UV-1.0; 
vec2 blobXY=blobCenterXY+quadUVin*blobSize;vec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);vec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;vec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;Out_Position=mix(Position,blobCorner,Vx_Color.rrr);Out_UV=mix(In_UV,blobUV,Vx_Color.rr);}
vec2 ProjectProximity(
vec3 blobPosition,
vec3 position,
vec3 center,
vec3 dir,
vec3 xdir,
vec3 ydir,
out float vdistance
)
{vec3 delta=blobPosition-position;vec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));vdistance=abs(dot(delta,dir));return xy;}
void Proximity_Vertex_B66(
vec3 Blob_Position,
vec3 Blob_Position_2,
vec3 Active_Face_Center,
vec3 Active_Face_Dir,
vec3 Position,
float Proximity_Far_Distance,
float Relative_Scale,
float Proximity_Anisotropy,
vec3 Up,
out vec4 Extra1,
out float Distance_To_Face,
out float Intensity)
{vec3 Active_Face_Dir_X=normalize(cross(Active_Face_Dir,Up));vec3 Active_Face_Dir_Y=cross(Active_Face_Dir,Active_Face_Dir_X);float distz1,distz2;Extra1.xy=ProjectProximity(Blob_Position,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz1)/Relative_Scale;Extra1.zw=ProjectProximity(Blob_Position_2,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz2)/Relative_Scale;Distance_To_Face=dot(Active_Face_Dir,Position-Active_Face_Center);Intensity=1.0-clamp(min(distz1,distz2)/Proximity_Far_Distance,0.0,1.0);}
void Holo_Edge_Vertex_B44(
vec3 Incident,
vec3 Normal,
vec2 UV,
vec3 Tangent,
vec3 Bitangent,
bool Smooth_Active_Face,
float Active,
out vec4 Holo_Edges)
{float NdotI=dot(Incident,Normal);vec2 flip=(UV-vec2(0.5,0.5));float udot=dot(Incident,Tangent)*flip.x*NdotI;float uval=1.0-float(udot>0.0);float vdot=-dot(Incident,Bitangent)*flip.y*NdotI;float vval=1.0-float(vdot>0.0);float Smooth_And_Active=step(1.0,float(Smooth_Active_Face && Active>0.0));uval=mix(uval,max(1.0,uval),Smooth_And_Active); 
vval=mix(vval,max(1.0,vval),Smooth_And_Active);Holo_Edges=vec4(1.0,1.0,1.0,1.0)-vec4(uval*UV.x,uval*(1.0-UV.x),vval*UV.y,vval*(1.0-UV.y));}
void Object_To_World_Pos_B13(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void Choose_Blob_B38(
vec4 Vx_Color,
vec3 Position1,
vec3 Position2,
bool Blob_Enable_1,
bool Blob_Enable_2,
float Near_Size_1,
float Near_Size_2,
float Blob_Inner_Fade_1,
float Blob_Inner_Fade_2,
float Blob_Pulse_1,
float Blob_Pulse_2,
float Blob_Fade_1,
float Blob_Fade_2,
out vec3 Position,
out float Near_Size,
out float Inner_Fade,
out float Blob_Enable,
out float Fade,
out float Pulse)
{Position=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;float b1=float(Blob_Enable_1);float b2=float(Blob_Enable_2);Blob_Enable=b1+(b2-b1)*Vx_Color.g;Pulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;Fade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;Near_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;Inner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;}
void Wireframe_Vertex_B51(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
float Edge_Width,
vec2 Face_Size,
out vec3 Wire_Vx_Pos,
out vec2 UV,
out vec2 Widths)
{Widths.xy=Edge_Width/Face_Size;float x=dot(Position,Tangent);float y=dot(Position,Bitangent);float dx=0.5-abs(x);float newx=(0.5-dx*Widths.x*2.0)*sign(x);float dy=0.5-abs(y);float newy=(0.5-dy*Widths.y*2.0)*sign(y);Wire_Vx_Pos=Normal*0.5+newx*Tangent+newy*Bitangent;UV.x=dot(Wire_Vx_Pos,Tangent)+0.5;UV.y=dot(Wire_Vx_Pos,Bitangent)+0.5;}
vec2 ramp2(vec2 start,vec2 end,vec2 x)
{return clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));}
float computeSelection(
vec3 blobPosition,
vec3 normal,
vec3 tangent,
vec3 bitangent,
vec3 faceCenter,
vec2 faceSize,
float selectionFuzz,
float farDistance,
float fadeLength
)
{vec3 delta=blobPosition-faceCenter;float absD=abs(dot(delta,normal));float fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);vec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));vec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;vec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);return selectPulse.x*selectPulse.y*fadeIn;}
void Selection_Vertex_B48(
vec3 Blob_Position,
vec3 Blob_Position_2,
vec3 Face_Center,
vec2 Face_Size,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
float Selection_Fuzz,
float Selected,
float Far_Distance,
float Fade_Length,
vec3 Active_Face_Dir,
out float Show_Selection)
{float select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float Active=max(0.0,dot(Active_Face_Dir,Normal));Show_Selection=mix(max(select1,select2),1.0,Selected)*Active;}
void Proximity_Visibility_B54(
float Selection,
vec3 Proximity_Center,
vec3 Proximity_Center_2,
float Input_Width,
float Proximity_Far_Distance,
float Proximity_Radius,
vec3 Active_Face_Center,
vec3 Active_Face_Dir,
out float Width)
{vec3 boxEdges=(world*vec4(vec3(0.5,0.5,0.5),0.0)).xyz;float boxMaxSize=length(boxEdges);float d1=dot(Proximity_Center-Active_Face_Center,Active_Face_Dir);vec3 blob1=Proximity_Center-d1*Active_Face_Dir;float d2=dot(Proximity_Center_2-Active_Face_Center,Active_Face_Dir);vec3 blob2=Proximity_Center_2-d2*Active_Face_Dir;vec3 delta1=blob1-Active_Face_Center;vec3 delta2=blob2-Active_Face_Center;float dist1=dot(delta1,delta1);float dist2=dot(delta2,delta2);float nearestProxDist=sqrt(min(dist1,dist2));Width=Input_Width*(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));}
void Object_To_World_Dir_B67(
vec3 Dir_Object,
out vec3 Dir_World)
{Dir_World=(world*vec4(Dir_Object,0.0)).xyz;}
void main()
{vec3 Active_Face_Center_Q49;Active_Face_Center_Q49=(world*vec4(_Active_Face_Dir_*0.5,1.0)).xyz;vec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));vec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));vec3 Active_Face_Dir_Q64=normalize((world*vec4(_Active_Face_Dir_,0.0)).xyz);float Relative_Scale_Q57;
#if RELATIVE_WIDTH
Relative_Scale_Q57=length((world*vec4(vec3(0,1,0),0.0)).xyz);
#else
Relative_Scale_Q57=1.0;
#endif
vec3 Tangent_World_Q30;Tangent_World_Q30=(world*vec4(tangent,0.0)).xyz;vec3 Binormal_World_Q31;Binormal_World_Q31=(world*vec4((cross(normal,tangent)),0.0)).xyz;vec3 Normal_World_Q60;Normal_World_Q60=(world*vec4(normal,0.0)).xyz;vec3 Result_Q18=0.5*normal;vec3 Dir_World_Q67;Object_To_World_Dir_B67(_Active_Face_Up_,Dir_World_Q67);float Product_Q56=_Edge_Width_*Relative_Scale_Q57;vec3 Normal_World_N_Q29=normalize(Normal_World_Q60);vec3 Tangent_World_N_Q28=normalize(Tangent_World_Q30);vec3 Binormal_World_N_Q32=normalize(Binormal_World_Q31);vec3 Position_Q38;float Near_Size_Q38;float Inner_Fade_Q38;float Blob_Enable_Q38;float Fade_Q38;float Pulse_Q38;Choose_Blob_B38(color,Blob_Position_Q41,Blob_Position_Q42,_Blob_Enable_,_Blob_Enable_2_,_Blob_Near_Size_,_Blob_Near_Size_2_,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q38,Near_Size_Q38,Inner_Fade_Q38,Blob_Enable_Q38,Fade_Q38,Pulse_Q38);vec3 Face_Center_Q33;Face_Center_Q33=(world*vec4(Result_Q18,1.0)).xyz;vec2 Face_Size_Q50=vec2(length(Tangent_World_Q30),length(Binormal_World_Q31));float Show_Selection_Q48;Selection_Vertex_B48(Blob_Position_Q41,Blob_Position_Q42,Face_Center_Q33,Face_Size_Q50,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,Active_Face_Dir_Q64,Show_Selection_Q48);vec3 Normalized_Q72=normalize(Dir_World_Q67);float Active_Q34=max(0.0,dot(Active_Face_Dir_Q64,Normal_World_N_Q29));float Width_Q54;Proximity_Visibility_B54(Show_Selection_Q48,Blob_Position_Q41,Blob_Position_Q42,Product_Q56,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Active_Face_Center_Q49,Active_Face_Dir_Q64,Width_Q54);vec3 Wire_Vx_Pos_Q51;vec2 UV_Q51;vec2 Widths_Q51;Wireframe_Vertex_B51(position,normal,tangent,(cross(normal,tangent)),Width_Q54,Face_Size_Q50,Wire_Vx_Pos_Q51,UV_Q51,Widths_Q51);vec3 Vec3_Q27=vec3(Widths_Q51.x,Widths_Q51.y,color.r);vec3 Pos_World_Q13;Object_To_World_Pos_B13(Wire_Vx_Pos_Q51,Pos_World_Q13);vec3 Incident_Q36=normalize(Pos_World_Q13-cameraPosition);vec3 Out_Position_Q47;vec2 Out_UV_Q47;vec3 Blob_Info_Q47;Blob_Vertex_B47(Pos_World_Q13,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,Position_Q38,_Blob_Intensity_,Near_Size_Q38,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q33,Face_Size_Q50,UV_Q51,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q38,Active_Face_Center_Q49,Pulse_Q38,Fade_Q38,Blob_Enable_Q38,Out_Position_Q47,Out_UV_Q47,Blob_Info_Q47);vec4 Extra1_Q66;float Distance_To_Face_Q66;float Intensity_Q66;Proximity_Vertex_B66(Blob_Position_Q41,Blob_Position_Q42,Active_Face_Center_Q49,Active_Face_Dir_Q64,Pos_World_Q13,_Proximity_Far_Distance_,Relative_Scale_Q57,_Proximity_Anisotropy_,Normalized_Q72,Extra1_Q66,Distance_To_Face_Q66,Intensity_Q66);vec4 Holo_Edges_Q44;Holo_Edge_Vertex_B44(Incident_Q36,Normal_World_N_Q29,uv,Tangent_World_Q30,Binormal_World_Q31,_Smooth_Active_Face_,Active_Q34,Holo_Edges_Q44);vec3 Vec3_Q19=vec3(Show_Selection_Q48,Distance_To_Face_Q66,Intensity_Q66);vec3 Position=Out_Position_Q47;vec2 UV=Out_UV_Q47;vec3 Tangent=Blob_Info_Q47;vec3 Binormal=Vec3_Q19;vec3 Normal=Vec3_Q27;vec4 Extra1=Extra1_Q66;vec4 Color=Holo_Edges_Q44;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/handle/handleMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{HandleMaterial:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/handle/shaders/handle.vertex.ts"),d("../../../dev/gui/src/3D/materials/handle/shaders/handle.fragment.ts");var g=function(b){(0,c.__extends)(v,b);function v(_,o){var t=b.call(this,_,o,"handle",{attributes:["position"],uniforms:["worldViewProjection","color","scale","positionOffset"],needAlphaBlending:!1,needAlphaTesting:!1})||this;return t._hover=!1,t._drag=!1,t._color=new l.Color3,t._scale=1,t._lastTick=-1,t.animationLength=100,t.hoverColor=new l.Color3(0,.467,.84),t.baseColor=new l.Color3(1,1,1),t.hoverScale=.75,t.baseScale=.35,t.dragScale=.55,t._positionOffset=l.Vector3.Zero(),t._updateInterpolationTarget(),t._lastTick=Date.now(),t._onBeforeRender=t.getScene().onBeforeRenderObservable.add(function(){var e=Date.now(),i=e-t._lastTick,a=t._targetScale-t._scale,s=l.TmpColors.Color3[0].copyFrom(t._targetColor).subtractToRef(t._color,l.TmpColors.Color3[0]);t._scale=t._scale+a*i/t.animationLength,s.scaleToRef(i/t.animationLength,s),t._color.addToRef(s,t._color),t.setColor3("color",t._color),t.setFloat("scale",t._scale),t.setVector3("positionOffset",t._positionOffset),t._lastTick=e}),t}return Object.defineProperty(v.prototype,"hover",{get:function(){return this._hover},set:function(_){this._hover=_,this._updateInterpolationTarget()},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"drag",{get:function(){return this._drag},set:function(_){this._drag=_,this._updateInterpolationTarget()},enumerable:!1,configurable:!0}),v.prototype._updateInterpolationTarget=function(){this.drag?(this._targetColor=this.hoverColor,this._targetScale=this.dragScale):this.hover?(this._targetColor=this.hoverColor,this._targetScale=this.hoverScale):(this._targetColor=this.baseColor,this._targetScale=this.baseScale)},v.prototype.dispose=function(){b.prototype.dispose.call(this),this.getScene().onBeforeRenderObservable.remove(this._onBeforeRender)},v}(l.ShaderMaterial)},"../../../dev/gui/src/3D/materials/handle/index.ts":(B,E,d)=>{d.r(E),d.d(E,{HandleMaterial:()=>c.HandleMaterial});var c=d("../../../dev/gui/src/3D/materials/handle/handleMaterial.ts")},"../../../dev/gui/src/3D/materials/handle/shaders/handle.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{handlePixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="handlePixelShader",g="uniform vec3 color;void main(void) {gl_FragColor=vec4(color,1.0);}";c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/handle/shaders/handle.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{handleVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="handleVertexShader",g="precision highp float;attribute vec3 position;uniform vec3 positionOffset;uniform mat4 worldViewProjection;uniform float scale;void main(void) {vec4 vPos=vec4((vec3(position)+positionOffset)*scale,1.0);gl_Position=worldViewProjection*vPos;}";c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/index.ts":(B,E,d)=>{d.r(E),d.d(E,{FluentBackplateMaterial:()=>g.FluentBackplateMaterial,FluentButtonMaterial:()=>l.FluentButtonMaterial,FluentMaterial:()=>c.FluentMaterial,FluentMaterialDefines:()=>c.FluentMaterialDefines,HandleMaterial:()=>b.HandleMaterial,MRDLBackplateMaterial:()=>v.MRDLBackplateMaterial,MRDLSliderBarMaterial:()=>v.MRDLSliderBarMaterial,MRDLSliderThumbMaterial:()=>v.MRDLSliderThumbMaterial});var c=d("../../../dev/gui/src/3D/materials/fluent/index.ts"),l=d("../../../dev/gui/src/3D/materials/fluentButton/index.ts"),g=d("../../../dev/gui/src/3D/materials/fluentBackplate/index.ts"),b=d("../../../dev/gui/src/3D/materials/handle/index.ts"),v=d("../../../dev/gui/src/3D/materials/mrdl/index.ts")},"../../../dev/gui/src/3D/materials/mrdl/index.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLBackplateMaterial:()=>g.MRDLBackplateMaterial,MRDLSliderBarMaterial:()=>c.MRDLSliderBarMaterial,MRDLSliderThumbMaterial:()=>l.MRDLSliderThumbMaterial});var c=d("../../../dev/gui/src/3D/materials/mrdl/mrdlSliderBarMaterial.ts"),l=d("../../../dev/gui/src/3D/materials/mrdl/mrdlSliderThumbMaterial.ts"),g=d("../../../dev/gui/src/3D/materials/mrdl/mrdlBackplateMaterial.ts")},"../../../dev/gui/src/3D/materials/mrdl/mrdlBackglowMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLBackglowMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.bevelRadius=.16,e.lineWidth=.16,e.absoluteSizes=!1,e.tuningMotion=0,e.motion=1,e.maxIntensity=.7,e.intensityFadeInExponent=2,e.outerFuzzStart=.04,e.outerFuzzEnd=.04,e.color=new l.Color4(.682353,.698039,1,1),e.innerColor=new l.Color4(.356863,.392157,.796078,1),e.blendExponent=1.5,e.falloff=2,e.bias=.5,e.alphaMode=l.Constants.ALPHA_ADD,e.disableDepthWrite=!0,e.backFaceCulling=!1,e}return _.prototype.needAlphaBlending=function(){return!0},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlBackglow",m=e.toString(),P=["world","worldView","worldViewProjection","view","projection","viewProjection","cameraPosition","_Bevel_Radius_","_Line_Width_","_Absolute_Sizes_","_Tuning_Motion_","_Motion_","_Max_Intensity_","_Intensity_Fade_In_Exponent_","_Outer_Fuzz_Start_","_Outer_Fuzz_End_","_Color_","_Inner_Color_","_Blend_Exponent_","_Falloff_","_Bias_"],y=[],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=this.getScene(),a=e.materialDefines;if(a){var s=e.effect;s&&(this._activeEffect=s,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",i.getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",i.activeCamera.position),this._activeEffect.setFloat("_Bevel_Radius_",this.bevelRadius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Absolute_Sizes_",this.absoluteSizes?1:0),this._activeEffect.setFloat("_Tuning_Motion_",this.tuningMotion),this._activeEffect.setFloat("_Motion_",this.motion),this._activeEffect.setFloat("_Max_Intensity_",this.maxIntensity),this._activeEffect.setFloat("_Intensity_Fade_In_Exponent_",this.intensityFadeInExponent),this._activeEffect.setFloat("_Outer_Fuzz_Start_",this.outerFuzzStart),this._activeEffect.setFloat("_Outer_Fuzz_End_",this.outerFuzzEnd),this._activeEffect.setDirectColor4("_Color_",this.color),this._activeEffect.setDirectColor4("_Inner_Color_",this.innerColor),this._activeEffect.setFloat("_Blend_Exponent_",this.blendExponent),this._activeEffect.setFloat("_Falloff_",this.falloff),this._activeEffect.setFloat("_Bias_",this.bias),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=l.SerializationHelper.Serialize(this);return o.customType="BABYLON.MRDLBackglowMaterial",o},_.prototype.getClassName=function(){return"MRDLBackglowMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"absoluteSizes",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"tuningMotion",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"motion",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"maxIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"intensityFadeInExponent",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"outerFuzzStart",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"outerFuzzEnd",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"color",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"innerColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blendExponent",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"falloff",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bias",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLBackglowMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/mrdlBackplateMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLBackplateMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.IRIDESCENCE_ENABLE=!0,o.SMOOTH_EDGES=!0,o._needNormals=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.radius=.3,e.lineWidth=.003,e.absoluteSizes=!1,e._filterWidth=1,e.baseColor=new l.Color4(0,0,0,1),e.lineColor=new l.Color4(.2,.262745,.4,1),e.radiusTopLeft=1,e.radiusTopRight=1,e.radiusBottomLeft=1,e.radiusBottomRight=1,e._rate=0,e.highlightColor=new l.Color4(.239216,.435294,.827451,1),e.highlightWidth=0,e._highlightTransform=new l.Vector4(1,1,0,0),e._highlight=1,e.iridescenceIntensity=.45,e.iridescenceEdgeIntensity=1,e.iridescenceTint=new l.Color4(1,1,1,1),e._angle=-45,e.fadeOut=1,e._reflected=!0,e._frequency=1,e._verticalOffset=0,e.gradientColor=new l.Color4(.74902,.74902,.74902,1),e.topLeftGradientColor=new l.Color4(.00784314,.294118,.580392,1),e.topRightGradientColor=new l.Color4(.305882,0,1,1),e.bottomLeftGradientColor=new l.Color4(.133333,.258824,.992157,1),e.bottomRightGradientColor=new l.Color4(.176471,.176471,.619608,1),e.edgeWidth=.5,e.edgePower=1,e.edgeLineGradientBlend=.5,e.alphaMode=l.Constants.ALPHA_DISABLE,e.backFaceCulling=!1,e._iridescentMapTexture=new l.Texture(_.IRIDESCENT_MAP_TEXTURE_URL,e.getScene(),!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e}return _.prototype.needAlphaBlending=function(){return!1},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlBackplate",m=e.toString(),P=["world","viewProjection","cameraPosition","_Radius_","_Line_Width_","_Absolute_Sizes_","_Filter_Width_","_Base_Color_","_Line_Color_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Rate_","_Highlight_Color_","_Highlight_Width_","_Highlight_Transform_","_Highlight_","_Iridescence_Intensity_","_Iridescence_Edge_Intensity_","_Iridescence_Tint_","_Iridescent_Map_","_Angle_","_Reflected_","_Frequency_","_Vertical_Offset_","_Gradient_Color_","_Top_Left_","_Top_Right_","_Bottom_Left_","_Bottom_Right_","_Edge_Width_","_Edge_Power_","_Line_Gradient_Blend_","_Fade_Out_"],y=["_Iridescent_Map_"],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=e.materialDefines;if(i){var a=e.effect;a&&(this._activeEffect=a,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Absolute_Sizes_",this.absoluteSizes?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setDirectColor4("_Base_Color_",this.baseColor),this._activeEffect.setDirectColor4("_Line_Color_",this.lineColor),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Rate_",this._rate),this._activeEffect.setDirectColor4("_Highlight_Color_",this.highlightColor),this._activeEffect.setFloat("_Highlight_Width_",this.highlightWidth),this._activeEffect.setVector4("_Highlight_Transform_",this._highlightTransform),this._activeEffect.setFloat("_Highlight_",this._highlight),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setFloat("_Iridescence_Edge_Intensity_",this.iridescenceEdgeIntensity),this._activeEffect.setDirectColor4("_Iridescence_Tint_",this.iridescenceTint),this._activeEffect.setTexture("_Iridescent_Map_",this._iridescentMapTexture),this._activeEffect.setFloat("_Angle_",this._angle),this._activeEffect.setFloat("_Reflected_",this._reflected?1:0),this._activeEffect.setFloat("_Frequency_",this._frequency),this._activeEffect.setFloat("_Vertical_Offset_",this._verticalOffset),this._activeEffect.setDirectColor4("_Gradient_Color_",this.gradientColor),this._activeEffect.setDirectColor4("_Top_Left_",this.topLeftGradientColor),this._activeEffect.setDirectColor4("_Top_Right_",this.topRightGradientColor),this._activeEffect.setDirectColor4("_Bottom_Left_",this.bottomLeftGradientColor),this._activeEffect.setDirectColor4("_Bottom_Right_",this.bottomRightGradientColor),this._activeEffect.setFloat("_Edge_Width_",this.edgeWidth),this._activeEffect.setFloat("_Edge_Power_",this.edgePower),this._activeEffect.setFloat("_Line_Gradient_Blend_",this.edgeLineGradientBlend),this._activeEffect.setFloat("_Fade_Out_",this.fadeOut),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.MRDLBackplateMaterial",o},_.prototype.getClassName=function(){return"MRDLBackplateMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.IRIDESCENT_MAP_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-backplate-iridescence.png",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"absoluteSizes",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"baseColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"highlightColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"highlightWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceEdgeIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceTint",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fadeOut",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"gradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"topLeftGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"topRightGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bottomLeftGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bottomRightGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgePower",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeLineGradientBlend",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLBackplateMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/mrdlFrontplateMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLFrontplateMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.SMOOTH_EDGES=!0,o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.radius=.12,e.lineWidth=.01,e.relativeToHeight=!1,e._filterWidth=1,e.edgeColor=new l.Color4(.53,.53,.53,1),e.blobEnable=!0,e.blobPosition=new l.Vector3(100,100,100),e.blobIntensity=.5,e.blobNearSize=.032,e.blobFarSize=.048,e.blobNearDistance=.008,e.blobFarDistance=.064,e.blobFadeLength=.04,e.blobInnerFade=.01,e.blobPulse=0,e.blobFade=1,e.blobPulseMaxSize=.05,e.blobEnable2=!0,e.blobPosition2=new l.Vector3(10,10.1,-.6),e.blobNearSize2=.008,e.blobInnerFade2=.1,e.blobPulse2=0,e.blobFade2=1,e.gazeIntensity=.8,e.gazeFocus=0,e.selectionFuzz=.5,e.selected=1,e.selectionFade=.2,e.selectionFadeSize=0,e.selectedDistance=.08,e.selectedFadeLength=.08,e.proximityMaxIntensity=.45,e.proximityFarDistance=.16,e.proximityNearRadius=.016,e.proximityAnisotropy=1,e.useGlobalLeftIndex=!0,e.useGlobalRightIndex=!0,e.fadeOut=1,e.alphaMode=l.Constants.ALPHA_ADD,e.disableDepthWrite=!0,e.backFaceCulling=!1,e._blobTexture=new l.Texture(_.BLOB_TEXTURE_URL,t,!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e}return _.prototype.needAlphaBlending=function(){return!0},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlFrontplate",m=e.toString(),P=["world","worldView","worldViewProjection","view","projection","viewProjection","cameraPosition","_Radius_","_Line_Width_","_Relative_To_Height_","_Filter_Width_","_Edge_Color_","_Fade_Out_","_Smooth_Edges_","_Blob_Enable_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Inner_Fade_","_Blob_Pulse_","_Blob_Fade_","_Blob_Pulse_Max_Size_","_Blob_Enable_2_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Inner_Fade_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Gaze_Intensity_","_Gaze_Focus_","_Blob_Texture_","_Selection_Fuzz_","_Selected_","_Selection_Fade_","_Selection_Fade_Size_","_Selected_Distance_","_Selected_Fade_Length_","_Proximity_Max_Intensity_","_Proximity_Far_Distance_","_Proximity_Near_Radius_","_Proximity_Anisotropy_","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","_Use_Global_Left_Index_","_Use_Global_Right_Index_"],y=[],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=this.getScene(),a=e.materialDefines;if(a){var s=e.effect;s&&(this._activeEffect=s,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",i.getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",i.activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Relative_To_Height_",this.relativeToHeight?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setDirectColor4("_Edge_Color_",this.edgeColor),this._activeEffect.setFloat("_Fade_Out_",this.fadeOut),this._activeEffect.setFloat("_Blob_Enable_",this.blobEnable?1:0),this._activeEffect.setVector3("_Blob_Position_",this.blobPosition),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Inner_Fade_",this.blobInnerFade),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setFloat("_Blob_Pulse_Max_Size_",this.blobPulseMaxSize),this._activeEffect.setFloat("_Blob_Enable_2_",this.blobEnable2?1:0),this._activeEffect.setVector3("_Blob_Position_2_",this.blobPosition2),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Inner_Fade_2_",this.blobInnerFade2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setFloat("_Gaze_Intensity_",this.gazeIntensity),this._activeEffect.setFloat("_Gaze_Focus_",this.gazeFocus),this._activeEffect.setTexture("_Blob_Texture_",this._blobTexture),this._activeEffect.setFloat("_Selection_Fuzz_",this.selectionFuzz),this._activeEffect.setFloat("_Selected_",this.selected),this._activeEffect.setFloat("_Selection_Fade_",this.selectionFade),this._activeEffect.setFloat("_Selection_Fade_Size_",this.selectionFadeSize),this._activeEffect.setFloat("_Selected_Distance_",this.selectedDistance),this._activeEffect.setFloat("_Selected_Fade_Length_",this.selectedFadeLength),this._activeEffect.setFloat("_Proximity_Max_Intensity_",this.proximityMaxIntensity),this._activeEffect.setFloat("_Proximity_Far_Distance_",this.proximityFarDistance),this._activeEffect.setFloat("_Proximity_Near_Radius_",this.proximityNearRadius),this._activeEffect.setFloat("_Proximity_Anisotropy_",this.proximityAnisotropy),this._activeEffect.setFloat("_Use_Global_Left_Index_",this.useGlobalLeftIndex?1:0),this._activeEffect.setFloat("_Use_Global_Right_Index_",this.useGlobalRightIndex?1:0),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=l.SerializationHelper.Serialize(this);return o.customType="BABYLON.MRDLFrontplateMaterial",o},_.prototype.getClassName=function(){return"MRDLFrontplateMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.BLOB_TEXTURE_URL="",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"lineWidth",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"relativeToHeight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobEnable",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobInnerFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulseMaxSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobEnable2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobInnerFade2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"gazeIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"gazeFocus",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selected",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectionFadeSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectedDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"selectedFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityMaxIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityNearRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"proximityAnisotropy",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"useGlobalLeftIndex",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"useGlobalRightIndex",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLFrontplateMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/mrdlInnerquadMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLInnerquadMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.color=new l.Color4(1,1,1,.05),e.radius=.12,e.fixedRadius=!0,e._filterWidth=1,e.glowFraction=0,e.glowMax=.5,e.glowFalloff=2,e.alphaMode=l.Constants.ALPHA_COMBINE,e.backFaceCulling=!1,e}return _.prototype.needAlphaBlending=function(){return!0},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!0,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlInnerquad",m=e.toString(),P=["world","worldView","worldViewProjection","view","projection","viewProjection","cameraPosition","_Color_","_Radius_","_Fixed_Radius_","_Filter_Width_","_Glow_Fraction_","_Glow_Max_","_Glow_Falloff_"],y=[],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=this.getScene(),a=e.materialDefines;if(a){var s=e.effect;s&&(this._activeEffect=s,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",i.getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",i.activeCamera.position),this._activeEffect.setDirectColor4("_Color_",this.color),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Fixed_Radius_",this.fixedRadius?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setFloat("_Glow_Fraction_",this.glowFraction),this._activeEffect.setFloat("_Glow_Max_",this.glowMax),this._activeEffect.setFloat("_Glow_Falloff_",this.glowFalloff),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o)},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=l.SerializationHelper.Serialize(this);return o.customType="BABYLON.MRDLInnerquadMaterial",o},_.prototype.getClassName=function(){return"MRDLInnerquadMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},(0,c.__decorate)([(0,l.serialize)()],_.prototype,"color",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fixedRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"glowFraction",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"glowMax",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"glowFalloff",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLInnerquadMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/mrdlSliderBarMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLSliderBarMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.SKY_ENABLED=!0,o.BLOB_ENABLE_2=!0,o.IRIDESCENCE_ENABLED=!0,o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.radius=.6,e.bevelFront=.6,e.bevelFrontStretch=.077,e.bevelBack=0,e.bevelBackStretch=0,e.radiusTopLeft=1,e.radiusTopRight=1,e.radiusBottomLeft=1,e.radiusBottomRight=1,e.bulgeEnabled=!1,e.bulgeHeight=-.323,e.bulgeRadius=.73,e.sunIntensity=1.102,e.sunTheta=.76,e.sunPhi=.526,e.indirectDiffuse=.658,e.albedo=new l.Color4(.0117647,.505882,.996078,1),e.specular=0,e.shininess=10,e.sharpness=0,e.subsurface=0,e.leftGradientColor=new l.Color4(.0117647,.505882,.996078,1),e.rightGradientColor=new l.Color4(.0117647,.505882,.996078,1),e.reflection=.749,e.frontReflect=0,e.edgeReflect=.09,e.power=8.13,e.skyColor=new l.Color4(.0117647,.964706,.996078,1),e.horizonColor=new l.Color4(.0117647,.333333,.996078,1),e.groundColor=new l.Color4(0,.254902,.996078,1),e.horizonPower=1,e.width=.02,e.fuzz=.5,e.minFuzz=.001,e.clipFade=.01,e.hueShift=0,e.saturationShift=0,e.valueShift=0,e.blobPosition=new l.Vector3(0,0,.1),e.blobIntensity=.5,e.blobNearSize=.01,e.blobFarSize=.03,e.blobNearDistance=0,e.blobFarDistance=.08,e.blobFadeLength=.576,e.blobPulse=0,e.blobFade=1,e.blobPosition2=new l.Vector3(.2,0,.1),e.blobNearSize2=.01,e.blobPulse2=0,e.blobFade2=1,e.blobTexture=new l.Texture("",e.getScene()),e.leftIndexPosition=new l.Vector3(0,0,1),e.rightIndexPosition=new l.Vector3(-1,-1,-1),e.leftIndexMiddlePosition=new l.Vector3(0,0,0),e.rightIndexMiddlePosition=new l.Vector3(0,0,0),e.decalScaleXY=new l.Vector2(1.5,1.5),e.decalFrontOnly=!0,e.rimIntensity=.287,e.rimHueShift=0,e.rimSaturationShift=0,e.rimValueShift=-1,e.iridescenceIntensity=0,e.useGlobalLeftIndex=1,e.useGlobalRightIndex=1,e.globalLeftIndexTipProximity=0,e.globalRightIndexTipProximity=0,e.globalLeftIndexTipPosition=new l.Vector4(.5,0,-.55,1),e.globaRightIndexTipPosition=new l.Vector4(0,0,0,1),e.globalLeftThumbTipPosition=new l.Vector4(.5,0,-.55,1),e.globalRightThumbTipPosition=new l.Vector4(0,0,0,1),e.globalLeftIndexMiddlePosition=new l.Vector4(.5,0,-.55,1),e.globalRightIndexMiddlePosition=new l.Vector4(0,0,0,1),e.alphaMode=l.Constants.ALPHA_DISABLE,e.backFaceCulling=!1,e._blueGradientTexture=new l.Texture(_.BLUE_GRADIENT_TEXTURE_URL,e.getScene(),!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e._decalTexture=new l.Texture("",e.getScene()),e._reflectionMapTexture=new l.Texture("",e.getScene()),e._indirectEnvTexture=new l.Texture("",e.getScene()),e}return _.prototype.needAlphaBlending=function(){return!1},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlSliderBar",m=e.toString(),P=["world","viewProjection","cameraPosition","_Radius_","_Bevel_Front_","_Bevel_Front_Stretch_","_Bevel_Back_","_Bevel_Back_Stretch_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Bulge_Enabled_","_Bulge_Height_","_Bulge_Radius_","_Sun_Intensity_","_Sun_Theta_","_Sun_Phi_","_Indirect_Diffuse_","_Albedo_","_Specular_","_Shininess_","_Sharpness_","_Subsurface_","_Left_Color_","_Right_Color_","_Reflection_","_Front_Reflect_","_Edge_Reflect_","_Power_","_Sky_Color_","_Horizon_Color_","_Ground_Color_","_Horizon_Power_","_Reflection_Map_","_Indirect_Environment_","_Width_","_Fuzz_","_Min_Fuzz_","_Clip_Fade_","_Hue_Shift_","_Saturation_Shift_","_Value_Shift_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Left_Index_Pos_","_Right_Index_Pos_","_Left_Index_Middle_Pos_","_Right_Index_Middle_Pos_","_Decal_","_Decal_Scale_XY_","_Decal_Front_Only_","_Rim_Intensity_","_Rim_Texture_","_Rim_Hue_Shift_","_Rim_Saturation_Shift_","_Rim_Value_Shift_","_Iridescence_Intensity_","_Iridescence_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Middle_Position;","Global_Right_Index_Middle_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],y=["_Rim_Texture_","_Iridescence_Texture_"],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e,this._materialContext)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=e.materialDefines;if(i){var a=e.effect;a&&(this._activeEffect=a,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Bevel_Front_",this.bevelFront),this._activeEffect.setFloat("_Bevel_Front_Stretch_",this.bevelFrontStretch),this._activeEffect.setFloat("_Bevel_Back_",this.bevelBack),this._activeEffect.setFloat("_Bevel_Back_Stretch_",this.bevelBackStretch),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Bulge_Enabled_",this.bulgeEnabled?1:0),this._activeEffect.setFloat("_Bulge_Height_",this.bulgeHeight),this._activeEffect.setFloat("_Bulge_Radius_",this.bulgeRadius),this._activeEffect.setFloat("_Sun_Intensity_",this.sunIntensity),this._activeEffect.setFloat("_Sun_Theta_",this.sunTheta),this._activeEffect.setFloat("_Sun_Phi_",this.sunPhi),this._activeEffect.setFloat("_Indirect_Diffuse_",this.indirectDiffuse),this._activeEffect.setDirectColor4("_Albedo_",this.albedo),this._activeEffect.setFloat("_Specular_",this.specular),this._activeEffect.setFloat("_Shininess_",this.shininess),this._activeEffect.setFloat("_Sharpness_",this.sharpness),this._activeEffect.setFloat("_Subsurface_",this.subsurface),this._activeEffect.setDirectColor4("_Left_Color_",this.leftGradientColor),this._activeEffect.setDirectColor4("_Right_Color_",this.rightGradientColor),this._activeEffect.setFloat("_Reflection_",this.reflection),this._activeEffect.setFloat("_Front_Reflect_",this.frontReflect),this._activeEffect.setFloat("_Edge_Reflect_",this.edgeReflect),this._activeEffect.setFloat("_Power_",this.power),this._activeEffect.setDirectColor4("_Sky_Color_",this.skyColor),this._activeEffect.setDirectColor4("_Horizon_Color_",this.horizonColor),this._activeEffect.setDirectColor4("_Ground_Color_",this.groundColor),this._activeEffect.setFloat("_Horizon_Power_",this.horizonPower),this._activeEffect.setTexture("_Reflection_Map_",this._reflectionMapTexture),this._activeEffect.setTexture("_Indirect_Environment_",this._indirectEnvTexture),this._activeEffect.setFloat("_Width_",this.width),this._activeEffect.setFloat("_Fuzz_",this.fuzz),this._activeEffect.setFloat("_Min_Fuzz_",this.minFuzz),this._activeEffect.setFloat("_Clip_Fade_",this.clipFade),this._activeEffect.setFloat("_Hue_Shift_",this.hueShift),this._activeEffect.setFloat("_Saturation_Shift_",this.saturationShift),this._activeEffect.setFloat("_Value_Shift_",this.valueShift),this._activeEffect.setVector3("_Blob_Position_",this.blobPosition),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this.blobTexture),this._activeEffect.setVector3("_Blob_Position_2_",this.blobPosition2),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setVector3("_Left_Index_Pos_",this.leftIndexPosition),this._activeEffect.setVector3("_Right_Index_Pos_",this.rightIndexPosition),this._activeEffect.setVector3("_Left_Index_Middle_Pos_",this.leftIndexMiddlePosition),this._activeEffect.setVector3("_Right_Index_Middle_Pos_",this.rightIndexMiddlePosition),this._activeEffect.setTexture("_Decal_",this._decalTexture),this._activeEffect.setVector2("_Decal_Scale_XY_",this.decalScaleXY),this._activeEffect.setFloat("_Decal_Front_Only_",this.decalFrontOnly?1:0),this._activeEffect.setFloat("_Rim_Intensity_",this.rimIntensity),this._activeEffect.setTexture("_Rim_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("_Rim_Hue_Shift_",this.rimHueShift),this._activeEffect.setFloat("_Rim_Saturation_Shift_",this.rimSaturationShift),this._activeEffect.setFloat("_Rim_Value_Shift_",this.rimValueShift),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setTexture("_Iridescence_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("Use_Global_Left_Index",this.useGlobalLeftIndex),this._activeEffect.setFloat("Use_Global_Right_Index",this.useGlobalRightIndex),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this.globalLeftIndexTipPosition),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this.globaRightIndexTipPosition),this._activeEffect.setVector4("Global_Left_Thumb_Tip_Position",this.globalLeftThumbTipPosition),this._activeEffect.setVector4("Global_Right_Thumb_Tip_Position",this.globalRightThumbTipPosition),this._activeEffect.setVector4("Global_Left_Index_Middle_Position",this.globalLeftIndexMiddlePosition),this._activeEffect.setVector4("Global_Right_Index_Middle_Position",this.globalRightIndexMiddlePosition),this._activeEffect.setFloat("Global_Left_Index_Tip_Proximity",this.globalLeftIndexTipProximity),this._activeEffect.setFloat("Global_Right_Index_Tip_Proximity",this.globalRightIndexTipProximity),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o),this._reflectionMapTexture.dispose(),this._indirectEnvTexture.dispose(),this._blueGradientTexture.dispose(),this._decalTexture.dispose()},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.MRDLSliderBarMaterial",o},_.prototype.getClassName=function(){return"MRDLSliderBarMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.BLUE_GRADIENT_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelFront",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelFrontStretch",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelBack",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelBackStretch",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeEnabled",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeHeight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunTheta",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunPhi",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"indirectDiffuse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"albedo",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"specular",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"shininess",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sharpness",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"subsurface",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"reflection",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"frontReflect",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeReflect",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"power",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"skyColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"horizonColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"groundColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"horizonPower",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"width",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"minFuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"clipFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"hueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"saturationShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"valueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobTexture",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftIndexPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightIndexPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftIndexMiddlePosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightIndexMiddlePosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"decalScaleXY",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"decalFrontOnly",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimHueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimSaturationShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimValueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceIntensity",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLSliderBarMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/mrdlSliderThumbMaterial.ts":(B,E,d)=>{d.r(E),d.d(E,{MRDLSliderThumbMaterial:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter");d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.fragment.ts"),d("../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.vertex.ts");var g=function(v){(0,c.__extends)(_,v);function _(){var o=v.call(this)||this;return o.SKY_ENABLED=!0,o.BLOB_ENABLE_2=!0,o.IRIDESCENCE_ENABLED=!0,o._needNormals=!0,o._needUVs=!0,o.rebuild(),o}return _}(l.MaterialDefines),b=function(v){(0,c.__extends)(_,v);function _(o,t){var e=v.call(this,o,t)||this;return e.radius=.157,e.bevelFront=.065,e.bevelFrontStretch=.077,e.bevelBack=.031,e.bevelBackStretch=0,e.radiusTopLeft=1,e.radiusTopRight=1,e.radiusBottomLeft=1,e.radiusBottomRight=1,e.bulgeEnabled=!1,e.bulgeHeight=-.323,e.bulgeRadius=.73,e.sunIntensity=2,e.sunTheta=.937,e.sunPhi=.555,e.indirectDiffuse=1,e.albedo=new l.Color4(.0117647,.505882,.996078,1),e.specular=0,e.shininess=10,e.sharpness=0,e.subsurface=.31,e.leftGradientColor=new l.Color4(.0117647,.505882,.996078,1),e.rightGradientColor=new l.Color4(.0117647,.505882,.996078,1),e.reflection=.749,e.frontReflect=0,e.edgeReflect=.09,e.power=8.1,e.skyColor=new l.Color4(.0117647,.960784,.996078,1),e.horizonColor=new l.Color4(.0117647,.333333,.996078,1),e.groundColor=new l.Color4(0,.254902,.996078,1),e.horizonPower=1,e.width=.02,e.fuzz=.5,e.minFuzz=.001,e.clipFade=.01,e.hueShift=0,e.saturationShift=0,e.valueShift=0,e.blobPosition=new l.Vector3(0,0,.1),e.blobIntensity=.5,e.blobNearSize=.01,e.blobFarSize=.03,e.blobNearDistance=0,e.blobFarDistance=.08,e.blobFadeLength=.576,e.blobPulse=0,e.blobFade=1,e.blobPosition2=new l.Vector3(.2,0,.1),e.blobNearSize2=.01,e.blobPulse2=0,e.blobFade2=1,e.blobTexture=new l.Texture("",e.getScene()),e.leftIndexPosition=new l.Vector3(0,0,1),e.rightIndexPosition=new l.Vector3(-1,-1,-1),e.leftIndexMiddlePosition=new l.Vector3(0,0,0),e.rightIndexMiddlePosition=new l.Vector3(0,0,0),e.decalScaleXY=new l.Vector2(1.5,1.5),e.decalFrontOnly=!0,e.rimIntensity=.287,e.rimHueShift=0,e.rimSaturationShift=0,e.rimValueShift=-1,e.iridescenceIntensity=0,e.useGlobalLeftIndex=1,e.useGlobalRightIndex=1,e.globalLeftIndexTipProximity=0,e.globalRightIndexTipProximity=0,e.globalLeftIndexTipPosition=new l.Vector4(.5,0,-.55,1),e.globaRightIndexTipPosition=new l.Vector4(0,0,0,1),e.globalLeftThumbTipPosition=new l.Vector4(.5,0,-.55,1),e.globalRightThumbTipPosition=new l.Vector4(0,0,0,1),e.globalLeftIndexMiddlePosition=new l.Vector4(.5,0,-.55,1),e.globalRightIndexMiddlePosition=new l.Vector4(0,0,0,1),e.alphaMode=l.Constants.ALPHA_DISABLE,e.backFaceCulling=!1,e._blueGradientTexture=new l.Texture(_.BLUE_GRADIENT_TEXTURE_URL,t,!0,!1,l.Texture.NEAREST_SAMPLINGMODE),e._decalTexture=new l.Texture("",e.getScene()),e._reflectionMapTexture=new l.Texture("",e.getScene()),e._indirectEnvTexture=new l.Texture("",e.getScene()),e}return _.prototype.needAlphaBlending=function(){return!1},_.prototype.needAlphaTesting=function(){return!1},_.prototype.getAlphaTestTexture=function(){return null},_.prototype.isReadyForSubMesh=function(o,t){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new g);var e=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=i.getEngine();if(l.MaterialHelper.PrepareDefinesForAttributes(o,e,!1,!1),e.isDirty){e.markAsProcessed(),i.resetCachedMaterial();var s=new l.EffectFallbacks;e.FOG&&s.addFallback(1,"FOG"),l.MaterialHelper.HandleFallbacksForShadows(e,s),e.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var u=[l.VertexBuffer.PositionKind];e.NORMAL&&u.push(l.VertexBuffer.NormalKind),e.UV1&&u.push(l.VertexBuffer.UVKind),e.UV2&&u.push(l.VertexBuffer.UV2Kind),e.VERTEXCOLOR&&u.push(l.VertexBuffer.ColorKind),e.TANGENT&&u.push(l.VertexBuffer.TangentKind),l.MaterialHelper.PrepareAttributesForInstances(u,e);var f="mrdlSliderThumb",m=e.toString(),P=["world","viewProjection","cameraPosition","_Radius_","_Bevel_Front_","_Bevel_Front_Stretch_","_Bevel_Back_","_Bevel_Back_Stretch_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Bulge_Enabled_","_Bulge_Height_","_Bulge_Radius_","_Sun_Intensity_","_Sun_Theta_","_Sun_Phi_","_Indirect_Diffuse_","_Albedo_","_Specular_","_Shininess_","_Sharpness_","_Subsurface_","_Left_Color_","_Right_Color_","_Reflection_","_Front_Reflect_","_Edge_Reflect_","_Power_","_Sky_Color_","_Horizon_Color_","_Ground_Color_","_Horizon_Power_","_Reflection_Map_","_Indirect_Environment_","_Width_","_Fuzz_","_Min_Fuzz_","_Clip_Fade_","_Hue_Shift_","_Saturation_Shift_","_Value_Shift_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Left_Index_Pos_","_Right_Index_Pos_","_Left_Index_Middle_Pos_","_Right_Index_Middle_Pos_","_Decal_","_Decal_Scale_XY_","_Decal_Front_Only_","_Rim_Intensity_","_Rim_Texture_","_Rim_Hue_Shift_","_Rim_Saturation_Shift_","_Rim_Value_Shift_","_Iridescence_Intensity_","_Iridescence_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Middle_Position;","Global_Right_Index_Middle_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],y=["_Rim_Texture_","_Iridescence_Texture_"],M=new Array;l.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:e,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect(f,{attributes:u,uniformsNames:P,uniformBuffersNames:M,samplers:y,defines:m,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},a),e)}return!t.effect||!t.effect.isReady()?!1:(e._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},_.prototype.bindForSubMesh=function(o,t,e){var i=e.materialDefines;if(i){var a=e.effect;a&&(this._activeEffect=a,this.bindOnlyWorldMatrix(o),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Bevel_Front_",this.bevelFront),this._activeEffect.setFloat("_Bevel_Front_Stretch_",this.bevelFrontStretch),this._activeEffect.setFloat("_Bevel_Back_",this.bevelBack),this._activeEffect.setFloat("_Bevel_Back_Stretch_",this.bevelBackStretch),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Bulge_Enabled_",this.bulgeEnabled?1:0),this._activeEffect.setFloat("_Bulge_Height_",this.bulgeHeight),this._activeEffect.setFloat("_Bulge_Radius_",this.bulgeRadius),this._activeEffect.setFloat("_Sun_Intensity_",this.sunIntensity),this._activeEffect.setFloat("_Sun_Theta_",this.sunTheta),this._activeEffect.setFloat("_Sun_Phi_",this.sunPhi),this._activeEffect.setFloat("_Indirect_Diffuse_",this.indirectDiffuse),this._activeEffect.setDirectColor4("_Albedo_",this.albedo),this._activeEffect.setFloat("_Specular_",this.specular),this._activeEffect.setFloat("_Shininess_",this.shininess),this._activeEffect.setFloat("_Sharpness_",this.sharpness),this._activeEffect.setFloat("_Subsurface_",this.subsurface),this._activeEffect.setDirectColor4("_Left_Color_",this.leftGradientColor),this._activeEffect.setDirectColor4("_Right_Color_",this.rightGradientColor),this._activeEffect.setFloat("_Reflection_",this.reflection),this._activeEffect.setFloat("_Front_Reflect_",this.frontReflect),this._activeEffect.setFloat("_Edge_Reflect_",this.edgeReflect),this._activeEffect.setFloat("_Power_",this.power),this._activeEffect.setDirectColor4("_Sky_Color_",this.skyColor),this._activeEffect.setDirectColor4("_Horizon_Color_",this.horizonColor),this._activeEffect.setDirectColor4("_Ground_Color_",this.groundColor),this._activeEffect.setFloat("_Horizon_Power_",this.horizonPower),this._activeEffect.setTexture("_Reflection_Map_",this._reflectionMapTexture),this._activeEffect.setTexture("_Indirect_Environment_",this._indirectEnvTexture),this._activeEffect.setFloat("_Width_",this.width),this._activeEffect.setFloat("_Fuzz_",this.fuzz),this._activeEffect.setFloat("_Min_Fuzz_",this.minFuzz),this._activeEffect.setFloat("_Clip_Fade_",this.clipFade),this._activeEffect.setFloat("_Hue_Shift_",this.hueShift),this._activeEffect.setFloat("_Saturation_Shift_",this.saturationShift),this._activeEffect.setFloat("_Value_Shift_",this.valueShift),this._activeEffect.setVector3("_Blob_Position_",this.blobPosition),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this.blobTexture),this._activeEffect.setVector3("_Blob_Position_2_",this.blobPosition2),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setVector3("_Left_Index_Pos_",this.leftIndexPosition),this._activeEffect.setVector3("_Right_Index_Pos_",this.rightIndexPosition),this._activeEffect.setVector3("_Left_Index_Middle_Pos_",this.leftIndexMiddlePosition),this._activeEffect.setVector3("_Right_Index_Middle_Pos_",this.rightIndexMiddlePosition),this._activeEffect.setTexture("_Decal_",this._decalTexture),this._activeEffect.setVector2("_Decal_Scale_XY_",this.decalScaleXY),this._activeEffect.setFloat("_Decal_Front_Only_",this.decalFrontOnly?1:0),this._activeEffect.setFloat("_Rim_Intensity_",this.rimIntensity),this._activeEffect.setTexture("_Rim_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("_Rim_Hue_Shift_",this.rimHueShift),this._activeEffect.setFloat("_Rim_Saturation_Shift_",this.rimSaturationShift),this._activeEffect.setFloat("_Rim_Value_Shift_",this.rimValueShift),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setTexture("_Iridescence_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("Use_Global_Left_Index",this.useGlobalLeftIndex),this._activeEffect.setFloat("Use_Global_Right_Index",this.useGlobalRightIndex),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this.globalLeftIndexTipPosition),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this.globaRightIndexTipPosition),this._activeEffect.setVector4("Global_Left_Thumb_Tip_Position",this.globalLeftThumbTipPosition),this._activeEffect.setVector4("Global_Right_Thumb_Tip_Position",this.globalRightThumbTipPosition),this._activeEffect.setVector4("Global_Left_Index_Middle_Position",this.globalLeftIndexMiddlePosition),this._activeEffect.setVector4("Global_Right_Index_Middle_Position",this.globalRightIndexMiddlePosition),this._activeEffect.setFloat("Global_Left_Index_Tip_Proximity",this.globalLeftIndexTipProximity),this._activeEffect.setFloat("Global_Right_Index_Tip_Proximity",this.globalRightIndexTipProximity),this._afterBind(t,this._activeEffect))}},_.prototype.getAnimatables=function(){return[]},_.prototype.dispose=function(o){v.prototype.dispose.call(this,o),this._reflectionMapTexture.dispose(),this._indirectEnvTexture.dispose(),this._blueGradientTexture.dispose(),this._decalTexture.dispose()},_.prototype.clone=function(o){var t=this;return l.SerializationHelper.Clone(function(){return new _(o,t.getScene())},this)},_.prototype.serialize=function(){var o=v.prototype.serialize.call(this);return o.customType="BABYLON.MRDLSliderThumbMaterial",o},_.prototype.getClassName=function(){return"MRDLSliderThumbMaterial"},_.Parse=function(o,t,e){return l.SerializationHelper.Parse(function(){return new _(o.name,t)},o,t,e)},_.BLUE_GRADIENT_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png",(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelFront",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelFrontStretch",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelBack",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bevelBackStretch",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusTopRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomLeft",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"radiusBottomRight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeEnabled",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeHeight",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"bulgeRadius",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunTheta",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sunPhi",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"indirectDiffuse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"albedo",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"specular",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"shininess",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"sharpness",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"subsurface",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightGradientColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"reflection",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"frontReflect",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"edgeReflect",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"power",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"skyColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"horizonColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"groundColor",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"horizonPower",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"width",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"fuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"minFuzz",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"clipFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"hueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"saturationShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"valueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarSize",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFarDistance",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFadeLength",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPosition2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobNearSize2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobPulse2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobFade2",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"blobTexture",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftIndexPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightIndexPosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"leftIndexMiddlePosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rightIndexMiddlePosition",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"decalScaleXY",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"decalFrontOnly",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimIntensity",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimHueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimSaturationShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"rimValueShift",void 0),(0,c.__decorate)([(0,l.serialize)()],_.prototype,"iridescenceIntensity",void 0),_}(l.PushMaterial);(0,l.RegisterClass)("BABYLON.GUI.MRDLSliderThumbMaterial",b)},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlBackglowPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlBackglowPixelShader",g=`uniform vec3 cameraPosition;varying vec3 vNormal;varying vec2 vUV;uniform float _Bevel_Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Tuning_Motion_;uniform float _Motion_;uniform float _Max_Intensity_;uniform float _Intensity_Fade_In_Exponent_;uniform float _Outer_Fuzz_Start_;uniform float _Outer_Fuzz_End_;uniform vec4 _Color_;uniform vec4 _Inner_Color_;uniform float _Blend_Exponent_;uniform float _Falloff_;uniform float _Bias_;float BiasFunc(float b,float v) {return pow(v,log(clamp(b,0.001,0.999))/log(0.5));}
void Fuzzy_Round_Rect_B33(
float Size_X,
float Size_Y,
float Radius_X,
float Radius_Y,
float Line_Width,
vec2 UV,
float Outer_Fuzz,
float Max_Outer_Fuzz,
out float Rect_Distance,
out float Inner_Distance)
{vec2 halfSize=vec2(Size_X,Size_Y)*0.5;vec2 r=max(min(vec2(Radius_X,Radius_Y),halfSize),vec2(0.001,0.001));float radius=min(r.x,r.y)-Max_Outer_Fuzz;vec2 v=abs(UV);vec2 nearestp=min(v,halfSize-r);float d=distance(nearestp,v);Inner_Distance=clamp(1.0-(radius-d)/Line_Width,0.0,1.0);Rect_Distance=clamp(1.0-(d-radius)/Outer_Fuzz,0.0,1.0)*Inner_Distance;}
void main()
{float X_Q42;float Y_Q42;X_Q42=vNormal.x;Y_Q42=vNormal.y;float MaxAB_Q24=max(_Tuning_Motion_,_Motion_);float Sqrt_F_Q27=sqrt(MaxAB_Q24);float Power_Q43=pow(MaxAB_Q24,_Intensity_Fade_In_Exponent_);float Value_At_T_Q26=mix(_Outer_Fuzz_Start_,_Outer_Fuzz_End_,Sqrt_F_Q27);float Product_Q23=_Max_Intensity_*Power_Q43;float Rect_Distance_Q33;float Inner_Distance_Q33;Fuzzy_Round_Rect_B33(X_Q42,Y_Q42,_Bevel_Radius_,_Bevel_Radius_,_Line_Width_,vUV,Value_At_T_Q26,_Outer_Fuzz_Start_,Rect_Distance_Q33,Inner_Distance_Q33);float Power_Q44=pow(Inner_Distance_Q33,_Blend_Exponent_);float Result_Q45=pow(BiasFunc(_Bias_,Rect_Distance_Q33),_Falloff_);vec4 Color_At_T_Q25=mix(_Inner_Color_,_Color_,Power_Q44);float Product_Q22=Result_Q45*Product_Q23;vec4 Result_Q28=Product_Q22*Color_At_T_Q25;vec4 Out_Color=Result_Q28;float Clip_Threshold=0.0;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackglow.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlBackglowVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlBackglowVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;uniform float _Bevel_Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Tuning_Motion_;uniform float _Motion_;uniform float _Max_Intensity_;uniform float _Intensity_Fade_In_Exponent_;uniform float _Outer_Fuzz_Start_;uniform float _Outer_Fuzz_End_;uniform vec4 _Color_;uniform vec4 _Inner_Color_;uniform float _Blend_Exponent_;uniform float _Falloff_;uniform float _Bias_;varying vec3 vNormal;varying vec2 vUV;void main()
{vec3 Dir_World_Q41=(world*vec4(tangent,0.0)).xyz;vec3 Dir_World_Q40=(world*vec4((cross(normal,tangent)),0.0)).xyz;float MaxAB_Q24=max(_Tuning_Motion_,_Motion_);float Length_Q16=length(Dir_World_Q41);float Length_Q17=length(Dir_World_Q40);bool Greater_Than_Q37=MaxAB_Q24>0.0;vec3 Sizes_Q35;vec2 XY_Q35;Sizes_Q35=(_Absolute_Sizes_ ? vec3(Length_Q16,Length_Q17,0) : vec3(Length_Q16/Length_Q17,1,0));XY_Q35=(uv-vec2(0.5,0.5))*Sizes_Q35.xy;vec3 Result_Q38=Greater_Than_Q37 ? position : vec3(0,0,0);vec3 Pos_World_Q39=(world*vec4(Result_Q38,1.0)).xyz;vec3 Position=Pos_World_Q39;vec3 Normal=Sizes_Q35;vec2 UV=XY_Q35;vec3 Tangent=vec3(0,0,0);vec3 Binormal=vec3(0,0,0);vec4 Color=vec4(1,1,1,1);gl_Position=viewProjection*vec4(Position,1);vNormal=Normal;vUV=UV;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlBackplatePixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlBackplatePixelShader",g=`uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vExtra1;varying vec4 vExtra2;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform vec4 _Iridescence_Tint_;uniform sampler2D _Iridescent_Map_;uniform float _Angle_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform vec4 _Gradient_Color_;uniform vec4 _Top_Left_;uniform vec4 _Top_Right_;uniform vec4 _Bottom_Left_;uniform vec4 _Bottom_Right_;uniform float _Edge_Width_;uniform float _Edge_Power_;uniform float _Line_Gradient_Blend_;uniform float _Fade_Out_;void FastLinearTosRGB_B353(
vec4 Linear,
out vec4 sRGB)
{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}
void Round_Rect_Fragment_B332(
float Radius,
float Line_Width,
vec4 Line_Color,
float Filter_Width,
vec2 UV,
float Line_Visibility,
vec4 Rect_Parms,
vec4 Fill_Color,
out vec4 Color)
{float d=length(max(abs(UV)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);float g=min(Rect_Parms.z,Rect_Parms.w);float dgrad=max(fwidth(g)*Filter_Width,0.00001);float Inside_Rect=clamp(g/dgrad,0.0,1.0);float inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);Color=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;}
void Iridescence_B343(
vec3 Position,
vec3 Normal,
vec2 UV,
vec3 Axis,
vec3 Eye,
vec4 Tint,
sampler2D Texture,
bool Reflected,
float Frequency,
float Vertical_Offset,
out vec4 Color)
{vec3 i=normalize(Position-Eye);vec3 r=reflect(i,Normal);float idota=dot(i,Axis);float idotr=dot(i,r);float x=Reflected ? idotr : idota;vec2 xy;xy.x=fract((x*Frequency+1.0)*0.5+UV.y*Vertical_Offset);xy.y=0.5;Color=texture(Texture,xy);Color.rgb*=Tint.rgb;}
void Scale_RGB_B346(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Scale_RGB_B344(
float Scalar,
vec4 Color,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Line_Fragment_B362(
vec4 Base_Color,
vec4 Highlight_Color,
float Highlight_Width,
vec3 Line_Vertex,
float Highlight,
out vec4 Line_Color)
{float k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);Line_Color=mix(Base_Color,Highlight_Color,Highlight*k2);}
void Edge_B356(
vec4 RectParms,
float Radius,
float Line_Width,
vec2 UV,
float Edge_Width,
float Edge_Power,
out float Result)
{float d=length(max(abs(UV)-RectParms.xy,0.0));float edge=1.0-clamp((1.0-d/(Radius-Line_Width))/Edge_Width,0.0,1.0);Result=pow(edge,Edge_Power);}
void Gradient_B355(
vec4 Gradient_Color,
vec4 Top_Left,
vec4 Top_Right,
vec4 Bottom_Left,
vec4 Bottom_Right,
vec2 UV,
out vec4 Result)
{vec3 top=Top_Left.rgb+(Top_Right.rgb-Top_Left.rgb)*UV.x;vec3 bottom=Bottom_Left.rgb+(Bottom_Right.rgb-Bottom_Left.rgb)*UV.x;Result.rgb=Gradient_Color.rgb*(bottom+(top-bottom)*UV.y);Result.a=1.0;}
void main()
{float X_Q338;float Y_Q338;float Z_Q338;float W_Q338;X_Q338=vExtra2.x;Y_Q338=vExtra2.y;Z_Q338=vExtra2.z;W_Q338=vExtra2.w;vec4 Color_Q343;
#if IRIDESCENCE_ENABLE
Iridescence_B343(vPosition,vNormal,vUV,vBinormal,cameraPosition,_Iridescence_Tint_,_Iridescent_Map_,_Reflected_,_Frequency_,_Vertical_Offset_,Color_Q343);
#else
Color_Q343=vec4(0,0,0,0);
#endif
vec4 Result_Q344;Scale_RGB_B344(_Iridescence_Intensity_,Color_Q343,Result_Q344);vec4 Line_Color_Q362;Line_Fragment_B362(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q362);float Result_Q356;
#if EDGE_ONLY
Edge_B356(vExtra1,Z_Q338,W_Q338,vUV,_Edge_Width_,_Edge_Power_,Result_Q356);
#else
Result_Q356=1.0;
#endif
vec2 Vec2_Q339=vec2(X_Q338,Y_Q338);vec4 Result_Q355;Gradient_B355(_Gradient_Color_,_Top_Left_,_Top_Right_,_Bottom_Left_,_Bottom_Right_,Vec2_Q339,Result_Q355);vec4 Linear_Q348;Linear_Q348.rgb=clamp(Result_Q355.rgb*Result_Q355.rgb,0.0,1.0);Linear_Q348.a=Result_Q355.a;vec4 Result_Q346;Scale_RGB_B346(Linear_Q348,Result_Q356,Result_Q346);vec4 Sum_Q345=Result_Q346+Result_Q344;vec4 Color_At_T_Q347=mix(Line_Color_Q362,Result_Q346,_Line_Gradient_Blend_);vec4 Base_And_Iridescent_Q350;Base_And_Iridescent_Q350=_Base_Color_+vec4(Sum_Q345.rgb,0.0);vec4 Sum_Q349=Color_At_T_Q347+_Iridescence_Edge_Intensity_*Color_Q343;vec4 Result_Q351=Sum_Q349; Result_Q351.a=1.0;vec4 Color_Q332;Round_Rect_Fragment_B332(Z_Q338,W_Q338,Result_Q351,_Filter_Width_,vUV,1.0,vExtra1,Base_And_Iridescent_Q350,Color_Q332);vec4 Result_Q354=_Fade_Out_*Color_Q332;vec4 sRGB_Q353;FastLinearTosRGB_B353(Result_Q354,sRGB_Q353);vec4 Out_Color=sRGB_Q353;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlBackplate.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlBackplateVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlBackplateVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec3 tangent;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Absolute_Sizes_;uniform float _Filter_Width_;uniform vec4 _Base_Color_;uniform vec4 _Line_Color_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform float _Rate_;uniform vec4 _Highlight_Color_;uniform float _Highlight_Width_;uniform vec4 _Highlight_Transform_;uniform float _Highlight_;uniform float _Iridescence_Intensity_;uniform float _Iridescence_Edge_Intensity_;uniform vec4 _Iridescence_Tint_;uniform sampler2D _Iridescent_Map_;uniform float _Angle_;uniform bool _Reflected_;uniform float _Frequency_;uniform float _Vertical_Offset_;uniform vec4 _Gradient_Color_;uniform vec4 _Top_Left_;uniform vec4 _Top_Right_;uniform vec4 _Bottom_Left_;uniform vec4 _Bottom_Right_;uniform float _Edge_Width_;uniform float _Edge_Power_;uniform float _Line_Gradient_Blend_;uniform float _Fade_Out_;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vExtra1;varying vec4 vExtra2;void Object_To_World_Pos_B314(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void Round_Rect_Vertex_B357(
vec2 UV,
float Radius,
float Margin,
float Anisotropy,
float Gradient1,
float Gradient2,
vec3 Normal,
vec4 Color_Scale_Translate,
out vec2 Rect_UV,
out vec4 Rect_Parms,
out vec2 Scale_XY,
out vec2 Line_UV,
out vec2 Color_UV_Info)
{Scale_XY=vec2(Anisotropy,1.0);Line_UV=(UV-vec2(0.5,0.5));Rect_UV=Line_UV*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);Rect_Parms.z=Gradient1; 
Rect_Parms.w=Gradient2;Color_UV_Info=(Line_UV+vec2(0.5,0.5))*Color_Scale_Translate.xy+Color_Scale_Translate.zw;}
void Line_Vertex_B333(
vec2 Scale_XY,
vec2 UV,
float Time,
float Rate,
vec4 Highlight_Transform,
out vec3 Line_Vertex)
{float angle2=(Rate*Time)*2.0*3.1416;float sinAngle2=sin(angle2);float cosAngle2=cos(angle2);vec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;Line_Vertex.x=0.0;Line_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;Line_Vertex.z=0.0; }
void PickDir_B334(
float Degrees,
vec3 DirX,
vec3 DirY,
out vec3 Dir)
{float a=Degrees*3.14159/180.0;Dir=cos(a)*DirX+sin(a)*DirY;}
void Move_Verts_B327(
float Anisotropy,
vec3 P,
float Radius,
out vec3 New_P,
out vec2 New_UV,
out float Radial_Gradient,
out vec3 Radial_Dir)
{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);New_UV=center+r2*(UV-2.0*center+0.5);New_P=vec3(New_UV-0.5,P.z);Radial_Gradient=1.0-length(delta)*2.0;Radial_Dir=vec3(delta*r2,0.0);}
void Pick_Radius_B336(
float Radius,
float Radius_Top_Left,
float Radius_Top_Right,
float Radius_Bottom_Left,
float Radius_Bottom_Right,
vec3 Position,
out float Result)
{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}
void Edge_AA_Vertex_B328(
vec3 Position_World,
vec3 Position_Object,
vec3 Normal_Object,
vec3 Eye,
float Radial_Gradient,
vec3 Radial_Dir,
vec3 Tangent,
out float Gradient1,
out float Gradient2)
{vec3 I=(Eye-Position_World);vec3 T=(vec4(Tangent,0.0)).xyz;float g=(dot(T,I)<0.0) ? 0.0 : 1.0;if (Normal_Object.z==0.0) { 
Gradient1=Position_Object.z>0.0 ? g : 1.0;Gradient2=Position_Object.z>0.0 ? 1.0 : g;} else {Gradient1=g+(1.0-g)*(Radial_Gradient);Gradient2=1.0;}}
void Object_To_World_Dir_B330(
vec3 Dir_Object,
out vec3 Binormal_World,
out vec3 Binormal_World_N,
out float Binormal_Length)
{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}
void RelativeOrAbsoluteDetail_B341(
float Nominal_Radius,
float Nominal_LineWidth,
bool Absolute_Measurements,
float Height,
out float Radius,
out float Line_Width)
{float scale=Absolute_Measurements ? 1.0/Height : 1.0;Radius=Nominal_Radius*scale;Line_Width=Nominal_LineWidth*scale;}
void main()
{vec3 Nrm_World_Q326;Nrm_World_Q326=normalize((world*vec4(normal,0.0)).xyz);vec3 Tangent_World_Q329;vec3 Tangent_World_N_Q329;float Tangent_Length_Q329;Tangent_World_Q329=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q329=length(Tangent_World_Q329);Tangent_World_N_Q329=Tangent_World_Q329/Tangent_Length_Q329;vec3 Binormal_World_Q330;vec3 Binormal_World_N_Q330;float Binormal_Length_Q330;Object_To_World_Dir_B330(vec3(0,1,0),Binormal_World_Q330,Binormal_World_N_Q330,Binormal_Length_Q330);float Radius_Q341;float Line_Width_Q341;RelativeOrAbsoluteDetail_B341(_Radius_,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q330,Radius_Q341,Line_Width_Q341);vec3 Dir_Q334;PickDir_B334(_Angle_,Tangent_World_N_Q329,Binormal_World_N_Q330,Dir_Q334);float Result_Q336;Pick_Radius_B336(Radius_Q341,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q336);float Anisotropy_Q331=Tangent_Length_Q329/Binormal_Length_Q330;vec4 Out_Color_Q337=vec4(Result_Q336,Line_Width_Q341,0,1);vec3 New_P_Q327;vec2 New_UV_Q327;float Radial_Gradient_Q327;vec3 Radial_Dir_Q327;Move_Verts_B327(Anisotropy_Q331,position,Result_Q336,New_P_Q327,New_UV_Q327,Radial_Gradient_Q327,Radial_Dir_Q327);vec3 Pos_World_Q314;Object_To_World_Pos_B314(New_P_Q327,Pos_World_Q314);float Gradient1_Q328;float Gradient2_Q328;
#if SMOOTH_EDGES
Edge_AA_Vertex_B328(Pos_World_Q314,position,normal,cameraPosition,Radial_Gradient_Q327,Radial_Dir_Q327,tangent,Gradient1_Q328,Gradient2_Q328);
#else
Gradient1_Q328=1.0;Gradient2_Q328=1.0;
#endif
vec2 Rect_UV_Q357;vec4 Rect_Parms_Q357;vec2 Scale_XY_Q357;vec2 Line_UV_Q357;vec2 Color_UV_Info_Q357;Round_Rect_Vertex_B357(New_UV_Q327,Result_Q336,0.0,Anisotropy_Q331,Gradient1_Q328,Gradient2_Q328,normal,vec4(1,1,0,0),Rect_UV_Q357,Rect_Parms_Q357,Scale_XY_Q357,Line_UV_Q357,Color_UV_Info_Q357);vec3 Line_Vertex_Q333;Line_Vertex_B333(Scale_XY_Q357,Line_UV_Q357,(20.0),_Rate_,_Highlight_Transform_,Line_Vertex_Q333);float X_Q359;float Y_Q359;X_Q359=Color_UV_Info_Q357.x;Y_Q359=Color_UV_Info_Q357.y;vec4 Vec4_Q358=vec4(X_Q359,Y_Q359,Result_Q336,Line_Width_Q341);vec3 Position=Pos_World_Q314;vec3 Normal=Nrm_World_Q326;vec2 UV=Rect_UV_Q357;vec3 Tangent=Line_Vertex_Q333;vec3 Binormal=Dir_Q334;vec4 Color=Out_Color_Q337;vec4 Extra1=Rect_Parms_Q357;vec4 Extra2=Vec4_Q358;vec4 Extra3=vec4(0,0,0,0);gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vExtra1=Extra1;vExtra2=Extra2;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlFrontplatePixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlFrontplatePixelShader",g=`uniform vec3 cameraPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Relative_To_Height_;uniform float _Filter_Width_;uniform vec4 _Edge_Color_;uniform float _Fade_Out_;uniform bool _Smooth_Edges_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform float _Blob_Pulse_Max_Size_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Gaze_Intensity_;uniform float _Gaze_Focus_;uniform sampler2D _Blob_Texture_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;void Scale_Color_B54(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=Scalar*Color;}
void Scale_RGB_B50(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Proximity_Fragment_B51(
float Proximity_Max_Intensity,
float Proximity_Near_Radius,
vec4 Deltas,
float Show_Selection,
float Distance_Fade1,
float Distance_Fade2,
float Strength,
out float Proximity)
{float proximity1=(1.0-clamp(length(Deltas.xy)/Proximity_Near_Radius,0.0,1.0))*Distance_Fade1;float proximity2=(1.0-clamp(length(Deltas.zw)/Proximity_Near_Radius,0.0,1.0))*Distance_Fade2;Proximity=Strength*(Proximity_Max_Intensity*max(proximity1,proximity2) *(1.0-Show_Selection)+Show_Selection);}
void Blob_Fragment_B56(
vec2 UV,
vec3 Blob_Info,
sampler2D Blob_Texture,
out vec4 Blob_Color)
{float k=dot(UV,UV);Blob_Color=Blob_Info.y*texture(Blob_Texture,vec2(vec2(sqrt(k),Blob_Info.x).x,1.0-vec2(sqrt(k),Blob_Info.x).y))*(1.0-clamp(k,0.0,1.0));}
void Round_Rect_Fragment_B61(
float Radius,
vec4 Line_Color,
float Filter_Width,
float Line_Visibility,
vec4 Fill_Color,
bool Smooth_Edges,
vec4 Rect_Parms,
out float Inside_Rect)
{float d=length(max(abs(Rect_Parms.zw)-Rect_Parms.xy,0.0));float dx=max(fwidth(d)*Filter_Width,0.00001);Inside_Rect=Smooth_Edges ? clamp((Radius-d)/dx,0.0,1.0) : 1.0-step(Radius,d);}
void main()
{float Is_Quad_Q53;Is_Quad_Q53=vNormal.z;vec4 Blob_Color_Q56;Blob_Fragment_B56(vUV,vTangent,_Blob_Texture_,Blob_Color_Q56);float X_Q52;float Y_Q52;float Z_Q52;float W_Q52;X_Q52=vExtra3.x;Y_Q52=vExtra3.y;Z_Q52=vExtra3.z;W_Q52=vExtra3.w;float Proximity_Q51;Proximity_Fragment_B51(_Proximity_Max_Intensity_,_Proximity_Near_Radius_,vExtra2,X_Q52,Y_Q52,Z_Q52,1.0,Proximity_Q51);float Inside_Rect_Q61;Round_Rect_Fragment_B61(W_Q52,vec4(1,1,1,1),_Filter_Width_,1.0,vec4(0,0,0,0),_Smooth_Edges_,vExtra1,Inside_Rect_Q61);vec4 Result_Q50;Scale_RGB_B50(_Edge_Color_,Proximity_Q51,Result_Q50);vec4 Result_Q47=Inside_Rect_Q61*Blob_Color_Q56;vec4 Color_At_T_Q48=mix(Result_Q50,Result_Q47,Is_Quad_Q53);vec4 Result_Q54;Scale_Color_B54(Color_At_T_Q48,_Fade_Out_,Result_Q54);vec4 Out_Color=Result_Q54;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlFrontplate.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlFrontplateVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlFrontplateVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform float _Radius_;uniform float _Line_Width_;uniform bool _Relative_To_Height_;uniform float _Filter_Width_;uniform vec4 _Edge_Color_;uniform float _Fade_Out_;uniform bool _Smooth_Edges_;uniform bool _Blob_Enable_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Inner_Fade_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform float _Blob_Pulse_Max_Size_;uniform bool _Blob_Enable_2_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Inner_Fade_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform float _Gaze_Intensity_;uniform float _Gaze_Focus_;uniform sampler2D _Blob_Texture_;uniform float _Selection_Fuzz_;uniform float _Selected_;uniform float _Selection_Fade_;uniform float _Selection_Fade_Size_;uniform float _Selected_Distance_;uniform float _Selected_Fade_Length_;uniform float _Proximity_Max_Intensity_;uniform float _Proximity_Far_Distance_;uniform float _Proximity_Near_Radius_;uniform float _Proximity_Anisotropy_;uniform bool _Use_Global_Left_Index_;uniform bool _Use_Global_Right_Index_;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Blob_Vertex_B40(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
vec4 Vx_Color,
vec2 UV,
vec3 Face_Center,
vec2 Face_Size,
vec2 In_UV,
float Blob_Fade_Length,
float Selection_Fade,
float Selection_Fade_Size,
float Inner_Fade,
float Blob_Pulse,
float Blob_Fade,
float Blob_Enabled,
float DistanceOffset,
out vec3 Out_Position,
out vec2 Out_UV,
out vec3 Blob_Info,
out vec2 Blob_Relative_UV)
{float blobSize,fadeIn;vec3 Hit_Position;Blob_Info=vec3(0.0,0.0,0.0);float Hit_Distance=dot(Blob_Position-Face_Center,Normal)+DistanceOffset*Blob_Far_Distance;Hit_Position=Blob_Position-Hit_Distance*Normal;float absD=abs(Hit_Distance);float lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);fadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);float farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);float size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;blobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;Blob_Info.x=lerpVal*0.5+0.5;Blob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;Blob_Info.x*=(1.0-Blob_Pulse);vec3 delta=Hit_Position-Face_Center;vec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));vec2 quadUVin=2.0*UV-1.0; 
vec2 blobXY=blobCenterXY+quadUVin*blobSize;vec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);vec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;vec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;Out_Position=mix(Position,blobCorner,Vx_Color.rrr);Out_UV=mix(In_UV,blobUV,Vx_Color.rr);Blob_Relative_UV=blobClipped/Face_Size.y;}
void Round_Rect_Vertex_B36(
vec2 UV,
vec3 Tangent,
vec3 Binormal,
float Radius,
float Anisotropy,
vec2 Blob_Center_UV,
out vec2 Rect_UV,
out vec2 Scale_XY,
out vec4 Rect_Parms)
{Scale_XY=vec2(Anisotropy,1.0);Rect_UV=(UV-vec2(0.5,0.5))*Scale_XY;Rect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius);Rect_Parms.zw=Blob_Center_UV;}
vec2 ProjectProximity(
vec3 blobPosition,
vec3 position,
vec3 center,
vec3 dir,
vec3 xdir,
vec3 ydir,
out float vdistance
)
{vec3 delta=blobPosition-position;vec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));vdistance=abs(dot(delta,dir));return xy;}
void Proximity_Vertex_B33(
vec3 Blob_Position,
vec3 Blob_Position_2,
vec3 Face_Center,
vec3 Position,
float Proximity_Far_Distance,
float Relative_Scale,
float Proximity_Anisotropy,
vec3 Normal,
vec3 Tangent,
vec3 Binormal,
out vec4 Extra,
out float Distance_To_Face,
out float Distance_Fade1,
out float Distance_Fade2)
{float distz1,distz2;Extra.xy=ProjectProximity(Blob_Position,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz1)/Relative_Scale;Extra.zw=ProjectProximity(Blob_Position_2,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz2)/Relative_Scale;Distance_To_Face=dot(Normal,Position-Face_Center);Distance_Fade1=1.0-clamp(distz1/Proximity_Far_Distance,0.0,1.0);Distance_Fade2=1.0-clamp(distz2/Proximity_Far_Distance,0.0,1.0);}
void Object_To_World_Pos_B12(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void Choose_Blob_B27(
vec4 Vx_Color,
vec3 Position1,
vec3 Position2,
bool Blob_Enable_1,
bool Blob_Enable_2,
float Near_Size_1,
float Near_Size_2,
float Blob_Inner_Fade_1,
float Blob_Inner_Fade_2,
float Blob_Pulse_1,
float Blob_Pulse_2,
float Blob_Fade_1,
float Blob_Fade_2,
out vec3 Position,
out float Near_Size,
out float Inner_Fade,
out float Blob_Enable,
out float Fade,
out float Pulse)
{Position=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;float b1=Blob_Enable_1 ? 1.0 : 0.0;float b2=Blob_Enable_2 ? 1.0 : 0.0;Blob_Enable=b1+(b2-b1)*Vx_Color.g;Pulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;Fade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;Near_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;Inner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;}
void Move_Verts_B32(
vec2 UV,
float Radius,
float Anisotropy,
float Line_Width,
float Visible,
out vec3 New_P,
out vec2 New_UV)
{vec2 xy=2.0*UV-vec2(0.5,0.5);vec2 center=clamp(xy,0.0,1.0);vec2 delta=2.0*(xy-center);float deltaLength=length(delta);vec2 aniso=vec2(1.0/Anisotropy,1.0);center=(center-vec2(0.5,0.5))*(1.0-2.0*Radius*aniso);New_UV=vec2((2.0-2.0*deltaLength)*Visible,0.0);float deltaRadius= (Radius-Line_Width*New_UV.x);New_P.xy=(center+deltaRadius/deltaLength *aniso*delta);New_P.z=0.0;}
void Object_To_World_Dir_B14(
vec3 Dir_Object,
out vec3 Binormal_World)
{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;}
void Proximity_Visibility_B55(
float Selection,
vec3 Proximity_Center,
vec3 Proximity_Center_2,
float Proximity_Far_Distance,
float Proximity_Radius,
vec3 Face_Center,
vec3 Normal,
vec2 Face_Size,
float Gaze,
out float Width)
{float boxMaxSize=length(Face_Size)*0.5;float d1=dot(Proximity_Center-Face_Center,Normal);vec3 blob1=Proximity_Center-d1*Normal;float d2=dot(Proximity_Center_2-Face_Center,Normal);vec3 blob2=Proximity_Center_2-d2*Normal;vec3 delta1=blob1-Face_Center;vec3 delta2=blob2-Face_Center;float dist1=dot(delta1,delta1);float dist2=dot(delta2,delta2);float nearestProxDist=sqrt(min(dist1,dist2));Width=(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));Width=max(Gaze,Width);}
vec2 ramp2(vec2 start,vec2 end,vec2 x)
{return clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));}
float computeSelection(
vec3 blobPosition,
vec3 normal,
vec3 tangent,
vec3 bitangent,
vec3 faceCenter,
vec2 faceSize,
float selectionFuzz,
float farDistance,
float fadeLength
)
{vec3 delta=blobPosition-faceCenter;float absD=abs(dot(delta,normal));float fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);vec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));vec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;vec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);return selectPulse.x*selectPulse.y*fadeIn;}
void Selection_Vertex_B31(
vec3 Blob_Position,
vec3 Blob_Position_2,
vec3 Face_Center,
vec2 Face_Size,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
float Selection_Fuzz,
float Selected,
float Far_Distance,
float Fade_Length,
vec3 Active_Face_Dir,
out float Show_Selection)
{float select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);float select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);Show_Selection=mix(max(select1,select2),1.0,Selected);}
void main()
{vec3 Vec3_Q29=vec3(vec2(0,0).x,vec2(0,0).y,color.r);vec3 Nrm_World_Q24;Nrm_World_Q24=normalize((world*vec4(normal,0.0)).xyz);vec3 Face_Center_Q30;Face_Center_Q30=(world*vec4(vec3(0,0,0),1.0)).xyz;vec3 Tangent_World_Q13;Tangent_World_Q13=(world*vec4(tangent,0.0)).xyz;vec3 Result_Q42;Result_Q42=_Use_Global_Left_Index_ ? Global_Left_Index_Tip_Position.xyz : _Blob_Position_;vec3 Result_Q43;Result_Q43=_Use_Global_Right_Index_ ? Global_Right_Index_Tip_Position.xyz : _Blob_Position_2_;float Value_At_T_Q58=mix(_Blob_Near_Size_,_Blob_Pulse_Max_Size_,_Blob_Pulse_);float Value_At_T_Q59=mix(_Blob_Near_Size_2_,_Blob_Pulse_Max_Size_,_Blob_Pulse_2_);vec3 Cross_Q70=cross(normal,tangent);float Product_Q45=_Gaze_Intensity_*_Gaze_Focus_;float Step_Q46=step(0.0001,Product_Q45);vec3 Tangent_World_N_Q15=normalize(Tangent_World_Q13);vec3 Position_Q27;float Near_Size_Q27;float Inner_Fade_Q27;float Blob_Enable_Q27;float Fade_Q27;float Pulse_Q27;Choose_Blob_B27(color,Result_Q42,Result_Q43,_Blob_Enable_,_Blob_Enable_2_,Value_At_T_Q58,Value_At_T_Q59,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q27,Near_Size_Q27,Inner_Fade_Q27,Blob_Enable_Q27,Fade_Q27,Pulse_Q27);vec3 Binormal_World_Q14;Object_To_World_Dir_B14(Cross_Q70,Binormal_World_Q14);float Anisotropy_Q21=length(Tangent_World_Q13)/length(Binormal_World_Q14);vec3 Binormal_World_N_Q16=normalize(Binormal_World_Q14);vec2 Face_Size_Q35;float ScaleY_Q35;Face_Size_Q35=vec2(length(Tangent_World_Q13),length(Binormal_World_Q14));ScaleY_Q35=Face_Size_Q35.y;float Out_Radius_Q38;float Out_Line_Width_Q38;Out_Radius_Q38=_Relative_To_Height_ ? _Radius_ : _Radius_/ScaleY_Q35;Out_Line_Width_Q38=_Relative_To_Height_ ? _Line_Width_ : _Line_Width_/ScaleY_Q35;float Show_Selection_Q31;Selection_Vertex_B31(Result_Q42,Result_Q43,Face_Center_Q30,Face_Size_Q35,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,vec3(0,0,-1),Show_Selection_Q31);float MaxAB_Q41=max(Show_Selection_Q31,Product_Q45);float Width_Q55;Proximity_Visibility_B55(Show_Selection_Q31,Result_Q42,Result_Q43,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Face_Center_Q30,Nrm_World_Q24,Face_Size_Q35,Step_Q46,Width_Q55);vec3 New_P_Q32;vec2 New_UV_Q32;Move_Verts_B32(uv,Out_Radius_Q38,Anisotropy_Q21,Out_Line_Width_Q38,Width_Q55,New_P_Q32,New_UV_Q32);vec3 Pos_World_Q12;Object_To_World_Pos_B12(New_P_Q32,Pos_World_Q12);vec3 Out_Position_Q40;vec2 Out_UV_Q40;vec3 Blob_Info_Q40;vec2 Blob_Relative_UV_Q40;Blob_Vertex_B40(Pos_World_Q12,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Position_Q27,_Blob_Intensity_,Near_Size_Q27,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q30,Face_Size_Q35,New_UV_Q32,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q27,Pulse_Q27,Fade_Q27,Blob_Enable_Q27,0.0,Out_Position_Q40,Out_UV_Q40,Blob_Info_Q40,Blob_Relative_UV_Q40);vec2 Rect_UV_Q36;vec2 Scale_XY_Q36;vec4 Rect_Parms_Q36;Round_Rect_Vertex_B36(New_UV_Q32,Tangent_World_Q13,Binormal_World_Q14,Out_Radius_Q38,Anisotropy_Q21,Blob_Relative_UV_Q40,Rect_UV_Q36,Scale_XY_Q36,Rect_Parms_Q36);vec4 Extra_Q33;float Distance_To_Face_Q33;float Distance_Fade1_Q33;float Distance_Fade2_Q33;Proximity_Vertex_B33(Result_Q42,Result_Q43,Face_Center_Q30,Pos_World_Q12,_Proximity_Far_Distance_,1.0,_Proximity_Anisotropy_,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Extra_Q33,Distance_To_Face_Q33,Distance_Fade1_Q33,Distance_Fade2_Q33);vec4 Vec4_Q37=vec4(MaxAB_Q41,Distance_Fade1_Q33,Distance_Fade2_Q33,Out_Radius_Q38);vec3 Position=Out_Position_Q40;vec3 Normal=Vec3_Q29;vec2 UV=Out_UV_Q40;vec3 Tangent=Blob_Info_Q40;vec3 Binormal=vec3(0,0,0);vec4 Color=vec4(1,1,1,1);vec4 Extra1=Rect_Parms_Q36;vec4 Extra2=Extra_Q33;vec4 Extra3=Vec4_Q37;gl_Position=viewProjection*vec4(Position,1);vNormal=Normal;vUV=UV;vTangent=Tangent;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlInnerquadPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlInnerquadPixelShader",g=`uniform vec3 cameraPosition;varying vec2 vUV;varying vec3 vTangent;uniform vec4 _Color_;uniform float _Radius_;uniform bool _Fixed_Radius_;uniform float _Filter_Width_;uniform float _Glow_Fraction_;uniform float _Glow_Max_;uniform float _Glow_Falloff_;float FilterStep_Bid194(float edge,float x,float filterWidth)
{float dx=max(1.0E-5,fwidth(x)*filterWidth);return max((x+dx*0.5-max(edge,x-dx*0.5))/dx,0.0);}
void Round_Rect_B194(
float Size_X,
float Size_Y,
float Radius,
vec4 Rect_Color,
float Filter_Width,
vec2 UV,
float Glow_Fraction,
float Glow_Max,
float Glow_Falloff,
out vec4 Color)
{vec2 halfSize=vec2(Size_X,Size_Y)*0.5;vec2 r=max(min(vec2(Radius,Radius),halfSize),vec2(0.01,0.01));vec2 v=abs(UV);vec2 nearestp=min(v,halfSize-r);vec2 delta=(v-nearestp)/max(vec2(0.01,0.01),r);float Distance=length(delta);float insideRect=1.0-FilterStep_Bid194(1.0-Glow_Fraction,Distance,Filter_Width);float glow=clamp((1.0-Distance)/Glow_Fraction,0.0,1.0);glow=pow(glow,Glow_Falloff);Color=Rect_Color*max(insideRect,glow*Glow_Max);}
void main()
{float X_Q192;float Y_Q192;float Z_Q192;X_Q192=vTangent.x;Y_Q192=vTangent.y;Z_Q192=vTangent.z;vec4 Color_Q194;Round_Rect_B194(X_Q192,1.0,Y_Q192,_Color_,_Filter_Width_,vUV,_Glow_Fraction_,_Glow_Max_,_Glow_Falloff_,Color_Q194);vec4 Out_Color=Color_Q194;float Clip_Threshold=0.0;gl_FragColor=Out_Color;}
`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlInnerquad.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlInnerquadVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlInnerquadVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;attribute vec3 tangent;attribute vec4 color;uniform vec4 _Color_;uniform float _Radius_;uniform bool _Fixed_Radius_;uniform float _Filter_Width_;uniform float _Glow_Fraction_;uniform float _Glow_Max_;uniform float _Glow_Falloff_;varying vec2 vUV;varying vec3 vTangent;void main()
{vec3 Pos_World_Q189;Pos_World_Q189=(world*vec4(position,1.0)).xyz;vec3 Dir_World_Q190;Dir_World_Q190=(world*vec4(tangent,0.0)).xyz;vec3 Dir_World_Q191;Dir_World_Q191=(world*vec4((cross(normal,tangent)),0.0)).xyz;float Length_Q180=length(Dir_World_Q190);float Length_Q181=length(Dir_World_Q191);float Quotient_Q184=Length_Q180/Length_Q181;float Quotient_Q195=_Radius_/Length_Q181;vec2 Result_Q193;Result_Q193=vec2((uv.x-0.5)*Length_Q180/Length_Q181,(uv.y-0.5));float Result_Q198=_Fixed_Radius_ ? Quotient_Q195 : _Radius_;vec3 Vec3_Q183=vec3(Quotient_Q184,Result_Q198,0);vec3 Position=Pos_World_Q189;vec3 Normal=vec3(0,0,0);vec2 UV=Result_Q193;vec3 Tangent=Vec3_Q183;vec3 Binormal=vec3(0,0,0);vec4 Color=color;gl_Position=viewProjection*vec4(Position,1);vUV=UV;vTangent=Tangent;}
`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlSliderBarPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlSliderBarPixelShader",g=`uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform vec4 Global_Left_Index_Middle_Position;uniform vec4 Global_Right_Index_Middle_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Blob_Fragment_B30(
sampler2D Blob_Texture,
vec4 Blob_Info1,
vec4 Blob_Info2,
out vec4 Blob_Color)
{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}
void FastLinearTosRGB_B42(
vec4 Linear,
out vec4 sRGB)
{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}
void Scale_RGB_B59(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Fragment_Main_B121(
float Sun_Intensity,
float Sun_Theta,
float Sun_Phi,
vec3 Normal,
vec4 Albedo,
float Fresnel_Reflect,
float Shininess,
vec3 Incident,
vec4 Horizon_Color,
vec4 Sky_Color,
vec4 Ground_Color,
float Indirect_Diffuse,
float Specular,
float Horizon_Power,
float Reflection,
vec4 Reflection_Sample,
vec4 Indirect_Sample,
float Sharpness,
float SSS,
float Subsurface,
vec4 Translucence,
vec4 Rim_Light,
vec4 Iridescence,
out vec4 Result)
{float theta=Sun_Theta*2.0*3.14159;float phi=Sun_Phi*3.14159;vec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));float NdotL=max(dot(lightDir,Normal),0.0);vec3 R=reflect(Incident,Normal);float RdotL=max(0.0,dot(R,lightDir));float specular=pow(RdotL,Shininess);specular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);vec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);Result=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;}
void Bulge_B79(
bool Enabled,
vec3 Normal,
vec3 Tangent,
float Bulge_Height,
vec4 UV,
float Bulge_Radius,
vec3 ButtonN,
out vec3 New_Normal)
{vec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));vec3 B=(cross(Normal,Tangent));float k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;k=sin(k*3.14159*0.5);k*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));New_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;New_Normal=Enabled ? New_Normal : Normal;}
void SSS_B77(
vec3 ButtonN,
vec3 Normal,
vec3 Incident,
out float Result)
{float NdotI=abs(dot(Normal,Incident));float BdotI=abs(dot(ButtonN,Incident));Result=(abs(NdotI-BdotI)); }
void FingerOcclusion_B67(
float Width,
float DistToCenter,
float Fuzz,
float Min_Fuzz,
vec3 Position,
vec3 Forward,
vec3 Nearest,
float Fade_Out,
out float NotInShadow)
{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}
void FingerOcclusion_B68(
float Width,
float DistToCenter,
float Fuzz,
float Min_Fuzz,
vec3 Position,
vec3 Forward,
vec3 Nearest,
float Fade_Out,
out float NotInShadow)
{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}
void Scale_Color_B91(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=Scalar*Color;}
void From_HSV_B73(
float Hue,
float Saturation,
float Value,
float Alpha,
out vec4 Color)
{vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);Color.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);Color.a=Alpha;}
void Fast_Fresnel_B122(
float Front_Reflect,
float Edge_Reflect,
float Power,
vec3 Normal,
vec3 Incident,
out float Transmit,
out float Reflect)
{float d=max(-dot(Incident,Normal),0.0);Reflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(.01-d,Power);Transmit=1.0-Reflect;}
void Mapped_Environment_B51(
sampler2D Reflected_Environment,
sampler2D Indirect_Environment,
vec3 Dir,
out vec4 Reflected_Color,
out vec4 Indirect_Diffuse)
{Reflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));Indirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));}
vec4 SampleEnv_Bid50(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)
{float k=pow(abs(D.y),exponent);vec4 C;if (D.y>0.0) {C=mix(H,S,k);} else {C=mix(H,G,k); }
return C;}
void Sky_Environment_B50(
vec3 Normal,
vec3 Reflected,
vec4 Sky_Color,
vec4 Horizon_Color,
vec4 Ground_Color,
float Horizon_Power,
out vec4 Reflected_Color,
out vec4 Indirect_Color)
{Reflected_Color=SampleEnv_Bid50(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);Indirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);}
void Min_Segment_Distance_B65(
vec3 P0,
vec3 P1,
vec3 Q0,
vec3 Q1,
out vec3 NearP,
out vec3 NearQ,
out float Distance)
{vec3 u=P1-P0;vec3 v=Q1-Q0;vec3 w=P0-Q0;float a=dot(u,u);float b=dot(u,v);float c=dot(v,v);float d=dot(u,w);float e=dot(v,w);float D=a*c-b*b;float sD=D;float tD=D;float sc,sN,tc,tN;if (D<0.00001) {sN=0.0;sD=1.0;tN=e;tD=c;} else {sN=(b*e-c*d);tN=(a*e-b*d);if (sN<0.0) {sN=0.0;tN=e;tD=c;} else if (sN>sD) {sN=sD;tN=e+b;tD=c;}}
if (tN<0.0) {tN=0.0;if (-d<0.0) {sN=0.0;} else if (-d>a) {sN=sD;} else {sN=-d;sD=a;}} else if (tN>tD) {tN=tD;if ((-d+b)<0.0) {sN=0.0;} else if ((-d+b)>a) {sN=sD;} else {sN=(-d+b);sD=a;}}
sc=abs(sN)<0.000001 ? 0.0 : sN/sD;tc=abs(tN)<0.000001 ? 0.0 : tN/tD;NearP=P0+sc*u;NearQ=Q0+tc*v;Distance=distance(NearP,NearQ);}
void To_XYZ_B74(
vec3 Vec3,
out float X,
out float Y,
out float Z)
{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}
void Finger_Positions_B64(
vec3 Left_Index_Pos,
vec3 Right_Index_Pos,
vec3 Left_Index_Middle_Pos,
vec3 Right_Index_Middle_Pos,
out vec3 Left_Index,
out vec3 Right_Index,
out vec3 Left_Index_Middle,
out vec3 Right_Index_Middle)
{Left_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);Right_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);Left_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);Right_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);}
void VaryHSV_B108(
vec3 HSV_In,
float Hue_Shift,
float Saturation_Shift,
float Value_Shift,
out vec3 HSV_Out)
{HSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));}
void Remap_Range_B114(
float In_Min,
float In_Max,
float Out_Min,
float Out_Max,
float In,
out float Out)
{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}
void To_HSV_B75(
vec4 Color,
out float Hue,
out float Saturation,
out float Value,
out float Alpha,
out vec3 HSV)
{vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);vec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);float d=q.x-min(q.w,q.y);float e=1.0e-10;Hue=abs(q.z+(q.w-q.y)/(6.0*d+e));Saturation=d/(q.x+e);Value=q.x;Alpha=Color.a;HSV=vec3(Hue,Saturation,Value);}
void Code_B110(
float X,
out float Result)
{Result=(acos(X)/3.14159-0.5)*2.0;}
void Rim_Light_B132(
vec3 Front,
vec3 Normal,
vec3 Incident,
float Rim_Intensity,
sampler2D Texture,
out vec4 Result)
{vec3 R=reflect(Incident,Normal);float RdotF=dot(R,Front);float RdotL=sqrt(1.0-RdotF*RdotF);vec2 UV=vec2(R.y*0.5+0.5,0.5);vec4 Color=texture(Texture,UV);Result=Color;}
void main()
{vec4 Blob_Color_Q30;
#if BLOB_ENABLE
Blob_Fragment_B30(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q30);
#else
Blob_Color_Q30=vec4(0,0,0,0);
#endif
vec3 Incident_Q39=normalize(vPosition-cameraPosition);vec3 Normalized_Q38=normalize(vNormal);vec3 Normalized_Q71=normalize(vTangent);vec4 Color_Q83;
#if DECAL_ENABLE
Color_Q83=texture(_Decal_,vUV);
#else
Color_Q83=vec4(0,0,0,0);
#endif
float X_Q90;float Y_Q90;float Z_Q90;float W_Q90;X_Q90=vExtra1.x;Y_Q90=vExtra1.y;Z_Q90=vExtra1.z;W_Q90=vExtra1.w;vec4 Linear_Q43;Linear_Q43.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);Linear_Q43.a=_Sky_Color_.a;vec4 Linear_Q44;Linear_Q44.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);Linear_Q44.a=_Horizon_Color_.a;vec4 Linear_Q45;Linear_Q45.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);Linear_Q45.a=_Ground_Color_.a;vec3 Left_Index_Q64;vec3 Right_Index_Q64;vec3 Left_Index_Middle_Q64;vec3 Right_Index_Middle_Q64;Finger_Positions_B64(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q64,Right_Index_Q64,Left_Index_Middle_Q64,Right_Index_Middle_Q64);vec4 Linear_Q46;Linear_Q46.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);Linear_Q46.a=_Albedo_.a;vec3 Normalized_Q107=normalize(vBinormal);vec3 Incident_Q70=normalize(vPosition-cameraPosition);vec3 New_Normal_Q79;Bulge_B79(_Bulge_Enabled_,Normalized_Q38,Normalized_Q71,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q79);float Result_Q77;SSS_B77(vBinormal,New_Normal_Q79,Incident_Q39,Result_Q77);vec4 Result_Q91;Scale_Color_B91(Color_Q83,X_Q90,Result_Q91);float Transmit_Q122;float Reflect_Q122;Fast_Fresnel_B122(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q79,Incident_Q39,Transmit_Q122,Reflect_Q122);float Product_Q125=Y_Q90*Y_Q90;vec3 NearP_Q65;vec3 NearQ_Q65;float Distance_Q65;Min_Segment_Distance_B65(Left_Index_Q64,Left_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q65,NearQ_Q65,Distance_Q65);vec3 NearP_Q63;vec3 NearQ_Q63;float Distance_Q63;Min_Segment_Distance_B65(Right_Index_Q64,Right_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q63,NearQ_Q63,Distance_Q63);vec3 Reflected_Q47=reflect(Incident_Q39,New_Normal_Q79);vec4 Product_Q103=Linear_Q46*vec4(1,1,1,1);vec4 Result_Q132;Rim_Light_B132(Normalized_Q107,Normalized_Q38,Incident_Q70,_Rim_Intensity_,_Rim_Texture_,Result_Q132);float Dot_Q72=dot(Incident_Q70, Normalized_Q71);float MaxAB_Q123=max(Reflect_Q122,Product_Q125);float NotInShadow_Q67;
#if OCCLUSION_ENABLED
FingerOcclusion_B67(_Width_,Distance_Q65,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q65,_Clip_Fade_,NotInShadow_Q67);
#else
NotInShadow_Q67=1.0;
#endif
float NotInShadow_Q68;
#if OCCLUSION_ENABLED
FingerOcclusion_B68(_Width_,Distance_Q63,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q63,_Clip_Fade_,NotInShadow_Q68);
#else
NotInShadow_Q68=1.0;
#endif
vec4 Reflected_Color_Q51;vec4 Indirect_Diffuse_Q51;
#if ENV_ENABLE
Mapped_Environment_B51(_Reflection_Map_,_Indirect_Environment_,Reflected_Q47,Reflected_Color_Q51,Indirect_Diffuse_Q51);
#else
Reflected_Color_Q51=vec4(0,0,0,1);Indirect_Diffuse_Q51=vec4(0,0,0,1);
#endif
vec4 Reflected_Color_Q50;vec4 Indirect_Color_Q50;
#if SKY_ENABLED
Sky_Environment_B50(New_Normal_Q79,Reflected_Q47,Linear_Q43,Linear_Q44,Linear_Q45,_Horizon_Power_,Reflected_Color_Q50,Indirect_Color_Q50);
#else
Reflected_Color_Q50=vec4(0,0,0,1);Indirect_Color_Q50=vec4(0,0,0,1);
#endif
float Hue_Q75;float Saturation_Q75;float Value_Q75;float Alpha_Q75;vec3 HSV_Q75;To_HSV_B75(Product_Q103,Hue_Q75,Saturation_Q75,Value_Q75,Alpha_Q75,HSV_Q75);float Hue_Q127;float Saturation_Q127;float Value_Q127;float Alpha_Q127;vec3 HSV_Q127;To_HSV_B75(Result_Q132,Hue_Q127,Saturation_Q127,Value_Q127,Alpha_Q127,HSV_Q127);float Result_Q110;Code_B110(Dot_Q72,Result_Q110);float AbsA_Q76=abs(Result_Q110);float MinAB_Q58=min(NotInShadow_Q67,NotInShadow_Q68);vec4 Sum_Q48=Reflected_Color_Q51+Reflected_Color_Q50;vec4 Sum_Q49=Indirect_Diffuse_Q51+Indirect_Color_Q50;vec3 HSV_Out_Q126;VaryHSV_B108(HSV_Q127,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q126);float Out_Q114;Remap_Range_B114(-1.0,1.0,0.0,1.0,Result_Q110,Out_Q114);float Product_Q106;Product_Q106=AbsA_Q76*_Hue_Shift_;float X_Q128;float Y_Q128;float Z_Q128;To_XYZ_B74(HSV_Out_Q126,X_Q128,Y_Q128,Z_Q128);vec2 Vec2_Q112=vec2(Out_Q114,0.5);vec3 HSV_Out_Q108;VaryHSV_B108(HSV_Q75,Product_Q106,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q108);vec4 Color_Q129;From_HSV_B73(X_Q128,Y_Q128,Z_Q128,0.0,Color_Q129);vec4 Color_Q111;
#if IRIDESCENCE_ENABLED
Color_Q111=texture(_Iridescence_Texture_,Vec2_Q112);
#else
Color_Q111=vec4(0,0,0,0);
#endif
float X_Q74;float Y_Q74;float Z_Q74;To_XYZ_B74(HSV_Out_Q108,X_Q74,Y_Q74,Z_Q74);vec4 Result_Q131=_Rim_Intensity_*Color_Q129;vec4 Result_Q113=_Iridescence_Intensity_*Color_Q111;vec4 Color_Q73;From_HSV_B73(X_Q74,Y_Q74,Z_Q74,0.0,Color_Q73);vec4 Result_Q84=Result_Q91+(1.0-Result_Q91.a)*Color_Q73;vec4 Result_Q121;Fragment_Main_B121(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q79,Result_Q84,MaxAB_Q123,_Shininess_,Incident_Q39,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q48,Sum_Q49,_Sharpness_,Result_Q77,_Subsurface_,vec4(0,0,0,0),Result_Q131,Result_Q113,Result_Q121);vec4 Result_Q59;Scale_RGB_B59(Result_Q121,MinAB_Q58,Result_Q59);vec4 sRGB_Q42;FastLinearTosRGB_B42(Result_Q59,sRGB_Q42);vec4 Result_Q31=Blob_Color_Q30+(1.0-Blob_Color_Q30.a)*sRGB_Q42;vec4 Result_Q40=Result_Q31; Result_Q40.a=1.0;vec4 Out_Color=Result_Q40;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderBar.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlSliderBarVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlSliderBarVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;
#ifdef TANGENT
attribute vec3 tangent;
#else
const vec3 tangent=vec3(0.);
#endif
uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B12(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void Object_To_World_Normal_B32(
vec3 Nrm_Object,
out vec3 Nrm_World)
{Nrm_World=(vec4(Nrm_Object,0.0)).xyz;}
void Blob_Vertex_B23(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
float Blob_Fade_Length,
float Blob_Pulse,
float Blob_Fade,
out vec4 Blob_Info)
{vec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}
void Blob_Vertex_B24(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
float Blob_Fade_Length,
float Blob_Pulse,
float Blob_Fade,
out vec4 Blob_Info)
{vec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}
void Move_Verts_B130(
float Anisotropy,
vec3 P,
float Radius,
float Bevel,
vec3 Normal_Object,
float ScaleZ,
float Stretch,
out vec3 New_P,
out vec2 New_UV,
out float Radial_Gradient,
out vec3 Radial_Dir,
out vec3 New_Normal)
{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;float deltad=(length(delta)*2.0);float f=(Bevel+(Radius-Bevel)*Stretch)/Radius;float innerd=clamp(deltad*2.0,0.0,1.0);float outerd=clamp(deltad*2.0-1.0,0.0,1.0);float bevelAngle=outerd*3.14159*0.5;float sinb=sin(bevelAngle);float cosb=cos(bevelAngle);float beveld=(1.0-f)*innerd+f*sinb;float br=outerd;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);float dir=P.z<0.0001 ? 1.0 : -1.0;New_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);New_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);Radial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);Radial_Dir=vec3(delta*r2,0.0);vec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);New_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;}
void Object_To_World_Dir_B60(
vec3 Dir_Object,
out vec3 Normal_World,
out vec3 Normal_World_N,
out float Normal_Length)
{Normal_World=(world*vec4(Dir_Object,0.0)).xyz;Normal_Length=length(Normal_World);Normal_World_N=Normal_World/Normal_Length;}
void To_XYZ_B78(
vec3 Vec3,
out float X,
out float Y,
out float Z)
{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}
void Conditional_Float_B93(
bool Which,
float If_True,
float If_False,
out float Result)
{Result=Which ? If_True : If_False;}
void Object_To_World_Dir_B28(
vec3 Dir_Object,
out vec3 Binormal_World,
out vec3 Binormal_World_N,
out float Binormal_Length)
{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}
void Pick_Radius_B69(
float Radius,
float Radius_Top_Left,
float Radius_Top_Right,
float Radius_Bottom_Left,
float Radius_Bottom_Right,
vec3 Position,
out float Result)
{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}
void Conditional_Float_B36(
bool Which,
float If_True,
float If_False,
out float Result)
{Result=Which ? If_True : If_False;}
void Greater_Than_B37(
float Left,
float Right,
out bool Not_Greater_Than,
out bool Greater_Than)
{Greater_Than=Left>Right;Not_Greater_Than=!Greater_Than;}
void Remap_Range_B105(
float In_Min,
float In_Max,
float Out_Min,
float Out_Max,
float In,
out float Out)
{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}
void main()
{vec2 XY_Q85;XY_Q85=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);vec3 Tangent_World_Q27;vec3 Tangent_World_N_Q27;float Tangent_Length_Q27;Tangent_World_Q27=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q27=length(Tangent_World_Q27);Tangent_World_N_Q27=Tangent_World_Q27/Tangent_Length_Q27;vec3 Normal_World_Q60;vec3 Normal_World_N_Q60;float Normal_Length_Q60;Object_To_World_Dir_B60(vec3(0,0,1),Normal_World_Q60,Normal_World_N_Q60,Normal_Length_Q60);float X_Q78;float Y_Q78;float Z_Q78;To_XYZ_B78(position,X_Q78,Y_Q78,Z_Q78);vec3 Nrm_World_Q26;Nrm_World_Q26=normalize((world*vec4(normal,0.0)).xyz);vec3 Binormal_World_Q28;vec3 Binormal_World_N_Q28;float Binormal_Length_Q28;Object_To_World_Dir_B28(vec3(0,1,0),Binormal_World_Q28,Binormal_World_N_Q28,Binormal_Length_Q28);float Anisotropy_Q29=Tangent_Length_Q27/Binormal_Length_Q28;float Result_Q69;Pick_Radius_B69(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q69);float Anisotropy_Q53=Binormal_Length_Q28/Normal_Length_Q60;bool Not_Greater_Than_Q37;bool Greater_Than_Q37;Greater_Than_B37(Z_Q78,0.0,Not_Greater_Than_Q37,Greater_Than_Q37);vec4 Linear_Q101;Linear_Q101.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);Linear_Q101.a=_Left_Color_.a;vec4 Linear_Q102;Linear_Q102.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);Linear_Q102.a=_Right_Color_.a;vec3 Difference_Q61=vec3(0,0,0)-Normal_World_N_Q60;vec4 Out_Color_Q34=vec4(X_Q78,Y_Q78,Z_Q78,1);float Result_Q36;Conditional_Float_B36(Greater_Than_Q37,_Bevel_Back_,_Bevel_Front_,Result_Q36);float Result_Q94;Conditional_Float_B36(Greater_Than_Q37,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q94);vec3 New_P_Q130;vec2 New_UV_Q130;float Radial_Gradient_Q130;vec3 Radial_Dir_Q130;vec3 New_Normal_Q130;Move_Verts_B130(Anisotropy_Q29,position,Result_Q69,Result_Q36,normal,Anisotropy_Q53,Result_Q94,New_P_Q130,New_UV_Q130,Radial_Gradient_Q130,Radial_Dir_Q130,New_Normal_Q130);float X_Q98;float Y_Q98;X_Q98=New_UV_Q130.x;Y_Q98=New_UV_Q130.y;vec3 Pos_World_Q12;Object_To_World_Pos_B12(New_P_Q130,Pos_World_Q12);vec3 Nrm_World_Q32;Object_To_World_Normal_B32(New_Normal_Q130,Nrm_World_Q32);vec4 Blob_Info_Q23;
#if BLOB_ENABLE
Blob_Vertex_B23(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q23);
#else
Blob_Info_Q23=vec4(0,0,0,0);
#endif
vec4 Blob_Info_Q24;
#if BLOB_ENABLE_2
Blob_Vertex_B24(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q24);
#else
Blob_Info_Q24=vec4(0,0,0,0);
#endif
float Out_Q105;Remap_Range_B105(0.0,1.0,0.0,1.0,X_Q98,Out_Q105);float X_Q86;float Y_Q86;float Z_Q86;To_XYZ_B78(Nrm_World_Q32,X_Q86,Y_Q86,Z_Q86);vec4 Color_At_T_Q97=mix(Linear_Q101,Linear_Q102,Out_Q105);float Minus_F_Q87=-Z_Q86;float R_Q99;float G_Q99;float B_Q99;float A_Q99;R_Q99=Color_At_T_Q97.r; G_Q99=Color_At_T_Q97.g; B_Q99=Color_At_T_Q97.b; A_Q99=Color_At_T_Q97.a;float ClampF_Q88=clamp(0.0,Minus_F_Q87,1.0);float Result_Q93;Conditional_Float_B93(_Decal_Front_Only_,ClampF_Q88,1.0,Result_Q93);vec4 Vec4_Q89=vec4(Result_Q93,Radial_Gradient_Q130,G_Q99,B_Q99);vec3 Position=Pos_World_Q12;vec3 Normal=Nrm_World_Q32;vec2 UV=XY_Q85;vec3 Tangent=Tangent_World_N_Q27;vec3 Binormal=Difference_Q61;vec4 Color=Out_Color_Q34;vec4 Extra1=Vec4_Q89;vec4 Extra2=Blob_Info_Q23;vec4 Extra3=Blob_Info_Q24;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.fragment.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlSliderThumbPixelShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlSliderThumbPixelShader",g=`uniform vec3 cameraPosition;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform vec4 Global_Left_Index_Middle_Position;uniform vec4 Global_Right_Index_Middle_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;void Blob_Fragment_B180(
sampler2D Blob_Texture,
vec4 Blob_Info1,
vec4 Blob_Info2,
out vec4 Blob_Color)
{float k1=dot(Blob_Info1.xy,Blob_Info1.xy);float k2=dot(Blob_Info2.xy,Blob_Info2.xy);vec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);Blob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);}
void FastLinearTosRGB_B192(
vec4 Linear,
out vec4 sRGB)
{sRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));sRGB.a=Linear.a;}
void Scale_RGB_B209(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=vec4(Scalar,Scalar,Scalar,1)*Color;}
void Fragment_Main_B271(
float Sun_Intensity,
float Sun_Theta,
float Sun_Phi,
vec3 Normal,
vec4 Albedo,
float Fresnel_Reflect,
float Shininess,
vec3 Incident,
vec4 Horizon_Color,
vec4 Sky_Color,
vec4 Ground_Color,
float Indirect_Diffuse,
float Specular,
float Horizon_Power,
float Reflection,
vec4 Reflection_Sample,
vec4 Indirect_Sample,
float Sharpness,
float SSS,
float Subsurface,
vec4 Translucence,
vec4 Rim_Light,
vec4 Iridescence,
out vec4 Result)
{float theta=Sun_Theta*2.0*3.14159;float phi=Sun_Phi*3.14159;vec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));float NdotL=max(dot(lightDir,Normal),0.0);vec3 R=reflect(Incident,Normal);float RdotL=max(0.0,dot(R,lightDir));float specular=pow(RdotL,Shininess);specular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);vec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);Result=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;}
void Bulge_B229(
bool Enabled,
vec3 Normal,
vec3 Tangent,
float Bulge_Height,
vec4 UV,
float Bulge_Radius,
vec3 ButtonN,
out vec3 New_Normal)
{vec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));vec3 B=(cross(Normal,Tangent));float k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;k=sin(k*3.14159*0.5);k*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));New_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;New_Normal=Enabled ? New_Normal : Normal;}
void SSS_B227(
vec3 ButtonN,
vec3 Normal,
vec3 Incident,
out float Result)
{float NdotI=abs(dot(Normal,Incident));float BdotI=abs(dot(ButtonN,Incident));Result=(abs(NdotI-BdotI)); }
void FingerOcclusion_B217(
float Width,
float DistToCenter,
float Fuzz,
float Min_Fuzz,
vec3 Position,
vec3 Forward,
vec3 Nearest,
float Fade_Out,
out float NotInShadow)
{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}
void FingerOcclusion_B218(
float Width,
float DistToCenter,
float Fuzz,
float Min_Fuzz,
vec3 Position,
vec3 Forward,
vec3 Nearest,
float Fade_Out,
out float NotInShadow)
{float d=dot((Nearest-Position),Forward);float sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);NotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);}
void Scale_Color_B241(
vec4 Color,
float Scalar,
out vec4 Result)
{Result=Scalar*Color;}
void From_HSV_B223(
float Hue,
float Saturation,
float Value,
float Alpha,
out vec4 Color)
{vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);Color.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);Color.a=Alpha;}
void Fast_Fresnel_B272(
float Front_Reflect,
float Edge_Reflect,
float Power,
vec3 Normal,
vec3 Incident,
out float Transmit,
out float Reflect)
{float d=max(-dot(Incident,Normal),0.0);Reflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(1.0-d,Power);Transmit=1.0-Reflect;}
void Mapped_Environment_B201(
sampler2D Reflected_Environment,
sampler2D Indirect_Environment,
vec3 Dir,
out vec4 Reflected_Color,
out vec4 Indirect_Diffuse)
{Reflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));Indirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));}
vec4 SampleEnv_Bid200(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)
{float k=pow(abs(D.y),exponent);vec4 C;if (D.y>0.0) {C=mix(H,S,k);} else {C=mix(H,G,k); }
return C;}
void Sky_Environment_B200(
vec3 Normal,
vec3 Reflected,
vec4 Sky_Color,
vec4 Horizon_Color,
vec4 Ground_Color,
float Horizon_Power,
out vec4 Reflected_Color,
out vec4 Indirect_Color)
{Reflected_Color=SampleEnv_Bid200(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);Indirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);}
void Min_Segment_Distance_B215(
vec3 P0,
vec3 P1,
vec3 Q0,
vec3 Q1,
out vec3 NearP,
out vec3 NearQ,
out float Distance)
{vec3 u=P1-P0;vec3 v=Q1-Q0;vec3 w=P0-Q0;float a=dot(u,u);float b=dot(u,v);float c=dot(v,v);float d=dot(u,w);float e=dot(v,w);float D=a*c-b*b;float sD=D;float tD=D;float sc,sN,tc,tN;if (D<0.00001) {sN=0.0;sD=1.0;tN=e;tD=c;} else {sN=(b*e-c*d);tN=(a*e-b*d);if (sN<0.0) {sN=0.0;tN=e;tD=c;} else if (sN>sD) {sN=sD;tN=e+b;tD=c;}}
if (tN<0.0) {tN=0.0;if (-d<0.0) {sN=0.0;} else if (-d>a) {sN=sD;} else {sN=-d;sD=a;}} else if (tN>tD) {tN=tD;if ((-d+b)<0.0) {sN=0.0;} else if ((-d+b)>a) {sN=sD;} else {sN=(-d+b);sD=a;}}
sc=abs(sN)<0.000001 ? 0.0 : sN/sD;tc=abs(tN)<0.000001 ? 0.0 : tN/tD;NearP=P0+sc*u;NearQ=Q0+tc*v;Distance=distance(NearP,NearQ);}
void To_XYZ_B224(
vec3 Vec3,
out float X,
out float Y,
out float Z)
{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}
void Finger_Positions_B214(
vec3 Left_Index_Pos,
vec3 Right_Index_Pos,
vec3 Left_Index_Middle_Pos,
vec3 Right_Index_Middle_Pos,
out vec3 Left_Index,
out vec3 Right_Index,
out vec3 Left_Index_Middle,
out vec3 Right_Index_Middle)
{Left_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);Right_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);Left_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);Right_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);}
void VaryHSV_B258(
vec3 HSV_In,
float Hue_Shift,
float Saturation_Shift,
float Value_Shift,
out vec3 HSV_Out)
{HSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));}
void Remap_Range_B264(
float In_Min,
float In_Max,
float Out_Min,
float Out_Max,
float In,
out float Out)
{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}
void To_HSV_B225(
vec4 Color,
out float Hue,
out float Saturation,
out float Value,
out float Alpha,
out vec3 HSV)
{vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);vec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);float d=q.x-min(q.w,q.y);float e=1.0e-10;Hue=abs(q.z+(q.w-q.y)/(6.0*d+e));Saturation=d/(q.x+e);Value=q.x;Alpha=Color.a;HSV=vec3(Hue,Saturation,Value);}
void Code_B260(
float X,
out float Result)
{Result=(acos(X)/3.14159-0.5)*2.0;}
void Rim_Light_B282(
vec3 Front,
vec3 Normal,
vec3 Incident,
float Rim_Intensity,
sampler2D Texture,
out vec4 Result)
{vec3 R=reflect(Incident,Normal);float RdotF=dot(R,Front);float RdotL=sqrt(1.0-RdotF*RdotF);vec2 UV=vec2(R.y*0.5+0.5,0.5);vec4 Color=texture(Texture,UV);Result=Color;}
void main()
{vec4 Blob_Color_Q180;
#if BLOB_ENABLE
Blob_Fragment_B180(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q180);
#else
Blob_Color_Q180=vec4(0,0,0,0);
#endif
vec3 Incident_Q189=normalize(vPosition-cameraPosition);vec3 Normalized_Q188=normalize(vNormal);vec3 Normalized_Q221=normalize(vTangent);vec4 Color_Q233;
#if DECAL_ENABLE
Color_Q233=texture(_Decal_,vUV);
#else
Color_Q233=vec4(0,0,0,0);
#endif
float X_Q240;float Y_Q240;float Z_Q240;float W_Q240;X_Q240=vExtra1.x;Y_Q240=vExtra1.y;Z_Q240=vExtra1.z;W_Q240=vExtra1.w;vec4 Linear_Q193;Linear_Q193.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);Linear_Q193.a=_Sky_Color_.a;vec4 Linear_Q194;Linear_Q194.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);Linear_Q194.a=_Horizon_Color_.a;vec4 Linear_Q195;Linear_Q195.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);Linear_Q195.a=_Ground_Color_.a;vec3 Left_Index_Q214;vec3 Right_Index_Q214;vec3 Left_Index_Middle_Q214;vec3 Right_Index_Middle_Q214;Finger_Positions_B214(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q214,Right_Index_Q214,Left_Index_Middle_Q214,Right_Index_Middle_Q214);vec4 Linear_Q196;Linear_Q196.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);Linear_Q196.a=_Albedo_.a;vec3 Normalized_Q257=normalize(vBinormal);vec3 Incident_Q220=normalize(vPosition-cameraPosition);vec3 New_Normal_Q229;Bulge_B229(_Bulge_Enabled_,Normalized_Q188,Normalized_Q221,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q229);float Result_Q227;SSS_B227(vBinormal,New_Normal_Q229,Incident_Q189,Result_Q227);vec4 Result_Q241;Scale_Color_B241(Color_Q233,X_Q240,Result_Q241);float Transmit_Q272;float Reflect_Q272;Fast_Fresnel_B272(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q229,Incident_Q189,Transmit_Q272,Reflect_Q272);float Product_Q275=Y_Q240*Y_Q240;vec3 NearP_Q215;vec3 NearQ_Q215;float Distance_Q215;Min_Segment_Distance_B215(Left_Index_Q214,Left_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q215,NearQ_Q215,Distance_Q215);vec3 NearP_Q213;vec3 NearQ_Q213;float Distance_Q213;Min_Segment_Distance_B215(Right_Index_Q214,Right_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q213,NearQ_Q213,Distance_Q213);vec3 Reflected_Q197=reflect(Incident_Q189,New_Normal_Q229);vec4 Product_Q253=Linear_Q196*vec4(1,1,1,1);vec4 Result_Q282;Rim_Light_B282(Normalized_Q257,Normalized_Q188,Incident_Q220,_Rim_Intensity_,_Rim_Texture_,Result_Q282);float Dot_Q222=dot(Incident_Q220, Normalized_Q221);float MaxAB_Q273=max(Reflect_Q272,Product_Q275);float NotInShadow_Q217;
#if OCCLUSION_ENABLED
FingerOcclusion_B217(_Width_,Distance_Q215,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q215,_Clip_Fade_,NotInShadow_Q217);
#else
NotInShadow_Q217=1.0;
#endif
float NotInShadow_Q218;
#if OCCLUSION_ENABLED
FingerOcclusion_B218(_Width_,Distance_Q213,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q213,_Clip_Fade_,NotInShadow_Q218);
#else
NotInShadow_Q218=1.0;
#endif
vec4 Reflected_Color_Q201;vec4 Indirect_Diffuse_Q201;
#if ENV_ENABLE
Mapped_Environment_B201(_Reflection_Map_,_Indirect_Environment_,Reflected_Q197,Reflected_Color_Q201,Indirect_Diffuse_Q201);
#else
Reflected_Color_Q201=vec4(0,0,0,1);Indirect_Diffuse_Q201=vec4(0,0,0,1);
#endif
vec4 Reflected_Color_Q200;vec4 Indirect_Color_Q200;
#if SKY_ENABLED
Sky_Environment_B200(New_Normal_Q229,Reflected_Q197,Linear_Q193,Linear_Q194,Linear_Q195,_Horizon_Power_,Reflected_Color_Q200,Indirect_Color_Q200);
#else
Reflected_Color_Q200=vec4(0,0,0,1);Indirect_Color_Q200=vec4(0,0,0,1);
#endif
float Hue_Q225;float Saturation_Q225;float Value_Q225;float Alpha_Q225;vec3 HSV_Q225;To_HSV_B225(Product_Q253,Hue_Q225,Saturation_Q225,Value_Q225,Alpha_Q225,HSV_Q225);float Hue_Q277;float Saturation_Q277;float Value_Q277;float Alpha_Q277;vec3 HSV_Q277;To_HSV_B225(Result_Q282,Hue_Q277,Saturation_Q277,Value_Q277,Alpha_Q277,HSV_Q277);float Result_Q260;Code_B260(Dot_Q222,Result_Q260);float AbsA_Q226=abs(Result_Q260);float MinAB_Q208=min(NotInShadow_Q217,NotInShadow_Q218);vec4 Sum_Q198=Reflected_Color_Q201+Reflected_Color_Q200;vec4 Sum_Q199=Indirect_Diffuse_Q201+Indirect_Color_Q200;vec3 HSV_Out_Q276;VaryHSV_B258(HSV_Q277,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q276);float Out_Q264;Remap_Range_B264(-1.0,1.0,0.0,1.0,Result_Q260,Out_Q264);float Product_Q256;Product_Q256=AbsA_Q226*_Hue_Shift_;float X_Q278;float Y_Q278;float Z_Q278;To_XYZ_B224(HSV_Out_Q276,X_Q278,Y_Q278,Z_Q278);vec2 Vec2_Q262=vec2(Out_Q264,0.5);vec3 HSV_Out_Q258;VaryHSV_B258(HSV_Q225,Product_Q256,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q258);vec4 Color_Q279;From_HSV_B223(X_Q278,Y_Q278,Z_Q278,0.0,Color_Q279);vec4 Color_Q261;
#if IRIDESCENCE_ENABLED
Color_Q261=texture(_Iridescence_Texture_,Vec2_Q262);
#else
Color_Q261=vec4(0,0,0,0);
#endif
float X_Q224;float Y_Q224;float Z_Q224;To_XYZ_B224(HSV_Out_Q258,X_Q224,Y_Q224,Z_Q224);vec4 Result_Q281=_Rim_Intensity_*Color_Q279;vec4 Result_Q263=_Iridescence_Intensity_*Color_Q261;vec4 Color_Q223;From_HSV_B223(X_Q224,Y_Q224,Z_Q224,0.0,Color_Q223);vec4 Result_Q234=Result_Q241+(1.0-Result_Q241.a)*Color_Q223;vec4 Result_Q271;Fragment_Main_B271(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q229,Result_Q234,MaxAB_Q273,_Shininess_,Incident_Q189,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q198,Sum_Q199,_Sharpness_,Result_Q227,_Subsurface_,vec4(0,0,0,0),Result_Q281,Result_Q263,Result_Q271);vec4 Result_Q209;Scale_RGB_B209(Result_Q271,MinAB_Q208,Result_Q209);vec4 sRGB_Q192;FastLinearTosRGB_B192(Result_Q209,sRGB_Q192);vec4 Result_Q181=Blob_Color_Q180+(1.0-Blob_Color_Q180.a)*sRGB_Q192;vec4 Result_Q190=Result_Q181; Result_Q190.a=1.0;vec4 Out_Color=Result_Q190;float Clip_Threshold=0.001;bool To_sRGB=false;gl_FragColor=Out_Color;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/materials/mrdl/shaders/mrdlSliderThumb.vertex.ts":(B,E,d)=>{d.r(E),d.d(E,{mrdlSliderThumbVertexShader:()=>b});var c=d("babylonjs/Misc/perfCounter"),l="mrdlSliderThumbVertexShader",g=`uniform mat4 world;uniform mat4 viewProjection;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;
#ifdef TANGENT
attribute vec3 tangent;
#else
const vec3 tangent=vec3(0.);
#endif
uniform float _Radius_;uniform float _Bevel_Front_;uniform float _Bevel_Front_Stretch_;uniform float _Bevel_Back_;uniform float _Bevel_Back_Stretch_;uniform float _Radius_Top_Left_;uniform float _Radius_Top_Right_;uniform float _Radius_Bottom_Left_;uniform float _Radius_Bottom_Right_;uniform bool _Bulge_Enabled_;uniform float _Bulge_Height_;uniform float _Bulge_Radius_;uniform float _Sun_Intensity_;uniform float _Sun_Theta_;uniform float _Sun_Phi_;uniform float _Indirect_Diffuse_;uniform vec4 _Albedo_;uniform float _Specular_;uniform float _Shininess_;uniform float _Sharpness_;uniform float _Subsurface_;uniform vec4 _Left_Color_;uniform vec4 _Right_Color_;uniform float _Reflection_;uniform float _Front_Reflect_;uniform float _Edge_Reflect_;uniform float _Power_;uniform vec4 _Sky_Color_;uniform vec4 _Horizon_Color_;uniform vec4 _Ground_Color_;uniform float _Horizon_Power_;uniform sampler2D _Reflection_Map_;uniform sampler2D _Indirect_Environment_;uniform float _Width_;uniform float _Fuzz_;uniform float _Min_Fuzz_;uniform float _Clip_Fade_;uniform float _Hue_Shift_;uniform float _Saturation_Shift_;uniform float _Value_Shift_;uniform vec3 _Blob_Position_;uniform float _Blob_Intensity_;uniform float _Blob_Near_Size_;uniform float _Blob_Far_Size_;uniform float _Blob_Near_Distance_;uniform float _Blob_Far_Distance_;uniform float _Blob_Fade_Length_;uniform float _Blob_Pulse_;uniform float _Blob_Fade_;uniform sampler2D _Blob_Texture_;uniform vec3 _Blob_Position_2_;uniform float _Blob_Near_Size_2_;uniform float _Blob_Pulse_2_;uniform float _Blob_Fade_2_;uniform vec3 _Left_Index_Pos_;uniform vec3 _Right_Index_Pos_;uniform vec3 _Left_Index_Middle_Pos_;uniform vec3 _Right_Index_Middle_Pos_;uniform sampler2D _Decal_;uniform vec2 _Decal_Scale_XY_;uniform bool _Decal_Front_Only_;uniform float _Rim_Intensity_;uniform sampler2D _Rim_Texture_;uniform float _Rim_Hue_Shift_;uniform float _Rim_Saturation_Shift_;uniform float _Rim_Value_Shift_;uniform float _Iridescence_Intensity_;uniform sampler2D _Iridescence_Texture_;uniform bool Use_Global_Left_Index;uniform bool Use_Global_Right_Index;uniform vec4 Global_Left_Index_Tip_Position;uniform vec4 Global_Right_Index_Tip_Position;uniform vec4 Global_Left_Thumb_Tip_Position;uniform vec4 Global_Right_Thumb_Tip_Position;uniform float Global_Left_Index_Tip_Proximity;uniform float Global_Right_Index_Tip_Proximity;varying vec3 vPosition;varying vec3 vNormal;varying vec2 vUV;varying vec3 vTangent;varying vec3 vBinormal;varying vec4 vColor;varying vec4 vExtra1;varying vec4 vExtra2;varying vec4 vExtra3;void Object_To_World_Pos_B162(
vec3 Pos_Object,
out vec3 Pos_World)
{Pos_World=(world*vec4(Pos_Object,1.0)).xyz;}
void Object_To_World_Normal_B182(
vec3 Nrm_Object,
out vec3 Nrm_World)
{Nrm_World=(vec4(Nrm_Object,0.0)).xyz;}
void Blob_Vertex_B173(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
float Blob_Fade_Length,
float Blob_Pulse,
float Blob_Fade,
out vec4 Blob_Info)
{vec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}
void Blob_Vertex_B174(
vec3 Position,
vec3 Normal,
vec3 Tangent,
vec3 Bitangent,
vec3 Blob_Position,
float Intensity,
float Blob_Near_Size,
float Blob_Far_Size,
float Blob_Near_Distance,
float Blob_Far_Distance,
float Blob_Fade_Length,
float Blob_Pulse,
float Blob_Fade,
out vec4 Blob_Info)
{vec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);vec3 delta=blob-Position;float dist=dot(Normal,delta);float lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);float fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);float size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;vec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);float Fade=fadeValue*Intensity*Blob_Fade;float Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);Blob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);}
void Move_Verts_B280(
float Anisotropy,
vec3 P,
float Radius,
float Bevel,
vec3 Normal_Object,
float ScaleZ,
float Stretch,
out vec3 New_P,
out vec2 New_UV,
out float Radial_Gradient,
out vec3 Radial_Dir,
out vec3 New_Normal)
{vec2 UV=P.xy*2.0+0.5;vec2 center=clamp(UV,0.0,1.0);vec2 delta=UV-center;float deltad=(length(delta)*2.0);float f=(Bevel+(Radius-Bevel)*Stretch)/Radius;float innerd=clamp(deltad*2.0,0.0,1.0);float outerd=clamp(deltad*2.0-1.0,0.0,1.0);float bevelAngle=outerd*3.14159*0.5;float sinb=sin(bevelAngle);float cosb=cos(bevelAngle);float beveld=(1.0-f)*innerd+f*sinb;float br=outerd;vec2 r2=2.0*vec2(Radius/Anisotropy,Radius);float dir=P.z<0.0001 ? 1.0 : -1.0;New_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);New_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);Radial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);Radial_Dir=vec3(delta*r2,0.0);vec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);New_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;}
void Object_To_World_Dir_B210(
vec3 Dir_Object,
out vec3 Normal_World,
out vec3 Normal_World_N,
out float Normal_Length)
{Normal_World=(world*vec4(Dir_Object,0.0)).xyz;Normal_Length=length(Normal_World);Normal_World_N=Normal_World/Normal_Length;}
void To_XYZ_B228(
vec3 Vec3,
out float X,
out float Y,
out float Z)
{X=Vec3.x;Y=Vec3.y;Z=Vec3.z;}
void Conditional_Float_B243(
bool Which,
float If_True,
float If_False,
out float Result)
{Result=Which ? If_True : If_False;}
void Object_To_World_Dir_B178(
vec3 Dir_Object,
out vec3 Binormal_World,
out vec3 Binormal_World_N,
out float Binormal_Length)
{Binormal_World=(world*vec4(Dir_Object,0.0)).xyz;Binormal_Length=length(Binormal_World);Binormal_World_N=Binormal_World/Binormal_Length;}
void Pick_Radius_B219(
float Radius,
float Radius_Top_Left,
float Radius_Top_Right,
float Radius_Bottom_Left,
float Radius_Bottom_Right,
vec3 Position,
out float Result)
{bool whichY=Position.y>0.0;Result=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);Result*=Radius;}
void Conditional_Float_B186(
bool Which,
float If_True,
float If_False,
out float Result)
{Result=Which ? If_True : If_False;}
void Greater_Than_B187(
float Left,
float Right,
out bool Not_Greater_Than,
out bool Greater_Than)
{Greater_Than=Left>Right;Not_Greater_Than=!Greater_Than;}
void Remap_Range_B255(
float In_Min,
float In_Max,
float Out_Min,
float Out_Max,
float In,
out float Out)
{Out=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));}
void main()
{vec2 XY_Q235;XY_Q235=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);vec3 Tangent_World_Q177;vec3 Tangent_World_N_Q177;float Tangent_Length_Q177;Tangent_World_Q177=(world*vec4(vec3(1,0,0),0.0)).xyz;Tangent_Length_Q177=length(Tangent_World_Q177);Tangent_World_N_Q177=Tangent_World_Q177/Tangent_Length_Q177;vec3 Normal_World_Q210;vec3 Normal_World_N_Q210;float Normal_Length_Q210;Object_To_World_Dir_B210(vec3(0,0,1),Normal_World_Q210,Normal_World_N_Q210,Normal_Length_Q210);float X_Q228;float Y_Q228;float Z_Q228;To_XYZ_B228(position,X_Q228,Y_Q228,Z_Q228);vec3 Nrm_World_Q176;Nrm_World_Q176=normalize((world*vec4(normal,0.0)).xyz);vec3 Binormal_World_Q178;vec3 Binormal_World_N_Q178;float Binormal_Length_Q178;Object_To_World_Dir_B178(vec3(0,1,0),Binormal_World_Q178,Binormal_World_N_Q178,Binormal_Length_Q178);float Anisotropy_Q179=Tangent_Length_Q177/Binormal_Length_Q178;float Result_Q219;Pick_Radius_B219(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q219);float Anisotropy_Q203=Binormal_Length_Q178/Normal_Length_Q210;bool Not_Greater_Than_Q187;bool Greater_Than_Q187;Greater_Than_B187(Z_Q228,0.0,Not_Greater_Than_Q187,Greater_Than_Q187);vec4 Linear_Q251;Linear_Q251.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);Linear_Q251.a=_Left_Color_.a;vec4 Linear_Q252;Linear_Q252.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);Linear_Q252.a=_Right_Color_.a;vec3 Difference_Q211=vec3(0,0,0)-Normal_World_N_Q210;vec4 Out_Color_Q184=vec4(X_Q228,Y_Q228,Z_Q228,1);float Result_Q186;Conditional_Float_B186(Greater_Than_Q187,_Bevel_Back_,_Bevel_Front_,Result_Q186);float Result_Q244;Conditional_Float_B186(Greater_Than_Q187,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q244);vec3 New_P_Q280;vec2 New_UV_Q280;float Radial_Gradient_Q280;vec3 Radial_Dir_Q280;vec3 New_Normal_Q280;Move_Verts_B280(Anisotropy_Q179,position,Result_Q219,Result_Q186,normal,Anisotropy_Q203,Result_Q244,New_P_Q280,New_UV_Q280,Radial_Gradient_Q280,Radial_Dir_Q280,New_Normal_Q280);float X_Q248;float Y_Q248;X_Q248=New_UV_Q280.x;Y_Q248=New_UV_Q280.y;vec3 Pos_World_Q162;Object_To_World_Pos_B162(New_P_Q280,Pos_World_Q162);vec3 Nrm_World_Q182;Object_To_World_Normal_B182(New_Normal_Q280,Nrm_World_Q182);vec4 Blob_Info_Q173;
#if BLOB_ENABLE
Blob_Vertex_B173(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q173);
#else
Blob_Info_Q173=vec4(0,0,0,0);
#endif
vec4 Blob_Info_Q174;
#if BLOB_ENABLE_2
Blob_Vertex_B174(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q174);
#else
Blob_Info_Q174=vec4(0,0,0,0);
#endif
float Out_Q255;Remap_Range_B255(0.0,1.0,0.0,1.0,X_Q248,Out_Q255);float X_Q236;float Y_Q236;float Z_Q236;To_XYZ_B228(Nrm_World_Q182,X_Q236,Y_Q236,Z_Q236);vec4 Color_At_T_Q247=mix(Linear_Q251,Linear_Q252,Out_Q255);float Minus_F_Q237=-Z_Q236;float R_Q249;float G_Q249;float B_Q249;float A_Q249;R_Q249=Color_At_T_Q247.r; G_Q249=Color_At_T_Q247.g; B_Q249=Color_At_T_Q247.b; A_Q249=Color_At_T_Q247.a;float ClampF_Q238=clamp(0.0,Minus_F_Q237,1.0);float Result_Q243;Conditional_Float_B243(_Decal_Front_Only_,ClampF_Q238,1.0,Result_Q243);vec4 Vec4_Q239=vec4(Result_Q243,Radial_Gradient_Q280,G_Q249,B_Q249);vec3 Position=Pos_World_Q162;vec3 Normal=Nrm_World_Q182;vec2 UV=XY_Q235;vec3 Tangent=Tangent_World_N_Q177;vec3 Binormal=Difference_Q211;vec4 Color=Out_Color_Q184;vec4 Extra1=Vec4_Q239;vec4 Extra2=Blob_Info_Q173;vec4 Extra3=Blob_Info_Q174;gl_Position=viewProjection*vec4(Position,1);vPosition=Position;vNormal=Normal;vUV=UV;vTangent=Tangent;vBinormal=Binormal;vColor=Color;vExtra1=Extra1;vExtra2=Extra2;vExtra3=Extra3;}`;c.ShaderStore.ShadersStore[l]=g;var b={name:l,shader:g}},"../../../dev/gui/src/3D/vector3WithInfo.ts":(B,E,d)=>{d.r(E),d.d(E,{Vector3WithInfo:()=>g});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/perfCounter"),g=function(b){(0,c.__extends)(v,b);function v(_,o){o===void 0&&(o=0);var t=b.call(this,_.x,_.y,_.z)||this;return t.buttonIndex=o,t}return v}(l.Vector3)},"../../../dev/gui/src/index.ts":(B,E,d)=>{d.r(E),d.d(E,{AbstractButton3D:()=>l.AbstractButton3D,AdvancedDynamicTexture:()=>c.AdvancedDynamicTexture,AdvancedDynamicTextureInstrumentation:()=>c.AdvancedDynamicTextureInstrumentation,BaseGradient:()=>c.BaseGradient,BaseSlider:()=>c.BaseSlider,Button:()=>c.Button,Button3D:()=>l.Button3D,Checkbox:()=>c.Checkbox,CheckboxGroup:()=>c.CheckboxGroup,ColorPicker:()=>c.ColorPicker,Container:()=>c.Container,Container3D:()=>l.Container3D,Control:()=>c.Control,Control3D:()=>l.Control3D,CornerHandle:()=>l.CornerHandle,CylinderPanel:()=>l.CylinderPanel,DisplayGrid:()=>c.DisplayGrid,Ellipse:()=>c.Ellipse,FluentBackplateMaterial:()=>l.FluentBackplateMaterial,FluentButtonMaterial:()=>l.FluentButtonMaterial,FluentMaterial:()=>l.FluentMaterial,FluentMaterialDefines:()=>l.FluentMaterialDefines,FocusableButton:()=>c.FocusableButton,GUI3DManager:()=>l.GUI3DManager,GizmoHandle:()=>l.GizmoHandle,Grid:()=>c.Grid,HandMenu:()=>l.HandMenu,HandleMaterial:()=>l.HandleMaterial,HandleState:()=>l.HandleState,HolographicBackplate:()=>l.HolographicBackplate,HolographicButton:()=>l.HolographicButton,HolographicSlate:()=>l.HolographicSlate,Image:()=>c.Image,ImageBasedSlider:()=>c.ImageBasedSlider,ImageScrollBar:()=>c.ImageScrollBar,InputPassword:()=>c.InputPassword,InputText:()=>c.InputText,InputTextArea:()=>c.InputTextArea,KeyPropertySet:()=>c.KeyPropertySet,Line:()=>c.Line,LinearGradient:()=>c.LinearGradient,MRDLBackplateMaterial:()=>l.MRDLBackplateMaterial,MRDLSliderBarMaterial:()=>l.MRDLSliderBarMaterial,MRDLSliderThumbMaterial:()=>l.MRDLSliderThumbMaterial,MathTools:()=>c.MathTools,Matrix2D:()=>c.Matrix2D,Measure:()=>c.Measure,MeshButton3D:()=>l.MeshButton3D,MultiLine:()=>c.MultiLine,MultiLinePoint:()=>c.MultiLinePoint,NearMenu:()=>l.NearMenu,PlanePanel:()=>l.PlanePanel,RadialGradient:()=>c.RadialGradient,RadioButton:()=>c.RadioButton,RadioGroup:()=>c.RadioGroup,Rectangle:()=>c.Rectangle,ScatterPanel:()=>l.ScatterPanel,ScrollBar:()=>c.ScrollBar,ScrollViewer:()=>c.ScrollViewer,SelectionPanel:()=>c.SelectionPanel,SelectorGroup:()=>c.SelectorGroup,SideHandle:()=>l.SideHandle,SlateGizmo:()=>l.SlateGizmo,Slider:()=>c.Slider,Slider3D:()=>l.Slider3D,SliderGroup:()=>c.SliderGroup,SpherePanel:()=>l.SpherePanel,StackPanel:()=>c.StackPanel,StackPanel3D:()=>l.StackPanel3D,Style:()=>c.Style,TextBlock:()=>c.TextBlock,TextWrapper:()=>c.TextWrapper,TextWrapping:()=>c.TextWrapping,ToggleButton:()=>c.ToggleButton,TouchButton3D:()=>l.TouchButton3D,TouchHolographicButton:()=>l.TouchHolographicButton,TouchHolographicButtonV3:()=>l.TouchHolographicButtonV3,TouchHolographicMenu:()=>l.TouchHolographicMenu,TouchMeshButton3D:()=>l.TouchMeshButton3D,ValueAndUnit:()=>c.ValueAndUnit,Vector2WithInfo:()=>c.Vector2WithInfo,Vector3WithInfo:()=>l.Vector3WithInfo,VirtualKeyboard:()=>c.VirtualKeyboard,VolumeBasedPanel:()=>l.VolumeBasedPanel,XmlLoader:()=>c.XmlLoader,name:()=>c.name});var c=d("../../../dev/gui/src/2D/index.ts"),l=d("../../../dev/gui/src/3D/index.ts")},"../../../lts/gui/src/legacy/legacy.ts":(B,E,d)=>{d.r(E),d.d(E,{AbstractButton3D:()=>c.AbstractButton3D,AdvancedDynamicTexture:()=>c.AdvancedDynamicTexture,AdvancedDynamicTextureInstrumentation:()=>c.AdvancedDynamicTextureInstrumentation,BaseGradient:()=>c.BaseGradient,BaseSlider:()=>c.BaseSlider,Button:()=>c.Button,Button3D:()=>c.Button3D,Checkbox:()=>c.Checkbox,CheckboxGroup:()=>c.CheckboxGroup,ColorPicker:()=>c.ColorPicker,Container:()=>c.Container,Container3D:()=>c.Container3D,Control:()=>c.Control,Control3D:()=>c.Control3D,CornerHandle:()=>c.CornerHandle,CylinderPanel:()=>c.CylinderPanel,DisplayGrid:()=>c.DisplayGrid,Ellipse:()=>c.Ellipse,FluentBackplateMaterial:()=>c.FluentBackplateMaterial,FluentButtonMaterial:()=>c.FluentButtonMaterial,FluentMaterial:()=>c.FluentMaterial,FluentMaterialDefines:()=>c.FluentMaterialDefines,FocusableButton:()=>c.FocusableButton,GUI3DManager:()=>c.GUI3DManager,GizmoHandle:()=>c.GizmoHandle,Grid:()=>c.Grid,HandMenu:()=>c.HandMenu,HandleMaterial:()=>c.HandleMaterial,HandleState:()=>c.HandleState,HolographicBackplate:()=>c.HolographicBackplate,HolographicButton:()=>c.HolographicButton,HolographicSlate:()=>c.HolographicSlate,Image:()=>c.Image,ImageBasedSlider:()=>c.ImageBasedSlider,ImageScrollBar:()=>c.ImageScrollBar,InputPassword:()=>c.InputPassword,InputText:()=>c.InputText,InputTextArea:()=>c.InputTextArea,KeyPropertySet:()=>c.KeyPropertySet,Line:()=>c.Line,LinearGradient:()=>c.LinearGradient,MRDLBackplateMaterial:()=>c.MRDLBackplateMaterial,MRDLSliderBarMaterial:()=>c.MRDLSliderBarMaterial,MRDLSliderThumbMaterial:()=>c.MRDLSliderThumbMaterial,MathTools:()=>c.MathTools,Matrix2D:()=>c.Matrix2D,Measure:()=>c.Measure,MeshButton3D:()=>c.MeshButton3D,MultiLine:()=>c.MultiLine,MultiLinePoint:()=>c.MultiLinePoint,NearMenu:()=>c.NearMenu,PlanePanel:()=>c.PlanePanel,RadialGradient:()=>c.RadialGradient,RadioButton:()=>c.RadioButton,RadioGroup:()=>c.RadioGroup,Rectangle:()=>c.Rectangle,ScatterPanel:()=>c.ScatterPanel,ScrollBar:()=>c.ScrollBar,ScrollViewer:()=>c.ScrollViewer,SelectionPanel:()=>c.SelectionPanel,SelectorGroup:()=>c.SelectorGroup,SideHandle:()=>c.SideHandle,SlateGizmo:()=>c.SlateGizmo,Slider:()=>c.Slider,Slider3D:()=>c.Slider3D,SliderGroup:()=>c.SliderGroup,SpherePanel:()=>c.SpherePanel,StackPanel:()=>c.StackPanel,StackPanel3D:()=>c.StackPanel3D,Style:()=>c.Style,TextBlock:()=>c.TextBlock,TextWrapper:()=>c.TextWrapper,TextWrapping:()=>c.TextWrapping,ToggleButton:()=>c.ToggleButton,TouchButton3D:()=>c.TouchButton3D,TouchHolographicButton:()=>c.TouchHolographicButton,TouchHolographicButtonV3:()=>c.TouchHolographicButtonV3,TouchHolographicMenu:()=>c.TouchHolographicMenu,TouchMeshButton3D:()=>c.TouchMeshButton3D,ValueAndUnit:()=>c.ValueAndUnit,Vector2WithInfo:()=>c.Vector2WithInfo,Vector3WithInfo:()=>c.Vector3WithInfo,VirtualKeyboard:()=>c.VirtualKeyboard,VolumeBasedPanel:()=>c.VolumeBasedPanel,XmlLoader:()=>c.XmlLoader,name:()=>c.name});var c=d("../../../dev/gui/src/index.ts"),l=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;typeof l<"u"&&(l.BABYLON=l.BABYLON||{},l.BABYLON.GUI||(l.BABYLON.GUI=c))},"babylonjs/Misc/perfCounter":B=>{B.exports=h},"../../../../node_modules/tslib/tslib.es6.mjs":(B,E,d)=>{d.r(E),d.d(E,{__addDisposableResource:()=>ue,__assign:()=>g,__asyncDelegator:()=>W,__asyncGenerator:()=>N,__asyncValues:()=>Q,__await:()=>R,__awaiter:()=>s,__classPrivateFieldGet:()=>q,__classPrivateFieldIn:()=>fe,__classPrivateFieldSet:()=>le,__createBinding:()=>f,__decorate:()=>v,__disposeResources:()=>ce,__esDecorate:()=>o,__exportStar:()=>m,__extends:()=>l,__generator:()=>u,__importDefault:()=>J,__importStar:()=>Y,__makeTemplateObject:()=>U,__metadata:()=>a,__param:()=>_,__propKey:()=>e,__read:()=>y,__rest:()=>b,__runInitializers:()=>t,__setFunctionName:()=>i,__spread:()=>M,__spreadArray:()=>x,__spreadArrays:()=>O,__values:()=>P,default:()=>be});var c=function(L,F){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,I){k.__proto__=I}||function(k,I){for(var S in I)Object.prototype.hasOwnProperty.call(I,S)&&(k[S]=I[S])},c(L,F)};function l(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");c(L,F);function k(){this.constructor=L}L.prototype=F===null?Object.create(F):(k.prototype=F.prototype,new k)}var g=function(){return g=Object.assign||function(F){for(var k,I=1,S=arguments.length;I<S;I++){k=arguments[I];for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(F[A]=k[A])}return F},g.apply(this,arguments)};function b(L,F){var k={};for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&F.indexOf(I)<0&&(k[I]=L[I]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,I=Object.getOwnPropertySymbols(L);S<I.length;S++)F.indexOf(I[S])<0&&Object.prototype.propertyIsEnumerable.call(L,I[S])&&(k[I[S]]=L[I[S]]);return k}function v(L,F,k,I){var S=arguments.length,A=S<3?F:I===null?I=Object.getOwnPropertyDescriptor(F,k):I,w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,F,k,I);else for(var V=L.length-1;V>=0;V--)(w=L[V])&&(A=(S<3?w(A):S>3?w(F,k,A):w(F,k))||A);return S>3&&A&&Object.defineProperty(F,k,A),A}function _(L,F){return function(k,I){F(k,I,L)}}function o(L,F,k,I,S,A){function w(te){if(te!==void 0&&typeof te!="function")throw new TypeError("Function expected");return te}for(var V=I.kind,G=V==="getter"?"get":V==="setter"?"set":"value",z=!F&&L?I.static?L:L.prototype:null,j=F||(z?Object.getOwnPropertyDescriptor(z,I.name):{}),X,K=!1,Z=k.length-1;Z>=0;Z--){var oe={};for(var ee in I)oe[ee]=ee==="access"?{}:I[ee];for(var ee in I.access)oe.access[ee]=I.access[ee];oe.addInitializer=function(te){if(K)throw new TypeError("Cannot add initializers after decoration has completed");A.push(w(te||null))};var re=(0,k[Z])(V==="accessor"?{get:j.get,set:j.set}:j[G],oe);if(V==="accessor"){if(re===void 0)continue;if(re===null||typeof re!="object")throw new TypeError("Object expected");(X=w(re.get))&&(j.get=X),(X=w(re.set))&&(j.set=X),(X=w(re.init))&&S.unshift(X)}else(X=w(re))&&(V==="field"?S.unshift(X):j[G]=X)}z&&Object.defineProperty(z,I.name,j),K=!0}function t(L,F,k){for(var I=arguments.length>2,S=0;S<F.length;S++)k=I?F[S].call(L,k):F[S].call(L);return I?k:void 0}function e(L){return typeof L=="symbol"?L:"".concat(L)}function i(L,F,k){return typeof F=="symbol"&&(F=F.description?"[".concat(F.description,"]"):""),Object.defineProperty(L,"name",{configurable:!0,value:k?"".concat(k," ",F):F})}function a(L,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,F)}function s(L,F,k,I){function S(A){return A instanceof k?A:new k(function(w){w(A)})}return new(k||(k=Promise))(function(A,w){function V(j){try{z(I.next(j))}catch(X){w(X)}}function G(j){try{z(I.throw(j))}catch(X){w(X)}}function z(j){j.done?A(j.value):S(j.value).then(V,G)}z((I=I.apply(L,F||[])).next())})}function u(L,F){var k={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},I,S,A,w;return w={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function V(z){return function(j){return G([z,j])}}function G(z){if(I)throw new TypeError("Generator is already executing.");for(;w&&(w=0,z[0]&&(k=0)),k;)try{if(I=1,S&&(A=z[0]&2?S.return:z[0]?S.throw||((A=S.return)&&A.call(S),0):S.next)&&!(A=A.call(S,z[1])).done)return A;switch(S=0,A&&(z=[z[0]&2,A.value]),z[0]){case 0:case 1:A=z;break;case 4:return k.label++,{value:z[1],done:!1};case 5:k.label++,S=z[1],z=[0];continue;case 7:z=k.ops.pop(),k.trys.pop();continue;default:if(A=k.trys,!(A=A.length>0&&A[A.length-1])&&(z[0]===6||z[0]===2)){k=0;continue}if(z[0]===3&&(!A||z[1]>A[0]&&z[1]<A[3])){k.label=z[1];break}if(z[0]===6&&k.label<A[1]){k.label=A[1],A=z;break}if(A&&k.label<A[2]){k.label=A[2],k.ops.push(z);break}A[2]&&k.ops.pop(),k.trys.pop();continue}z=F.call(L,k)}catch(j){z=[6,j],S=0}finally{I=A=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}}var f=Object.create?function(L,F,k,I){I===void 0&&(I=k);var S=Object.getOwnPropertyDescriptor(F,k);(!S||("get"in S?!F.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return F[k]}}),Object.defineProperty(L,I,S)}:function(L,F,k,I){I===void 0&&(I=k),L[I]=F[k]};function m(L,F){for(var k in L)k!=="default"&&!Object.prototype.hasOwnProperty.call(F,k)&&f(F,L,k)}function P(L){var F=typeof Symbol=="function"&&Symbol.iterator,k=F&&L[F],I=0;if(k)return k.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&I>=L.length&&(L=void 0),{value:L&&L[I++],done:!L}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(L,F){var k=typeof Symbol=="function"&&L[Symbol.iterator];if(!k)return L;var I=k.call(L),S,A=[],w;try{for(;(F===void 0||F-- >0)&&!(S=I.next()).done;)A.push(S.value)}catch(V){w={error:V}}finally{try{S&&!S.done&&(k=I.return)&&k.call(I)}finally{if(w)throw w.error}}return A}function M(){for(var L=[],F=0;F<arguments.length;F++)L=L.concat(y(arguments[F]));return L}function O(){for(var L=0,F=0,k=arguments.length;F<k;F++)L+=arguments[F].length;for(var I=Array(L),S=0,F=0;F<k;F++)for(var A=arguments[F],w=0,V=A.length;w<V;w++,S++)I[S]=A[w];return I}function x(L,F,k){if(k||arguments.length===2)for(var I=0,S=F.length,A;I<S;I++)(A||!(I in F))&&(A||(A=Array.prototype.slice.call(F,0,I)),A[I]=F[I]);return L.concat(A||Array.prototype.slice.call(F))}function R(L){return this instanceof R?(this.v=L,this):new R(L)}function N(L,F,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=k.apply(L,F||[]),S,A=[];return S={},w("next"),w("throw"),w("return"),S[Symbol.asyncIterator]=function(){return this},S;function w(K){I[K]&&(S[K]=function(Z){return new Promise(function(oe,ee){A.push([K,Z,oe,ee])>1||V(K,Z)})})}function V(K,Z){try{G(I[K](Z))}catch(oe){X(A[0][3],oe)}}function G(K){K.value instanceof R?Promise.resolve(K.value.v).then(z,j):X(A[0][2],K)}function z(K){V("next",K)}function j(K){V("throw",K)}function X(K,Z){K(Z),A.shift(),A.length&&V(A[0][0],A[0][1])}}function W(L){var F,k;return F={},I("next"),I("throw",function(S){throw S}),I("return"),F[Symbol.iterator]=function(){return this},F;function I(S,A){F[S]=L[S]?function(w){return(k=!k)?{value:R(L[S](w)),done:!1}:A?A(w):w}:A}}function Q(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=L[Symbol.asyncIterator],k;return F?F.call(L):(L=typeof P=="function"?P(L):L[Symbol.iterator](),k={},I("next"),I("throw"),I("return"),k[Symbol.asyncIterator]=function(){return this},k);function I(A){k[A]=L[A]&&function(w){return new Promise(function(V,G){w=L[A](w),S(V,G,w.done,w.value)})}}function S(A,w,V,G){Promise.resolve(G).then(function(z){A({value:z,done:V})},w)}}function U(L,F){return Object.defineProperty?Object.defineProperty(L,"raw",{value:F}):L.raw=F,L}var H=Object.create?function(L,F){Object.defineProperty(L,"default",{enumerable:!0,value:F})}:function(L,F){L.default=F};function Y(L){if(L&&L.__esModule)return L;var F={};if(L!=null)for(var k in L)k!=="default"&&Object.prototype.hasOwnProperty.call(L,k)&&f(F,L,k);return H(F,L),F}function J(L){return L&&L.__esModule?L:{default:L}}function q(L,F,k,I){if(k==="a"&&!I)throw new TypeError("Private accessor was defined without a getter");if(typeof F=="function"?L!==F||!I:!F.has(L))throw new TypeError("Cannot read private member from an object whose class did not declare it");return k==="m"?I:k==="a"?I.call(L):I?I.value:F.get(L)}function le(L,F,k,I,S){if(I==="m")throw new TypeError("Private method is not writable");if(I==="a"&&!S)throw new TypeError("Private accessor was defined without a setter");if(typeof F=="function"?L!==F||!S:!F.has(L))throw new TypeError("Cannot write private member to an object whose class did not declare it");return I==="a"?S.call(L,k):S?S.value=k:F.set(L,k),k}function fe(L,F){if(F===null||typeof F!="object"&&typeof F!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof L=="function"?F===L:L.has(F)}function ue(L,F,k){if(F!=null){if(typeof F!="object"&&typeof F!="function")throw new TypeError("Object expected.");var I;if(k){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");I=F[Symbol.asyncDispose]}if(I===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");I=F[Symbol.dispose]}if(typeof I!="function")throw new TypeError("Object not disposable.");L.stack.push({value:F,dispose:I,async:k})}else k&&L.stack.push({async:!0});return F}var ae=typeof SuppressedError=="function"?SuppressedError:function(L,F,k){var I=new Error(k);return I.name="SuppressedError",I.error=L,I.suppressed=F,I};function ce(L){function F(I){L.error=L.hasError?new ae(I,L.error,"An error was suppressed during disposal."):I,L.hasError=!0}function k(){for(;L.stack.length;){var I=L.stack.pop();try{var S=I.dispose&&I.dispose.call(I.value);if(I.async)return Promise.resolve(S).then(k,function(A){return F(A),k()})}catch(A){F(A)}}if(L.hasError)throw L.error}return k()}const be={__extends:l,__assign:g,__rest:b,__decorate:v,__param:_,__metadata:a,__awaiter:s,__generator:u,__createBinding:f,__exportStar:m,__values:P,__read:y,__spread:M,__spreadArrays:O,__spreadArray:x,__await:R,__asyncGenerator:N,__asyncDelegator:W,__asyncValues:Q,__makeTemplateObject:U,__importStar:Y,__importDefault:J,__classPrivateFieldGet:q,__classPrivateFieldSet:le,__classPrivateFieldIn:fe,__addDisposableResource:ue,__disposeResources:ce}}},T={};function C(B){var E=T[B];if(E!==void 0)return E.exports;var d=T[B]={exports:{}};return p[B](d,d.exports,C),d.exports}C.n=B=>{var E=B&&B.__esModule?()=>B.default:()=>B;return C.d(E,{a:E}),E},C.d=(B,E)=>{for(var d in E)C.o(E,d)&&!C.o(B,d)&&Object.defineProperty(B,d,{enumerable:!0,get:E[d]})},C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),C.o=(B,E)=>Object.prototype.hasOwnProperty.call(B,E),C.r=B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})};var D={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/C.r(D),C.d(D,{default:()=>E,gui:()=>B});var B=C("../../../lts/gui/src/legacy/legacy.ts");const E=B})(),D=D.default,D})())})(Rc);var ut=Rc.exports;function cf({progress:r}){return console.log("Rendering LoadingBar with progress:",r),qt.jsxs("div",{className:"loading-bar",children:[qt.jsx("div",{className:"loading-bar-fill",style:{width:`${r}%`}}),qt.jsxs("div",{className:"loading-bar-text",children:[r,"%"]})]})}var hf={exports:{}};(function(r,n){(function(p,T){r.exports=T(ds())})(typeof self<"u"?self:typeof hi<"u"?hi:hi,h=>(()=>{var p={"../../../dev/loaders/src/OBJ/index.ts":(B,E,d)=>{d.r(E),d.d(E,{MTLFileLoader:()=>c.MTLFileLoader,OBJFileLoader:()=>g.OBJFileLoader,SolidParser:()=>l.SolidParser});var c=d("../../../dev/loaders/src/OBJ/mtlFileLoader.ts");d("../../../dev/loaders/src/OBJ/objLoadingOptions.ts");var l=d("../../../dev/loaders/src/OBJ/solidParser.ts"),g=d("../../../dev/loaders/src/OBJ/objFileLoader.ts")},"../../../dev/loaders/src/OBJ/mtlFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{MTLFileLoader:()=>l});var c=d("babylonjs/Misc/observable"),l=function(){function g(){this.materials=[]}return g.prototype.parseMTL=function(b,v,_,o){if(!(v instanceof ArrayBuffer)){for(var t=v.split(`
`),e=/\s+/,i,a=null,s=0;s<t.length;s++){var u=t[s].trim();if(!(u.length===0||u.charAt(0)==="#")){var f=u.indexOf(" "),m=f>=0?u.substring(0,f):u;m=m.toLowerCase();var P=f>=0?u.substring(f+1).trim():"";if(m==="newmtl")a&&this.materials.push(a),b._blockEntityCollection=!!o,a=new c.StandardMaterial(P,b),a._parentContainer=o,b._blockEntityCollection=!1;else if(m==="kd"&&a)i=P.split(e,3).map(parseFloat),a.diffuseColor=c.Color3.FromArray(i);else if(m==="ka"&&a)i=P.split(e,3).map(parseFloat),a.ambientColor=c.Color3.FromArray(i);else if(m==="ks"&&a)i=P.split(e,3).map(parseFloat),a.specularColor=c.Color3.FromArray(i);else if(m==="ke"&&a)i=P.split(e,3).map(parseFloat),a.emissiveColor=c.Color3.FromArray(i);else if(m==="ns"&&a)a.specularPower=parseFloat(P);else if(m==="d"&&a)a.alpha=parseFloat(P);else if(m==="map_ka"&&a)a.ambientTexture=g._GetTexture(_,P,b);else if(m==="map_kd"&&a)a.diffuseTexture=g._GetTexture(_,P,b);else if(m==="map_ks"&&a)a.specularTexture=g._GetTexture(_,P,b);else if(m!=="map_ns")if(m==="map_bump"&&a){var y=P.split(e),M=y.indexOf("-bm"),O=null;M>=0&&(O=y[M+1],y.splice(M,2)),a.bumpTexture=g._GetTexture(_,y.join(" "),b),a.bumpTexture&&O!==null&&(a.bumpTexture.level=parseFloat(O))}else m==="map_d"&&a&&(a.opacityTexture=g._GetTexture(_,P,b))}}a&&this.materials.push(a)}},g._GetTexture=function(b,v,_){if(!v)return null;var o=b;if(b==="file:"){var t=v.lastIndexOf("\\");t===-1&&(t=v.lastIndexOf("/")),t>-1?o+=v.substr(t+1):o+=v}else o+=v;return new c.Texture(o,_,!1,g.INVERT_TEXTURE_Y)},g.INVERT_TEXTURE_Y=!0,g}()},"../../../dev/loaders/src/OBJ/objFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{OBJFileLoader:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/OBJ/mtlFileLoader.ts"),g=d("../../../dev/loaders/src/OBJ/solidParser.ts"),b=function(){function v(_){this.name="obj",this.extensions=".obj",this._assetContainer=null,this._loadingOptions=_||v._DefaultLoadingOptions}return Object.defineProperty(v,"INVERT_TEXTURE_Y",{get:function(){return l.MTLFileLoader.INVERT_TEXTURE_Y},set:function(_){l.MTLFileLoader.INVERT_TEXTURE_Y=_},enumerable:!1,configurable:!0}),Object.defineProperty(v,"_DefaultLoadingOptions",{get:function(){return{computeNormals:v.COMPUTE_NORMALS,optimizeNormals:v.OPTIMIZE_NORMALS,importVertexColors:v.IMPORT_VERTEX_COLORS,invertY:v.INVERT_Y,invertTextureY:v.INVERT_TEXTURE_Y,UVScaling:v.UV_SCALING,materialLoadingFailsSilently:v.MATERIAL_LOADING_FAILS_SILENTLY,optimizeWithUV:v.OPTIMIZE_WITH_UV,skipMaterials:v.SKIP_MATERIALS}},enumerable:!1,configurable:!0}),v.prototype._loadMTL=function(_,o,t,e){var i=o+_;c.Tools.LoadFile(i,t,void 0,void 0,!1,function(a,s){e(i,s)})},v.prototype.createPlugin=function(){return new v(v._DefaultLoadingOptions)},v.prototype.canDirectLoad=function(){return!1},v.prototype.importMeshAsync=function(_,o,t,e){return this._parseSolid(_,o,t,e).then(function(i){return{meshes:i,particleSystems:[],skeletons:[],animationGroups:[],transformNodes:[],geometries:[],lights:[]}})},v.prototype.loadAsync=function(_,o,t){return this.importMeshAsync(null,_,o,t).then(function(){})},v.prototype.loadAssetContainerAsync=function(_,o,t){var e=this,i=new c.AssetContainer(_);return this._assetContainer=i,this.importMeshAsync(null,_,o,t).then(function(a){return a.meshes.forEach(function(s){return i.meshes.push(s)}),a.meshes.forEach(function(s){var u=s.material;if(u&&i.materials.indexOf(u)==-1){i.materials.push(u);var f=u.getActiveTextures();f.forEach(function(m){i.textures.indexOf(m)==-1&&i.textures.push(m)})}}),e._assetContainer=null,i}).catch(function(a){throw e._assetContainer=null,a})},v.prototype._parseSolid=function(_,o,t,e){var i=this,a="",s=new l.MTLFileLoader,u=new Array,f=[],m=new g.SolidParser(u,f,this._loadingOptions);m.parse(_,t,o,this._assetContainer,function(y){a=y});var P=[];return a!==""&&!this._loadingOptions.skipMaterials&&P.push(new Promise(function(y,M){i._loadMTL(a,e,function(O){try{s.parseMTL(o,O,e,i._assetContainer);for(var x=0;x<s.materials.length;x++){for(var R=0,N=[],W=void 0;(W=u.indexOf(s.materials[x].name,R))>-1;)N.push(W),R=W+1;if(W===-1&&N.length===0)s.materials[x].dispose();else for(var Q=0;Q<N.length;Q++){var U=f[N[Q]],H=s.materials[x];U.material=H,U.getTotalIndices()||(H.pointsCloud=!0)}}y()}catch(Y){c.Tools.Warn("Error processing MTL file: '".concat(a,"'")),i._loadingOptions.materialLoadingFailsSilently?y():M(Y)}},function(O,x){c.Tools.Warn("Error downloading MTL file: '".concat(a,"'")),i._loadingOptions.materialLoadingFailsSilently?y():M(x)})})),Promise.all(P).then(function(){return f})},v.OPTIMIZE_WITH_UV=!0,v.INVERT_Y=!1,v.IMPORT_VERTEX_COLORS=!1,v.COMPUTE_NORMALS=!1,v.OPTIMIZE_NORMALS=!1,v.UV_SCALING=new c.Vector2(1,1),v.SKIP_MATERIALS=!1,v.MATERIAL_LOADING_FAILS_SILENTLY=!0,v}();c.SceneLoader&&c.SceneLoader.RegisterPlugin(new b)},"../../../dev/loaders/src/OBJ/objLoadingOptions.ts":(B,E,d)=>{d.r(E)},"../../../dev/loaders/src/OBJ/solidParser.ts":(B,E,d)=>{d.r(E),d.d(E,{SolidParser:()=>l});var c=d("babylonjs/Misc/observable"),l=function(){function g(b,v,_){this._positions=[],this._normals=[],this._uvs=[],this._colors=[],this._meshesFromObj=[],this._indicesForBabylon=[],this._wrappedPositionForBabylon=[],this._wrappedUvsForBabylon=[],this._wrappedColorsForBabylon=[],this._wrappedNormalsForBabylon=[],this._tuplePosNorm=[],this._curPositionInIndices=0,this._hasMeshes=!1,this._unwrappedPositionsForBabylon=[],this._unwrappedColorsForBabylon=[],this._unwrappedNormalsForBabylon=[],this._unwrappedUVForBabylon=[],this._triangles=[],this._materialNameFromObj="",this._objMeshName="",this._increment=1,this._isFirstMaterial=!0,this._grayColor=new c.Color4(.5,.5,.5,1),this._materialToUse=b,this._babylonMeshesArray=v,this._loadingOptions=_}return g.prototype._isInArray=function(b,v){b[v[0]]||(b[v[0]]={normals:[],idx:[]});var _=b[v[0]].normals.indexOf(v[1]);return _===-1?-1:b[v[0]].idx[_]},g.prototype._isInArrayUV=function(b,v){b[v[0]]||(b[v[0]]={normals:[],idx:[],uv:[]});var _=b[v[0]].normals.indexOf(v[1]);return _!=1&&v[2]===b[v[0]].uv[_]?b[v[0]].idx[_]:-1},g.prototype._setData=function(b,v,_,o,t,e,i){var a;this._loadingOptions.optimizeWithUV?a=this._isInArrayUV(this._tuplePosNorm,[b,_,v]):a=this._isInArray(this._tuplePosNorm,[b,_]),a===-1?(this._indicesForBabylon.push(this._wrappedPositionForBabylon.length),this._wrappedPositionForBabylon.push(o),this._wrappedUvsForBabylon.push(t),this._wrappedNormalsForBabylon.push(e),i!==void 0&&this._wrappedColorsForBabylon.push(i),this._tuplePosNorm[b].normals.push(_),this._tuplePosNorm[b].idx.push(this._curPositionInIndices++),this._loadingOptions.optimizeWithUV&&this._tuplePosNorm[b].uv.push(v)):this._indicesForBabylon.push(a)},g.prototype._unwrapData=function(){for(var b=0;b<this._wrappedPositionForBabylon.length;b++)this._unwrappedPositionsForBabylon.push(this._wrappedPositionForBabylon[b].x,this._wrappedPositionForBabylon[b].y,this._wrappedPositionForBabylon[b].z),this._unwrappedNormalsForBabylon.push(this._wrappedNormalsForBabylon[b].x,this._wrappedNormalsForBabylon[b].y,this._wrappedNormalsForBabylon[b].z),this._unwrappedUVForBabylon.push(this._wrappedUvsForBabylon[b].x,this._wrappedUvsForBabylon[b].y),this._loadingOptions.importVertexColors&&this._unwrappedColorsForBabylon.push(this._wrappedColorsForBabylon[b].r,this._wrappedColorsForBabylon[b].g,this._wrappedColorsForBabylon[b].b,this._wrappedColorsForBabylon[b].a);this._wrappedPositionForBabylon.length=0,this._wrappedNormalsForBabylon.length=0,this._wrappedUvsForBabylon.length=0,this._wrappedColorsForBabylon.length=0,this._tuplePosNorm.length=0,this._curPositionInIndices=0},g.prototype._getTriangles=function(b,v){for(var _=v;_<b.length-1;_++)this._triangles.push(b[0],b[_],b[_+1])},g.prototype._setDataForCurrentFaceWithPattern1=function(b,v){this._getTriangles(b,v);for(var _=0;_<this._triangles.length;_++){var o=parseInt(this._triangles[_])-1;this._setData(o,0,0,this._positions[o],c.Vector2.Zero(),c.Vector3.Up(),this._loadingOptions.importVertexColors?this._colors[o]:void 0)}this._triangles.length=0},g.prototype._setDataForCurrentFaceWithPattern2=function(b,v){this._getTriangles(b,v);for(var _=0;_<this._triangles.length;_++){var o=this._triangles[_].split("/"),t=parseInt(o[0])-1,e=parseInt(o[1])-1;this._setData(t,e,0,this._positions[t],this._uvs[e],c.Vector3.Up(),this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},g.prototype._setDataForCurrentFaceWithPattern3=function(b,v){this._getTriangles(b,v);for(var _=0;_<this._triangles.length;_++){var o=this._triangles[_].split("/"),t=parseInt(o[0])-1,e=parseInt(o[1])-1,i=parseInt(o[2])-1;this._setData(t,e,i,this._positions[t],this._uvs[e],this._normals[i])}this._triangles.length=0},g.prototype._setDataForCurrentFaceWithPattern4=function(b,v){this._getTriangles(b,v);for(var _=0;_<this._triangles.length;_++){var o=this._triangles[_].split("//"),t=parseInt(o[0])-1,e=parseInt(o[1])-1;this._setData(t,1,e,this._positions[t],c.Vector2.Zero(),this._normals[e],this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},g.prototype._setDataForCurrentFaceWithPattern5=function(b,v){this._getTriangles(b,v);for(var _=0;_<this._triangles.length;_++){var o=this._triangles[_].split("/"),t=this._positions.length+parseInt(o[0]),e=this._uvs.length+parseInt(o[1]),i=this._normals.length+parseInt(o[2]);this._setData(t,e,i,this._positions[t],this._uvs[e],this._normals[i],this._loadingOptions.importVertexColors?this._colors[t]:void 0)}this._triangles.length=0},g.prototype._addPreviousObjMesh=function(){this._meshesFromObj.length>0&&(this._handledMesh=this._meshesFromObj[this._meshesFromObj.length-1],this._unwrapData(),this._indicesForBabylon.reverse(),this._handledMesh.indices=this._indicesForBabylon.slice(),this._handledMesh.positions=this._unwrappedPositionsForBabylon.slice(),this._handledMesh.normals=this._unwrappedNormalsForBabylon.slice(),this._handledMesh.uvs=this._unwrappedUVForBabylon.slice(),this._loadingOptions.importVertexColors&&(this._handledMesh.colors=this._unwrappedColorsForBabylon.slice()),this._indicesForBabylon.length=0,this._unwrappedPositionsForBabylon.length=0,this._unwrappedColorsForBabylon.length=0,this._unwrappedNormalsForBabylon.length=0,this._unwrappedUVForBabylon.length=0)},g.prototype._optimizeNormals=function(b){var v=b.getVerticesData(c.VertexBuffer.PositionKind),_=b.getVerticesData(c.VertexBuffer.NormalKind),o={};if(!(!v||!_)){for(var t=0;t<v.length/3;t++){var e=v[t*3+0],i=v[t*3+1],a=v[t*3+2],s=e+"_"+i+"_"+a,u=o[s];u||(u=[],o[s]=u),u.push(t)}var f=new c.Vector3;for(var s in o){var u=o[s];if(!(u.length<2)){for(var m=u[0],t=1;t<u.length;++t){var P=u[t];_[m*3+0]+=_[P*3+0],_[m*3+1]+=_[P*3+1],_[m*3+2]+=_[P*3+2]}f.copyFromFloats(_[m*3+0],_[m*3+1],_[m*3+2]),f.normalize();for(var t=0;t<u.length;++t){var P=u[t];_[P*3+0]=f.x,_[P*3+1]=f.y,_[P*3+2]=f.z}}}b.setVerticesData(c.VertexBuffer.NormalKind,_)}},g.prototype.parse=function(b,v,_,o,t){for(var e,i=v.split(`
`),a=0;a<i.length;a++){var s=i[a].trim().replace(/\s\s/g," "),u=void 0;if(!(s.length===0||s.charAt(0)==="#"))if(g.VertexPattern.test(s)){if(u=s.match(/[^ ]+/g),this._positions.push(new c.Vector3(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]))),this._loadingOptions.importVertexColors)if(u.length>=7){var f=parseFloat(u[4]),m=parseFloat(u[5]),P=parseFloat(u[6]);this._colors.push(new c.Color4(f>1?f/255:f,m>1?m/255:m,P>1?P/255:P,u.length===7||u[7]===void 0?1:parseFloat(u[7])))}else this._colors.push(this._grayColor)}else if((u=g.NormalPattern.exec(s))!==null)this._normals.push(new c.Vector3(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])));else if((u=g.UVPattern.exec(s))!==null)this._uvs.push(new c.Vector2(parseFloat(u[1])*this._loadingOptions.UVScaling.x,parseFloat(u[2])*this._loadingOptions.UVScaling.y));else if((u=g.FacePattern3.exec(s))!==null)this._setDataForCurrentFaceWithPattern3(u[1].trim().split(" "),1);else if((u=g.FacePattern4.exec(s))!==null)this._setDataForCurrentFaceWithPattern4(u[1].trim().split(" "),1);else if((u=g.FacePattern5.exec(s))!==null)this._setDataForCurrentFaceWithPattern5(u[1].trim().split(" "),1);else if((u=g.FacePattern2.exec(s))!==null)this._setDataForCurrentFaceWithPattern2(u[1].trim().split(" "),1);else if((u=g.FacePattern1.exec(s))!==null)this._setDataForCurrentFaceWithPattern1(u[1].trim().split(" "),1);else if((u=g.LinePattern1.exec(s))!==null)this._setDataForCurrentFaceWithPattern1(u[1].trim().split(" "),0);else if((u=g.LinePattern2.exec(s))!==null)this._setDataForCurrentFaceWithPattern2(u[1].trim().split(" "),0);else if((u=g.LinePattern3.exec(s))!==null)this._setDataForCurrentFaceWithPattern3(u[1].trim().split(" "),0);else if(g.GroupDescriptor.test(s)||g.ObjectDescriptor.test(s)){var y={name:s.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:this._materialNameFromObj};this._addPreviousObjMesh(),this._meshesFromObj.push(y),this._hasMeshes=!0,this._isFirstMaterial=!0,this._increment=1}else if(g.UseMtlDescriptor.test(s)){if(this._materialNameFromObj=s.substring(7).trim(),!this._isFirstMaterial||!this._hasMeshes){this._addPreviousObjMesh();var y={name:(this._objMeshName||"mesh")+"_mm"+this._increment.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:this._materialNameFromObj};this._increment++,this._meshesFromObj.push(y),this._hasMeshes=!0}this._hasMeshes&&this._isFirstMaterial&&(this._meshesFromObj[this._meshesFromObj.length-1].materialName=this._materialNameFromObj,this._isFirstMaterial=!1)}else g.MtlLibGroupDescriptor.test(s)?t(s.substring(7).trim()):g.SmoothDescriptor.test(s)||console.log("Unhandled expression at line : "+s)}if(this._hasMeshes&&(this._handledMesh=this._meshesFromObj[this._meshesFromObj.length-1],this._indicesForBabylon.reverse(),this._unwrapData(),this._handledMesh.indices=this._indicesForBabylon,this._handledMesh.positions=this._unwrappedPositionsForBabylon,this._handledMesh.normals=this._unwrappedNormalsForBabylon,this._handledMesh.uvs=this._unwrappedUVForBabylon,this._loadingOptions.importVertexColors&&(this._handledMesh.colors=this._unwrappedColorsForBabylon)),!this._hasMeshes){var M=null;if(this._indicesForBabylon.length)this._indicesForBabylon.reverse(),this._unwrapData();else{for(var O=0,x=this._positions;O<x.length;O++){var R=x[O];this._unwrappedPositionsForBabylon.push(R.x,R.y,R.z)}if(this._normals.length)for(var N=0,W=this._normals;N<W.length;N++){var Q=W[N];this._unwrappedNormalsForBabylon.push(Q.x,Q.y,Q.z)}if(this._uvs.length)for(var U=0,H=this._uvs;U<H.length;U++){var Y=H[U];this._unwrappedUVForBabylon.push(Y.x,Y.y)}if(this._colors.length)for(var J=0,q=this._colors;J<q.length;J++){var le=q[J];this._unwrappedColorsForBabylon.push(le.r,le.g,le.b,le.a)}this._materialNameFromObj||(M=new c.StandardMaterial(c.Geometry.RandomId(),_),M.pointsCloud=!0,this._materialNameFromObj=M.name,this._normals.length||(M.disableLighting=!0,M.emissiveColor=c.Color3.White()))}this._meshesFromObj.push({name:c.Geometry.RandomId(),indices:this._indicesForBabylon,positions:this._unwrappedPositionsForBabylon,colors:this._unwrappedColorsForBabylon,normals:this._unwrappedNormalsForBabylon,uvs:this._unwrappedUVForBabylon,materialName:this._materialNameFromObj,directMaterial:M})}for(var fe=0;fe<this._meshesFromObj.length;fe++){if(b&&this._meshesFromObj[fe].name){if(b instanceof Array){if(b.indexOf(this._meshesFromObj[fe].name)===-1)continue}else if(this._meshesFromObj[fe].name!==b)continue}this._handledMesh=this._meshesFromObj[fe],_._blockEntityCollection=!!o;var ue=new c.Mesh(this._meshesFromObj[fe].name,_);if(ue._parentContainer=o,_._blockEntityCollection=!1,this._materialToUse.push(this._meshesFromObj[fe].materialName),((e=this._handledMesh.positions)===null||e===void 0?void 0:e.length)===0){this._babylonMeshesArray.push(ue);continue}var ae=new c.VertexData;if(ae.uvs=this._handledMesh.uvs,ae.indices=this._handledMesh.indices,ae.positions=this._handledMesh.positions,this._loadingOptions.computeNormals){var ce=new Array;c.VertexData.ComputeNormals(this._handledMesh.positions,this._handledMesh.indices,ce),ae.normals=ce}else ae.normals=this._handledMesh.normals;this._loadingOptions.importVertexColors&&(ae.colors=this._handledMesh.colors),ae.applyToMesh(ue),this._loadingOptions.invertY&&(ue.scaling.y*=-1),this._loadingOptions.optimizeNormals&&this._optimizeNormals(ue),this._babylonMeshesArray.push(ue),this._handledMesh.directMaterial&&(ue.material=this._handledMesh.directMaterial)}},g.ObjectDescriptor=/^o/,g.GroupDescriptor=/^g/,g.MtlLibGroupDescriptor=/^mtllib /,g.UseMtlDescriptor=/^usemtl /,g.SmoothDescriptor=/^s /,g.VertexPattern=/^v(\s+[\d|.|+|\-|e|E]+){3,7}/,g.NormalPattern=/^vn(\s+[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)/,g.UVPattern=/^vt(\s+[\d|.|+|\-|e|E]+)( +[\d|.|+|\-|e|E]+)/,g.FacePattern1=/^f\s+(([\d]{1,}[\s]?){3,})+/,g.FacePattern2=/^f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,g.FacePattern3=/^f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,g.FacePattern4=/^f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/,g.FacePattern5=/^f\s+(((-[\d]{1,}\/-[\d]{1,}\/-[\d]{1,}[\s]?){3,})+)/,g.LinePattern1=/^l\s+(([\d]{1,}[\s]?){2,})+/,g.LinePattern2=/^l\s+((([\d]{1,}\/[\d]{1,}[\s]?){2,})+)/,g.LinePattern3=/^l\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){2,})+)/,g}()},"../../../dev/loaders/src/STL/index.ts":(B,E,d)=>{d.r(E),d.d(E,{STLFileLoader:()=>c.STLFileLoader});var c=d("../../../dev/loaders/src/STL/stlFileLoader.ts")},"../../../dev/loaders/src/STL/stlFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{STLFileLoader:()=>l});var c=d("babylonjs/Misc/observable"),l=function(){function g(){this.solidPattern=/solid (\S*)([\S\s]*?)endsolid[ ]*(\S*)/g,this.facetsPattern=/facet([\s\S]*?)endfacet/g,this.normalPattern=/normal[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.vertexPattern=/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.name="stl",this.extensions={".stl":{isBinary:!0}}}return g.prototype.importMesh=function(b,v,_,o,t){var e;if(typeof _!="string"){if(this._isBinary(_)){var i=new c.Mesh("stlmesh",v);return this._parseBinary(i,_),t&&t.push(i),!0}for(var a=new Uint8Array(_),s="",u=0;u<_.byteLength;u++)s+=String.fromCharCode(a[u]);_=s}for(;e=this.solidPattern.exec(_);){var f=e[1],m=e[3];if(m&&f!=m)return c.Tools.Error("Error in STL, solid name != endsolid name"),!1;if(b&&f){if(b instanceof Array){if(!b.indexOf(f))continue}else if(f!==b)continue}f=f||"stlmesh";var i=new c.Mesh(f,v);this._parseASCII(i,e[2]),t&&t.push(i)}return!0},g.prototype.load=function(b,v,_){var o=this.importMesh(null,b,v,_,null);return o},g.prototype.loadAssetContainer=function(b,v,_){var o=new c.AssetContainer(b);return b._blockEntityCollection=!0,this.importMesh(null,b,v,_,o.meshes),b._blockEntityCollection=!1,o},g.prototype._isBinary=function(b){var v=new DataView(b);if(v.byteLength<=80)return!1;var _=32/8*3+32/8*3*3+16/8,o=v.getUint32(80,!0);if(80+32/8+o*_===v.byteLength)return!0;for(var t=[115,111,108,105,100],e=0;e<5;e++)if(v.getUint8(e)!==t[e])return!0;return!1},g.prototype._parseBinary=function(b,v){for(var _=new DataView(v),o=_.getUint32(80,!0),t=84,e=12*4+2,i=0,a=new Float32Array(o*3*3),s=new Float32Array(o*3*3),u=new Uint32Array(o*3),f=0,m=0;m<o;m++){for(var P=t+m*e,y=_.getFloat32(P,!0),M=_.getFloat32(P+4,!0),O=_.getFloat32(P+8,!0),x=1;x<=3;x++){var R=P+x*12;a[i]=_.getFloat32(R,!0),s[i]=y,g.DO_NOT_ALTER_FILE_COORDINATES?(a[i+1]=_.getFloat32(R+4,!0),a[i+2]=_.getFloat32(R+8,!0),s[i+1]=M,s[i+2]=O):(a[i+2]=_.getFloat32(R+4,!0),a[i+1]=_.getFloat32(R+8,!0),s[i+2]=M,s[i+1]=O),i+=3}g.DO_NOT_ALTER_FILE_COORDINATES?(u[f]=f,u[f+1]=f+2,u[f+2]=f+1,f+=3):(u[f]=f++,u[f]=f++,u[f]=f++)}b.setVerticesData(c.VertexBuffer.PositionKind,a),b.setVerticesData(c.VertexBuffer.NormalKind,s),b.setIndices(u),b.computeWorldMatrix(!0)},g.prototype._parseASCII=function(b,v){for(var _=[],o=[],t=[],e=0,i;i=this.facetsPattern.exec(v);){var a=i[1],s=this.normalPattern.exec(a);if(this.normalPattern.lastIndex=0,!!s){for(var u=[Number(s[1]),Number(s[5]),Number(s[3])],f=void 0;f=this.vertexPattern.exec(a);)g.DO_NOT_ALTER_FILE_COORDINATES?(_.push(Number(f[1]),Number(f[3]),Number(f[5])),o.push(u[0],u[2],u[1])):(_.push(Number(f[1]),Number(f[5]),Number(f[3])),o.push(u[0],u[1],u[2]));g.DO_NOT_ALTER_FILE_COORDINATES?(t.push(e,e+2,e+1),e+=3):t.push(e++,e++,e++),this.vertexPattern.lastIndex=0}}this.facetsPattern.lastIndex=0,b.setVerticesData(c.VertexBuffer.PositionKind,_),b.setVerticesData(c.VertexBuffer.NormalKind,o),b.setIndices(t),b.computeWorldMatrix(!0)},g.DO_NOT_ALTER_FILE_COORDINATES=!1,g}();c.SceneLoader&&c.SceneLoader.RegisterPlugin(new l)},"../../../dev/loaders/src/glTF/1.0/glTFBinaryExtension.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFBinaryExtension:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),g=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),b=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),v="binary_glTF",_=function(o){(0,c.__extends)(t,o);function t(){return o.call(this,"KHR_binary_glTF")||this}return t.prototype.loadRuntimeAsync=function(e,i,a,s){var u=i.json.extensionsUsed;return!u||u.indexOf(this.name)===-1||!i.bin?!1:(this._bin=i.bin,s(l.GLTFLoaderBase.CreateRuntime(i.json,e,a)),!0)},t.prototype.loadBufferAsync=function(e,i,a,s){return e.extensionsUsed.indexOf(this.name)===-1||i!==v?!1:(this._bin.readAsync(0,this._bin.byteLength).then(a,function(u){return s(u.message)}),!0)},t.prototype.loadTextureBufferAsync=function(e,i,a){var s=e.textures[i],u=e.images[s.source];if(!u.extensions||!(this.name in u.extensions))return!1;var f=u.extensions[this.name],m=e.bufferViews[f.bufferView],P=g.GLTFUtils.GetBufferFromBufferView(e,m,0,m.byteLength,b.EComponentType.UNSIGNED_BYTE);return a(P),!0},t.prototype.loadShaderStringAsync=function(e,i,a){var s=e.shaders[i];if(!s.extensions||!(this.name in s.extensions))return!1;var u=s.extensions[this.name],f=e.bufferViews[u.bufferView],m=g.GLTFUtils.GetBufferFromBufferView(e,f,0,f.byteLength,b.EComponentType.UNSIGNED_BYTE);return setTimeout(function(){var P=g.GLTFUtils.DecodeBufferToText(m);a(P)}),!0},t}(l.GLTFLoaderExtension);l.GLTFLoader.RegisterExtension(new _)},"../../../dev/loaders/src/glTF/1.0/glTFLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFLoader:()=>F,GLTFLoaderBase:()=>L,GLTFLoaderExtension:()=>k});var c=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),l=d("babylonjs/Misc/observable"),g=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),b=d("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),v;(function(I){I[I.IDENTIFIER=1]="IDENTIFIER",I[I.UNKNOWN=2]="UNKNOWN",I[I.END_OF_INPUT=3]="END_OF_INPUT"})(v||(v={}));var _=function(){function I(S){this._pos=0,this.currentToken=v.UNKNOWN,this.currentIdentifier="",this.currentString="",this.isLetterOrDigitPattern=/^[a-zA-Z0-9]+$/,this._toParse=S,this._maxPos=S.length}return I.prototype.getNextToken=function(){if(this.isEnd())return v.END_OF_INPUT;if(this.currentString=this.read(),this.currentToken=v.UNKNOWN,this.currentString==="_"||this.isLetterOrDigitPattern.test(this.currentString))for(this.currentToken=v.IDENTIFIER,this.currentIdentifier=this.currentString;!this.isEnd()&&(this.isLetterOrDigitPattern.test(this.currentString=this.peek())||this.currentString==="_");)this.currentIdentifier+=this.currentString,this.forward();return this.currentToken},I.prototype.peek=function(){return this._toParse[this._pos]},I.prototype.read=function(){return this._toParse[this._pos++]},I.prototype.forward=function(){this._pos++},I.prototype.isEnd=function(){return this._pos>=this._maxPos},I}(),o=["MODEL","VIEW","PROJECTION","MODELVIEW","MODELVIEWPROJECTION","JOINTMATRIX"],t=["world","view","projection","worldView","worldViewProjection","mBones"],e=["translation","rotation","scale"],i=["position","rotationQuaternion","scaling"],a=function(I,S){for(var A in I){var w=I[A];S.buffers[A]=w,S.buffersCount++}},s=function(I,S){for(var A in I){var w=I[A];S.shaders[A]=w,S.shaderscount++}},u=function(I,S,A){for(var w in I){var V=I[w];A[S][w]=V}},f=function(I){if(I)for(var S=0;S<I.length/2;S++)I[S*2+1]=1-I[S*2+1]},m=function(I){if(I.semantic==="NORMAL")return"normal";if(I.semantic==="POSITION")return"position";if(I.semantic==="JOINT")return"matricesIndices";if(I.semantic==="WEIGHT")return"matricesWeights";if(I.semantic==="COLOR")return"color";if(I.semantic&&I.semantic.indexOf("TEXCOORD_")!==-1){var S=Number(I.semantic.split("_")[1]);return"uv"+(S===0?"":S+1)}return null},P=function(I){for(var S in I.animations){var A=I.animations[S];if(!(!A.channels||!A.samplers))for(var w=null,V=0;V<A.channels.length;V++){var G=A.channels[V],z=A.samplers[G.sampler];if(z){var j=null,X=null;A.parameters?(j=A.parameters[z.input],X=A.parameters[z.output]):(j=z.input,X=z.output);var K=g.GLTFUtils.GetBufferFromAccessor(I,I.accessors[j]),Z=g.GLTFUtils.GetBufferFromAccessor(I,I.accessors[X]),oe=G.target.id,ee=I.scene.getNodeById(oe);if(ee===null&&(ee=I.scene.getNodeByName(oe)),ee===null){l.Tools.Warn("Creating animation named "+S+". But cannot find node named "+oe+" to attach to");continue}var re=ee instanceof l.Bone,te=G.target.path,he=e.indexOf(te);he!==-1&&(te=i[he]);var Ee=l.Animation.ANIMATIONTYPE_MATRIX;re||(te==="rotationQuaternion"?(Ee=l.Animation.ANIMATIONTYPE_QUATERNION,ee.rotationQuaternion=new l.Quaternion):Ee=l.Animation.ANIMATIONTYPE_VECTOR3);var ge=null,Be=[],de=0,pe=!1;re&&w&&w.getKeys().length===K.length&&(ge=w,pe=!0),pe||(I.scene._blockEntityCollection=!!I.assetContainer,ge=new l.Animation(S,re?"_matrix":te,1,Ee,l.Animation.ANIMATIONLOOPMODE_CYCLE),I.scene._blockEntityCollection=!1);for(var Me=0;Me<K.length;Me++){var Ie=null;if(te==="rotationQuaternion"?(Ie=l.Quaternion.FromArray([Z[de],Z[de+1],Z[de+2],Z[de+3]]),de+=4):(Ie=l.Vector3.FromArray([Z[de],Z[de+1],Z[de+2]]),de+=3),re){var mt=ee,qe=l.Vector3.Zero(),We=new l.Quaternion,Ze=l.Vector3.Zero(),je=mt.getBaseMatrix();pe&&w&&(je=w.getKeys()[Me].value),je.decompose(Ze,We,qe),te==="position"?qe=Ie:te==="rotationQuaternion"?We=Ie:Ze=Ie,Ie=l.Matrix.Compose(Ze,We,qe)}pe?w&&(w.getKeys()[Me].value=Ie):Be.push({frame:K[Me],value:Ie})}!pe&&ge&&(ge.setKeys(Be),ee.animations.push(ge)),w=ge,I.scene.stopAnimation(ee),I.scene.beginAnimation(ee,0,K[K.length-1],!0,1)}}}},y=function(I){var S=null;if(I.translation||I.rotation||I.scale){var A=l.Vector3.FromArray(I.scale||[1,1,1]),w=l.Quaternion.FromArray(I.rotation||[0,0,0,1]),V=l.Vector3.FromArray(I.translation||[0,0,0]);S=l.Matrix.Compose(A,w,V)}else S=l.Matrix.FromArray(I.matrix);return S},M=function(I,S,A,w){for(var V=0;V<w.bones.length;V++)if(w.bones[V].name===A)return w.bones[V];var G=I.nodes;for(var z in G){var j=G[z];if(j.jointName)for(var X=j.children,V=0;V<X.length;V++){var K=I.nodes[X[V]];if(K.jointName&&K.jointName===A){var Z=y(j),oe=new l.Bone(j.name||"",w,M(I,S,j.jointName,w),Z);return oe.id=z,oe}}}return null},O=function(I,S){for(var A=0;A<I.length;A++)for(var w=I[A],V=0;V<w.node.children.length;V++){var G=w.node.children[V];if(G===S)return w.bone}return null},x=function(I,S){var A=I.nodes,w=A[S];if(w)return{node:w,id:S};for(var V in A)if(w=A[V],w.jointName===S)return{node:w,id:V};return null},R=function(I,S){for(var A=0;A<I.jointNames.length;A++)if(I.jointNames[A]===S)return!0;return!1},N=function(I,S,A,w){for(var V in I.nodes){var G=I.nodes[V],z=V;if(!(!G.jointName||R(A,G.jointName))){var j=y(G),X=new l.Bone(G.name||"",S,null,j);X.id=z,w.push({bone:X,node:G,id:z})}}for(var K=0;K<w.length;K++)for(var Z=w[K],oe=Z.node.children,ee=0;ee<oe.length;ee++){for(var re=null,te=0;te<w.length;te++)if(w[te].id===oe[ee]){re=w[te];break}re&&(re.bone._parent=Z.bone,Z.bone.children.push(re.bone))}},W=function(I,S,A,w){if(w||(w=new l.Skeleton(S.name||"","",I.scene)),!S.babylonSkeleton)return w;var V=[],G=[];N(I,w,S,V),w.bones=[];for(var z=0;z<S.jointNames.length;z++){var j=x(I,S.jointNames[z]);if(j){var X=j.node;if(!X){l.Tools.Warn("Joint named "+S.jointNames[z]+" does not exist");continue}var K=j.id,Z=I.scene.getBoneById(K);if(Z){w.bones.push(Z);continue}for(var oe=!1,ee=null,re=0;re<z;re++){var te=x(I,S.jointNames[re]);if(te){var he=te.node;if(!he){l.Tools.Warn("Joint named "+S.jointNames[re]+" does not exist when looking for parent");continue}var Ee=he.children;if(Ee){oe=!1;for(var ge=0;ge<Ee.length;ge++)if(Ee[ge]===K){ee=M(I,S,S.jointNames[re],w),oe=!0;break}if(oe)break}}}var Be=y(X);!ee&&V.length>0&&(ee=O(V,K),ee&&G.indexOf(ee)===-1&&G.push(ee));var de=new l.Bone(X.jointName||"",w,ee,Be);de.id=K}}var pe=w.bones;w.bones=[];for(var z=0;z<S.jointNames.length;z++){var j=x(I,S.jointNames[z]);if(j){for(var re=0;re<pe.length;re++)if(pe[re].id===j.id){w.bones.push(pe[re]);break}}}w.prepare();for(var z=0;z<G.length;z++)w.bones.push(G[z]);return w},Q=function(I,S,A,w,V){if(V||(I.scene._blockEntityCollection=!!I.assetContainer,V=new l.Mesh(S.name||"",I.scene),V._parentContainer=I.assetContainer,I.scene._blockEntityCollection=!1,V.id=w),!S.babylonNode)return V;for(var G=[],z=null,j=new Array,X=new Array,K=new Array,Z=new Array,oe=0;oe<A.length;oe++){var ee=A[oe],re=I.meshes[ee];if(re)for(var te=0;te<re.primitives.length;te++){var he=new l.VertexData,Ee=re.primitives[te];Ee.mode;var ge=Ee.attributes,Be=null,de=null;for(var pe in ge)if(Be=I.accessors[ge[pe]],de=g.GLTFUtils.GetBufferFromAccessor(I,Be),pe==="NORMAL")he.normals=new Float32Array(de.length),he.normals.set(de);else if(pe==="POSITION"){if(b.GLTFFileLoader.HomogeneousCoordinates){he.positions=new Float32Array(de.length-de.length/4);for(var Me=0;Me<de.length;Me+=4)he.positions[Me]=de[Me],he.positions[Me+1]=de[Me+1],he.positions[Me+2]=de[Me+2]}else he.positions=new Float32Array(de.length),he.positions.set(de);X.push(he.positions.length)}else if(pe.indexOf("TEXCOORD_")!==-1){var Ie=Number(pe.split("_")[1]),mt=l.VertexBuffer.UVKind+(Ie===0?"":Ie+1),qe=new Float32Array(de.length);qe.set(de),f(qe),he.set(qe,mt)}else pe==="JOINT"?(he.matricesIndices=new Float32Array(de.length),he.matricesIndices.set(de)):pe==="WEIGHT"?(he.matricesWeights=new Float32Array(de.length),he.matricesWeights.set(de)):pe==="COLOR"&&(he.colors=new Float32Array(de.length),he.colors.set(de));if(Be=I.accessors[Ee.indices],Be)de=g.GLTFUtils.GetBufferFromAccessor(I,Be),he.indices=new Int32Array(de.length),he.indices.set(de),Z.push(he.indices.length);else{for(var We=[],Me=0;Me<he.positions.length/3;Me++)We.push(Me);he.indices=new Int32Array(We),Z.push(he.indices.length)}z?z.merge(he):z=he;var Ze=I.scene.getMaterialById(Ee.material);G.push(Ze===null?g.GLTFUtils.GetDefaultMaterial(I.scene):Ze),j.push(j.length===0?0:j[j.length-1]+X[X.length-2]),K.push(K.length===0?0:K[K.length-1]+Z[Z.length-2])}}var je;I.scene._blockEntityCollection=!!I.assetContainer,G.length>1?(je=new l.MultiMaterial("multimat"+w,I.scene),je.subMaterials=G):je=new l.StandardMaterial("multimat"+w,I.scene),G.length===1&&(je=G[0]),je._parentContainer=I.assetContainer,V.material||(V.material=je),new l.Geometry(w,I.scene,z,!1,V),V.computeWorldMatrix(!0),I.scene._blockEntityCollection=!1,V.subMeshes=[];for(var St=0,oe=0;oe<A.length;oe++){var ee=A[oe],re=I.meshes[ee];if(re)for(var te=0;te<re.primitives.length;te++)re.primitives[te].mode,l.SubMesh.AddToMesh(St,j[St],X[St],K[St],Z[St],V,V,!0),St++}return V},U=function(I,S,A,w){I.position&&(I.position=S),(I.rotationQuaternion||I.rotation)&&(I.rotationQuaternion=A),I.scaling&&(I.scaling=w)},H=function(I,S){if(S.matrix){var A=new l.Vector3(0,0,0),w=new l.Quaternion,V=new l.Vector3(0,0,0),G=l.Matrix.FromArray(S.matrix);G.decompose(V,w,A),U(I,A,w,V)}else S.translation&&S.rotation&&S.scale&&U(I,l.Vector3.FromArray(S.translation),l.Quaternion.FromArray(S.rotation),l.Vector3.FromArray(S.scale));I.computeWorldMatrix(!0)},Y=function(I,S,A){var w=null;if(I.importOnlyMeshes&&(S.skin||S.meshes)&&I.importMeshesNames&&I.importMeshesNames.length>0&&I.importMeshesNames.indexOf(S.name||"")===-1)return null;if(S.skin){if(S.meshes){var V=I.skins[S.skin],G=Q(I,S,S.meshes,A,S.babylonNode);G.skeleton=I.scene.getLastSkeletonById(S.skin),G.skeleton===null&&(G.skeleton=W(I,V,G,V.babylonSkeleton),V.babylonSkeleton||(V.babylonSkeleton=G.skeleton)),w=G}}else if(S.meshes){var G=Q(I,S,S.mesh?[S.mesh]:S.meshes,A,S.babylonNode);w=G}else if(S.light&&!S.babylonNode&&!I.importOnlyMeshes){var z=I.lights[S.light];if(z){if(z.type==="ambient"){var j=z[z.type],X=new l.HemisphericLight(S.light,l.Vector3.Zero(),I.scene);X.name=S.name||"",j.color&&(X.diffuse=l.Color3.FromArray(j.color)),w=X}else if(z.type==="directional"){var K=z[z.type],Z=new l.DirectionalLight(S.light,l.Vector3.Zero(),I.scene);Z.name=S.name||"",K.color&&(Z.diffuse=l.Color3.FromArray(K.color)),w=Z}else if(z.type==="point"){var oe=z[z.type],ee=new l.PointLight(S.light,l.Vector3.Zero(),I.scene);ee.name=S.name||"",oe.color&&(ee.diffuse=l.Color3.FromArray(oe.color)),w=ee}else if(z.type==="spot"){var re=z[z.type],te=new l.SpotLight(S.light,l.Vector3.Zero(),l.Vector3.Zero(),0,0,I.scene);te.name=S.name||"",re.color&&(te.diffuse=l.Color3.FromArray(re.color)),re.fallOfAngle&&(te.angle=re.fallOfAngle),re.fallOffExponent&&(te.exponent=re.fallOffExponent),w=te}}}else if(S.camera&&!S.babylonNode&&!I.importOnlyMeshes){var he=I.cameras[S.camera];if(he){if(I.scene._blockEntityCollection=!!I.assetContainer,he.type==="orthographic"){var Ee=new l.FreeCamera(S.camera,l.Vector3.Zero(),I.scene,!1);Ee.name=S.name||"",Ee.mode=l.Camera.ORTHOGRAPHIC_CAMERA,Ee.attachControl(),w=Ee,Ee._parentContainer=I.assetContainer}else if(he.type==="perspective"){var ge=he[he.type],Be=new l.FreeCamera(S.camera,l.Vector3.Zero(),I.scene,!1);Be.name=S.name||"",Be.attachControl(),ge.aspectRatio||(ge.aspectRatio=I.scene.getEngine().getRenderWidth()/I.scene.getEngine().getRenderHeight()),ge.znear&&ge.zfar&&(Be.maxZ=ge.zfar,Be.minZ=ge.znear),w=Be,Be._parentContainer=I.assetContainer}I.scene._blockEntityCollection=!1}}if(!S.jointName){if(S.babylonNode)return S.babylonNode;if(w===null){I.scene._blockEntityCollection=!!I.assetContainer;var de=new l.Mesh(S.name||"",I.scene);de._parentContainer=I.assetContainer,I.scene._blockEntityCollection=!1,S.babylonNode=de,w=de}}if(w!==null){if(S.matrix&&w instanceof l.Mesh)H(w,S);else{var pe=S.translation||[0,0,0],Me=S.rotation||[0,0,0,1],Ie=S.scale||[1,1,1];U(w,l.Vector3.FromArray(pe),l.Quaternion.FromArray(Me),l.Vector3.FromArray(Ie))}w.updateCache(!0),S.babylonNode=w}return w},J=function(I,S,A,w){w===void 0&&(w=!1);var V=I.nodes[S],G=null;if(I.importOnlyMeshes&&!w&&I.importMeshesNames?I.importMeshesNames.indexOf(V.name||"")!==-1||I.importMeshesNames.length===0?w=!0:w=!1:w=!0,!V.jointName&&w&&(G=Y(I,V,S),G!==null&&(G.id=S,G.parent=A)),V.children)for(var z=0;z<V.children.length;z++)J(I,V.children[z],G,w)},q=function(I){var S=I.currentScene;if(S)for(var A=0;A<S.nodes.length;A++)J(I,S.nodes[A],null);else for(var w in I.scenes){S=I.scenes[w];for(var A=0;A<S.nodes.length;A++)J(I,S.nodes[A],null)}P(I);for(var A=0;A<I.scene.skeletons.length;A++){var V=I.scene.skeletons[A];I.scene.beginAnimation(V,0,Number.MAX_VALUE,!0,1)}},le=function(I,S,A,w,V,G,z){var j=G.values||V.parameters;for(var X in A){var K=A[X],Z=K.type;if(Z===c.EParameterType.FLOAT_MAT2||Z===c.EParameterType.FLOAT_MAT3||Z===c.EParameterType.FLOAT_MAT4){if(K.semantic&&!K.source&&!K.node)g.GLTFUtils.SetMatrix(S.scene,I,K,X,w.getEffect());else if(K.semantic&&(K.source||K.node)){var oe=S.scene.getNodeByName(K.source||K.node||"");if(oe===null&&(oe=S.scene.getNodeById(K.source||K.node||"")),oe===null)continue;g.GLTFUtils.SetMatrix(S.scene,oe,K,X,w.getEffect())}}else{var ee=j[V.uniforms[X]];if(!ee)continue;if(Z===c.EParameterType.SAMPLER_2D){var re=S.textures[G.values?ee:K.value].babylonTexture;if(re==null)continue;w.getEffect().setTexture(X,re)}else g.GLTFUtils.SetUniform(w.getEffect(),X,ee,Z)}}z(w)},fe=function(I,S,A,w,V){var G=w.values||A.parameters,z=A.uniforms,j=function(K){var Z=V[K],oe=Z.type,ee=G[z[K]];if(ee===void 0&&(ee=Z.value),!ee)return"continue";var re=function(te){return function(he){Z.value&&te&&(S.setTexture(te,he),delete V[te])}};oe===c.EParameterType.SAMPLER_2D?k.LoadTextureAsync(I,w.values?ee:Z.value,re(K),function(){return re(null)}):Z.value&&g.GLTFUtils.SetUniform(S,K,w.values?ee:Z.value,oe)&&delete V[K]};for(var X in V)j(X)},ue=function(I,S,A){return function(w,V){S.dispose(!0),A("Cannot compile program named "+I.name+". Error: "+V+". Default material will be applied")}},ae=function(I,S,A,w,V,G){return function(z){fe(I,S,A,w,V),S.onBind=function(j){le(j,I,V,S,A,w,G)}}},ce=function(I,S,A){for(var w in S.uniforms){var V=S.uniforms[w],G=S.parameters[V];if(I.currentIdentifier===w&&G.semantic&&!G.source&&!G.node){var z=o.indexOf(G.semantic);if(z!==-1)return delete A[w],t[z]}}return I.currentIdentifier},be=function(I){for(var S in I.materials)k.LoadMaterialAsync(I,S,function(){},function(){})},L=function(){function I(){}return I.CreateRuntime=function(S,A,w){var V={extensions:{},accessors:{},buffers:{},bufferViews:{},meshes:{},lights:{},cameras:{},nodes:{},images:{},textures:{},shaders:{},programs:{},samplers:{},techniques:{},materials:{},animations:{},skins:{},extensionsUsed:[],scenes:{},buffersCount:0,shaderscount:0,scene:A,rootUrl:w,loadedBufferCount:0,loadedBufferViews:{},loadedShaderCount:0,importOnlyMeshes:!1,dummyNodes:[],assetContainer:null};return S.extensions&&u(S.extensions,"extensions",V),S.extensionsUsed&&u(S.extensionsUsed,"extensionsUsed",V),S.buffers&&a(S.buffers,V),S.bufferViews&&u(S.bufferViews,"bufferViews",V),S.accessors&&u(S.accessors,"accessors",V),S.meshes&&u(S.meshes,"meshes",V),S.lights&&u(S.lights,"lights",V),S.cameras&&u(S.cameras,"cameras",V),S.nodes&&u(S.nodes,"nodes",V),S.images&&u(S.images,"images",V),S.textures&&u(S.textures,"textures",V),S.shaders&&s(S.shaders,V),S.programs&&u(S.programs,"programs",V),S.samplers&&u(S.samplers,"samplers",V),S.techniques&&u(S.techniques,"techniques",V),S.materials&&u(S.materials,"materials",V),S.animations&&u(S.animations,"animations",V),S.skins&&u(S.skins,"skins",V),S.scenes&&(V.scenes=S.scenes),S.scene&&S.scenes&&(V.currentScene=S.scenes[S.scene]),V},I.LoadBufferAsync=function(S,A,w,V,G){var z=S.buffers[A];l.Tools.IsBase64(z.uri)?setTimeout(function(){return w(new Uint8Array(l.Tools.DecodeBase64(z.uri)))}):l.Tools.LoadFile(S.rootUrl+z.uri,function(j){return w(new Uint8Array(j))},G,void 0,!0,function(j){j&&V(j.status+" "+j.statusText)})},I.LoadTextureBufferAsync=function(S,A,w,V){var G=S.textures[A];if(!G||!G.source){V("");return}if(G.babylonTexture){w(null);return}var z=S.images[G.source];l.Tools.IsBase64(z.uri)?setTimeout(function(){return w(new Uint8Array(l.Tools.DecodeBase64(z.uri)))}):l.Tools.LoadFile(S.rootUrl+z.uri,function(j){return w(new Uint8Array(j))},void 0,void 0,!0,function(j){j&&V(j.status+" "+j.statusText)})},I.CreateTextureAsync=function(S,A,w,V){var G=S.textures[A];if(G.babylonTexture){V(G.babylonTexture);return}var z=S.samplers[G.sampler],j=z.minFilter===c.ETextureFilterType.NEAREST_MIPMAP_NEAREST||z.minFilter===c.ETextureFilterType.NEAREST_MIPMAP_LINEAR||z.minFilter===c.ETextureFilterType.LINEAR_MIPMAP_NEAREST||z.minFilter===c.ETextureFilterType.LINEAR_MIPMAP_LINEAR,X=l.Texture.BILINEAR_SAMPLINGMODE,K=w==null?new Blob:new Blob([w]),Z=URL.createObjectURL(K),oe=function(){return URL.revokeObjectURL(Z)},ee=new l.Texture(Z,S.scene,!j,!0,X,oe,oe);z.wrapS!==void 0&&(ee.wrapU=g.GLTFUtils.GetWrapMode(z.wrapS)),z.wrapT!==void 0&&(ee.wrapV=g.GLTFUtils.GetWrapMode(z.wrapT)),ee.name=A,G.babylonTexture=ee,V(ee)},I.LoadShaderStringAsync=function(S,A,w,V){var G=S.shaders[A];if(l.Tools.IsBase64(G.uri)){var z=atob(G.uri.split(",")[1]);w&&w(z)}else l.Tools.LoadFile(S.rootUrl+G.uri,w,void 0,void 0,!1,function(j){j&&V&&V(j.status+" "+j.statusText)})},I.LoadMaterialAsync=function(S,A,w,V){var G=S.materials[A];if(!G.technique){V&&V("No technique found.");return}var z=S.techniques[G.technique];if(!z){S.scene._blockEntityCollection=!!S.assetContainer;var j=new l.StandardMaterial(A,S.scene);j._parentContainer=S.assetContainer,S.scene._blockEntityCollection=!1,j.diffuseColor=new l.Color3(.5,.5,.5),j.sideOrientation=l.Material.CounterClockWiseSideOrientation,w(j);return}var X=S.programs[z.program],K=z.states,Z=l.Effect.ShadersStore[X.vertexShader+"VertexShader"],oe=l.Effect.ShadersStore[X.fragmentShader+"PixelShader"],ee="",re="",te=new _(Z),he=new _(oe),Ee={},ge=[],Be=[],de=[];for(var pe in z.uniforms){var Me=z.uniforms[pe],Ie=z.parameters[Me];if(Ee[pe]=Ie,Ie.semantic&&!Ie.node&&!Ie.source){var mt=o.indexOf(Ie.semantic);mt!==-1?(ge.push(t[mt]),delete Ee[pe]):ge.push(pe)}else Ie.type===c.EParameterType.SAMPLER_2D?de.push(pe):ge.push(pe)}for(var qe in z.attributes){var We=z.attributes[qe],Ze=z.parameters[We];if(Ze.semantic){var je=m(Ze);je&&Be.push(je)}}for(;!te.isEnd()&&te.getNextToken();){var St=te.currentToken;if(St!==v.IDENTIFIER){ee+=te.currentString;continue}var bn=!1;for(var qe in z.attributes){var We=z.attributes[qe],Ze=z.parameters[We];if(te.currentIdentifier===qe&&Ze.semantic){ee+=m(Ze),bn=!0;break}}bn||(ee+=ce(te,z,Ee))}for(;!he.isEnd()&&he.getNextToken();){var St=he.currentToken;if(St!==v.IDENTIFIER){re+=he.currentString;continue}re+=ce(he,z,Ee)}var Kr={vertex:X.vertexShader+A,fragment:X.fragmentShader+A},Sr={attributes:Be,uniforms:ge,samplers:de,needAlphaBlending:K&&K.enable&&K.enable.indexOf(3042)!==-1};l.Effect.ShadersStore[X.vertexShader+A+"VertexShader"]=ee,l.Effect.ShadersStore[X.fragmentShader+A+"PixelShader"]=re;var we=new l.ShaderMaterial(A,S.scene,Kr,Sr);if(we.onError=ue(X,we,V),we.onCompiled=ae(S,we,z,G,Ee,w),we.sideOrientation=l.Material.CounterClockWiseSideOrientation,K&&K.functions){var st=K.functions;st.cullFace&&st.cullFace[0]!==c.ECullingType.BACK&&(we.backFaceCulling=!1);var Pe=st.blendFuncSeparate;Pe&&(Pe[0]===c.EBlendingFunction.SRC_ALPHA&&Pe[1]===c.EBlendingFunction.ONE_MINUS_SRC_ALPHA&&Pe[2]===c.EBlendingFunction.ONE&&Pe[3]===c.EBlendingFunction.ONE?we.alphaMode=l.Constants.ALPHA_COMBINE:Pe[0]===c.EBlendingFunction.ONE&&Pe[1]===c.EBlendingFunction.ONE&&Pe[2]===c.EBlendingFunction.ZERO&&Pe[3]===c.EBlendingFunction.ONE?we.alphaMode=l.Constants.ALPHA_ONEONE:Pe[0]===c.EBlendingFunction.SRC_ALPHA&&Pe[1]===c.EBlendingFunction.ONE&&Pe[2]===c.EBlendingFunction.ZERO&&Pe[3]===c.EBlendingFunction.ONE?we.alphaMode=l.Constants.ALPHA_ADD:Pe[0]===c.EBlendingFunction.ZERO&&Pe[1]===c.EBlendingFunction.ONE_MINUS_SRC_COLOR&&Pe[2]===c.EBlendingFunction.ONE&&Pe[3]===c.EBlendingFunction.ONE?we.alphaMode=l.Constants.ALPHA_SUBTRACT:Pe[0]===c.EBlendingFunction.DST_COLOR&&Pe[1]===c.EBlendingFunction.ZERO&&Pe[2]===c.EBlendingFunction.ONE&&Pe[3]===c.EBlendingFunction.ONE?we.alphaMode=l.Constants.ALPHA_MULTIPLY:Pe[0]===c.EBlendingFunction.SRC_ALPHA&&Pe[1]===c.EBlendingFunction.ONE_MINUS_SRC_COLOR&&Pe[2]===c.EBlendingFunction.ONE&&Pe[3]===c.EBlendingFunction.ONE&&(we.alphaMode=l.Constants.ALPHA_MAXIMIZED))}},I}(),F=function(){function I(){}return I.RegisterExtension=function(S){if(I.Extensions[S.name]){l.Tools.Error('Tool with the same name "'+S.name+'" already exists');return}I.Extensions[S.name]=S},I.prototype.dispose=function(){},I.prototype._importMeshAsync=function(S,A,w,V,G,z,j,X){var K=this;return A.useRightHandedSystem=!0,k.LoadRuntimeAsync(A,w,V,function(Z){Z.assetContainer=G,Z.importOnlyMeshes=!0,S===""?Z.importMeshesNames=[]:typeof S=="string"?Z.importMeshesNames=[S]:S&&!(S instanceof Array)?Z.importMeshesNames=[S]:(Z.importMeshesNames=[],l.Tools.Warn("Argument meshesNames must be of type string or string[]")),K._createNodes(Z);var oe=new Array,ee=new Array;for(var re in Z.nodes){var te=Z.nodes[re];te.babylonNode instanceof l.AbstractMesh&&oe.push(te.babylonNode)}for(var he in Z.skins){var Ee=Z.skins[he];Ee.babylonSkeleton instanceof l.Skeleton&&ee.push(Ee.babylonSkeleton)}K._loadBuffersAsync(Z,function(){K._loadShadersAsync(Z,function(){be(Z),q(Z),!b.GLTFFileLoader.IncrementalLoading&&z&&z(oe,ee)})}),b.GLTFFileLoader.IncrementalLoading&&z&&z(oe,ee)},X),!0},I.prototype.importMeshAsync=function(S,A,w,V,G,z){var j=this;return new Promise(function(X,K){j._importMeshAsync(S,A,V,G,w,function(Z,oe){X({meshes:Z,particleSystems:[],skeletons:oe,animationGroups:[],lights:[],transformNodes:[],geometries:[]})},z,function(Z){K(new Error(Z))})})},I.prototype._loadAsync=function(S,A,w,V,G,z){var j=this;S.useRightHandedSystem=!0,k.LoadRuntimeAsync(S,A,w,function(X){k.LoadRuntimeExtensionsAsync(X,function(){j._createNodes(X),j._loadBuffersAsync(X,function(){j._loadShadersAsync(X,function(){be(X),q(X),b.GLTFFileLoader.IncrementalLoading||V()})}),b.GLTFFileLoader.IncrementalLoading&&V()},z)},z)},I.prototype.loadAsync=function(S,A,w,V){var G=this;return new Promise(function(z,j){G._loadAsync(S,A,w,function(){z()},V,function(X){j(new Error(X))})})},I.prototype._loadShadersAsync=function(S,A){var w=!1,V=function(j,X){k.LoadShaderStringAsync(S,j,function(K){K instanceof ArrayBuffer||(S.loadedShaderCount++,K&&(l.Effect.ShadersStore[j+(X.type===c.EShaderType.VERTEX?"VertexShader":"PixelShader")]=K),S.loadedShaderCount===S.shaderscount&&A())},function(){l.Tools.Error("Error when loading shader program named "+j+" located at "+X.uri)})};for(var G in S.shaders){w=!0;var z=S.shaders[G];z?V.bind(this,G,z)():l.Tools.Error("No shader named: "+G)}w||A()},I.prototype._loadBuffersAsync=function(S,A){var w=!1,V=function(j,X){k.LoadBufferAsync(S,j,function(K){S.loadedBufferCount++,K&&(K.byteLength!=S.buffers[j].byteLength&&l.Tools.Error("Buffer named "+j+" is length "+K.byteLength+". Expected: "+X.byteLength),S.loadedBufferViews[j]=K),S.loadedBufferCount===S.buffersCount&&A()},function(){l.Tools.Error("Error when loading buffer named "+j+" located at "+X.uri)})};for(var G in S.buffers){w=!0;var z=S.buffers[G];z?V.bind(this,G,z)():l.Tools.Error("No buffer named: "+G)}w||A()},I.prototype._createNodes=function(S){var A=S.currentScene;if(A)for(var w=0;w<A.nodes.length;w++)J(S,A.nodes[w],null);else for(var V in S.scenes){A=S.scenes[V];for(var w=0;w<A.nodes.length;w++)J(S,A.nodes[w],null)}},I.Extensions={},I}(),k=function(){function I(S){this._name=S}return Object.defineProperty(I.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),I.prototype.loadRuntimeAsync=function(S,A,w,V,G){return!1},I.prototype.loadRuntimeExtensionsAsync=function(S,A,w){return!1},I.prototype.loadBufferAsync=function(S,A,w,V,G){return!1},I.prototype.loadTextureBufferAsync=function(S,A,w,V){return!1},I.prototype.createTextureAsync=function(S,A,w,V,G){return!1},I.prototype.loadShaderStringAsync=function(S,A,w,V){return!1},I.prototype.loadMaterialAsync=function(S,A,w,V){return!1},I.LoadRuntimeAsync=function(S,A,w,V,G){I._ApplyExtensions(function(z){return z.loadRuntimeAsync(S,A,w,V,G)},function(){setTimeout(function(){V&&V(L.CreateRuntime(A.json,S,w))})})},I.LoadRuntimeExtensionsAsync=function(S,A,w){I._ApplyExtensions(function(V){return V.loadRuntimeExtensionsAsync(S,A,w)},function(){setTimeout(function(){A()})})},I.LoadBufferAsync=function(S,A,w,V,G){I._ApplyExtensions(function(z){return z.loadBufferAsync(S,A,w,V,G)},function(){L.LoadBufferAsync(S,A,w,V,G)})},I.LoadTextureAsync=function(S,A,w,V){I._LoadTextureBufferAsync(S,A,function(G){G&&I._CreateTextureAsync(S,A,G,w,V)},V)},I.LoadShaderStringAsync=function(S,A,w,V){I._ApplyExtensions(function(G){return G.loadShaderStringAsync(S,A,w,V)},function(){L.LoadShaderStringAsync(S,A,w,V)})},I.LoadMaterialAsync=function(S,A,w,V){I._ApplyExtensions(function(G){return G.loadMaterialAsync(S,A,w,V)},function(){L.LoadMaterialAsync(S,A,w,V)})},I._LoadTextureBufferAsync=function(S,A,w,V){I._ApplyExtensions(function(G){return G.loadTextureBufferAsync(S,A,w,V)},function(){L.LoadTextureBufferAsync(S,A,w,V)})},I._CreateTextureAsync=function(S,A,w,V,G){I._ApplyExtensions(function(z){return z.createTextureAsync(S,A,w,V,G)},function(){L.CreateTextureAsync(S,A,w,V)})},I._ApplyExtensions=function(S,A){for(var w in F.Extensions){var V=F.Extensions[w];if(S(V))return}A()},I}();b.GLTFFileLoader._CreateGLTF1Loader=function(){return new F}},"../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts":(B,E,d)=>{d.r(E),d.d(E,{EBlendingFunction:()=>t,EComponentType:()=>c,ECullingType:()=>o,EParameterType:()=>g,EShaderType:()=>l,ETextureFilterType:()=>v,ETextureFormat:()=>_,ETextureWrapMode:()=>b});var c;(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.FLOAT=5126]="FLOAT"})(c||(c={}));var l;(function(e){e[e.FRAGMENT=35632]="FRAGMENT",e[e.VERTEX=35633]="VERTEX"})(l||(l={}));var g;(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D"})(g||(g={}));var b;(function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"})(b||(b={}));var v;(function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9728]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(v||(v={}));var _;(function(e){e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA"})(_||(_={}));var o;(function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(o||(o={}));var t;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(t||(t={}))},"../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFUtils:()=>g});var c=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),l=d("babylonjs/Misc/observable"),g=function(){function b(){}return b.SetMatrix=function(v,_,o,t,e){var i=null;if(o.semantic==="MODEL"?i=_.getWorldMatrix():o.semantic==="PROJECTION"?i=v.getProjectionMatrix():o.semantic==="VIEW"?i=v.getViewMatrix():o.semantic==="MODELVIEWINVERSETRANSPOSE"?i=l.Matrix.Transpose(_.getWorldMatrix().multiply(v.getViewMatrix()).invert()):o.semantic==="MODELVIEW"?i=_.getWorldMatrix().multiply(v.getViewMatrix()):o.semantic==="MODELVIEWPROJECTION"?i=_.getWorldMatrix().multiply(v.getTransformMatrix()):o.semantic==="MODELINVERSE"?i=_.getWorldMatrix().invert():o.semantic==="VIEWINVERSE"?i=v.getViewMatrix().invert():o.semantic==="PROJECTIONINVERSE"?i=v.getProjectionMatrix().invert():o.semantic==="MODELVIEWINVERSE"?i=_.getWorldMatrix().multiply(v.getViewMatrix()).invert():o.semantic==="MODELVIEWPROJECTIONINVERSE"?i=_.getWorldMatrix().multiply(v.getTransformMatrix()).invert():o.semantic==="MODELINVERSETRANSPOSE"&&(i=l.Matrix.Transpose(_.getWorldMatrix().invert())),i)switch(o.type){case c.EParameterType.FLOAT_MAT2:e.setMatrix2x2(t,l.Matrix.GetAsMatrix2x2(i));break;case c.EParameterType.FLOAT_MAT3:e.setMatrix3x3(t,l.Matrix.GetAsMatrix3x3(i));break;case c.EParameterType.FLOAT_MAT4:e.setMatrix(t,i);break}},b.SetUniform=function(v,_,o,t){switch(t){case c.EParameterType.FLOAT:return v.setFloat(_,o),!0;case c.EParameterType.FLOAT_VEC2:return v.setVector2(_,l.Vector2.FromArray(o)),!0;case c.EParameterType.FLOAT_VEC3:return v.setVector3(_,l.Vector3.FromArray(o)),!0;case c.EParameterType.FLOAT_VEC4:return v.setVector4(_,l.Vector4.FromArray(o)),!0;default:return!1}},b.GetWrapMode=function(v){switch(v){case c.ETextureWrapMode.CLAMP_TO_EDGE:return l.Texture.CLAMP_ADDRESSMODE;case c.ETextureWrapMode.MIRRORED_REPEAT:return l.Texture.MIRROR_ADDRESSMODE;case c.ETextureWrapMode.REPEAT:return l.Texture.WRAP_ADDRESSMODE;default:return l.Texture.WRAP_ADDRESSMODE}},b.GetByteStrideFromType=function(v){var _=v.type;switch(_){case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;default:return 1}},b.GetTextureFilterMode=function(v){switch(v){case c.ETextureFilterType.LINEAR:case c.ETextureFilterType.LINEAR_MIPMAP_NEAREST:case c.ETextureFilterType.LINEAR_MIPMAP_LINEAR:return l.Texture.TRILINEAR_SAMPLINGMODE;case c.ETextureFilterType.NEAREST:case c.ETextureFilterType.NEAREST_MIPMAP_NEAREST:return l.Texture.NEAREST_SAMPLINGMODE;default:return l.Texture.BILINEAR_SAMPLINGMODE}},b.GetBufferFromBufferView=function(v,_,o,t,e){o=_.byteOffset+o;var i=v.loadedBufferViews[_.buffer];if(o+t>i.byteLength)throw new Error("Buffer access is out of range");var a=i.buffer;switch(o+=i.byteOffset,e){case c.EComponentType.BYTE:return new Int8Array(a,o,t);case c.EComponentType.UNSIGNED_BYTE:return new Uint8Array(a,o,t);case c.EComponentType.SHORT:return new Int16Array(a,o,t);case c.EComponentType.UNSIGNED_SHORT:return new Uint16Array(a,o,t);default:return new Float32Array(a,o,t)}},b.GetBufferFromAccessor=function(v,_){var o=v.bufferViews[_.bufferView],t=_.count*b.GetByteStrideFromType(_);return b.GetBufferFromBufferView(v,o,_.byteOffset,t,_.componentType)},b.DecodeBufferToText=function(v){for(var _="",o=v.byteLength,t=0;t<o;++t)_+=String.fromCharCode(v[t]);return _},b.GetDefaultMaterial=function(v){if(!b._DefaultMaterial){l.Effect.ShadersStore.GLTFDefaultMaterialVertexShader=["precision highp float;","","uniform mat4 worldView;","uniform mat4 projection;","","attribute vec3 position;","","void main(void)","{","    gl_Position = projection * worldView * vec4(position, 1.0);","}"].join(`
`),l.Effect.ShadersStore.GLTFDefaultMaterialPixelShader=["precision highp float;","","uniform vec4 u_emission;","","void main(void)","{","    gl_FragColor = u_emission;","}"].join(`
`);var _={vertex:"GLTFDefaultMaterial",fragment:"GLTFDefaultMaterial"},o={attributes:["position"],uniforms:["worldView","projection","u_emission"],samplers:new Array,needAlphaBlending:!1};b._DefaultMaterial=new l.ShaderMaterial("GLTFDefaultMaterial",v,_,o),b._DefaultMaterial.setColor4("u_emission",new l.Color4(.5,.5,.5,1))}return b._DefaultMaterial},b._DefaultMaterial=null,b}()},"../../../dev/loaders/src/glTF/1.0/glTFMaterialsCommonExtension.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFMaterialsCommonExtension:()=>b});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),g=d("babylonjs/Misc/observable"),b=function(v){(0,c.__extends)(_,v);function _(){return v.call(this,"KHR_materials_common")||this}return _.prototype.loadRuntimeExtensionsAsync=function(o){if(!o.extensions)return!1;var t=o.extensions[this.name];if(!t)return!1;var e=t.lights;if(e)for(var i in e){var a=e[i];switch(a.type){case"ambient":{var s=new g.HemisphericLight(a.name,new g.Vector3(0,1,0),o.scene),u=a.ambient;u&&(s.diffuse=g.Color3.FromArray(u.color||[1,1,1]));break}case"point":{var f=new g.PointLight(a.name,new g.Vector3(10,10,10),o.scene),m=a.point;m&&(f.diffuse=g.Color3.FromArray(m.color||[1,1,1]));break}case"directional":{var P=new g.DirectionalLight(a.name,new g.Vector3(0,-1,0),o.scene),y=a.directional;y&&(P.diffuse=g.Color3.FromArray(y.color||[1,1,1]));break}case"spot":{var M=a.spot;if(M){var O=new g.SpotLight(a.name,new g.Vector3(0,10,0),new g.Vector3(0,-1,0),M.fallOffAngle||Math.PI,M.fallOffExponent||0,o.scene);O.diffuse=g.Color3.FromArray(M.color||[1,1,1])}break}default:g.Tools.Warn('GLTF Material Common extension: light type "'+a.type+" not supported");break}}return!1},_.prototype.loadMaterialAsync=function(o,t,e,i){var a=o.materials[t];if(!a||!a.extensions)return!1;var s=a.extensions[this.name];if(!s)return!1;var u=new g.StandardMaterial(t,o.scene);return u.sideOrientation=g.Material.CounterClockWiseSideOrientation,s.technique==="CONSTANT"&&(u.disableLighting=!0),u.backFaceCulling=s.doubleSided===void 0?!1:!s.doubleSided,u.alpha=s.values.transparency===void 0?1:s.values.transparency,u.specularPower=s.values.shininess===void 0?0:s.values.shininess,typeof s.values.ambient=="string"?this._loadTexture(o,s.values.ambient,u,"ambientTexture",i):u.ambientColor=g.Color3.FromArray(s.values.ambient||[0,0,0]),typeof s.values.diffuse=="string"?this._loadTexture(o,s.values.diffuse,u,"diffuseTexture",i):u.diffuseColor=g.Color3.FromArray(s.values.diffuse||[0,0,0]),typeof s.values.emission=="string"?this._loadTexture(o,s.values.emission,u,"emissiveTexture",i):u.emissiveColor=g.Color3.FromArray(s.values.emission||[0,0,0]),typeof s.values.specular=="string"?this._loadTexture(o,s.values.specular,u,"specularTexture",i):u.specularColor=g.Color3.FromArray(s.values.specular||[0,0,0]),!0},_.prototype._loadTexture=function(o,t,e,i,a){l.GLTFLoaderBase.LoadTextureBufferAsync(o,t,function(s){l.GLTFLoaderBase.CreateTextureAsync(o,t,s,function(u){return e[i]=u})},a)},_}(l.GLTFLoaderExtension);l.GLTFLoader.RegisterExtension(new b)},"../../../dev/loaders/src/glTF/1.0/index.ts":(B,E,d)=>{d.r(E),d.d(E,{EBlendingFunction:()=>g.EBlendingFunction,EComponentType:()=>g.EComponentType,ECullingType:()=>g.ECullingType,EParameterType:()=>g.EParameterType,EShaderType:()=>g.EShaderType,ETextureFilterType:()=>g.ETextureFilterType,ETextureFormat:()=>g.ETextureFormat,ETextureWrapMode:()=>g.ETextureWrapMode,GLTFBinaryExtension:()=>c.GLTFBinaryExtension,GLTFLoader:()=>l.GLTFLoader,GLTFLoaderBase:()=>l.GLTFLoaderBase,GLTFLoaderExtension:()=>l.GLTFLoaderExtension,GLTFMaterialsCommonExtension:()=>v.GLTFMaterialsCommonExtension,GLTFUtils:()=>b.GLTFUtils});var c=d("../../../dev/loaders/src/glTF/1.0/glTFBinaryExtension.ts"),l=d("../../../dev/loaders/src/glTF/1.0/glTFLoader.ts"),g=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderInterfaces.ts"),b=d("../../../dev/loaders/src/glTF/1.0/glTFLoaderUtils.ts"),v=d("../../../dev/loaders/src/glTF/1.0/glTFMaterialsCommonExtension.ts")},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_lights_image_based.ts":(B,E,d)=>{d.r(E),d.d(E,{EXT_lights_image_based:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="EXT_lights_image_based",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null,delete this._lights},v.prototype.onLoading=function(){var _=this._loader.gltf.extensions;if(_&&_[this.name]){var o=_[this.name];this._lights=o.lights}},v.prototype.loadSceneAsync=function(_,o){var t=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(e,i){var a=new Array;a.push(t._loader.loadSceneAsync(_,o)),t._loader.logOpen("".concat(e));var s=l.ArrayItem.Get("".concat(e,"/light"),t._lights,i.light);return a.push(t._loadLightAsync("/extensions/".concat(t.name,"/lights/").concat(i.light),s).then(function(u){t._loader.babylonScene.environmentTexture=u})),t._loader.logClose(),Promise.all(a).then(function(){})})},v.prototype._loadLightAsync=function(_,o){var t=this;if(!o._loaded){var e=new Array;this._loader.logOpen("".concat(_));for(var i=new Array(o.specularImages.length),a=function(f){var m=o.specularImages[f];i[f]=new Array(m.length);for(var P=function(M){var O="".concat(_,"/specularImages/").concat(f,"/").concat(M);s._loader.logOpen("".concat(O));var x=m[M],R=l.ArrayItem.Get(O,s._loader.gltf.images,x);e.push(s._loader.loadImageAsync("/images/".concat(x),R).then(function(N){i[f][M]=N})),s._loader.logClose()},y=0;y<m.length;y++)P(y)},s=this,u=0;u<o.specularImages.length;u++)a(u);this._loader.logClose(),o._loaded=Promise.all(e).then(function(){var f=new c.RawCubeTexture(t._loader.babylonScene,null,o.specularImageSize);if(f.name=o.name||"environment",o._babylonTexture=f,o.intensity!=null&&(f.level=o.intensity),o.rotation){var m=c.Quaternion.FromArray(o.rotation);t._loader.babylonScene.useRightHandedSystem||(m=c.Quaternion.Inverse(m)),c.Matrix.FromQuaternionToRef(m,f.getReflectionTextureMatrix())}if(!o.irradianceCoefficients)throw new Error("".concat(_,": Irradiance coefficients are missing"));var P=c.SphericalHarmonics.FromArray(o.irradianceCoefficients);P.scaleInPlace(o.intensity),P.convertIrradianceToLambertianRadiance();var y=c.SphericalPolynomial.FromHarmonics(P),M=(i.length-1)/c.Scalar.Log2(o.specularImageSize);return f.updateRGBDAsync(i,y,M)})}return o._loaded.then(function(){return o._babylonTexture})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.ts":(B,E,d)=>{d.r(E),d.d(E,{EXT_mesh_gpu_instancing:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="EXT_mesh_gpu_instancing",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadNodeAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){e._loader._disableInstancedMesh++;var s=e._loader.loadNodeAsync("/nodes/".concat(o.index),o,t);if(e._loader._disableInstancedMesh--,!o._primitiveBabylonMeshes)return s;var u=new Array,f=0,m=function(P){if(a.attributes[P]==null){u.push(Promise.resolve(null));return}var y=l.ArrayItem.Get("".concat(i,"/attributes/").concat(P),e._loader.gltf.accessors,a.attributes[P]);if(u.push(e._loader._loadFloatAccessorAsync("/accessors/".concat(y.bufferView),y)),f===0)f=y.count;else if(f!==y.count)throw new Error("".concat(i,"/attributes: Instance buffer accessors do not have the same count."))};return m("TRANSLATION"),m("ROTATION"),m("SCALE"),s.then(function(P){return Promise.all(u).then(function(y){var M=y[0],O=y[1],x=y[2],R=new Float32Array(f*16);c.TmpVectors.Vector3[0].copyFromFloats(0,0,0),c.TmpVectors.Quaternion[0].copyFromFloats(0,0,0,1),c.TmpVectors.Vector3[1].copyFromFloats(1,1,1);for(var N=0;N<f;++N)M&&c.Vector3.FromArrayToRef(M,N*3,c.TmpVectors.Vector3[0]),O&&c.Quaternion.FromArrayToRef(O,N*4,c.TmpVectors.Quaternion[0]),x&&c.Vector3.FromArrayToRef(x,N*3,c.TmpVectors.Vector3[1]),c.Matrix.ComposeToRef(c.TmpVectors.Vector3[1],c.TmpVectors.Quaternion[0],c.TmpVectors.Vector3[0],c.TmpVectors.Matrix[0]),c.TmpVectors.Matrix[0].copyToArray(R,N*16);for(var W=0,Q=o._primitiveBabylonMeshes;W<Q.length;W++){var U=Q[W];U.thinInstanceSetBuffer("matrix",R,16,!0)}return P})})})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_meshopt_compression.ts":(B,E,d)=>{d.r(E),d.d(E,{EXT_meshopt_compression:()=>b});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l=d("babylonjs/Misc/observable"),g="EXT_meshopt_compression",b=function(){function v(_){this.name=g,this.enabled=_.isExtensionUsed(g),this._loader=_}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadBufferViewAsync=function(_,o){var t=this;return c.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(e,i){var a=o;if(a._meshOptData)return a._meshOptData;var s=c.ArrayItem.Get("".concat(_,"/buffer"),t._loader.gltf.buffers,i.buffer);return a._meshOptData=t._loader.loadBufferAsync("/buffers/".concat(s.index),s,i.byteOffset||0,i.byteLength).then(function(u){return l.MeshoptCompression.Default.decodeGltfBufferAsync(u,i.count,i.byteStride,i.mode,i.filter)}),a._meshOptData})},v}();c.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_webp.ts":(B,E,d)=>{d.r(E),d.d(E,{EXT_texture_webp:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l="EXT_texture_webp",g=function(){function b(v){this.name=l,this._loader=v,this.enabled=v.isExtensionUsed(l)}return b.prototype.dispose=function(){this._loader=null},b.prototype._loadTextureAsync=function(v,_,o){var t=this;return c.GLTFLoader.LoadExtensionAsync(v,_,this.name,function(e,i){var a=_.sampler==null?c.GLTFLoader.DefaultSampler:c.ArrayItem.Get("".concat(v,"/sampler"),t._loader.gltf.samplers,_.sampler),s=c.ArrayItem.Get("".concat(e,"/source"),t._loader.gltf.images,i.source);return t._loader._createTextureAsync(v,a,s,function(u){o(u)},void 0,!_._textureInfo.nonColorData)})},b}();c.GLTFLoader.RegisterExtension(l,function(b){return new g(b)})},"../../../dev/loaders/src/glTF/2.0/Extensions/ExtrasAsMetadata.ts":(B,E,d)=>{d.r(E),d.d(E,{ExtrasAsMetadata:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l="ExtrasAsMetadata",g=function(){function b(v){this.name=l,this.enabled=!0,this._loader=v}return b.prototype._assignExtras=function(v,_){if(_.extras&&Object.keys(_.extras).length>0){var o=v.metadata=v.metadata||{},t=o.gltf=o.gltf||{};t.extras=_.extras}},b.prototype.dispose=function(){this._loader=null},b.prototype.loadNodeAsync=function(v,_,o){var t=this;return this._loader.loadNodeAsync(v,_,function(e){t._assignExtras(e,_),o(e)})},b.prototype.loadCameraAsync=function(v,_,o){var t=this;return this._loader.loadCameraAsync(v,_,function(e){t._assignExtras(e,_),o(e)})},b.prototype.createMaterial=function(v,_,o){var t=this._loader.createMaterial(v,_,o);return this._assignExtras(t,_),t},b}();c.GLTFLoader.RegisterExtension(l,function(b){return new g(b)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.data.ts":(B,E,d)=>{d.r(E),d.d(E,{animationPointerTree:()=>M});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/observable"),g=d("../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts");function b(O,x,R,N){return l.Color3.FromArray(x,R).scale(N)}function v(O,x,R,N){return x[R+3]*N}function _(O,x,R,N){return x[R]*N}function o(O,x,R,N){return-x[R]*N}function t(O,x,R,N){return x[R+1]*N}function e(O,x,R,N){return x[R]*N*2}function i(O){return{scale:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"".concat(O,".uScale"),_,function(){return 2}),new s(l.Animation.ANIMATIONTYPE_FLOAT,"".concat(O,".vScale"),t,function(){return 2})],offset:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"".concat(O,".uOffset"),_,function(){return 2}),new s(l.Animation.ANIMATIONTYPE_FLOAT,"".concat(O,".vOffset"),t,function(){return 2})],rotation:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"".concat(O,".wAng"),o,function(){return 1})]}}var a=function(O){(0,c.__extends)(x,O);function x(){return O!==null&&O.apply(this,arguments)||this}return x.prototype.buildAnimations=function(R,N,W,Q,U){U(R._babylonCamera,this._buildAnimation(N,W,Q))},x}(g.AnimationPropertyInfo),s=function(O){(0,c.__extends)(x,O);function x(){return O!==null&&O.apply(this,arguments)||this}return x.prototype.buildAnimations=function(R,N,W,Q,U){for(var H in R._data)U(R._data[H].babylonMaterial,this._buildAnimation(N,W,Q))},x}(g.AnimationPropertyInfo),u=function(O){(0,c.__extends)(x,O);function x(){return O!==null&&O.apply(this,arguments)||this}return x.prototype.buildAnimations=function(R,N,W,Q,U){U(R._babylonLight,this._buildAnimation(N,W,Q))},x}(g.AnimationPropertyInfo),f={__array__:(0,c.__assign)({__target__:!0},g.nodeAnimationData)},m={__array__:{__target__:!0,orthographic:{xmag:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"orthoLeft",o,function(){return 1}),new a(l.Animation.ANIMATIONTYPE_FLOAT,"orthoRight",t,function(){return 1})],ymag:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"orthoBottom",o,function(){return 1}),new a(l.Animation.ANIMATIONTYPE_FLOAT,"orthoTop",t,function(){return 1})],zfar:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"maxZ",_,function(){return 1})],znear:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"minZ",_,function(){return 1})]},perspective:{yfov:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"fov",_,function(){return 1})],zfar:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"maxZ",_,function(){return 1})],znear:[new a(l.Animation.ANIMATIONTYPE_FLOAT,"minZ",_,function(){return 1})]}}},P={__array__:{__target__:!0,pbrMetallicRoughness:{baseColorFactor:[new s(l.Animation.ANIMATIONTYPE_COLOR3,"albedoColor",b,function(){return 4}),new s(l.Animation.ANIMATIONTYPE_FLOAT,"alpha",v,function(){return 4})],metallicFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"metallic",_,function(){return 1})],roughnessFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"roughness",_,function(){return 1})],baseColorTexture:{extensions:{KHR_texture_transform:i("albedoTexture")}}},emissiveFactor:[new s(l.Animation.ANIMATIONTYPE_COLOR3,"emissiveColor",b,function(){return 3})],normalTexture:{scale:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"bumpTexture.level",_,function(){return 1})]},occlusionTexture:{strength:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"ambientTextureStrength",_,function(){return 1})],extensions:{KHR_texture_transform:i("ambientTexture")}},emissiveTexture:{extensions:{KHR_texture_transform:i("emissiveTexture")}},extensions:{KHR_materials_ior:{ior:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"indexOfRefraction",_,function(){return 1})]},KHR_materials_clearcoat:{clearcoatFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"clearCoat.intensity",_,function(){return 1})],clearcoatRoughnessFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"clearCoat.roughness",_,function(){return 1})]},KHR_materials_sheen:{sheenColorFactor:[new s(l.Animation.ANIMATIONTYPE_COLOR3,"sheen.color",b,function(){return 3})],sheenRoughnessFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"sheen.roughness",_,function(){return 1})]},KHR_materials_specular:{specularFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"metallicF0Factor",_,function(){return 1})],specularColorFactor:[new s(l.Animation.ANIMATIONTYPE_COLOR3,"metallicReflectanceColor",b,function(){return 3})]},KHR_materials_emissive_strength:{emissiveStrength:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"emissiveIntensity",_,function(){return 1})]},KHR_materials_transmission:{transmissionFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"subSurface.refractionIntensity",_,function(){return 1})]},KHR_materials_volume:{attenuationColor:[new s(l.Animation.ANIMATIONTYPE_COLOR3,"subSurface.tintColor",b,function(){return 3})],attenuationDistance:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"subSurface.tintColorAtDistance",_,function(){return 1})],thicknessFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"subSurface.maximumThickness",_,function(){return 1})]},KHR_materials_iridescence:{iridescenceFactor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"iridescence.intensity",_,function(){return 1})],iridescenceIor:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"iridescence.indexOfRefraction",_,function(){return 1})],iridescenceThicknessMinimum:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"iridescence.minimumThickness",_,function(){return 1})],iridescenceThicknessMaximum:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"iridescence.maximumThickness",_,function(){return 1})]},KHR_materials_anisotropy:{anisotropyStrength:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"anisotropy.intensity",_,function(){return 1})],anisotropyRotation:[new s(l.Animation.ANIMATIONTYPE_FLOAT,"anisotropy.angle",_,function(){return 1})]}}}},y={KHR_lights_punctual:{lights:{__array__:{__target__:!0,color:[new u(l.Animation.ANIMATIONTYPE_COLOR3,"diffuse",b,function(){return 3})],intensity:[new u(l.Animation.ANIMATIONTYPE_FLOAT,"intensity",_,function(){return 1})],range:[new u(l.Animation.ANIMATIONTYPE_FLOAT,"range",_,function(){return 1})],spot:{innerConeAngle:[new u(l.Animation.ANIMATIONTYPE_FLOAT,"innerAngle",e,function(){return 1})],outerConeAngle:[new u(l.Animation.ANIMATIONTYPE_FLOAT,"angle",e,function(){return 1})]}}}}},M={nodes:f,materials:P,cameras:m,extensions:y}},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_animation_pointer:()=>v});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l=d("babylonjs/Misc/observable"),g=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.data.ts"),b="KHR_animation_pointer",v=function(){function _(o){this.name=b,this._loader=o}return Object.defineProperty(_.prototype,"enabled",{get:function(){return this._loader.isExtensionUsed(b)},enumerable:!1,configurable:!0}),_.prototype.dispose=function(){this._loader=null},_.prototype._loadAnimationChannelAsync=function(o,t,e,i,a){var s,u=(s=i.target.extensions)===null||s===void 0?void 0:s.KHR_animation_pointer;if(!u)return null;i.target.path!=="pointer"&&l.Logger.Warn("".concat(o,"/target/path: Value (").concat(i.target.path,") must be (").concat("pointer",") when using the ").concat(this.name," extension")),i.target.node!=null&&l.Logger.Warn("".concat(o,"/target/node: Value (").concat(i.target.node,") must not be present when using the ").concat(this.name," extension"));var f="".concat(o,"/extensions/").concat(this.name),m=u.pointer;if(!m)throw new Error("".concat(f,": Pointer is missing"));var P=this._parseAnimationPointer("".concat(f,"/pointer"),m);return P?this._loader._loadAnimationChannelFromTargetInfoAsync(o,t,e,i,P,a):(l.Logger.Warn("".concat(f,"/pointer: Invalid pointer (").concat(m,") skipped")),null)},_.prototype._parseAnimationPointer=function(o,t){if(!t.startsWith("/"))return l.Logger.Warn("".concat(o,": Value (").concat(t,") must start with a slash")),null;var e=t.split("/");e.shift();for(var i=g.animationPointerTree,a=this._loader.gltf,s=void 0,u=0,f=e;u<f.length;u++){var m=f[u];if(i.__array__)i=i.__array__;else if(i=i[m],!i)return null;a=a&&a[m],i.__target__&&(s=a)}return!s||!Array.isArray(i)?null:{target:s,properties:i}},_}();c.GLTFLoader.RegisterExtension(b,function(_){return new v(_)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_draco_mesh_compression.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_draco_mesh_compression:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_draco_mesh_compression",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=c.DracoCompression.DecoderAvailable&&this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){delete this.dracoCompression,this._loader=null},v.prototype._loadVertexDataAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){if(o.mode!=null){if(o.mode!==5&&o.mode!==4)throw new Error("".concat(_,": Unsupported mode ").concat(o.mode));if(o.mode===5)throw new Error("".concat(_,": Mode ").concat(o.mode," is not currently supported"))}var s={},u={},f=function(P,y){var M=a.attributes[P];if(!(M===void 0||o.attributes[P]===void 0)){s[y]=M;var O=l.ArrayItem.Get("".concat(_,"/attributes/").concat(P),e._loader.gltf.accessors,o.attributes[P]);if(O.normalized&&O.componentType!==5126){var x=1;switch(O.componentType){case 5120:x=127;break;case 5121:x=255;break;case 5122:x=32767;break;case 5123:x=65535;break}u[y]=x}t._delayInfo=t._delayInfo||[],t._delayInfo.indexOf(y)===-1&&t._delayInfo.push(y)}};f("POSITION",c.VertexBuffer.PositionKind),f("NORMAL",c.VertexBuffer.NormalKind),f("TANGENT",c.VertexBuffer.TangentKind),f("TEXCOORD_0",c.VertexBuffer.UVKind),f("TEXCOORD_1",c.VertexBuffer.UV2Kind),f("TEXCOORD_2",c.VertexBuffer.UV3Kind),f("TEXCOORD_3",c.VertexBuffer.UV4Kind),f("TEXCOORD_4",c.VertexBuffer.UV5Kind),f("TEXCOORD_5",c.VertexBuffer.UV6Kind),f("JOINTS_0",c.VertexBuffer.MatricesIndicesKind),f("WEIGHTS_0",c.VertexBuffer.MatricesWeightsKind),f("COLOR_0",c.VertexBuffer.ColorKind);var m=l.ArrayItem.Get(i,e._loader.gltf.bufferViews,a.bufferView);return m._dracoBabylonGeometry||(m._dracoBabylonGeometry=e._loader.loadBufferViewAsync("/bufferViews/".concat(m.index),m).then(function(P){var y=e.dracoCompression||c.DracoCompression.Default;return y.decodeMeshAsync(P,s,u).then(function(M){var O=new c.Geometry(t.name,e._loader.babylonScene);return M.applyToGeometry(O),O}).catch(function(M){throw new Error("".concat(_,": ").concat(M.message))})})),m._dracoBabylonGeometry})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_lights_punctual.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_lights:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_lights_punctual",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null,delete this._lights},v.prototype.onLoading=function(){var _=this._loader.gltf.extensions;if(_&&_[this.name]){var o=_[this.name];this._lights=o.lights,l.ArrayItem.Assign(this._lights)}},v.prototype.loadNodeAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){return e._loader.loadNodeAsync(_,o,function(s){var u,f=l.ArrayItem.Get(i,e._lights,a.light),m=f.name||s.name;switch(e._loader.babylonScene._blockEntityCollection=!!e._loader._assetContainer,f.type){case"directional":{var P=new c.DirectionalLight(m,c.Vector3.Backward(),e._loader.babylonScene);P.position.setAll(0),u=P;break}case"point":{u=new c.PointLight(m,c.Vector3.Zero(),e._loader.babylonScene);break}case"spot":{var y=new c.SpotLight(m,c.Vector3.Zero(),c.Vector3.Backward(),0,1,e._loader.babylonScene);y.angle=(f.spot&&f.spot.outerConeAngle||Math.PI/4)*2,y.innerAngle=(f.spot&&f.spot.innerConeAngle||0)*2,u=y;break}default:throw e._loader.babylonScene._blockEntityCollection=!1,new Error("".concat(i,": Invalid light type (").concat(f.type,")"))}u._parentContainer=e._loader._assetContainer,e._loader.babylonScene._blockEntityCollection=!1,f._babylonLight=u,u.falloffType=c.Light.FALLOFF_GLTF,u.diffuse=f.color?c.Color3.FromArray(f.color):c.Color3.White(),u.intensity=f.intensity==null?1:f.intensity,u.range=f.range==null?Number.MAX_VALUE:f.range,u.parent=s,e._loader._babylonLights.push(u),l.GLTFLoader.AddPointerMetadata(u,i),t(s)})})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_anisotropy.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_anisotropy:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_anisotropy",b=function(){function v(_){this.name=g,this.order=195,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadIridescencePropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadIridescencePropertiesAsync=function(_,o,t){var e,i;if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var a=new Array;return t.anisotropy.isEnabled=!0,t.anisotropy.intensity=(e=o.anisotropyStrength)!==null&&e!==void 0?e:0,t.anisotropy.angle=(i=o.anisotropyRotation)!==null&&i!==void 0?i:0,o.anisotropyTexture&&a.push(this._loader.loadTextureInfoAsync("".concat(_,"/anisotropyTexture"),o.anisotropyTexture,function(s){s.name="".concat(t.name," (Anisotropy Intensity)"),t.anisotropy.texture=s})),Promise.all(a).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_clearcoat.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_clearcoat:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_clearcoat",b=function(){function v(_){this.name=g,this.order=190,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadClearCoatPropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadClearCoatPropertiesAsync=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var e=new Array;return t.clearCoat.isEnabled=!0,t.clearCoat.useRoughnessFromMainTexture=!1,t.clearCoat.remapF0OnInterfaceChange=!1,o.clearcoatFactor!=null?t.clearCoat.intensity=o.clearcoatFactor:t.clearCoat.intensity=0,o.clearcoatTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(_,"/clearcoatTexture"),o.clearcoatTexture,function(i){i.name="".concat(t.name," (ClearCoat Intensity)"),t.clearCoat.texture=i})),o.clearcoatRoughnessFactor!=null?t.clearCoat.roughness=o.clearcoatRoughnessFactor:t.clearCoat.roughness=0,o.clearcoatRoughnessTexture&&(o.clearcoatRoughnessTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(_,"/clearcoatRoughnessTexture"),o.clearcoatRoughnessTexture,function(i){i.name="".concat(t.name," (ClearCoat Roughness)"),t.clearCoat.textureRoughness=i}))),o.clearcoatNormalTexture&&(o.clearcoatNormalTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(_,"/clearcoatNormalTexture"),o.clearcoatNormalTexture,function(i){i.name="".concat(t.name," (ClearCoat Normal)"),t.clearCoat.bumpTexture=i})),t.invertNormalMapX=!t.getScene().useRightHandedSystem,t.invertNormalMapY=t.getScene().useRightHandedSystem,o.clearcoatNormalTexture.scale!=null&&(t.clearCoat.bumpTexture.level=o.clearcoatNormalTexture.scale)),Promise.all(e).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_emissive_strength.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_emissive_strength:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_emissive_strength",b=function(){function v(_){this.name=g,this.order=170,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){return e._loader.loadMaterialPropertiesAsync(_,o,t).then(function(){e._loadEmissiveProperties(i,a,t)})})},v.prototype._loadEmissiveProperties=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));o.emissiveStrength!==void 0&&t.emissiveColor.scaleToRef(o.emissiveStrength,t.emissiveColor)},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_ior.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_ior:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_ior",b=function(){function v(_){this.name=g,this.order=180,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadIorPropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadIorPropertiesAsync=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));return o.ior!==void 0?t.indexOfRefraction=o.ior:t.indexOfRefraction=v._DEFAULT_IOR,Promise.resolve()},v._DEFAULT_IOR=1.5,v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_iridescence.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_iridescence:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_iridescence",b=function(){function v(_){this.name=g,this.order=195,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadIridescencePropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadIridescencePropertiesAsync=function(_,o,t){var e,i,a,s,u;if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var f=new Array;return t.iridescence.isEnabled=!0,t.iridescence.intensity=(e=o.iridescenceFactor)!==null&&e!==void 0?e:0,t.iridescence.indexOfRefraction=(a=(i=o.iridescenceIor)!==null&&i!==void 0?i:o.iridescenceIOR)!==null&&a!==void 0?a:1.3,t.iridescence.minimumThickness=(s=o.iridescenceThicknessMinimum)!==null&&s!==void 0?s:100,t.iridescence.maximumThickness=(u=o.iridescenceThicknessMaximum)!==null&&u!==void 0?u:400,o.iridescenceTexture&&f.push(this._loader.loadTextureInfoAsync("".concat(_,"/iridescenceTexture"),o.iridescenceTexture,function(m){m.name="".concat(t.name," (Iridescence Intensity)"),t.iridescence.texture=m})),o.iridescenceThicknessTexture&&f.push(this._loader.loadTextureInfoAsync("".concat(_,"/iridescenceThicknessTexture"),o.iridescenceThicknessTexture,function(m){m.name="".concat(t.name," (Iridescence Thickness)"),t.iridescence.thicknessTexture=m})),Promise.all(f).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_pbrSpecularGlossiness:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_pbrSpecularGlossiness",b=function(){function v(_){this.name=g,this.order=200,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialBasePropertiesAsync(_,o,t)),s.push(e._loadSpecularGlossinessPropertiesAsync(i,o,a,t)),e._loader.loadMaterialAlphaProperties(_,o,t),Promise.all(s).then(function(){})})},v.prototype._loadSpecularGlossinessPropertiesAsync=function(_,o,t,e){if(!(e instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var i=new Array;return e.metallic=null,e.roughness=null,t.diffuseFactor?(e.albedoColor=c.Color3.FromArray(t.diffuseFactor),e.alpha=t.diffuseFactor[3]):e.albedoColor=c.Color3.White(),e.reflectivityColor=t.specularFactor?c.Color3.FromArray(t.specularFactor):c.Color3.White(),e.microSurface=t.glossinessFactor==null?1:t.glossinessFactor,t.diffuseTexture&&i.push(this._loader.loadTextureInfoAsync("".concat(_,"/diffuseTexture"),t.diffuseTexture,function(a){a.name="".concat(e.name," (Diffuse)"),e.albedoTexture=a})),t.specularGlossinessTexture&&(i.push(this._loader.loadTextureInfoAsync("".concat(_,"/specularGlossinessTexture"),t.specularGlossinessTexture,function(a){a.name="".concat(e.name," (Specular Glossiness)"),e.reflectivityTexture=a,e.reflectivityTexture.hasAlpha=!0})),e.useMicroSurfaceFromReflectivityMapAlpha=!0),Promise.all(i).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_sheen.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_sheen:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_sheen",b=function(){function v(_){this.name=g,this.order=190,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadSheenPropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadSheenPropertiesAsync=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var e=new Array;return t.sheen.isEnabled=!0,t.sheen.intensity=1,o.sheenColorFactor!=null?t.sheen.color=c.Color3.FromArray(o.sheenColorFactor):t.sheen.color=c.Color3.Black(),o.sheenColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(_,"/sheenColorTexture"),o.sheenColorTexture,function(i){i.name="".concat(t.name," (Sheen Color)"),t.sheen.texture=i})),o.sheenRoughnessFactor!==void 0?t.sheen.roughness=o.sheenRoughnessFactor:t.sheen.roughness=0,o.sheenRoughnessTexture&&(o.sheenRoughnessTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(_,"/sheenRoughnessTexture"),o.sheenRoughnessTexture,function(i){i.name="".concat(t.name," (Sheen Roughness)"),t.sheen.textureRoughness=i}))),t.sheen.albedoScaling=!0,t.sheen.useRoughnessFromMainTexture=!1,Promise.all(e).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_specular.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_specular:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_specular",b=function(){function v(_){this.name=g,this.order=190,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadSpecularPropertiesAsync(i,a,t)),Promise.all(s).then(function(){})})},v.prototype._loadSpecularPropertiesAsync=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var e=new Array;return o.specularFactor!==void 0&&(t.metallicF0Factor=o.specularFactor),o.specularColorFactor!==void 0&&(t.metallicReflectanceColor=c.Color3.FromArray(o.specularColorFactor)),o.specularTexture&&(o.specularTexture.nonColorData=!0,e.push(this._loader.loadTextureInfoAsync("".concat(_,"/specularTexture"),o.specularTexture,function(i){i.name="".concat(t.name," (Specular F0 Strength)"),t.metallicReflectanceTexture=i,t.useOnlyMetallicFromMetallicReflectanceTexture=!0}))),o.specularColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(_,"/specularColorTexture"),o.specularColorTexture,function(i){i.name="".concat(t.name," (Specular F0 Color)"),t.reflectanceTexture=i})),Promise.all(e).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_translucency.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_translucency:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_translucency",b=function(){function v(_){this.name=g,this.order=174,this._loader=_,this.enabled=this._loader.isExtensionUsed(g),this.enabled&&(_.parent.transparencyAsCoverage=!0)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialBasePropertiesAsync(_,o,t)),s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadTranslucentPropertiesAsync(i,o,t,a)),Promise.all(s).then(function(){})})},v.prototype._loadTranslucentPropertiesAsync=function(_,o,t,e){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var i=t;if(i.subSurface.isTranslucencyEnabled=!0,i.subSurface.volumeIndexOfRefraction=1,i.subSurface.minimumThickness=0,i.subSurface.maximumThickness=0,i.subSurface.useAlbedoToTintTranslucency=!0,e.translucencyFactor!==void 0)i.subSurface.translucencyIntensity=e.translucencyFactor;else return i.subSurface.translucencyIntensity=0,i.subSurface.isTranslucencyEnabled=!1,Promise.resolve();return e.translucencyTexture?(e.translucencyTexture.nonColorData=!0,this._loader.loadTextureInfoAsync("".concat(_,"/translucencyTexture"),e.translucencyTexture).then(function(a){i.subSurface.translucencyIntensityTexture=a})):Promise.resolve()},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_transmission.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_transmission:()=>_});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/observable"),g=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),b=function(){function o(t,e){var i=this;this._opaqueRenderTarget=null,this._opaqueMeshesCache=[],this._transparentMeshesCache=[],this._materialObservers={},this._options=(0,c.__assign)((0,c.__assign)({},o._GetDefaultOptions()),t),this._scene=e,this._scene._transmissionHelper=this,this.onErrorObservable=new l.Observable,this._scene.onDisposeObservable.addOnce(function(){i.dispose()}),this._parseScene(),this._setupRenderTargets()}return o._GetDefaultOptions=function(){return{renderSize:1024,samples:4,lodGenerationScale:1,lodGenerationOffset:-4,renderTargetTextureType:l.Constants.TEXTURETYPE_HALF_FLOAT,generateMipmaps:!0}},o.prototype.updateOptions=function(t){var e=this,i=Object.keys(t).filter(function(u){return e._options[u]!==t[u]});if(i.length){var a=(0,c.__assign)((0,c.__assign)({},this._options),t),s=this._options;this._options=a,a.renderSize!==s.renderSize||a.renderTargetTextureType!==s.renderTargetTextureType||a.generateMipmaps!==s.generateMipmaps||!this._opaqueRenderTarget?this._setupRenderTargets():(this._opaqueRenderTarget.samples=a.samples,this._opaqueRenderTarget.lodGenerationScale=a.lodGenerationScale,this._opaqueRenderTarget.lodGenerationOffset=a.lodGenerationOffset)}},o.prototype.getOpaqueTarget=function(){return this._opaqueRenderTarget},o.prototype._shouldRenderAsTransmission=function(t){return t?!!(t instanceof l.PBRMaterial&&t.subSurface.isRefractionEnabled):!1},o.prototype._addMesh=function(t){var e=this;this._materialObservers[t.uniqueId]=t.onMaterialChangedObservable.add(this._onMeshMaterialChanged.bind(this)),l.Tools.SetImmediate(function(){e._shouldRenderAsTransmission(t.material)?(t.material.refractionTexture=e._opaqueRenderTarget,e._transparentMeshesCache.indexOf(t)===-1&&e._transparentMeshesCache.push(t)):e._opaqueMeshesCache.indexOf(t)===-1&&e._opaqueMeshesCache.push(t)})},o.prototype._removeMesh=function(t){t.onMaterialChangedObservable.remove(this._materialObservers[t.uniqueId]),delete this._materialObservers[t.uniqueId];var e=this._transparentMeshesCache.indexOf(t);e!==-1&&this._transparentMeshesCache.splice(e,1),e=this._opaqueMeshesCache.indexOf(t),e!==-1&&this._opaqueMeshesCache.splice(e,1)},o.prototype._parseScene=function(){this._scene.meshes.forEach(this._addMesh.bind(this)),this._scene.onNewMeshAddedObservable.add(this._addMesh.bind(this)),this._scene.onMeshRemovedObservable.add(this._removeMesh.bind(this))},o.prototype._onMeshMaterialChanged=function(t){var e=this._transparentMeshesCache.indexOf(t),i=this._opaqueMeshesCache.indexOf(t),a=this._shouldRenderAsTransmission(t.material);a?(t.material instanceof l.PBRMaterial&&(t.material.subSurface.refractionTexture=this._opaqueRenderTarget),i!==-1?(this._opaqueMeshesCache.splice(i,1),this._transparentMeshesCache.push(t)):e===-1&&this._transparentMeshesCache.push(t)):e!==-1?(this._transparentMeshesCache.splice(e,1),this._opaqueMeshesCache.push(t)):i===-1&&this._opaqueMeshesCache.push(t)},o.prototype._setupRenderTargets=function(){var t=this,e,i;this._opaqueRenderTarget&&this._opaqueRenderTarget.dispose(),this._opaqueRenderTarget=new l.RenderTargetTexture("opaqueSceneTexture",this._options.renderSize,this._scene,this._options.generateMipmaps,void 0,this._options.renderTargetTextureType),this._opaqueRenderTarget.ignoreCameraViewport=!0,this._opaqueRenderTarget.renderList=this._opaqueMeshesCache,this._opaqueRenderTarget.clearColor=(i=(e=this._options.clearColor)===null||e===void 0?void 0:e.clone())!==null&&i!==void 0?i:this._scene.clearColor.clone(),this._opaqueRenderTarget.gammaSpace=!1,this._opaqueRenderTarget.lodGenerationScale=this._options.lodGenerationScale,this._opaqueRenderTarget.lodGenerationOffset=this._options.lodGenerationOffset,this._opaqueRenderTarget.samples=this._options.samples;var a,s;this._opaqueRenderTarget.onBeforeBindObservable.add(function(u){s=t._scene.environmentIntensity,t._scene.environmentIntensity=1,a=t._scene.imageProcessingConfiguration.applyByPostProcess,t._options.clearColor?u.clearColor.copyFrom(t._options.clearColor):t._scene.clearColor.toLinearSpaceToRef(u.clearColor,t._scene.getEngine().useExactSrgbConversions),t._scene.imageProcessingConfiguration._applyByPostProcess=!0}),this._opaqueRenderTarget.onAfterUnbindObservable.add(function(){t._scene.environmentIntensity=s,t._scene.imageProcessingConfiguration._applyByPostProcess=a}),this._transparentMeshesCache.forEach(function(u){t._shouldRenderAsTransmission(u.material)&&(u.material.refractionTexture=t._opaqueRenderTarget)})},o.prototype.dispose=function(){this._scene._transmissionHelper=void 0,this._opaqueRenderTarget&&(this._opaqueRenderTarget.dispose(),this._opaqueRenderTarget=null),this._transparentMeshesCache=[],this._opaqueMeshesCache=[]},o}(),v="KHR_materials_transmission",_=function(){function o(t){this.name=v,this.order=175,this._loader=t,this.enabled=this._loader.isExtensionUsed(v),this.enabled&&(t.parent.transparencyAsCoverage=!0)}return o.prototype.dispose=function(){this._loader=null},o.prototype.loadMaterialPropertiesAsync=function(t,e,i){var a=this;return g.GLTFLoader.LoadExtensionAsync(t,e,this.name,function(s,u){var f=new Array;return f.push(a._loader.loadMaterialBasePropertiesAsync(t,e,i)),f.push(a._loader.loadMaterialPropertiesAsync(t,e,i)),f.push(a._loadTransparentPropertiesAsync(s,e,i,u)),Promise.all(f).then(function(){})})},o.prototype._loadTransparentPropertiesAsync=function(t,e,i,a){if(!(i instanceof l.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var s=i;if(s.subSurface.isRefractionEnabled=!0,s.subSurface.volumeIndexOfRefraction=1,s.subSurface.useAlbedoToTintRefraction=!0,a.transmissionFactor!==void 0){s.subSurface.refractionIntensity=a.transmissionFactor;var u=s.getScene();s.subSurface.refractionIntensity&&!u._transmissionHelper&&new b({},s.getScene())}else return s.subSurface.refractionIntensity=0,s.subSurface.isRefractionEnabled=!1,Promise.resolve();return s.subSurface.minimumThickness=0,s.subSurface.maximumThickness=0,a.transmissionTexture?(a.transmissionTexture.nonColorData=!0,this._loader.loadTextureInfoAsync("".concat(t,"/transmissionTexture"),a.transmissionTexture,void 0).then(function(f){s.subSurface.refractionIntensityTexture=f,s.subSurface.useGltfStyleTextures=!0})):Promise.resolve()},o}();g.GLTFLoader.RegisterExtension(v,function(o){return new _(o)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_unlit.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_unlit:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_unlit",b=function(){function v(_){this.name=g,this.order=210,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(){return e._loadUnlitPropertiesAsync(_,o,t)})},v.prototype._loadUnlitPropertiesAsync=function(_,o,t){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));var e=new Array;t.unlit=!0;var i=o.pbrMetallicRoughness;return i&&(i.baseColorFactor?(t.albedoColor=c.Color3.FromArray(i.baseColorFactor),t.alpha=i.baseColorFactor[3]):t.albedoColor=c.Color3.White(),i.baseColorTexture&&e.push(this._loader.loadTextureInfoAsync("".concat(_,"/baseColorTexture"),i.baseColorTexture,function(a){a.name="".concat(t.name," (Base Color)"),t.albedoTexture=a}))),o.doubleSided&&(t.backFaceCulling=!1,t.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(_,o,t),Promise.all(e).then(function(){})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_variants.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_variants:()=>b});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l=d("babylonjs/Misc/observable"),g="KHR_materials_variants",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.GetAvailableVariants=function(_){var o=this._GetExtensionMetadata(_);return o?Object.keys(o.variants):[]},v.prototype.getAvailableVariants=function(_){return v.GetAvailableVariants(_)},v.SelectVariant=function(_,o){var t=this._GetExtensionMetadata(_);if(!t)throw new Error("Cannot select variant on a glTF mesh that does not have the ".concat(g," extension"));var e=function(u){var f=t.variants[u];if(f)for(var m=0,P=f;m<P.length;m++){var y=P[m];y.mesh.material=y.material}};if(o instanceof Array)for(var i=0,a=o;i<a.length;i++){var s=a[i];e(s)}else e(o);t.lastSelected=o},v.prototype.selectVariant=function(_,o){return v.SelectVariant(_,o)},v.Reset=function(_){var o=this._GetExtensionMetadata(_);if(!o)throw new Error("Cannot reset on a glTF mesh that does not have the ".concat(g," extension"));for(var t=0,e=o.original;t<e.length;t++){var i=e[t];i.mesh.material=i.material}o.lastSelected=null},v.prototype.reset=function(_){return v.Reset(_)},v.GetLastSelectedVariant=function(_){var o=this._GetExtensionMetadata(_);if(!o)throw new Error("Cannot get the last selected variant on a glTF mesh that does not have the ".concat(g," extension"));return o.lastSelected},v.prototype.getLastSelectedVariant=function(_){return v.GetLastSelectedVariant(_)},v._GetExtensionMetadata=function(_){var o,t;return((t=(o=_==null?void 0:_._internalMetadata)===null||o===void 0?void 0:o.gltf)===null||t===void 0?void 0:t[g])||null},v.prototype.onLoading=function(){var _=this._loader.gltf.extensions;if(_&&_[this.name]){var o=_[this.name];this._variants=o.variants}},v.prototype._loadMeshPrimitiveAsync=function(_,o,t,e,i,a){var s=this;return c.GLTFLoader.LoadExtensionAsync(_,i,this.name,function(u,f){var m=new Array;return m.push(s._loader._loadMeshPrimitiveAsync(_,o,t,e,i,function(P){if(a(P),P instanceof l.Mesh){var y=c.GLTFLoader._GetDrawMode(_,i.mode),M=s._loader.rootBabylonMesh,O=M?M._internalMetadata=M._internalMetadata||{}:{},x=O.gltf=O.gltf||{},R=x[g]=x[g]||{lastSelected:null,original:[],variants:{}};R.original.push({mesh:P,material:P.material});for(var N=function(Q){var U=f.mappings[Q],H=c.ArrayItem.Get("".concat(u,"/mappings/").concat(Q,"/material"),s._loader.gltf.materials,U.material);m.push(s._loader._loadMaterialAsync("#/materials/".concat(U.material),H,P,y,function(Y){for(var J=function(le){var fe=U.variants[le],ue=c.ArrayItem.Get("/extensions/".concat(g,"/variants/").concat(fe),s._variants,fe);R.variants[ue.name]=R.variants[ue.name]||[],R.variants[ue.name].push({mesh:P,material:Y}),P.onClonedObservable.add(function(ae){var ce=ae,be=null,L=ce;do{if(L=L.parent,!L)return;be=v._GetExtensionMetadata(L)}while(be===null);if(M&&be===v._GetExtensionMetadata(M)){L._internalMetadata={};for(var F in M._internalMetadata)L._internalMetadata[F]=M._internalMetadata[F];L._internalMetadata.gltf=[];for(var F in M._internalMetadata.gltf)L._internalMetadata.gltf[F]=M._internalMetadata.gltf[F];L._internalMetadata.gltf[g]={lastSelected:null,original:[],variants:{}};for(var k=0,I=be.original;k<I.length;k++){var S=I[k];L._internalMetadata.gltf[g].original.push({mesh:S.mesh,material:S.material})}for(var F in be.variants)if(Object.prototype.hasOwnProperty.call(be.variants,F)){L._internalMetadata.gltf[g].variants[F]=[];for(var A=0,w=be.variants[F];A<w.length;A++){var V=w[A];L._internalMetadata.gltf[g].variants[F].push({mesh:V.mesh,material:V.material})}}be=L._internalMetadata.gltf[g]}for(var G=0,z=be.original;G<z.length;G++){var j=z[G];j.mesh===P&&(j.mesh=ce)}for(var X=0,K=be.variants[ue.name];X<K.length;X++){var j=K[X];j.mesh===P&&(j.mesh=ce)}})},q=0;q<U.variants.length;++q)J(q)}))},W=0;W<f.mappings.length;++W)N(W)}})),Promise.all(m).then(function(P){var y=P[0];return y})})},v}();c.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_volume.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_materials_volume:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_materials_volume",b=function(){function v(_){this.name=g,this.order=173,this._loader=_,this.enabled=this._loader.isExtensionUsed(g),this.enabled&&this._loader._disableInstancedMesh++}return v.prototype.dispose=function(){this.enabled&&this._loader._disableInstancedMesh--,this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return s.push(e._loader.loadMaterialBasePropertiesAsync(_,o,t)),s.push(e._loader.loadMaterialPropertiesAsync(_,o,t)),s.push(e._loadVolumePropertiesAsync(i,o,t,a)),Promise.all(s).then(function(){})})},v.prototype._loadVolumePropertiesAsync=function(_,o,t,e){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(_,": Material type not supported"));if(!t.subSurface.isRefractionEnabled&&!t.subSurface.isTranslucencyEnabled||!e.thicknessFactor)return Promise.resolve();t.subSurface.volumeIndexOfRefraction=t.indexOfRefraction;var i=e.attenuationDistance!==void 0?e.attenuationDistance:Number.MAX_VALUE;return t.subSurface.tintColorAtDistance=i,e.attenuationColor!==void 0&&e.attenuationColor.length==3&&t.subSurface.tintColor.copyFromFloats(e.attenuationColor[0],e.attenuationColor[1],e.attenuationColor[2]),t.subSurface.minimumThickness=0,t.subSurface.maximumThickness=e.thicknessFactor,t.subSurface.useThicknessAsDepth=!0,e.thicknessTexture?(e.thicknessTexture.nonColorData=!0,this._loader.loadTextureInfoAsync("".concat(_,"/thicknessTexture"),e.thicknessTexture).then(function(a){t.subSurface.thicknessTexture=a,t.subSurface.useGltfStyleTextures=!0})):Promise.resolve()},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_mesh_quantization.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_mesh_quantization:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l="KHR_mesh_quantization",g=function(){function b(v){this.name=l,this.enabled=v.isExtensionUsed(l)}return b.prototype.dispose=function(){},b}();c.GLTFLoader.RegisterExtension(l,function(b){return new g(b)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_basisu.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_texture_basisu:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l="KHR_texture_basisu",g=function(){function b(v){this.name=l,this._loader=v,this.enabled=v.isExtensionUsed(l)}return b.prototype.dispose=function(){this._loader=null},b.prototype._loadTextureAsync=function(v,_,o){var t=this;return c.GLTFLoader.LoadExtensionAsync(v,_,this.name,function(e,i){var a=_.sampler==null?c.GLTFLoader.DefaultSampler:c.ArrayItem.Get("".concat(v,"/sampler"),t._loader.gltf.samplers,_.sampler),s=c.ArrayItem.Get("".concat(e,"/source"),t._loader.gltf.images,i.source);return t._loader._createTextureAsync(v,a,s,function(u){o(u)},_._textureInfo.nonColorData?{useRGBAIfASTCBC7NotAvailableWhenUASTC:!0}:void 0,!_._textureInfo.nonColorData)})},b}();c.GLTFLoader.RegisterExtension(l,function(b){return new g(b)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_transform.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_texture_transform:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="KHR_texture_transform",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadTextureInfoAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){return e._loader.loadTextureInfoAsync(_,o,function(s){if(!(s instanceof c.Texture))throw new Error("".concat(i,": Texture type not supported"));a.offset&&(s.uOffset=a.offset[0],s.vOffset=a.offset[1]),s.uRotationCenter=0,s.vRotationCenter=0,a.rotation&&(s.wAng=-a.rotation),a.scale&&(s.uScale=a.scale[0],s.vScale=a.scale[1]),a.texCoord!=null&&(s.coordinatesIndex=a.texCoord),t(s)})})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/KHR_xmp_json_ld.ts":(B,E,d)=>{d.r(E),d.d(E,{KHR_xmp_json_ld:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),l="KHR_xmp_json_ld",g=function(){function b(v){this.name=l,this.order=100,this._loader=v,this.enabled=this._loader.isExtensionUsed(l)}return b.prototype.dispose=function(){this._loader=null},b.prototype.onLoading=function(){var v,_,o;if(this._loader.rootBabylonMesh!==null){var t=(v=this._loader.gltf.extensions)===null||v===void 0?void 0:v.KHR_xmp_json_ld,e=(o=(_=this._loader.gltf.asset)===null||_===void 0?void 0:_.extensions)===null||o===void 0?void 0:o.KHR_xmp_json_ld;if(t&&e){var i=+e.packet;t.packets&&i<t.packets.length&&(this._loader.rootBabylonMesh.metadata=this._loader.rootBabylonMesh.metadata||{},this._loader.rootBabylonMesh.metadata.xmp=t.packets[i])}}},b}();c.GLTFLoader.RegisterExtension(l,function(b){return new g(b)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_audio_emitter.ts":(B,E,d)=>{d.r(E),d.d(E,{MSFT_audio_emitter:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="MSFT_audio_emitter",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null,this._clips=null,this._emitters=null},v.prototype.onLoading=function(){var _=this._loader.gltf.extensions;if(_&&_[this.name]){var o=_[this.name];this._clips=o.clips,this._emitters=o.emitters,l.ArrayItem.Assign(this._clips),l.ArrayItem.Assign(this._emitters)}},v.prototype.loadSceneAsync=function(_,o){var t=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(e,i){var a=new Array;a.push(t._loader.loadSceneAsync(_,o));for(var s=0,u=i.emitters;s<u.length;s++){var f=u[s],m=l.ArrayItem.Get("".concat(e,"/emitters"),t._emitters,f);if(m.refDistance!=null||m.maxDistance!=null||m.rolloffFactor!=null||m.distanceModel!=null||m.innerAngle!=null||m.outerAngle!=null)throw new Error("".concat(e,": Direction or Distance properties are not allowed on emitters attached to a scene"));a.push(t._loadEmitterAsync("".concat(e,"/emitters/").concat(m.index),m))}return Promise.all(a).then(function(){})})},v.prototype.loadNodeAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s=new Array;return e._loader.loadNodeAsync(i,o,function(u){for(var f=function(M){var O=l.ArrayItem.Get("".concat(i,"/emitters"),e._emitters,M);s.push(e._loadEmitterAsync("".concat(i,"/emitters/").concat(O.index),O).then(function(){for(var x=0,R=O._babylonSounds;x<R.length;x++){var N=R[x];N.attachToMesh(u),(O.innerAngle!=null||O.outerAngle!=null)&&(N.setLocalDirectionToMesh(c.Vector3.Forward()),N.setDirectionalCone(2*c.Tools.ToDegrees(O.innerAngle==null?Math.PI:O.innerAngle),2*c.Tools.ToDegrees(O.outerAngle==null?Math.PI:O.outerAngle),0))}}))},m=0,P=a.emitters;m<P.length;m++){var y=P[m];f(y)}t(u)}).then(function(u){return Promise.all(s).then(function(){return u})})})},v.prototype.loadAnimationAsync=function(_,o){var t=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(e,i){return t._loader.loadAnimationAsync(_,o).then(function(a){var s=new Array;l.ArrayItem.Assign(i.events);for(var u=0,f=i.events;u<f.length;u++){var m=f[u];s.push(t._loadAnimationEventAsync("".concat(e,"/events/").concat(m.index),_,o,m,a))}return Promise.all(s).then(function(){return a})})})},v.prototype._loadClipAsync=function(_,o){if(o._objectURL)return o._objectURL;var t;if(o.uri)t=this._loader.loadUriAsync(_,o,o.uri);else{var e=l.ArrayItem.Get("".concat(_,"/bufferView"),this._loader.gltf.bufferViews,o.bufferView);t=this._loader.loadBufferViewAsync("/bufferViews/".concat(e.index),e)}return o._objectURL=t.then(function(i){return URL.createObjectURL(new Blob([i],{type:o.mimeType}))}),o._objectURL},v.prototype._loadEmitterAsync=function(_,o){var t=this;if(o._babylonSounds=o._babylonSounds||[],!o._babylonData){for(var e=new Array,i=o.name||"emitter".concat(o.index),a={loop:!1,autoplay:!1,volume:o.volume==null?1:o.volume},s=function(P){var y="/extensions/".concat(u.name,"/clips"),M=l.ArrayItem.Get(y,u._clips,o.clips[P].clip);e.push(u._loadClipAsync("".concat(y,"/").concat(o.clips[P].clip),M).then(function(O){var x=o._babylonSounds[P]=new c.Sound(i,O,t._loader.babylonScene,null,a);x.refDistance=o.refDistance||1,x.maxDistance=o.maxDistance||256,x.rolloffFactor=o.rolloffFactor||1,x.distanceModel=o.distanceModel||"exponential"}))},u=this,f=0;f<o.clips.length;f++)s(f);var m=Promise.all(e).then(function(){var P=o.clips.map(function(M){return M.weight||1}),y=new c.WeightedSound(o.loop||!1,o._babylonSounds,P);o.innerAngle&&(y.directionalConeInnerAngle=2*c.Tools.ToDegrees(o.innerAngle)),o.outerAngle&&(y.directionalConeOuterAngle=2*c.Tools.ToDegrees(o.outerAngle)),o.volume&&(y.volume=o.volume),o._babylonData.sound=y});o._babylonData={loaded:m}}return o._babylonData.loaded},v.prototype._getEventAction=function(_,o,t,e,i){switch(t){case"play":return function(a){var s=(i||0)+(a-e);o.play(s)};case"stop":return function(){o.stop()};case"pause":return function(){o.pause()};default:throw new Error("".concat(_,": Unsupported action ").concat(t))}},v.prototype._loadAnimationEventAsync=function(_,o,t,e,i){var a=this;if(i.targetedAnimations.length==0)return Promise.resolve();var s=i.targetedAnimations[0],u=e.emitter,f=l.ArrayItem.Get("/extensions/".concat(this.name,"/emitters"),this._emitters,u);return this._loadEmitterAsync(_,f).then(function(){var m=f._babylonData.sound;if(m){var P=new c.AnimationEvent(e.time,a._getEventAction(_,m,e.action,e.time,e.startOffset));s.animation.addEvent(P),i.onAnimationGroupEndObservable.add(function(){m.stop()}),i.onAnimationGroupPauseObservable.add(function(){m.pause()})}})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_lod.ts":(B,E,d)=>{d.r(E),d.d(E,{MSFT_lod:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="MSFT_lod",b=function(){function v(_){this.name=g,this.order=100,this.maxLODsToLoad=10,this.onNodeLODsLoadedObservable=new c.Observable,this.onMaterialLODsLoadedObservable=new c.Observable,this._bufferLODs=new Array,this._nodeIndexLOD=null,this._nodeSignalLODs=new Array,this._nodePromiseLODs=new Array,this._nodeBufferLODs=new Array,this._materialIndexLOD=null,this._materialSignalLODs=new Array,this._materialPromiseLODs=new Array,this._materialBufferLODs=new Array,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null,this._nodeIndexLOD=null,this._nodeSignalLODs.length=0,this._nodePromiseLODs.length=0,this._nodeBufferLODs.length=0,this._materialIndexLOD=null,this._materialSignalLODs.length=0,this._materialPromiseLODs.length=0,this._materialBufferLODs.length=0,this.onMaterialLODsLoadedObservable.clear(),this.onNodeLODsLoadedObservable.clear()},v.prototype.onReady=function(){for(var _=this,o=function(s){var u=Promise.all(t._nodePromiseLODs[s]).then(function(){s!==0&&(_._loader.endPerformanceCounter("Node LOD ".concat(s)),_._loader.log("Loaded node LOD ".concat(s))),_.onNodeLODsLoadedObservable.notifyObservers(s),s!==_._nodePromiseLODs.length-1&&(_._loader.startPerformanceCounter("Node LOD ".concat(s+1)),_._loadBufferLOD(_._nodeBufferLODs,s+1),_._nodeSignalLODs[s]&&_._nodeSignalLODs[s].resolve())});t._loader._completePromises.push(u)},t=this,e=0;e<this._nodePromiseLODs.length;e++)o(e);for(var i=function(s){var u=Promise.all(a._materialPromiseLODs[s]).then(function(){s!==0&&(_._loader.endPerformanceCounter("Material LOD ".concat(s)),_._loader.log("Loaded material LOD ".concat(s))),_.onMaterialLODsLoadedObservable.notifyObservers(s),s!==_._materialPromiseLODs.length-1&&(_._loader.startPerformanceCounter("Material LOD ".concat(s+1)),_._loadBufferLOD(_._materialBufferLODs,s+1),_._materialSignalLODs[s]&&_._materialSignalLODs[s].resolve())});a._loader._completePromises.push(u)},a=this,e=0;e<this._materialPromiseLODs.length;e++)i(e)},v.prototype.loadSceneAsync=function(_,o){var t=this._loader.loadSceneAsync(_,o);return this._loadBufferLOD(this._bufferLODs,0),t},v.prototype.loadNodeAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(i,a){var s,u=e._getLODs(i,o,e._loader.gltf.nodes,a.ids);e._loader.logOpen("".concat(i));for(var f=function(P){var y=u[P];P!==0&&(e._nodeIndexLOD=P,e._nodeSignalLODs[P]=e._nodeSignalLODs[P]||new c.Deferred);var M=function(x){t(x),x.setEnabled(!1)},O=e._loader.loadNodeAsync("/nodes/".concat(y.index),y,M).then(function(x){if(P!==0){var R=u[P-1];R._babylonTransformNode&&(e._disposeTransformNode(R._babylonTransformNode),delete R._babylonTransformNode)}return x.setEnabled(!0),x});e._nodePromiseLODs[P]=e._nodePromiseLODs[P]||[],P===0?s=O:(e._nodeIndexLOD=null,e._nodePromiseLODs[P].push(O))},m=0;m<u.length;m++)f(m);return e._loader.logClose(),s})},v.prototype._loadMaterialAsync=function(_,o,t,e,i){var a=this;return this._nodeIndexLOD?null:l.GLTFLoader.LoadExtensionAsync(_,o,this.name,function(s,u){var f,m=a._getLODs(s,o,a._loader.gltf.materials,u.ids);a._loader.logOpen("".concat(s));for(var P=function(M){var O=m[M];M!==0&&(a._materialIndexLOD=M);var x=a._loader._loadMaterialAsync("/materials/".concat(O.index),O,t,e,function(R){M===0&&i(R)}).then(function(R){if(M!==0){i(R);var N=m[M-1]._data;N[e]&&(a._disposeMaterials([N[e].babylonMaterial]),delete N[e])}return R});a._materialPromiseLODs[M]=a._materialPromiseLODs[M]||[],M===0?f=x:(a._materialIndexLOD=null,a._materialPromiseLODs[M].push(x))},y=0;y<m.length;y++)P(y);return a._loader.logClose(),f})},v.prototype._loadUriAsync=function(_,o,t){var e=this;if(this._nodeIndexLOD!==null){this._loader.log("deferred");var i=this._nodeIndexLOD-1;return this._nodeSignalLODs[i]=this._nodeSignalLODs[i]||new c.Deferred,this._nodeSignalLODs[this._nodeIndexLOD-1].promise.then(function(){return e._loader.loadUriAsync(_,o,t)})}else if(this._materialIndexLOD!==null){this._loader.log("deferred");var i=this._materialIndexLOD-1;return this._materialSignalLODs[i]=this._materialSignalLODs[i]||new c.Deferred,this._materialSignalLODs[i].promise.then(function(){return e._loader.loadUriAsync(_,o,t)})}return null},v.prototype.loadBufferAsync=function(_,o,t,e){if(this._loader.parent.useRangeRequests&&!o.uri){if(!this._loader.bin)throw new Error("".concat(_,": Uri is missing or the binary glTF is missing its binary chunk"));var i=function(a,s){var u=t,f=u+e-1,m=a[s];return m?(m.start=Math.min(m.start,u),m.end=Math.max(m.end,f)):(m={start:u,end:f,loaded:new c.Deferred},a[s]=m),m.loaded.promise.then(function(P){return new Uint8Array(P.buffer,P.byteOffset+t-m.start,e)})};return this._loader.log("deferred"),this._nodeIndexLOD!==null?i(this._nodeBufferLODs,this._nodeIndexLOD):this._materialIndexLOD!==null?i(this._materialBufferLODs,this._materialIndexLOD):i(this._bufferLODs,0)}return null},v.prototype._loadBufferLOD=function(_,o){var t=_[o];t&&(this._loader.log("Loading buffer range [".concat(t.start,"-").concat(t.end,"]")),this._loader.bin.readAsync(t.start,t.end-t.start+1).then(function(e){t.loaded.resolve(e)},function(e){t.loaded.reject(e)}))},v.prototype._getLODs=function(_,o,t,e){if(this.maxLODsToLoad<=0)throw new Error("maxLODsToLoad must be greater than zero");for(var i=new Array,a=e.length-1;a>=0;a--)if(i.push(l.ArrayItem.Get("".concat(_,"/ids/").concat(e[a]),t,e[a])),i.length===this.maxLODsToLoad)return i;return i.push(o),i},v.prototype._disposeTransformNode=function(_){var o=this,t=new Array,e=_.material;e&&t.push(e);for(var i=0,a=_.getChildMeshes();i<a.length;i++){var s=a[i];s.material&&t.push(s.material)}_.dispose();var u=t.filter(function(f){return o._loader.babylonScene.meshes.every(function(m){return m.material!=f})});this._disposeMaterials(u)},v.prototype._disposeMaterials=function(_){for(var o={},t=0,e=_;t<e.length;t++){for(var i=e[t],a=0,s=i.getActiveTextures();a<s.length;a++){var u=s[a];o[u.uniqueId]=u}i.dispose()}for(var f in o)for(var m=0,P=this._loader.babylonScene.materials;m<P.length;m++){var i=P[m];i.hasTexture(o[f])&&delete o[f]}for(var f in o)o[f].dispose()},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_minecraftMesh.ts":(B,E,d)=>{d.r(E),d.d(E,{MSFT_minecraftMesh:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="MSFT_minecraftMesh",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtraAsync(_,o,this.name,function(i,a){if(a){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(i,": Material type not supported"));var s=e._loader.loadMaterialPropertiesAsync(_,o,t);return t.needAlphaBlending()&&(t.forceDepthWrite=!0,t.separateCullingPass=!0),t.backFaceCulling=t.forceDepthWrite,t.twoSidedLighting=!0,s}return null})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_sRGBFactors.ts":(B,E,d)=>{d.r(E),d.d(E,{MSFT_sRGBFactors:()=>b});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts"),g="MSFT_sRGBFactors",b=function(){function v(_){this.name=g,this._loader=_,this.enabled=this._loader.isExtensionUsed(g)}return v.prototype.dispose=function(){this._loader=null},v.prototype.loadMaterialPropertiesAsync=function(_,o,t){var e=this;return l.GLTFLoader.LoadExtraAsync(_,o,this.name,function(i,a){if(a){if(!(t instanceof c.PBRMaterial))throw new Error("".concat(i,": Material type not supported"));var s=e._loader.loadMaterialPropertiesAsync(_,o,t),u=t.getScene().getEngine().useExactSrgbConversions;return t.albedoTexture||t.albedoColor.toLinearSpaceToRef(t.albedoColor,u),t.reflectivityTexture||t.reflectivityColor.toLinearSpaceToRef(t.reflectivityColor,u),s}return null})},v}();l.GLTFLoader.RegisterExtension(g,function(v){return new b(v)})},"../../../dev/loaders/src/glTF/2.0/Extensions/index.ts":(B,E,d)=>{d.r(E),d.d(E,{EXT_lights_image_based:()=>c.EXT_lights_image_based,EXT_mesh_gpu_instancing:()=>l.EXT_mesh_gpu_instancing,EXT_meshopt_compression:()=>g.EXT_meshopt_compression,EXT_texture_webp:()=>b.EXT_texture_webp,ExtrasAsMetadata:()=>q.ExtrasAsMetadata,KHR_animation_pointer:()=>Q.KHR_animation_pointer,KHR_draco_mesh_compression:()=>v.KHR_draco_mesh_compression,KHR_lights:()=>_.KHR_lights,KHR_materials_anisotropy:()=>a.KHR_materials_anisotropy,KHR_materials_clearcoat:()=>e.KHR_materials_clearcoat,KHR_materials_emissive_strength:()=>s.KHR_materials_emissive_strength,KHR_materials_ior:()=>m.KHR_materials_ior,KHR_materials_iridescence:()=>i.KHR_materials_iridescence,KHR_materials_pbrSpecularGlossiness:()=>o.KHR_materials_pbrSpecularGlossiness,KHR_materials_sheen:()=>u.KHR_materials_sheen,KHR_materials_specular:()=>f.KHR_materials_specular,KHR_materials_translucency:()=>M.KHR_materials_translucency,KHR_materials_transmission:()=>y.KHR_materials_transmission,KHR_materials_unlit:()=>t.KHR_materials_unlit,KHR_materials_variants:()=>P.KHR_materials_variants,KHR_materials_volume:()=>O.KHR_materials_volume,KHR_mesh_quantization:()=>x.KHR_mesh_quantization,KHR_texture_basisu:()=>R.KHR_texture_basisu,KHR_texture_transform:()=>N.KHR_texture_transform,KHR_xmp_json_ld:()=>W.KHR_xmp_json_ld,MSFT_audio_emitter:()=>U.MSFT_audio_emitter,MSFT_lod:()=>H.MSFT_lod,MSFT_minecraftMesh:()=>Y.MSFT_minecraftMesh,MSFT_sRGBFactors:()=>J.MSFT_sRGBFactors});var c=d("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_lights_image_based.ts"),l=d("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.ts"),g=d("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_meshopt_compression.ts"),b=d("../../../dev/loaders/src/glTF/2.0/Extensions/EXT_texture_webp.ts"),v=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_draco_mesh_compression.ts"),_=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_lights_punctual.ts"),o=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.ts"),t=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_unlit.ts"),e=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_clearcoat.ts"),i=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_iridescence.ts"),a=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_anisotropy.ts"),s=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_emissive_strength.ts"),u=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_sheen.ts"),f=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_specular.ts"),m=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_ior.ts"),P=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_variants.ts"),y=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_transmission.ts"),M=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_translucency.ts"),O=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_materials_volume.ts"),x=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_mesh_quantization.ts"),R=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_basisu.ts"),N=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_texture_transform.ts"),W=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_xmp_json_ld.ts"),Q=d("../../../dev/loaders/src/glTF/2.0/Extensions/KHR_animation_pointer.ts"),U=d("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_audio_emitter.ts"),H=d("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_lod.ts"),Y=d("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_minecraftMesh.ts"),J=d("../../../dev/loaders/src/glTF/2.0/Extensions/MSFT_sRGBFactors.ts"),q=d("../../../dev/loaders/src/glTF/2.0/Extensions/ExtrasAsMetadata.ts")},"../../../dev/loaders/src/glTF/2.0/glTFLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{ArrayItem:()=>v,GLTFLoader:()=>_});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),g=d("../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts");function b(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var e=function(i){return i&&typeof i=="object"};return o.reduce(function(i,a){return Object.keys(a).forEach(function(s){var u=i[s],f=a[s];Array.isArray(u)&&Array.isArray(f)?i[s]=u.concat.apply(u,f):e(u)&&e(f)?i[s]=b(u,f):i[s]=f}),i},{})}var v=function(){function o(){}return o.Get=function(t,e,i){if(!e||i==null||!e[i])throw new Error("".concat(t,": Failed to find index (").concat(i,")"));return e[i]},o.Assign=function(t){if(t)for(var e=0;e<t.length;e++)t[e].index=e},o}(),_=function(){function o(t){this._completePromises=new Array,this._assetContainer=null,this._babylonLights=[],this._disableInstancedMesh=0,this._extensions=new Array,this._disposed=!1,this._rootUrl=null,this._fileName=null,this._uniqueRootUrl=null,this._bin=null,this._rootBabylonMesh=null,this._defaultBabylonMaterialData={},this._postSceneLoadActions=new Array,this._parent=t}return o.RegisterExtension=function(t,e){o.UnregisterExtension(t)&&c.Logger.Warn("Extension with the name '".concat(t,"' already exists")),o._RegisteredExtensions[t]={factory:e}},o.UnregisterExtension=function(t){return o._RegisteredExtensions[t]?(delete o._RegisteredExtensions[t],!0):!1},Object.defineProperty(o.prototype,"gltf",{get:function(){if(!this._gltf)throw new Error("glTF JSON is not available");return this._gltf},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bin",{get:function(){return this._bin},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"babylonScene",{get:function(){if(!this._babylonScene)throw new Error("Scene is not available");return this._babylonScene},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rootBabylonMesh",{get:function(){return this._rootBabylonMesh},enumerable:!1,configurable:!0}),o.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._completePromises.length=0,this._extensions.forEach(function(t){return t.dispose&&t.dispose()}),this._extensions.length=0,this._gltf=null,this._bin=null,this._babylonScene=null,this._rootBabylonMesh=null,this._defaultBabylonMaterialData={},this._postSceneLoadActions.length=0,this._parent.dispose())},o.prototype.importMeshAsync=function(t,e,i,a,s,u,f){var m=this;return f===void 0&&(f=""),Promise.resolve().then(function(){m._babylonScene=e,m._assetContainer=i,m._loadData(a);var P=null;if(t){var y={};if(m._gltf.nodes)for(var M=0,O=m._gltf.nodes;M<O.length;M++){var x=O[M];x.name&&(y[x.name]=x.index)}var R=t instanceof Array?t:[t];P=R.map(function(N){var W=y[N];if(W===void 0)throw new Error("Failed to find node '".concat(N,"'"));return W})}return m._loadAsync(s,f,P,function(){return{meshes:m._getMeshes(),particleSystems:[],skeletons:m._getSkeletons(),animationGroups:m._getAnimationGroups(),lights:m._babylonLights,transformNodes:m._getTransformNodes(),geometries:m._getGeometries()}})})},o.prototype.loadAsync=function(t,e,i,a,s){var u=this;return s===void 0&&(s=""),Promise.resolve().then(function(){return u._babylonScene=t,u._loadData(e),u._loadAsync(i,s,null,function(){})})},o.prototype._loadAsync=function(t,e,i,a){var s=this;return Promise.resolve().then(function(){s._rootUrl=t,s._uniqueRootUrl=!t.startsWith("file:")&&e?t:"".concat(t).concat(Date.now(),"/"),s._fileName=e,s._loadExtensions(),s._checkExtensions();var u="".concat(l.GLTFLoaderState[l.GLTFLoaderState.LOADING]," => ").concat(l.GLTFLoaderState[l.GLTFLoaderState.READY]),f="".concat(l.GLTFLoaderState[l.GLTFLoaderState.LOADING]," => ").concat(l.GLTFLoaderState[l.GLTFLoaderState.COMPLETE]);s._parent._startPerformanceCounter(u),s._parent._startPerformanceCounter(f),s._parent._setState(l.GLTFLoaderState.LOADING),s._extensionsOnLoading();var m=new Array,P=s._babylonScene.blockMaterialDirtyMechanism;if(s._babylonScene.blockMaterialDirtyMechanism=!0,!s.parent.loadOnlyMaterials){if(i)m.push(s.loadSceneAsync("/nodes",{nodes:i,index:-1}));else if(s._gltf.scene!=null||s._gltf.scenes&&s._gltf.scenes[0]){var y=v.Get("/scene",s._gltf.scenes,s._gltf.scene||0);m.push(s.loadSceneAsync("/scenes/".concat(y.index),y))}}if(!s.parent.skipMaterials&&s.parent.loadAllMaterials&&s._gltf.materials)for(var M=0;M<s._gltf.materials.length;++M){var O=s._gltf.materials[M],x="/materials/"+M,R=c.Material.TriangleFillMode;m.push(s._loadMaterialAsync(x,O,null,R,function(){}))}s._babylonScene.blockMaterialDirtyMechanism=P,s._parent.compileMaterials&&m.push(s._compileMaterialsAsync()),s._parent.compileShadowGenerators&&m.push(s._compileShadowGeneratorsAsync());var N=Promise.all(m).then(function(){return s._rootBabylonMesh&&s._rootBabylonMesh.setEnabled(!0),s._extensionsOnReady(),s._parent._setState(l.GLTFLoaderState.READY),s._startAnimations(),a()});return N.then(function(W){return s._parent._endPerformanceCounter(u),c.Tools.SetImmediate(function(){s._disposed||Promise.all(s._completePromises).then(function(){s._parent._endPerformanceCounter(f),s._parent._setState(l.GLTFLoaderState.COMPLETE),s._parent.onCompleteObservable.notifyObservers(void 0),s._parent.onCompleteObservable.clear(),s.dispose()},function(Q){s._parent.onErrorObservable.notifyObservers(Q),s._parent.onErrorObservable.clear(),s.dispose()})}),W})}).catch(function(u){throw s._disposed||(s._parent.onErrorObservable.notifyObservers(u),s._parent.onErrorObservable.clear(),s.dispose()),u})},o.prototype._loadData=function(t){if(this._gltf=t.json,this._setupData(),t.bin){var e=this._gltf.buffers;if(e&&e[0]&&!e[0].uri){var i=e[0];(i.byteLength<t.bin.byteLength-3||i.byteLength>t.bin.byteLength)&&c.Logger.Warn("Binary buffer length (".concat(i.byteLength,") from JSON does not match chunk length (").concat(t.bin.byteLength,")")),this._bin=t.bin}else c.Logger.Warn("Unexpected BIN chunk")}},o.prototype._setupData=function(){if(v.Assign(this._gltf.accessors),v.Assign(this._gltf.animations),v.Assign(this._gltf.buffers),v.Assign(this._gltf.bufferViews),v.Assign(this._gltf.cameras),v.Assign(this._gltf.images),v.Assign(this._gltf.materials),v.Assign(this._gltf.meshes),v.Assign(this._gltf.nodes),v.Assign(this._gltf.samplers),v.Assign(this._gltf.scenes),v.Assign(this._gltf.skins),v.Assign(this._gltf.textures),this._gltf.nodes){for(var t={},e=0,i=this._gltf.nodes;e<i.length;e++){var a=i[e];if(a.children)for(var s=0,u=a.children;s<u.length;s++){var f=u[s];t[f]=a.index}}for(var m=this._createRootNode(),P=0,y=this._gltf.nodes;P<y.length;P++){var a=y[P],M=t[a.index];a.parent=M===void 0?m:this._gltf.nodes[M]}}},o.prototype._loadExtensions=function(){for(var t in o._RegisteredExtensions){var e=o._RegisteredExtensions[t].factory(this);e.name!==t&&c.Logger.Warn("The name of the glTF loader extension instance does not match the registered name: ".concat(e.name," !== ").concat(t)),this._extensions.push(e),this._parent.onExtensionLoadedObservable.notifyObservers(e)}this._extensions.sort(function(i,a){return(i.order||Number.MAX_VALUE)-(a.order||Number.MAX_VALUE)}),this._parent.onExtensionLoadedObservable.clear()},o.prototype._checkExtensions=function(){if(this._gltf.extensionsRequired)for(var t=function(u){var f=e._extensions.some(function(m){return m.name===u&&m.enabled});if(!f)throw new Error("Require extension ".concat(u," is not available"))},e=this,i=0,a=this._gltf.extensionsRequired;i<a.length;i++){var s=a[i];t(s)}},o.prototype._createRootNode=function(){this._babylonScene._blockEntityCollection=!!this._assetContainer,this._rootBabylonMesh=new c.Mesh("__root__",this._babylonScene),this._rootBabylonMesh._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,this._rootBabylonMesh.setEnabled(!1);var t={_babylonTransformNode:this._rootBabylonMesh,index:-1};switch(this._parent.coordinateSystemMode){case l.GLTFLoaderCoordinateSystemMode.AUTO:{this._babylonScene.useRightHandedSystem||(t.rotation=[0,1,0,0],t.scale=[1,1,-1],o._LoadTransform(t,this._rootBabylonMesh));break}case l.GLTFLoaderCoordinateSystemMode.FORCE_RIGHT_HANDED:{this._babylonScene.useRightHandedSystem=!0;break}default:throw new Error("Invalid coordinate system mode (".concat(this._parent.coordinateSystemMode,")"))}return this._parent.onMeshLoadedObservable.notifyObservers(this._rootBabylonMesh),t},o.prototype.loadSceneAsync=function(t,e){var i=this,a=this._extensionsLoadSceneAsync(t,e);if(a)return a;var s=new Array;if(this.logOpen("".concat(t," ").concat(e.name||"")),e.nodes)for(var u=0,f=e.nodes;u<f.length;u++){var m=f[u],P=v.Get("".concat(t,"/nodes/").concat(m),this._gltf.nodes,m);s.push(this.loadNodeAsync("/nodes/".concat(P.index),P,function(x){x.parent=i._rootBabylonMesh}))}for(var y=0,M=this._postSceneLoadActions;y<M.length;y++){var O=M[y];O()}return s.push(this._loadAnimationsAsync()),this.logClose(),Promise.all(s).then(function(){})},o.prototype._forEachPrimitive=function(t,e){if(t._primitiveBabylonMeshes)for(var i=0,a=t._primitiveBabylonMeshes;i<a.length;i++){var s=a[i];e(s)}},o.prototype._getGeometries=function(){var t=new Array,e=this._gltf.nodes;if(e)for(var i=0,a=e;i<a.length;i++){var s=a[i];this._forEachPrimitive(s,function(u){var f=u.geometry;f&&t.indexOf(f)===-1&&t.push(f)})}return t},o.prototype._getMeshes=function(){var t=new Array;this._rootBabylonMesh&&t.push(this._rootBabylonMesh);var e=this._gltf.nodes;if(e)for(var i=0,a=e;i<a.length;i++){var s=a[i];this._forEachPrimitive(s,function(u){t.push(u)})}return t},o.prototype._getTransformNodes=function(){var t=new Array,e=this._gltf.nodes;if(e)for(var i=0,a=e;i<a.length;i++){var s=a[i];s._babylonTransformNode&&s._babylonTransformNode.getClassName()==="TransformNode"&&t.push(s._babylonTransformNode),s._babylonTransformNodeForSkin&&t.push(s._babylonTransformNodeForSkin)}return t},o.prototype._getSkeletons=function(){var t=new Array,e=this._gltf.skins;if(e)for(var i=0,a=e;i<a.length;i++){var s=a[i];s._data&&t.push(s._data.babylonSkeleton)}return t},o.prototype._getAnimationGroups=function(){var t=new Array,e=this._gltf.animations;if(e)for(var i=0,a=e;i<a.length;i++){var s=a[i];s._babylonAnimationGroup&&t.push(s._babylonAnimationGroup)}return t},o.prototype._startAnimations=function(){switch(this._parent.animationStartMode){case l.GLTFLoaderAnimationStartMode.NONE:break;case l.GLTFLoaderAnimationStartMode.FIRST:{var t=this._getAnimationGroups();t.length!==0&&t[0].start(!0);break}case l.GLTFLoaderAnimationStartMode.ALL:{for(var t=this._getAnimationGroups(),e=0,i=t;e<i.length;e++){var a=i[e];a.start(!0)}break}default:{c.Logger.Error("Invalid animation start mode (".concat(this._parent.animationStartMode,")"));return}}},o.prototype.loadNodeAsync=function(t,e,i){var a=this;i===void 0&&(i=function(){});var s=this._extensionsLoadNodeAsync(t,e,i);if(s)return s;if(e._babylonTransformNode)throw new Error("".concat(t,": Invalid recursive node hierarchy"));var u=new Array;this.logOpen("".concat(t," ").concat(e.name||""));var f=function(M){if(o.AddPointerMetadata(M,t),o._LoadTransform(e,M),e.camera!=null){var O=v.Get("".concat(t,"/camera"),a._gltf.cameras,e.camera);u.push(a.loadCameraAsync("/cameras/".concat(O.index),O,function(Q){Q.parent=M}))}if(e.children)for(var x=0,R=e.children;x<R.length;x++){var N=R[x],W=v.Get("".concat(t,"/children/").concat(N),a._gltf.nodes,N);u.push(a.loadNodeAsync("/nodes/".concat(W.index),W,function(Q){Q.parent=M}))}i(M)};if(e.mesh==null||e.skin!=null){var m=e.name||"node".concat(e.index);this._babylonScene._blockEntityCollection=!!this._assetContainer;var P=new c.TransformNode(m,this._babylonScene);P._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e.mesh==null?e._babylonTransformNode=P:e._babylonTransformNodeForSkin=P,f(P)}if(e.mesh!=null)if(e.skin==null){var y=v.Get("".concat(t,"/mesh"),this._gltf.meshes,e.mesh);u.push(this._loadMeshAsync("/meshes/".concat(y.index),e,y,f))}else{var y=v.Get("".concat(t,"/mesh"),this._gltf.meshes,e.mesh);u.push(this._loadMeshAsync("/meshes/".concat(y.index),e,y,function(O){var x=e._babylonTransformNodeForSkin;O.metadata=b(x.metadata,O.metadata||{});var R=v.Get("".concat(t,"/skin"),a._gltf.skins,e.skin);u.push(a._loadSkinAsync("/skins/".concat(R.index),e,R,function(N){a._forEachPrimitive(e,function(W){W.skeleton=N}),a._postSceneLoadActions.push(function(){if(R.skeleton!=null){var W=v.Get("/skins/".concat(R.index,"/skeleton"),a._gltf.nodes,R.skeleton).parent;e.index===W.index?O.parent=x.parent:O.parent=W._babylonTransformNode}else O.parent=a._rootBabylonMesh;a._parent.onSkinLoadedObservable.notifyObservers({node:x,skinnedNode:O})})}))}))}return this.logClose(),Promise.all(u).then(function(){return a._forEachPrimitive(e,function(M){M.geometry&&M.geometry.useBoundingInfoFromGeometry?M._updateBoundingInfo():M.refreshBoundingInfo(!0)}),e._babylonTransformNode})},o.prototype._loadMeshAsync=function(t,e,i,a){var s=i.primitives;if(!s||!s.length)throw new Error("".concat(t,": Primitives are missing"));s[0].index==null&&v.Assign(s);var u=new Array;this.logOpen("".concat(t," ").concat(i.name||""));var f=e.name||"node".concat(e.index);if(s.length===1){var m=i.primitives[0];u.push(this._loadMeshPrimitiveAsync("".concat(t,"/primitives/").concat(m.index),f,e,i,m,function(M){e._babylonTransformNode=M,e._primitiveBabylonMeshes=[M]}))}else{this._babylonScene._blockEntityCollection=!!this._assetContainer,e._babylonTransformNode=new c.TransformNode(f,this._babylonScene),e._babylonTransformNode._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e._primitiveBabylonMeshes=[];for(var P=0,y=s;P<y.length;P++){var m=y[P];u.push(this._loadMeshPrimitiveAsync("".concat(t,"/primitives/").concat(m.index),"".concat(f,"_primitive").concat(m.index),e,i,m,function(O){O.parent=e._babylonTransformNode,e._primitiveBabylonMeshes.push(O)}))}}return a(e._babylonTransformNode),this.logClose(),Promise.all(u).then(function(){return e._babylonTransformNode})},o.prototype._loadMeshPrimitiveAsync=function(t,e,i,a,s,u){var f=this,m=this._extensionsLoadMeshPrimitiveAsync(t,e,i,a,s,u);if(m)return m;this.logOpen("".concat(t));var P=this._disableInstancedMesh===0&&this._parent.createInstances&&i.skin==null&&!a.primitives[0].targets,y,M;if(P&&s._instanceData)this._babylonScene._blockEntityCollection=!!this._assetContainer,y=s._instanceData.babylonSourceMesh.createInstance(e),y._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,M=s._instanceData.promise;else{var O=new Array;this._babylonScene._blockEntityCollection=!!this._assetContainer;var x=new c.Mesh(e,this._babylonScene);x._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,x.overrideMaterialSideOrientation=this._babylonScene.useRightHandedSystem?c.Material.CounterClockWiseSideOrientation:c.Material.ClockWiseSideOrientation,this._createMorphTargets(t,i,a,s,x),O.push(this._loadVertexDataAsync(t,s,x).then(function(Q){return f._loadMorphTargetsAsync(t,s,x,Q).then(function(){f._disposed||(f._babylonScene._blockEntityCollection=!!f._assetContainer,Q.applyToMesh(x),Q._parentContainer=f._assetContainer,f._babylonScene._blockEntityCollection=!1)})}));var R=o._GetDrawMode(t,s.mode);if(s.material==null){var N=this._defaultBabylonMaterialData[R];N||(N=this._createDefaultMaterial("__GLTFLoader._default",R),this._parent.onMaterialLoadedObservable.notifyObservers(N),this._defaultBabylonMaterialData[R]=N),x.material=N}else if(!this.parent.skipMaterials){var W=v.Get("".concat(t,"/material"),this._gltf.materials,s.material);O.push(this._loadMaterialAsync("/materials/".concat(W.index),W,x,R,function(Q){x.material=Q}))}M=Promise.all(O),P&&(s._instanceData={babylonSourceMesh:x,promise:M}),y=x}return o.AddPointerMetadata(y,t),this._parent.onMeshLoadedObservable.notifyObservers(y),u(y),this.logClose(),M.then(function(){return y})},o.prototype._loadVertexDataAsync=function(t,e,i){var a=this,s=this._extensionsLoadVertexDataAsync(t,e,i);if(s)return s;var u=e.attributes;if(!u)throw new Error("".concat(t,": Attributes are missing"));var f=new Array,m=new c.Geometry(i.name,this._babylonScene);if(e.indices==null)i.isUnIndexed=!0;else{var P=v.Get("".concat(t,"/indices"),this._gltf.accessors,e.indices);f.push(this._loadIndicesAccessorAsync("/accessors/".concat(P.index),P).then(function(M){m.setIndices(M)}))}var y=function(M,O,x){if(u[M]!=null){i._delayInfo=i._delayInfo||[],i._delayInfo.indexOf(O)===-1&&i._delayInfo.push(O);var R=v.Get("".concat(t,"/attributes/").concat(M),a._gltf.accessors,u[M]);f.push(a._loadVertexAccessorAsync("/accessors/".concat(R.index),R,O).then(function(N){var W,Q;if(N.getKind()===c.VertexBuffer.PositionKind&&!a.parent.alwaysComputeBoundingBox&&!i.skeleton&&R.min&&R.max){var U=(W=c.TmpVectors.Vector3[0]).copyFromFloats.apply(W,R.min),H=(Q=c.TmpVectors.Vector3[1]).copyFromFloats.apply(Q,R.max);if(R.normalized&&R.componentType!==5126){var Y=1;switch(R.componentType){case 5120:Y=127;break;case 5121:Y=255;break;case 5122:Y=32767;break;case 5123:Y=65535;break}var J=1/Y;U.scaleInPlace(J),H.scaleInPlace(J)}m._boundingInfo=new c.BoundingInfo(U,H),m.useBoundingInfoFromGeometry=!0}m.setVerticesBuffer(N,R.count)})),O==c.VertexBuffer.MatricesIndicesExtraKind&&(i.numBoneInfluencers=8),x&&x(R)}};return y("POSITION",c.VertexBuffer.PositionKind),y("NORMAL",c.VertexBuffer.NormalKind),y("TANGENT",c.VertexBuffer.TangentKind),y("TEXCOORD_0",c.VertexBuffer.UVKind),y("TEXCOORD_1",c.VertexBuffer.UV2Kind),y("TEXCOORD_2",c.VertexBuffer.UV3Kind),y("TEXCOORD_3",c.VertexBuffer.UV4Kind),y("TEXCOORD_4",c.VertexBuffer.UV5Kind),y("TEXCOORD_5",c.VertexBuffer.UV6Kind),y("JOINTS_0",c.VertexBuffer.MatricesIndicesKind),y("WEIGHTS_0",c.VertexBuffer.MatricesWeightsKind),y("JOINTS_1",c.VertexBuffer.MatricesIndicesExtraKind),y("WEIGHTS_1",c.VertexBuffer.MatricesWeightsExtraKind),y("COLOR_0",c.VertexBuffer.ColorKind,function(M){M.type==="VEC4"&&(i.hasVertexAlpha=!0)}),Promise.all(f).then(function(){return m})},o.prototype._createMorphTargets=function(t,e,i,a,s){if(a.targets){if(e._numMorphTargets==null)e._numMorphTargets=a.targets.length;else if(a.targets.length!==e._numMorphTargets)throw new Error("".concat(t,": Primitives do not have the same number of targets"));var u=i.extras?i.extras.targetNames:null;this._babylonScene._blockEntityCollection=!!this._assetContainer,s.morphTargetManager=new c.MorphTargetManager(this._babylonScene),s.morphTargetManager._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,s.morphTargetManager.areUpdatesFrozen=!0;for(var f=0;f<a.targets.length;f++){var m=e.weights?e.weights[f]:i.weights?i.weights[f]:0,P=u?u[f]:"morphTarget".concat(f);s.morphTargetManager.addTarget(new c.MorphTarget(P,m,s.getScene()))}}},o.prototype._loadMorphTargetsAsync=function(t,e,i,a){if(!e.targets)return Promise.resolve();for(var s=new Array,u=i.morphTargetManager,f=0;f<u.numTargets;f++){var m=u.getTarget(f);s.push(this._loadMorphTargetVertexDataAsync("".concat(t,"/targets/").concat(f),a,e.targets[f],m))}return Promise.all(s).then(function(){u.areUpdatesFrozen=!1})},o.prototype._loadMorphTargetVertexDataAsync=function(t,e,i,a){var s=this,u=new Array,f=function(m,P,y){if(i[m]!=null){var M=e.getVertexBuffer(P);if(M){var O=v.Get("".concat(t,"/").concat(m),s._gltf.accessors,i[m]);u.push(s._loadFloatAccessorAsync("/accessors/".concat(O.index),O).then(function(x){y(M,x)}))}}};return f("POSITION",c.VertexBuffer.PositionKind,function(m,P){var y=new Float32Array(P.length);m.forEach(P.length,function(M,O){y[O]=P[O]+M}),a.setPositions(y)}),f("NORMAL",c.VertexBuffer.NormalKind,function(m,P){var y=new Float32Array(P.length);m.forEach(y.length,function(M,O){y[O]=P[O]+M}),a.setNormals(y)}),f("TANGENT",c.VertexBuffer.TangentKind,function(m,P){var y=new Float32Array(P.length/3*4),M=0;m.forEach(P.length/3*4,function(O,x){(x+1)%4!==0&&(y[M]=P[M]+O,M++)}),a.setTangents(y)}),Promise.all(u).then(function(){})},o._LoadTransform=function(t,e){if(t.skin==null){var i=c.Vector3.Zero(),a=c.Quaternion.Identity(),s=c.Vector3.One();if(t.matrix){var u=c.Matrix.FromArray(t.matrix);u.decompose(s,a,i)}else t.translation&&(i=c.Vector3.FromArray(t.translation)),t.rotation&&(a=c.Quaternion.FromArray(t.rotation)),t.scale&&(s=c.Vector3.FromArray(t.scale));e.position=i,e.rotationQuaternion=a,e.scaling=s}},o.prototype._loadSkinAsync=function(t,e,i,a){var s=this,u=this._extensionsLoadSkinAsync(t,e,i);if(u)return u;if(i._data)return a(i._data.babylonSkeleton),i._data.promise;var f="skeleton".concat(i.index);this._babylonScene._blockEntityCollection=!!this._assetContainer;var m=new c.Skeleton(i.name||f,f,this._babylonScene);m._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,this._loadBones(t,i,m);var P=this._loadSkinInverseBindMatricesDataAsync(t,i).then(function(y){s._updateBoneMatrices(m,y)});return i._data={babylonSkeleton:m,promise:P},a(m),P},o.prototype._loadBones=function(t,e,i){if(e.skeleton==null||this._parent.alwaysComputeSkeletonRootNode){var a=this._findSkeletonRootNode("".concat(t,"/joints"),e.joints);if(a)if(e.skeleton===void 0)e.skeleton=a.index;else{var s=function(O,x){for(;x.parent;x=x.parent)if(x.parent===O)return!0;return!1},u=v.Get("".concat(t,"/skeleton"),this._gltf.nodes,e.skeleton);u!==a&&!s(u,a)&&(c.Logger.Warn("".concat(t,"/skeleton: Overriding with nearest common ancestor as skeleton node is not a common root")),e.skeleton=a.index)}else c.Logger.Warn("".concat(t,": Failed to find common root"))}for(var f={},m=0,P=e.joints;m<P.length;m++){var y=P[m],M=v.Get("".concat(t,"/joints/").concat(y),this._gltf.nodes,y);this._loadBone(M,e,i,f)}},o.prototype._findSkeletonRootNode=function(t,e){if(e.length===0)return null;for(var i={},a=0,s=e;a<s.length;a++){for(var u=s[a],f=new Array,m=v.Get("".concat(t,"/").concat(u),this._gltf.nodes,u);m.index!==-1;)f.unshift(m),m=m.parent;i[u]=f}for(var P=null,y=0;;++y){var f=i[e[0]];if(y>=f.length)return P;for(var m=f[y],M=1;M<e.length;++M)if(f=i[e[M]],y>=f.length||m!==f[y])return P;P=m}},o.prototype._loadBone=function(t,e,i,a){var s=a[t.index];if(s)return s;var u=null;t.index!==e.skeleton&&(t.parent&&t.parent.index!==-1?u=this._loadBone(t.parent,e,i,a):e.skeleton!==void 0&&c.Logger.Warn("/skins/".concat(e.index,"/skeleton: Skeleton node is not a common root")));var f=e.joints.indexOf(t.index);return s=new c.Bone(t.name||"joint".concat(t.index),i,u,this._getNodeMatrix(t),null,null,f),a[t.index]=s,this._postSceneLoadActions.push(function(){s.linkTransformNode(t._babylonTransformNode)}),s},o.prototype._loadSkinInverseBindMatricesDataAsync=function(t,e){if(e.inverseBindMatrices==null)return Promise.resolve(null);var i=v.Get("".concat(t,"/inverseBindMatrices"),this._gltf.accessors,e.inverseBindMatrices);return this._loadFloatAccessorAsync("/accessors/".concat(i.index),i)},o.prototype._updateBoneMatrices=function(t,e){for(var i=0,a=t.bones;i<a.length;i++){var s=a[i],u=c.Matrix.Identity(),f=s._index;e&&f!==-1&&(c.Matrix.FromArrayToRef(e,f*16,u),u.invertToRef(u));var m=s.getParent();m&&u.multiplyToRef(m.getAbsoluteInverseBindMatrix(),u),s.updateMatrix(u,!1,!1),s._updateAbsoluteBindMatrices(void 0,!1)}},o.prototype._getNodeMatrix=function(t){return t.matrix?c.Matrix.FromArray(t.matrix):c.Matrix.Compose(t.scale?c.Vector3.FromArray(t.scale):c.Vector3.One(),t.rotation?c.Quaternion.FromArray(t.rotation):c.Quaternion.Identity(),t.translation?c.Vector3.FromArray(t.translation):c.Vector3.Zero())},o.prototype.loadCameraAsync=function(t,e,i){i===void 0&&(i=function(){});var a=this._extensionsLoadCameraAsync(t,e,i);if(a)return a;var s=new Array;this.logOpen("".concat(t," ").concat(e.name||"")),this._babylonScene._blockEntityCollection=!!this._assetContainer;var u=new c.FreeCamera(e.name||"camera".concat(e.index),c.Vector3.Zero(),this._babylonScene,!1);switch(u._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,u.ignoreParentScaling=!0,e._babylonCamera=u,u.rotation=new c.Vector3(0,Math.PI,0),e.type){case"perspective":{var f=e.perspective;if(!f)throw new Error("".concat(t,": Camera perspective properties are missing"));u.fov=f.yfov,u.minZ=f.znear,u.maxZ=f.zfar||0;break}case"orthographic":{if(!e.orthographic)throw new Error("".concat(t,": Camera orthographic properties are missing"));u.mode=c.Camera.ORTHOGRAPHIC_CAMERA,u.orthoLeft=-e.orthographic.xmag,u.orthoRight=e.orthographic.xmag,u.orthoBottom=-e.orthographic.ymag,u.orthoTop=e.orthographic.ymag,u.minZ=e.orthographic.znear,u.maxZ=e.orthographic.zfar;break}default:throw new Error("".concat(t,": Invalid camera type (").concat(e.type,")"))}return o.AddPointerMetadata(u,t),this._parent.onCameraLoadedObservable.notifyObservers(u),i(u),this.logClose(),Promise.all(s).then(function(){return u})},o.prototype._loadAnimationsAsync=function(){var t=this._gltf.animations;if(!t)return Promise.resolve();for(var e=new Array,i=0;i<t.length;i++){var a=t[i];e.push(this.loadAnimationAsync("/animations/".concat(a.index),a).then(function(s){s.targetedAnimations.length===0&&s.dispose()}))}return Promise.all(e).then(function(){})},o.prototype.loadAnimationAsync=function(t,e){var i=this._extensionsLoadAnimationAsync(t,e);if(i)return i;this._babylonScene._blockEntityCollection=!!this._assetContainer;var a=new c.AnimationGroup(e.name||"animation".concat(e.index),this._babylonScene);a._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,e._babylonAnimationGroup=a;var s=new Array;v.Assign(e.channels),v.Assign(e.samplers);for(var u=0,f=e.channels;u<f.length;u++){var m=f[u];s.push(this._loadAnimationChannelAsync("".concat(t,"/channels/").concat(m.index),t,e,m,function(P,y){P.animations=P.animations||[],P.animations.push(y),a.addTargetedAnimation(y,P)}))}return Promise.all(s).then(function(){return a.normalize(0),a})},o.prototype._loadAnimationChannelAsync=function(t,e,i,a,s){var u=this._extensionsLoadAnimationChannelAsync(t,e,i,a,s);if(u)return u;if(a.target.node==null)return Promise.resolve();var f=v.Get("".concat(t,"/target/node"),this._gltf.nodes,a.target.node);if(a.target.path==="weights"&&!f._numMorphTargets||a.target.path!=="weights"&&!f._babylonTransformNode)return Promise.resolve();var m;switch(a.target.path){case"translation":{m=g.nodeAnimationData.translation;break}case"rotation":{m=g.nodeAnimationData.rotation;break}case"scale":{m=g.nodeAnimationData.scale;break}case"weights":{m=g.nodeAnimationData.weights;break}default:throw new Error("".concat(t,"/target/path: Invalid value (").concat(a.target.path,")"))}var P={target:f,properties:m};return this._loadAnimationChannelFromTargetInfoAsync(t,e,i,a,P,s)},o.prototype._loadAnimationChannelFromTargetInfoAsync=function(t,e,i,a,s,u){var f=this.parent.targetFps,m=1/f,P=v.Get("".concat(t,"/sampler"),i.samplers,a.sampler);return this._loadAnimationSamplerAsync("".concat(e,"/samplers/").concat(a.sampler),P).then(function(y){for(var M=0,O=0,x=s.properties;O<x.length;O++){var R=x[O],N=R.getStride(s.target),W=y.input,Q=y.output,U=new Array(W.length),H=0;switch(y.interpolation){case"STEP":{for(var Y=0;Y<W.length;Y++){var J=R.getValue(s.target,Q,H,1);H+=N,U[Y]={frame:W[Y]*f,value:J,interpolation:c.AnimationKeyInterpolation.STEP}}break}case"CUBICSPLINE":{for(var Y=0;Y<W.length;Y++){var q=R.getValue(s.target,Q,H,m);H+=N;var J=R.getValue(s.target,Q,H,1);H+=N;var le=R.getValue(s.target,Q,H,m);H+=N,U[Y]={frame:W[Y]*f,inTangent:q,value:J,outTangent:le}}break}case"LINEAR":{for(var Y=0;Y<W.length;Y++){var J=R.getValue(s.target,Q,H,1);H+=N,U[Y]={frame:W[Y]*f,value:J}}break}}if(H>0){var fe="".concat(i.name||"animation".concat(i.index),"_channel").concat(a.index,"_").concat(M);R.buildAnimations(s.target,fe,f,U,function(ue,ae){++M,u(ue,ae)})}}})},o.prototype._loadAnimationSamplerAsync=function(t,e){if(e._data)return e._data;var i=e.interpolation||"LINEAR";switch(i){case"STEP":case"LINEAR":case"CUBICSPLINE":break;default:throw new Error("".concat(t,"/interpolation: Invalid value (").concat(e.interpolation,")"))}var a=v.Get("".concat(t,"/input"),this._gltf.accessors,e.input),s=v.Get("".concat(t,"/output"),this._gltf.accessors,e.output);return e._data=Promise.all([this._loadFloatAccessorAsync("/accessors/".concat(a.index),a),this._loadFloatAccessorAsync("/accessors/".concat(s.index),s)]).then(function(u){var f=u[0],m=u[1];return{input:f,interpolation:i,output:m}}),e._data},o.prototype.loadBufferAsync=function(t,e,i,a){var s=this._extensionsLoadBufferAsync(t,e,i,a);if(s)return s;if(!e._data)if(e.uri)e._data=this.loadUriAsync("".concat(t,"/uri"),e,e.uri);else{if(!this._bin)throw new Error("".concat(t,": Uri is missing or the binary glTF is missing its binary chunk"));e._data=this._bin.readAsync(0,e.byteLength)}return e._data.then(function(u){try{return new Uint8Array(u.buffer,u.byteOffset+i,a)}catch(f){throw new Error("".concat(t,": ").concat(f.message))}})},o.prototype.loadBufferViewAsync=function(t,e){var i=this._extensionsLoadBufferViewAsync(t,e);if(i)return i;if(e._data)return e._data;var a=v.Get("".concat(t,"/buffer"),this._gltf.buffers,e.buffer);return e._data=this.loadBufferAsync("/buffers/".concat(a.index),a,e.byteOffset||0,e.byteLength),e._data},o.prototype._loadAccessorAsync=function(t,e,i){var a=this;if(e._data)return e._data;var s=o._GetNumComponents(t,e.type),u=s*c.VertexBuffer.GetTypeByteLength(e.componentType),f=s*e.count;if(e.bufferView==null)e._data=Promise.resolve(new i(f));else{var m=v.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(m.index),m).then(function(y){if(e.componentType===5126&&!e.normalized&&(!m.byteStride||m.byteStride===u))return o._GetTypedArray(t,e.componentType,y,e.byteOffset,f);var M=new i(f);return c.VertexBuffer.ForEach(y,e.byteOffset||0,m.byteStride||u,s,e.componentType,M.length,e.normalized||!1,function(O,x){M[x]=O}),M})}if(e.sparse){var P=e.sparse;e._data=e._data.then(function(y){var M=y,O=v.Get("".concat(t,"/sparse/indices/bufferView"),a._gltf.bufferViews,P.indices.bufferView),x=v.Get("".concat(t,"/sparse/values/bufferView"),a._gltf.bufferViews,P.values.bufferView);return Promise.all([a.loadBufferViewAsync("/bufferViews/".concat(O.index),O),a.loadBufferViewAsync("/bufferViews/".concat(x.index),x)]).then(function(R){var N=R[0],W=R[1],Q=o._GetTypedArray("".concat(t,"/sparse/indices"),P.indices.componentType,N,P.indices.byteOffset,P.count),U=s*P.count,H;if(e.componentType===5126&&!e.normalized)H=o._GetTypedArray("".concat(t,"/sparse/values"),e.componentType,W,P.values.byteOffset,U);else{var Y=o._GetTypedArray("".concat(t,"/sparse/values"),e.componentType,W,P.values.byteOffset,U);H=new i(U),c.VertexBuffer.ForEach(Y,0,u,s,e.componentType,H.length,e.normalized||!1,function(ue,ae){H[ae]=ue})}for(var J=0,q=0;q<Q.length;q++)for(var le=Q[q]*s,fe=0;fe<s;fe++)M[le++]=H[J++];return M})})}return e._data},o.prototype._loadFloatAccessorAsync=function(t,e){return this._loadAccessorAsync(t,e,Float32Array)},o.prototype._loadIndicesAccessorAsync=function(t,e){if(e.type!=="SCALAR")throw new Error("".concat(t,"/type: Invalid value ").concat(e.type));if(e.componentType!==5121&&e.componentType!==5123&&e.componentType!==5125)throw new Error("".concat(t,"/componentType: Invalid value ").concat(e.componentType));if(e._data)return e._data;if(e.sparse){var i=o._GetTypedArrayConstructor("".concat(t,"/componentType"),e.componentType);e._data=this._loadAccessorAsync(t,e,i)}else{var a=v.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(a.index),a).then(function(s){return o._GetTypedArray(t,e.componentType,s,e.byteOffset,e.count)})}return e._data},o.prototype._loadVertexBufferViewAsync=function(t){if(t._babylonBuffer)return t._babylonBuffer;var e=this._babylonScene.getEngine();return t._babylonBuffer=this.loadBufferViewAsync("/bufferViews/".concat(t.index),t).then(function(i){return new c.Buffer(e,i,!1)}),t._babylonBuffer},o.prototype._loadVertexAccessorAsync=function(t,e,i){var a;if(!((a=e._babylonVertexBuffer)===null||a===void 0)&&a[i])return e._babylonVertexBuffer[i];e._babylonVertexBuffer||(e._babylonVertexBuffer={});var s=this._babylonScene.getEngine();if(e.sparse)e._babylonVertexBuffer[i]=this._loadFloatAccessorAsync(t,e).then(function(f){return new c.VertexBuffer(s,f,i,!1)});else if(i===c.VertexBuffer.MatricesIndicesKind||i===c.VertexBuffer.MatricesIndicesExtraKind)e._babylonVertexBuffer[i]=this._loadFloatAccessorAsync(t,e).then(function(f){return new c.VertexBuffer(s,f,i,!1)});else{var u=v.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._babylonVertexBuffer[i]=this._loadVertexBufferViewAsync(u).then(function(f){var m=o._GetNumComponents(t,e.type);return new c.VertexBuffer(s,f,i,!1,!1,u.byteStride,!1,e.byteOffset,m,e.componentType,e.normalized,!0,1,!0)})}return e._babylonVertexBuffer[i]},o.prototype._loadMaterialMetallicRoughnessPropertiesAsync=function(t,e,i){if(!(i instanceof c.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var a=new Array;return e&&(e.baseColorFactor?(i.albedoColor=c.Color3.FromArray(e.baseColorFactor),i.alpha=e.baseColorFactor[3]):i.albedoColor=c.Color3.White(),i.metallic=e.metallicFactor==null?1:e.metallicFactor,i.roughness=e.roughnessFactor==null?1:e.roughnessFactor,e.baseColorTexture&&a.push(this.loadTextureInfoAsync("".concat(t,"/baseColorTexture"),e.baseColorTexture,function(s){s.name="".concat(i.name," (Base Color)"),i.albedoTexture=s})),e.metallicRoughnessTexture&&(e.metallicRoughnessTexture.nonColorData=!0,a.push(this.loadTextureInfoAsync("".concat(t,"/metallicRoughnessTexture"),e.metallicRoughnessTexture,function(s){s.name="".concat(i.name," (Metallic Roughness)"),i.metallicTexture=s})),i.useMetallnessFromMetallicTextureBlue=!0,i.useRoughnessFromMetallicTextureGreen=!0,i.useRoughnessFromMetallicTextureAlpha=!1)),Promise.all(a).then(function(){})},o.prototype._loadMaterialAsync=function(t,e,i,a,s){s===void 0&&(s=function(){});var u=this._extensionsLoadMaterialAsync(t,e,i,a,s);if(u)return u;e._data=e._data||{};var f=e._data[a];if(!f){this.logOpen("".concat(t," ").concat(e.name||""));var m=this.createMaterial(t,e,a);f={babylonMaterial:m,babylonMeshes:[],promise:this.loadMaterialPropertiesAsync(t,e,m)},e._data[a]=f,o.AddPointerMetadata(m,t),this._parent.onMaterialLoadedObservable.notifyObservers(m),this.logClose()}return i&&(f.babylonMeshes.push(i),i.onDisposeObservable.addOnce(function(){var P=f.babylonMeshes.indexOf(i);P!==-1&&f.babylonMeshes.splice(P,1)})),s(f.babylonMaterial),f.promise.then(function(){return f.babylonMaterial})},o.prototype._createDefaultMaterial=function(t,e){this._babylonScene._blockEntityCollection=!!this._assetContainer;var i=new c.PBRMaterial(t,this._babylonScene);return i._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,i.fillMode=e,i.enableSpecularAntiAliasing=!0,i.useRadianceOverAlpha=!this._parent.transparencyAsCoverage,i.useSpecularOverAlpha=!this._parent.transparencyAsCoverage,i.transparencyMode=c.PBRMaterial.PBRMATERIAL_OPAQUE,i.metallic=1,i.roughness=1,i},o.prototype.createMaterial=function(t,e,i){var a=this._extensionsCreateMaterial(t,e,i);if(a)return a;var s=e.name||"material".concat(e.index),u=this._createDefaultMaterial(s,i);return u},o.prototype.loadMaterialPropertiesAsync=function(t,e,i){var a=this._extensionsLoadMaterialPropertiesAsync(t,e,i);if(a)return a;var s=new Array;return s.push(this.loadMaterialBasePropertiesAsync(t,e,i)),e.pbrMetallicRoughness&&s.push(this._loadMaterialMetallicRoughnessPropertiesAsync("".concat(t,"/pbrMetallicRoughness"),e.pbrMetallicRoughness,i)),this.loadMaterialAlphaProperties(t,e,i),Promise.all(s).then(function(){})},o.prototype.loadMaterialBasePropertiesAsync=function(t,e,i){if(!(i instanceof c.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var a=new Array;return i.emissiveColor=e.emissiveFactor?c.Color3.FromArray(e.emissiveFactor):new c.Color3(0,0,0),e.doubleSided&&(i.backFaceCulling=!1,i.twoSidedLighting=!0),e.normalTexture&&(e.normalTexture.nonColorData=!0,a.push(this.loadTextureInfoAsync("".concat(t,"/normalTexture"),e.normalTexture,function(s){s.name="".concat(i.name," (Normal)"),i.bumpTexture=s})),i.invertNormalMapX=!this._babylonScene.useRightHandedSystem,i.invertNormalMapY=this._babylonScene.useRightHandedSystem,e.normalTexture.scale!=null&&i.bumpTexture&&(i.bumpTexture.level=e.normalTexture.scale),i.forceIrradianceInFragment=!0),e.occlusionTexture&&(e.occlusionTexture.nonColorData=!0,a.push(this.loadTextureInfoAsync("".concat(t,"/occlusionTexture"),e.occlusionTexture,function(s){s.name="".concat(i.name," (Occlusion)"),i.ambientTexture=s})),i.useAmbientInGrayScale=!0,e.occlusionTexture.strength!=null&&(i.ambientTextureStrength=e.occlusionTexture.strength)),e.emissiveTexture&&a.push(this.loadTextureInfoAsync("".concat(t,"/emissiveTexture"),e.emissiveTexture,function(s){s.name="".concat(i.name," (Emissive)"),i.emissiveTexture=s})),Promise.all(a).then(function(){})},o.prototype.loadMaterialAlphaProperties=function(t,e,i){if(!(i instanceof c.PBRMaterial))throw new Error("".concat(t,": Material type not supported"));var a=e.alphaMode||"OPAQUE";switch(a){case"OPAQUE":{i.transparencyMode=c.PBRMaterial.PBRMATERIAL_OPAQUE;break}case"MASK":{i.transparencyMode=c.PBRMaterial.PBRMATERIAL_ALPHATEST,i.alphaCutOff=e.alphaCutoff==null?.5:e.alphaCutoff,i.albedoTexture&&(i.albedoTexture.hasAlpha=!0);break}case"BLEND":{i.transparencyMode=c.PBRMaterial.PBRMATERIAL_ALPHABLEND,i.albedoTexture&&(i.albedoTexture.hasAlpha=!0,i.useAlphaFromAlbedoTexture=!0);break}default:throw new Error("".concat(t,"/alphaMode: Invalid value (").concat(e.alphaMode,")"))}},o.prototype.loadTextureInfoAsync=function(t,e,i){var a=this;i===void 0&&(i=function(){});var s=this._extensionsLoadTextureInfoAsync(t,e,i);if(s)return s;if(this.logOpen("".concat(t)),e.texCoord>=6)throw new Error("".concat(t,"/texCoord: Invalid value (").concat(e.texCoord,")"));var u=v.Get("".concat(t,"/index"),this._gltf.textures,e.index);u._textureInfo=e;var f=this._loadTextureAsync("/textures/".concat(e.index),u,function(m){m.coordinatesIndex=e.texCoord||0,o.AddPointerMetadata(m,t),a._parent.onTextureLoadedObservable.notifyObservers(m),i(m)});return this.logClose(),f},o.prototype._loadTextureAsync=function(t,e,i){i===void 0&&(i=function(){});var a=this._extensionsLoadTextureAsync(t,e,i);if(a)return a;this.logOpen("".concat(t," ").concat(e.name||""));var s=e.sampler==null?o.DefaultSampler:v.Get("".concat(t,"/sampler"),this._gltf.samplers,e.sampler),u=v.Get("".concat(t,"/source"),this._gltf.images,e.source),f=this._createTextureAsync(t,s,u,i,void 0,!e._textureInfo.nonColorData);return this.logClose(),f},o.prototype._createTextureAsync=function(t,e,i,a,s,u){var f=this;a===void 0&&(a=function(){});var m=this._loadSampler("/samplers/".concat(e.index),e),P=new Array,y=new c.Deferred;this._babylonScene._blockEntityCollection=!!this._assetContainer;var M={noMipmap:m.noMipMaps,invertY:!1,samplingMode:m.samplingMode,onLoad:function(){f._disposed||y.resolve()},onError:function(x,R){f._disposed||y.reject(new Error("".concat(t,": ").concat(R&&R.message?R.message:x||"Failed to load texture")))},mimeType:i.mimeType,loaderOptions:s,useSRGBBuffer:!!u&&this._parent.useSRGBBuffers},O=new c.Texture(null,this._babylonScene,M);return O._parentContainer=this._assetContainer,this._babylonScene._blockEntityCollection=!1,P.push(y.promise),P.push(this.loadImageAsync("/images/".concat(i.index),i).then(function(x){var R=i.uri||"".concat(f._fileName,"#image").concat(i.index),N="data:".concat(f._uniqueRootUrl).concat(R);O.updateURL(N,x)})),O.wrapU=m.wrapU,O.wrapV=m.wrapV,a(O),Promise.all(P).then(function(){return O})},o.prototype._loadSampler=function(t,e){return e._data||(e._data={noMipMaps:e.minFilter===9728||e.minFilter===9729,samplingMode:o._GetTextureSamplingMode(t,e),wrapU:o._GetTextureWrapMode("".concat(t,"/wrapS"),e.wrapS),wrapV:o._GetTextureWrapMode("".concat(t,"/wrapT"),e.wrapT)}),e._data},o.prototype.loadImageAsync=function(t,e){if(!e._data){if(this.logOpen("".concat(t," ").concat(e.name||"")),e.uri)e._data=this.loadUriAsync("".concat(t,"/uri"),e,e.uri);else{var i=v.Get("".concat(t,"/bufferView"),this._gltf.bufferViews,e.bufferView);e._data=this.loadBufferViewAsync("/bufferViews/".concat(i.index),i)}this.logClose()}return e._data},o.prototype.loadUriAsync=function(t,e,i){var a=this,s=this._extensionsLoadUriAsync(t,e,i);if(s)return s;if(!o._ValidateUri(i))throw new Error("".concat(t,": '").concat(i,"' is invalid"));if((0,c.IsBase64DataUrl)(i)){var u=new Uint8Array((0,c.DecodeBase64UrlToBinary)(i));return this.log("".concat(t,": Decoded ").concat(i.substr(0,64),"... (").concat(u.length," bytes)")),Promise.resolve(u)}return this.log("".concat(t,": Loading ").concat(i)),this._parent.preprocessUrlAsync(this._rootUrl+i).then(function(f){return new Promise(function(m,P){a._parent._loadFile(a._babylonScene,f,function(y){a._disposed||(a.log("".concat(t,": Loaded ").concat(i," (").concat(y.byteLength," bytes)")),m(new Uint8Array(y)))},!0,function(y){P(new c.LoadFileError("".concat(t,": Failed to load '").concat(i,"'").concat(y?": "+y.status+" "+y.statusText:""),y))})})})},o.AddPointerMetadata=function(t,e){t.metadata=t.metadata||{};var i=t._internalMetadata=t._internalMetadata||{},a=i.gltf=i.gltf||{},s=a.pointers=a.pointers||[];s.push(e)},o._GetTextureWrapMode=function(t,e){switch(e=e??10497,e){case 33071:return c.Texture.CLAMP_ADDRESSMODE;case 33648:return c.Texture.MIRROR_ADDRESSMODE;case 10497:return c.Texture.WRAP_ADDRESSMODE;default:return c.Logger.Warn("".concat(t,": Invalid value (").concat(e,")")),c.Texture.WRAP_ADDRESSMODE}},o._GetTextureSamplingMode=function(t,e){var i=e.magFilter==null?9729:e.magFilter,a=e.minFilter==null?9987:e.minFilter;if(i===9729)switch(a){case 9728:return c.Texture.LINEAR_NEAREST;case 9729:return c.Texture.LINEAR_LINEAR;case 9984:return c.Texture.LINEAR_NEAREST_MIPNEAREST;case 9985:return c.Texture.LINEAR_LINEAR_MIPNEAREST;case 9986:return c.Texture.LINEAR_NEAREST_MIPLINEAR;case 9987:return c.Texture.LINEAR_LINEAR_MIPLINEAR;default:return c.Logger.Warn("".concat(t,"/minFilter: Invalid value (").concat(a,")")),c.Texture.LINEAR_LINEAR_MIPLINEAR}else switch(i!==9728&&c.Logger.Warn("".concat(t,"/magFilter: Invalid value (").concat(i,")")),a){case 9728:return c.Texture.NEAREST_NEAREST;case 9729:return c.Texture.NEAREST_LINEAR;case 9984:return c.Texture.NEAREST_NEAREST_MIPNEAREST;case 9985:return c.Texture.NEAREST_LINEAR_MIPNEAREST;case 9986:return c.Texture.NEAREST_NEAREST_MIPLINEAR;case 9987:return c.Texture.NEAREST_LINEAR_MIPLINEAR;default:return c.Logger.Warn("".concat(t,"/minFilter: Invalid value (").concat(a,")")),c.Texture.NEAREST_NEAREST_MIPNEAREST}},o._GetTypedArrayConstructor=function(t,e){switch(e){case 5120:return Int8Array;case 5121:return Uint8Array;case 5122:return Int16Array;case 5123:return Uint16Array;case 5125:return Uint32Array;case 5126:return Float32Array;default:throw new Error("".concat(t,": Invalid component type ").concat(e))}},o._GetTypedArray=function(t,e,i,a,s){var u=i.buffer;a=i.byteOffset+(a||0);var f=o._GetTypedArrayConstructor("".concat(t,"/componentType"),e),m=c.VertexBuffer.GetTypeByteLength(e);return a%m!==0?(c.Logger.Warn("".concat(t,": Copying buffer as byte offset (").concat(a,") is not a multiple of component type byte length (").concat(m,")")),new f(u.slice(a,a+s*m),0)):new f(u,a,s)},o._GetNumComponents=function(t,e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}throw new Error("".concat(t,": Invalid type (").concat(e,")"))},o._ValidateUri=function(t){return c.Tools.IsBase64(t)||t.indexOf("..")===-1},o._GetDrawMode=function(t,e){switch(e==null&&(e=4),e){case 0:return c.Material.PointListDrawMode;case 1:return c.Material.LineListDrawMode;case 2:return c.Material.LineLoopDrawMode;case 3:return c.Material.LineStripDrawMode;case 4:return c.Material.TriangleFillMode;case 5:return c.Material.TriangleStripDrawMode;case 6:return c.Material.TriangleFanDrawMode}throw new Error("".concat(t,": Invalid mesh primitive mode (").concat(e,")"))},o.prototype._compileMaterialsAsync=function(){var t=this;this._parent._startPerformanceCounter("Compile materials");var e=new Array;if(this._gltf.materials)for(var i=0,a=this._gltf.materials;i<a.length;i++){var s=a[i];if(s._data)for(var u in s._data)for(var f=s._data[u],m=0,P=f.babylonMeshes;m<P.length;m++){var y=P[m];y.computeWorldMatrix(!0);var M=f.babylonMaterial;e.push(M.forceCompilationAsync(y)),e.push(M.forceCompilationAsync(y,{useInstances:!0})),this._parent.useClipPlane&&(e.push(M.forceCompilationAsync(y,{clipPlane:!0})),e.push(M.forceCompilationAsync(y,{clipPlane:!0,useInstances:!0})))}}return Promise.all(e).then(function(){t._parent._endPerformanceCounter("Compile materials")})},o.prototype._compileShadowGeneratorsAsync=function(){var t=this;this._parent._startPerformanceCounter("Compile shadow generators");for(var e=new Array,i=this._babylonScene.lights,a=0,s=i;a<s.length;a++){var u=s[a],f=u.getShadowGenerator();f&&e.push(f.forceCompilationAsync())}return Promise.all(e).then(function(){t._parent._endPerformanceCounter("Compile shadow generators")})},o.prototype._forEachExtensions=function(t){for(var e=0,i=this._extensions;e<i.length;e++){var a=i[e];a.enabled&&t(a)}},o.prototype._applyExtensions=function(t,e,i){for(var a=0,s=this._extensions;a<s.length;a++){var u=s[a];if(u.enabled){var f="".concat(u.name,".").concat(e),m=t;m._activeLoaderExtensionFunctions=m._activeLoaderExtensionFunctions||{};var P=m._activeLoaderExtensionFunctions;if(!P[f]){P[f]=!0;try{var y=i(u);if(y)return y}finally{delete P[f]}}}}return null},o.prototype._extensionsOnLoading=function(){this._forEachExtensions(function(t){return t.onLoading&&t.onLoading()})},o.prototype._extensionsOnReady=function(){this._forEachExtensions(function(t){return t.onReady&&t.onReady()})},o.prototype._extensionsLoadSceneAsync=function(t,e){return this._applyExtensions(e,"loadScene",function(i){return i.loadSceneAsync&&i.loadSceneAsync(t,e)})},o.prototype._extensionsLoadNodeAsync=function(t,e,i){return this._applyExtensions(e,"loadNode",function(a){return a.loadNodeAsync&&a.loadNodeAsync(t,e,i)})},o.prototype._extensionsLoadCameraAsync=function(t,e,i){return this._applyExtensions(e,"loadCamera",function(a){return a.loadCameraAsync&&a.loadCameraAsync(t,e,i)})},o.prototype._extensionsLoadVertexDataAsync=function(t,e,i){return this._applyExtensions(e,"loadVertexData",function(a){return a._loadVertexDataAsync&&a._loadVertexDataAsync(t,e,i)})},o.prototype._extensionsLoadMeshPrimitiveAsync=function(t,e,i,a,s,u){return this._applyExtensions(s,"loadMeshPrimitive",function(f){return f._loadMeshPrimitiveAsync&&f._loadMeshPrimitiveAsync(t,e,i,a,s,u)})},o.prototype._extensionsLoadMaterialAsync=function(t,e,i,a,s){return this._applyExtensions(e,"loadMaterial",function(u){return u._loadMaterialAsync&&u._loadMaterialAsync(t,e,i,a,s)})},o.prototype._extensionsCreateMaterial=function(t,e,i){return this._applyExtensions(e,"createMaterial",function(a){return a.createMaterial&&a.createMaterial(t,e,i)})},o.prototype._extensionsLoadMaterialPropertiesAsync=function(t,e,i){return this._applyExtensions(e,"loadMaterialProperties",function(a){return a.loadMaterialPropertiesAsync&&a.loadMaterialPropertiesAsync(t,e,i)})},o.prototype._extensionsLoadTextureInfoAsync=function(t,e,i){return this._applyExtensions(e,"loadTextureInfo",function(a){return a.loadTextureInfoAsync&&a.loadTextureInfoAsync(t,e,i)})},o.prototype._extensionsLoadTextureAsync=function(t,e,i){return this._applyExtensions(e,"loadTexture",function(a){return a._loadTextureAsync&&a._loadTextureAsync(t,e,i)})},o.prototype._extensionsLoadAnimationAsync=function(t,e){return this._applyExtensions(e,"loadAnimation",function(i){return i.loadAnimationAsync&&i.loadAnimationAsync(t,e)})},o.prototype._extensionsLoadAnimationChannelAsync=function(t,e,i,a,s){return this._applyExtensions(i,"loadAnimationChannel",function(u){return u._loadAnimationChannelAsync&&u._loadAnimationChannelAsync(t,e,i,a,s)})},o.prototype._extensionsLoadSkinAsync=function(t,e,i){return this._applyExtensions(i,"loadSkin",function(a){return a._loadSkinAsync&&a._loadSkinAsync(t,e,i)})},o.prototype._extensionsLoadUriAsync=function(t,e,i){return this._applyExtensions(e,"loadUri",function(a){return a._loadUriAsync&&a._loadUriAsync(t,e,i)})},o.prototype._extensionsLoadBufferViewAsync=function(t,e){return this._applyExtensions(e,"loadBufferView",function(i){return i.loadBufferViewAsync&&i.loadBufferViewAsync(t,e)})},o.prototype._extensionsLoadBufferAsync=function(t,e,i,a){return this._applyExtensions(e,"loadBuffer",function(s){return s.loadBufferAsync&&s.loadBufferAsync(t,e,i,a)})},o.LoadExtensionAsync=function(t,e,i,a){if(!e.extensions)return null;var s=e.extensions,u=s[i];return u?a("".concat(t,"/extensions/").concat(i),u):null},o.LoadExtraAsync=function(t,e,i,a){if(!e.extras)return null;var s=e.extras,u=s[i];return u?a("".concat(t,"/extras/").concat(i),u):null},o.prototype.isExtensionUsed=function(t){return!!this._gltf.extensionsUsed&&this._gltf.extensionsUsed.indexOf(t)!==-1},o.prototype.logOpen=function(t){this._parent._logOpen(t)},o.prototype.logClose=function(){this._parent._logClose()},o.prototype.log=function(t){this._parent._log(t)},o.prototype.startPerformanceCounter=function(t){this._parent._startPerformanceCounter(t)},o.prototype.endPerformanceCounter=function(t){this._parent._endPerformanceCounter(t)},o._RegisteredExtensions={},o.DefaultSampler={index:-1},o}();l.GLTFFileLoader._CreateGLTF2Loader=function(o){return new _(o)}},"../../../dev/loaders/src/glTF/2.0/glTFLoaderAnimation.ts":(B,E,d)=>{d.r(E),d.d(E,{AnimationPropertyInfo:()=>_,TransformNodeAnimationPropertyInfo:()=>o,WeightAnimationPropertyInfo:()=>t,getQuaternion:()=>b,getVector3:()=>g,getWeights:()=>v,nodeAnimationData:()=>e});var c=d("../../../../node_modules/tslib/tslib.es6.mjs"),l=d("babylonjs/Misc/observable");function g(i,a,s,u){return l.Vector3.FromArray(a,s).scaleInPlace(u)}function b(i,a,s,u){return l.Quaternion.FromArray(a,s).scaleInPlace(u)}function v(i,a,s,u){for(var f=new Array(i._numMorphTargets),m=0;m<f.length;m++)f[m]=a[s++]*u;return f}var _=function(){function i(a,s,u,f){this.type=a,this.name=s,this.getValue=u,this.getStride=f}return i.prototype._buildAnimation=function(a,s,u){var f=new l.Animation(a,this.name,s,this.type);return f.setKeys(u),f},i}(),o=function(i){(0,c.__extends)(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.buildAnimations=function(s,u,f,m,P){P(s._babylonTransformNode,this._buildAnimation(u,f,m))},a}(_),t=function(i){(0,c.__extends)(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.buildAnimations=function(s,u,f,m,P){if(s._numMorphTargets)for(var y=function(x){var R=new l.Animation("".concat(u,"_").concat(x),M.name,f,M.type);if(R.setKeys(m.map(function(Y){return{frame:Y.frame,inTangent:Y.inTangent?Y.inTangent[x]:void 0,value:Y.value[x],outTangent:Y.outTangent?Y.outTangent[x]:void 0,interpolation:Y.interpolation}})),s._primitiveBabylonMeshes)for(var N=0,W=s._primitiveBabylonMeshes;N<W.length;N++){var Q=W[N];if(Q.morphTargetManager){var U=Q.morphTargetManager.getTarget(x),H=R.clone();U.animations.push(H),P(U,H)}}},M=this,O=0;O<s._numMorphTargets;O++)y(O)},a}(_),e={translation:[new o(l.Animation.ANIMATIONTYPE_VECTOR3,"position",g,function(){return 3})],rotation:[new o(l.Animation.ANIMATIONTYPE_QUATERNION,"rotationQuaternion",b,function(){return 4})],scale:[new o(l.Animation.ANIMATIONTYPE_VECTOR3,"scaling",g,function(){return 3})],weights:[new t(l.Animation.ANIMATIONTYPE_FLOAT,"influence",v,function(i){return i._numMorphTargets})]}},"../../../dev/loaders/src/glTF/2.0/glTFLoaderExtension.ts":(B,E,d)=>{d.r(E)},"../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts":(B,E,d)=>{d.r(E)},"../../../dev/loaders/src/glTF/2.0/index.ts":(B,E,d)=>{d.r(E),d.d(E,{ArrayItem:()=>c.ArrayItem,EXT_lights_image_based:()=>l.EXT_lights_image_based,EXT_mesh_gpu_instancing:()=>l.EXT_mesh_gpu_instancing,EXT_meshopt_compression:()=>l.EXT_meshopt_compression,EXT_texture_webp:()=>l.EXT_texture_webp,ExtrasAsMetadata:()=>l.ExtrasAsMetadata,GLTFLoader:()=>c.GLTFLoader,KHR_animation_pointer:()=>l.KHR_animation_pointer,KHR_draco_mesh_compression:()=>l.KHR_draco_mesh_compression,KHR_lights:()=>l.KHR_lights,KHR_materials_anisotropy:()=>l.KHR_materials_anisotropy,KHR_materials_clearcoat:()=>l.KHR_materials_clearcoat,KHR_materials_emissive_strength:()=>l.KHR_materials_emissive_strength,KHR_materials_ior:()=>l.KHR_materials_ior,KHR_materials_iridescence:()=>l.KHR_materials_iridescence,KHR_materials_pbrSpecularGlossiness:()=>l.KHR_materials_pbrSpecularGlossiness,KHR_materials_sheen:()=>l.KHR_materials_sheen,KHR_materials_specular:()=>l.KHR_materials_specular,KHR_materials_translucency:()=>l.KHR_materials_translucency,KHR_materials_transmission:()=>l.KHR_materials_transmission,KHR_materials_unlit:()=>l.KHR_materials_unlit,KHR_materials_variants:()=>l.KHR_materials_variants,KHR_materials_volume:()=>l.KHR_materials_volume,KHR_mesh_quantization:()=>l.KHR_mesh_quantization,KHR_texture_basisu:()=>l.KHR_texture_basisu,KHR_texture_transform:()=>l.KHR_texture_transform,KHR_xmp_json_ld:()=>l.KHR_xmp_json_ld,MSFT_audio_emitter:()=>l.MSFT_audio_emitter,MSFT_lod:()=>l.MSFT_lod,MSFT_minecraftMesh:()=>l.MSFT_minecraftMesh,MSFT_sRGBFactors:()=>l.MSFT_sRGBFactors});var c=d("../../../dev/loaders/src/glTF/2.0/glTFLoader.ts");d("../../../dev/loaders/src/glTF/2.0/glTFLoaderExtension.ts"),d("../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts");var l=d("../../../dev/loaders/src/glTF/2.0/Extensions/index.ts")},"../../../dev/loaders/src/glTF/glTFFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFFileLoader:()=>t,GLTFLoaderAnimationStartMode:()=>_,GLTFLoaderCoordinateSystemMode:()=>v,GLTFLoaderState:()=>o});var c=d("babylonjs/Misc/observable"),l=d("../../../dev/loaders/src/glTF/glTFValidation.ts");function g(e,i,a){try{return Promise.resolve(new Uint8Array(e,i,a))}catch(s){return Promise.reject(s)}}function b(e,i,a){try{if(e.byteOffset+a>e.byteLength)throw new Error("Array length out of bounds.");return Promise.resolve(new Uint8Array(e.buffer,e.byteOffset+i,a))}catch(s){return Promise.reject(s)}}var v;(function(e){e[e.AUTO=0]="AUTO",e[e.FORCE_RIGHT_HANDED=1]="FORCE_RIGHT_HANDED"})(v||(v={}));var _;(function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.ALL=2]="ALL"})(_||(_={}));var o;(function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.COMPLETE=2]="COMPLETE"})(o||(o={}));var t=function(){function e(){this.onParsedObservable=new c.Observable,this.coordinateSystemMode=v.AUTO,this.animationStartMode=_.FIRST,this.compileMaterials=!1,this.useClipPlane=!1,this.compileShadowGenerators=!1,this.transparencyAsCoverage=!1,this.useRangeRequests=!1,this.createInstances=!0,this.alwaysComputeBoundingBox=!1,this.loadAllMaterials=!1,this.loadOnlyMaterials=!1,this.skipMaterials=!1,this.useSRGBBuffers=!0,this.targetFps=60,this.alwaysComputeSkeletonRootNode=!1,this.preprocessUrlAsync=function(i){return Promise.resolve(i)},this.onMeshLoadedObservable=new c.Observable,this.onSkinLoadedObservable=new c.Observable,this.onTextureLoadedObservable=new c.Observable,this.onMaterialLoadedObservable=new c.Observable,this.onCameraLoadedObservable=new c.Observable,this.onCompleteObservable=new c.Observable,this.onErrorObservable=new c.Observable,this.onDisposeObservable=new c.Observable,this.onExtensionLoadedObservable=new c.Observable,this.validate=!1,this.onValidatedObservable=new c.Observable,this._loader=null,this._state=null,this._requests=new Array,this.name="gltf",this.extensions={".gltf":{isBinary:!1},".glb":{isBinary:!0}},this.onLoaderStateChangedObservable=new c.Observable,this._logIndentLevel=0,this._loggingEnabled=!1,this._log=this._logDisabled,this._capturePerformanceCounters=!1,this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled}return Object.defineProperty(e.prototype,"onParsed",{set:function(i){this._onParsedObserver&&this.onParsedObservable.remove(this._onParsedObserver),this._onParsedObserver=this.onParsedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMeshLoaded",{set:function(i){this._onMeshLoadedObserver&&this.onMeshLoadedObservable.remove(this._onMeshLoadedObserver),this._onMeshLoadedObserver=this.onMeshLoadedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTextureLoaded",{set:function(i){this._onTextureLoadedObserver&&this.onTextureLoadedObservable.remove(this._onTextureLoadedObserver),this._onTextureLoadedObserver=this.onTextureLoadedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMaterialLoaded",{set:function(i){this._onMaterialLoadedObserver&&this.onMaterialLoadedObservable.remove(this._onMaterialLoadedObserver),this._onMaterialLoadedObserver=this.onMaterialLoadedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCameraLoaded",{set:function(i){this._onCameraLoadedObserver&&this.onCameraLoadedObservable.remove(this._onCameraLoadedObserver),this._onCameraLoadedObserver=this.onCameraLoadedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{set:function(i){this._onCompleteObserver&&this.onCompleteObservable.remove(this._onCompleteObserver),this._onCompleteObserver=this.onCompleteObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{set:function(i){this._onErrorObserver&&this.onErrorObservable.remove(this._onErrorObserver),this._onErrorObserver=this.onErrorObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{set:function(i){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onExtensionLoaded",{set:function(i){this._onExtensionLoadedObserver&&this.onExtensionLoadedObservable.remove(this._onExtensionLoadedObserver),this._onExtensionLoadedObserver=this.onExtensionLoadedObservable.add(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loggingEnabled",{get:function(){return this._loggingEnabled},set:function(i){this._loggingEnabled!==i&&(this._loggingEnabled=i,this._loggingEnabled?this._log=this._logEnabled:this._log=this._logDisabled)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"capturePerformanceCounters",{get:function(){return this._capturePerformanceCounters},set:function(i){this._capturePerformanceCounters!==i&&(this._capturePerformanceCounters=i,this._capturePerformanceCounters?(this._startPerformanceCounter=this._startPerformanceCounterEnabled,this._endPerformanceCounter=this._endPerformanceCounterEnabled):(this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onValidated",{set:function(i){this._onValidatedObserver&&this.onValidatedObservable.remove(this._onValidatedObserver),this._onValidatedObserver=this.onValidatedObservable.add(i)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._loader&&(this._loader.dispose(),this._loader=null);for(var i=0,a=this._requests;i<a.length;i++){var s=a[i];s.abort()}this._requests.length=0,delete this._progressCallback,this.preprocessUrlAsync=function(u){return Promise.resolve(u)},this.onMeshLoadedObservable.clear(),this.onSkinLoadedObservable.clear(),this.onTextureLoadedObservable.clear(),this.onMaterialLoadedObservable.clear(),this.onCameraLoadedObservable.clear(),this.onCompleteObservable.clear(),this.onExtensionLoadedObservable.clear(),this.onDisposeObservable.notifyObservers(void 0),this.onDisposeObservable.clear()},e.prototype.loadFile=function(i,a,s,u,f,m,P,y){var M=this;if(ArrayBuffer.isView(a))return this._loadBinary(i,a,s,u,P,y),null;this._progressCallback=f;var O=a.name||c.Tools.GetFilename(a);if(m){if(this.useRangeRequests){this.validate&&c.Logger.Warn("glTF validation is not supported when range requests are enabled");var x={abort:function(){},onCompleteObservable:new c.Observable},R={readAsync:function(N,W){return new Promise(function(Q,U){M._loadFile(i,a,function(H){Q(new Uint8Array(H))},!0,function(H){U(H)},function(H){H.setRequestHeader("Range","bytes=".concat(N,"-").concat(N+W-1))})})},byteLength:0};return this._unpackBinaryAsync(new c.DataReader(R)).then(function(N){x.onCompleteObservable.notifyObservers(x),u(N)},P?function(N){return P(void 0,N)}:void 0),x}return this._loadFile(i,a,function(N){M._validate(i,new Uint8Array(N),s,O),M._unpackBinaryAsync(new c.DataReader({readAsync:function(W,Q){return g(N,W,Q)},byteLength:N.byteLength})).then(function(W){u(W)},P?function(W){return P(void 0,W)}:void 0)},!0,P)}return this._loadFile(i,a,function(N){M._validate(i,new Uint8Array(N),s,O),u({json:M._parseJson(N)})},m,P)},e.prototype._loadBinary=function(i,a,s,u,f,m){this._validate(i,a,s,m),this._unpackBinaryAsync(new c.DataReader({readAsync:function(P,y){return b(a,P,y)},byteLength:a.byteLength})).then(function(P){u(P)},f?function(P){return f(void 0,P)}:void 0)},e.prototype.importMeshAsync=function(i,a,s,u,f,m){var P=this;return Promise.resolve().then(function(){return P.onParsedObservable.notifyObservers(s),P.onParsedObservable.clear(),P._log("Loading ".concat(m||"")),P._loader=P._getLoader(s),P._loader.importMeshAsync(i,a,null,s,u,f,m)})},e.prototype.loadAsync=function(i,a,s,u,f){var m=this;return Promise.resolve().then(function(){return m.onParsedObservable.notifyObservers(a),m.onParsedObservable.clear(),m._log("Loading ".concat(f||"")),m._loader=m._getLoader(a),m._loader.loadAsync(i,a,s,u,f)})},e.prototype.loadAssetContainerAsync=function(i,a,s,u,f){var m=this;return Promise.resolve().then(function(){m.onParsedObservable.notifyObservers(a),m.onParsedObservable.clear(),m._log("Loading ".concat(f||"")),m._loader=m._getLoader(a);var P=new c.AssetContainer(i),y=[];m.onMaterialLoadedObservable.add(function(R){y.push(R)});var M=[];m.onTextureLoadedObservable.add(function(R){M.push(R)});var O=[];m.onCameraLoadedObservable.add(function(R){O.push(R)});var x=[];return m.onMeshLoadedObservable.add(function(R){R.morphTargetManager&&x.push(R.morphTargetManager)}),m._loader.importMeshAsync(null,i,P,a,s,u,f).then(function(R){return Array.prototype.push.apply(P.geometries,R.geometries),Array.prototype.push.apply(P.meshes,R.meshes),Array.prototype.push.apply(P.particleSystems,R.particleSystems),Array.prototype.push.apply(P.skeletons,R.skeletons),Array.prototype.push.apply(P.animationGroups,R.animationGroups),Array.prototype.push.apply(P.materials,y),Array.prototype.push.apply(P.textures,M),Array.prototype.push.apply(P.lights,R.lights),Array.prototype.push.apply(P.transformNodes,R.transformNodes),Array.prototype.push.apply(P.cameras,O),Array.prototype.push.apply(P.morphTargetManagers,x),P})})},e.prototype.canDirectLoad=function(i){return i.indexOf("asset")!==-1&&i.indexOf("version")!==-1||i.startsWith("data:base64,"+e._MagicBase64Encoded)||i.startsWith("data:;base64,"+e._MagicBase64Encoded)||i.startsWith("data:application/octet-stream;base64,"+e._MagicBase64Encoded)||i.startsWith("data:model/gltf-binary;base64,"+e._MagicBase64Encoded)},e.prototype.directLoad=function(i,a){if(a.startsWith("base64,"+e._MagicBase64Encoded)||a.startsWith(";base64,"+e._MagicBase64Encoded)||a.startsWith("application/octet-stream;base64,"+e._MagicBase64Encoded)||a.startsWith("model/gltf-binary;base64,"+e._MagicBase64Encoded)){var s=(0,c.DecodeBase64UrlToBinary)(a);return this._validate(i,new Uint8Array(s)),this._unpackBinaryAsync(new c.DataReader({readAsync:function(u,f){return g(s,u,f)},byteLength:s.byteLength}))}return this._validate(i,a),Promise.resolve({json:this._parseJson(a)})},e.prototype.createPlugin=function(){return new e},Object.defineProperty(e.prototype,"loaderState",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.whenCompleteAsync=function(){var i=this;return new Promise(function(a,s){i.onCompleteObservable.addOnce(function(){a()}),i.onErrorObservable.addOnce(function(u){s(u)})})},e.prototype._setState=function(i){this._state!==i&&(this._state=i,this.onLoaderStateChangedObservable.notifyObservers(this._state),this._log(o[this._state]))},e.prototype._loadFile=function(i,a,s,u,f,m){var P=this,y=i._loadFile(a,s,function(M){P._onProgress(M,y)},!0,u,f,m);return y.onCompleteObservable.add(function(M){P._requests.splice(P._requests.indexOf(M),1)}),this._requests.push(y),y},e.prototype._onProgress=function(i,a){if(this._progressCallback){a._lengthComputable=i.lengthComputable,a._loaded=i.loaded,a._total=i.total;for(var s=!0,u=0,f=0,m=0,P=this._requests;m<P.length;m++){var y=P[m];if(y._lengthComputable===void 0||y._loaded===void 0||y._total===void 0)return;s=s&&y._lengthComputable,u+=y._loaded,f+=y._total}this._progressCallback({lengthComputable:s,loaded:u,total:s?f:0})}},e.prototype._validate=function(i,a,s,u){var f=this;s===void 0&&(s=""),u===void 0&&(u=""),this.validate&&(this._startPerformanceCounter("Validate JSON"),l.GLTFValidation.ValidateAsync(a,s,u,function(m){return f.preprocessUrlAsync(s+m).then(function(P){return i._loadFileAsync(P,void 0,!0,!0)})}).then(function(m){f._endPerformanceCounter("Validate JSON"),f.onValidatedObservable.notifyObservers(m),f.onValidatedObservable.clear()},function(m){f._endPerformanceCounter("Validate JSON"),c.Tools.Warn("Failed to validate: ".concat(m.message)),f.onValidatedObservable.clear()}))},e.prototype._getLoader=function(i){var a=i.json.asset||{};this._log("Asset version: ".concat(a.version)),a.minVersion&&this._log("Asset minimum version: ".concat(a.minVersion)),a.generator&&this._log("Asset generator: ".concat(a.generator));var s=e._parseVersion(a.version);if(!s)throw new Error("Invalid version: "+a.version);if(a.minVersion!==void 0){var u=e._parseVersion(a.minVersion);if(!u)throw new Error("Invalid minimum version: "+a.minVersion);if(e._compareVersion(u,{major:2,minor:0})>0)throw new Error("Incompatible minimum version: "+a.minVersion)}var f={1:e._CreateGLTF1Loader,2:e._CreateGLTF2Loader},m=f[s.major];if(!m)throw new Error("Unsupported version: "+a.version);return m(this)},e.prototype._parseJson=function(i){this._startPerformanceCounter("Parse JSON"),this._log("JSON length: ".concat(i.length));var a=JSON.parse(i);return this._endPerformanceCounter("Parse JSON"),a},e.prototype._unpackBinaryAsync=function(i){var a=this;return this._startPerformanceCounter("Unpack Binary"),i.loadAsync(20).then(function(){var s={Magic:1179937895},u=i.readUint32();if(u!==s.Magic)throw new c.RuntimeError("Unexpected magic: "+u,c.ErrorCodes.GLTFLoaderUnexpectedMagicError);var f=i.readUint32();a.loggingEnabled&&a._log("Binary version: ".concat(f));var m=i.readUint32();!a.useRangeRequests&&m!==i.buffer.byteLength&&c.Logger.Warn("Length in header does not match actual data length: ".concat(m," != ").concat(i.buffer.byteLength));var P;switch(f){case 1:{P=a._unpackBinaryV1Async(i,m);break}case 2:{P=a._unpackBinaryV2Async(i,m);break}default:throw new Error("Unsupported version: "+f)}return a._endPerformanceCounter("Unpack Binary"),P})},e.prototype._unpackBinaryV1Async=function(i,a){var s={JSON:0},u=i.readUint32(),f=i.readUint32();if(f!==s.JSON)throw new Error("Unexpected content format: ".concat(f));var m=a-i.byteOffset,P={json:this._parseJson(i.readString(u)),bin:null};if(m!==0){var y=i.byteOffset;P.bin={readAsync:function(M,O){return i.buffer.readAsync(y+M,O)},byteLength:m}}return Promise.resolve(P)},e.prototype._unpackBinaryV2Async=function(i,a){var s=this,u={JSON:1313821514,BIN:5130562},f=i.readUint32(),m=i.readUint32();if(m!==u.JSON)throw new Error("First chunk format is not JSON");return i.byteOffset+f===a?i.loadAsync(f).then(function(){return{json:s._parseJson(i.readString(f)),bin:null}}):i.loadAsync(f+8).then(function(){var P={json:s._parseJson(i.readString(f)),bin:null},y=function(){var M=i.readUint32(),O=i.readUint32();switch(O){case u.JSON:throw new Error("Unexpected JSON chunk");case u.BIN:{var x=i.byteOffset;P.bin={readAsync:function(R,N){return i.buffer.readAsync(x+R,N)},byteLength:M},i.skipBytes(M);break}default:{i.skipBytes(M);break}}return i.byteOffset!==a?i.loadAsync(8).then(y):Promise.resolve(P)};return y()})},e._parseVersion=function(i){if(i==="1.0"||i==="1.0.1")return{major:1,minor:0};var a=(i+"").match(/^(\d+)\.(\d+)/);return a?{major:parseInt(a[1]),minor:parseInt(a[2])}:null},e._compareVersion=function(i,a){return i.major>a.major?1:i.major<a.major?-1:i.minor>a.minor?1:i.minor<a.minor?-1:0},e.prototype._logOpen=function(i){this._log(i),this._logIndentLevel++},e.prototype._logClose=function(){--this._logIndentLevel},e.prototype._logEnabled=function(i){var a=e._logSpaces.substr(0,this._logIndentLevel*2);c.Logger.Log("".concat(a).concat(i))},e.prototype._logDisabled=function(i){},e.prototype._startPerformanceCounterEnabled=function(i){c.Tools.StartPerformanceCounter(i)},e.prototype._startPerformanceCounterDisabled=function(i){},e.prototype._endPerformanceCounterEnabled=function(i){c.Tools.EndPerformanceCounter(i)},e.prototype._endPerformanceCounterDisabled=function(i){},e.IncrementalLoading=!0,e.HomogeneousCoordinates=!1,e._MagicBase64Encoded="Z2xURg",e._logSpaces="                                ",e}();c.SceneLoader&&c.SceneLoader.RegisterPlugin(new t)},"../../../dev/loaders/src/glTF/glTFValidation.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFValidation:()=>b});var c=d("babylonjs/Misc/observable");function l(v,_,o,t){var e={externalResourceFunction:function(i){return t(i).then(function(a){return new Uint8Array(a)})}};return o&&(e.uri=_==="file:"?o:_+o),v instanceof ArrayBuffer?GLTFValidator.validateBytes(new Uint8Array(v),e):GLTFValidator.validateString(v,e)}function g(){var v=[];onmessage=function(_){var o=_.data;switch(o.id){case"init":{importScripts(o.url);break}case"validate":{l(o.data,o.rootUrl,o.fileName,function(t){return new Promise(function(e,i){var a=v.length;v.push({resolve:e,reject:i}),postMessage({id:"getExternalResource",index:a,uri:t})})}).then(function(t){postMessage({id:"validate.resolve",value:t})},function(t){postMessage({id:"validate.reject",reason:t})});break}case"getExternalResource.resolve":{v[o.index].resolve(o.value);break}case"getExternalResource.reject":{v[o.index].reject(o.reason);break}}}}var b=function(){function v(){}return v.ValidateAsync=function(_,o,t,e){var i=this,a=ArrayBuffer.isView(_)?_.slice().buffer:_;return typeof Worker=="function"?new Promise(function(s,u){var f="".concat(l,"(").concat(g,")()"),m=URL.createObjectURL(new Blob([f],{type:"application/javascript"})),P=new Worker(m),y=function(O){P.removeEventListener("error",y),P.removeEventListener("message",M),u(O)},M=function(O){var x=O.data;switch(x.id){case"getExternalResource":{e(x.uri).then(function(R){P.postMessage({id:"getExternalResource.resolve",index:x.index,value:R},[R])},function(R){P.postMessage({id:"getExternalResource.reject",index:x.index,reason:R})});break}case"validate.resolve":{P.removeEventListener("error",y),P.removeEventListener("message",M),s(x.value),P.terminate();break}case"validate.reject":P.removeEventListener("error",y),P.removeEventListener("message",M),u(x.reason),P.terminate()}};P.addEventListener("error",y),P.addEventListener("message",M),P.postMessage({id:"init",url:i.Configuration.url}),P.postMessage({id:"validate",data:a,rootUrl:o,fileName:t})}):(this._LoadScriptPromise||(this._LoadScriptPromise=c.Tools.LoadScriptAsync(this.Configuration.url)),this._LoadScriptPromise.then(function(){return l(a,o,t,e)}))},v.Configuration={url:"https://preview.babylonjs.com/gltf_validator.js"},v}()},"../../../dev/loaders/src/glTF/index.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTF1:()=>g,GLTF2:()=>b,GLTFFileLoader:()=>c.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>c.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>c.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>c.GLTFLoaderState,GLTFValidation:()=>l.GLTFValidation});var c=d("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),l=d("../../../dev/loaders/src/glTF/glTFValidation.ts"),g=d("../../../dev/loaders/src/glTF/1.0/index.ts"),b=d("../../../dev/loaders/src/glTF/2.0/index.ts")},"../../../dev/loaders/src/index.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTF1:()=>c.GLTF1,GLTF2:()=>c.GLTF2,GLTFFileLoader:()=>c.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>c.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>c.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>c.GLTFLoaderState,GLTFValidation:()=>c.GLTFValidation,MTLFileLoader:()=>l.MTLFileLoader,OBJFileLoader:()=>l.OBJFileLoader,STLFileLoader:()=>g.STLFileLoader,SolidParser:()=>l.SolidParser});var c=d("../../../dev/loaders/src/glTF/index.ts"),l=d("../../../dev/loaders/src/OBJ/index.ts"),g=d("../../../dev/loaders/src/STL/index.ts")},"../../../lts/loaders/src/legacy/legacy-glTF.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTFFileLoader:()=>c.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>c.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>c.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>c.GLTFLoaderState,GLTFValidation:()=>l.GLTFValidation});var c=d("../../../dev/loaders/src/glTF/glTFFileLoader.ts"),l=d("../../../dev/loaders/src/glTF/glTFValidation.ts"),g=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;if(typeof g<"u"){g.BABYLON=g.BABYLON||{};for(var b in c)g.BABYLON[b]=c[b];for(var b in l)g.BABYLON[b]=l[b]}},"../../../lts/loaders/src/legacy/legacy-glTF1.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTF1:()=>c});var c=d("../../../dev/loaders/src/glTF/1.0/index.ts"),l=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;if(typeof l<"u"){l.BABYLON=l.BABYLON||{},l.BABYLON.GLTF1=l.BABYLON.GLTF1||{};for(var g in c)l.BABYLON.GLTF1[g]=c[g]}},"../../../lts/loaders/src/legacy/legacy-glTF2.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTF2:()=>g});var c=d("../../../dev/loaders/src/glTF/2.0/Extensions/index.ts"),l=d("../../../dev/loaders/src/glTF/2.0/glTFLoaderInterfaces.ts"),g=d("../../../dev/loaders/src/glTF/2.0/index.ts"),b=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;if(typeof b<"u"){b.BABYLON=b.BABYLON||{};var v=b.BABYLON;v.GLTF2=v.GLTF2||{},v.GLTF2.Loader=v.GLTF2.Loader||{},v.GLTF2.Loader.Extensions=v.GLTF2.Loader.Extensions||{};var _=[];for(var o in c)v.GLTF2.Loader.Extensions[o]=c[o],_.push(o);for(var o in l)v.GLTF2.Loader[o]=l[o],_.push(o);for(var o in g)_.indexOf(o)>-1||(v.GLTF2[o]=g[o])}},"../../../lts/loaders/src/legacy/legacy-objFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{MTLFileLoader:()=>c.MTLFileLoader,OBJFileLoader:()=>c.OBJFileLoader,SolidParser:()=>c.SolidParser});var c=d("../../../dev/loaders/src/OBJ/index.ts"),l=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;if(typeof l<"u")for(var g in c)l.BABYLON[g]||(l.BABYLON[g]=c[g])},"../../../lts/loaders/src/legacy/legacy-stlFileLoader.ts":(B,E,d)=>{d.r(E),d.d(E,{STLFileLoader:()=>c.STLFileLoader});var c=d("../../../dev/loaders/src/STL/index.ts"),l=typeof d.g<"u"?d.g:typeof window<"u"?window:void 0;if(typeof l<"u")for(var g in c)l.BABYLON[g]||(l.BABYLON[g]=c[g])},"../../../lts/loaders/src/legacy/legacy.ts":(B,E,d)=>{d.r(E),d.d(E,{GLTF1:()=>c.GLTF1,GLTF2:()=>c.GLTF2,GLTFFileLoader:()=>c.GLTFFileLoader,GLTFLoaderAnimationStartMode:()=>c.GLTFLoaderAnimationStartMode,GLTFLoaderCoordinateSystemMode:()=>c.GLTFLoaderCoordinateSystemMode,GLTFLoaderState:()=>c.GLTFLoaderState,GLTFValidation:()=>c.GLTFValidation,MTLFileLoader:()=>c.MTLFileLoader,OBJFileLoader:()=>c.OBJFileLoader,STLFileLoader:()=>c.STLFileLoader,SolidParser:()=>c.SolidParser});var c=d("../../../dev/loaders/src/index.ts");d("../../../lts/loaders/src/legacy/legacy-glTF.ts"),d("../../../lts/loaders/src/legacy/legacy-glTF1.ts"),d("../../../lts/loaders/src/legacy/legacy-glTF2.ts"),d("../../../lts/loaders/src/legacy/legacy-objFileLoader.ts"),d("../../../lts/loaders/src/legacy/legacy-stlFileLoader.ts")},"babylonjs/Misc/observable":B=>{B.exports=h},"../../../../node_modules/tslib/tslib.es6.mjs":(B,E,d)=>{d.r(E),d.d(E,{__addDisposableResource:()=>ue,__assign:()=>g,__asyncDelegator:()=>W,__asyncGenerator:()=>N,__asyncValues:()=>Q,__await:()=>R,__awaiter:()=>s,__classPrivateFieldGet:()=>q,__classPrivateFieldIn:()=>fe,__classPrivateFieldSet:()=>le,__createBinding:()=>f,__decorate:()=>v,__disposeResources:()=>ce,__esDecorate:()=>o,__exportStar:()=>m,__extends:()=>l,__generator:()=>u,__importDefault:()=>J,__importStar:()=>Y,__makeTemplateObject:()=>U,__metadata:()=>a,__param:()=>_,__propKey:()=>e,__read:()=>y,__rest:()=>b,__runInitializers:()=>t,__setFunctionName:()=>i,__spread:()=>M,__spreadArray:()=>x,__spreadArrays:()=>O,__values:()=>P,default:()=>be});var c=function(L,F){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,I){k.__proto__=I}||function(k,I){for(var S in I)Object.prototype.hasOwnProperty.call(I,S)&&(k[S]=I[S])},c(L,F)};function l(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");c(L,F);function k(){this.constructor=L}L.prototype=F===null?Object.create(F):(k.prototype=F.prototype,new k)}var g=function(){return g=Object.assign||function(F){for(var k,I=1,S=arguments.length;I<S;I++){k=arguments[I];for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(F[A]=k[A])}return F},g.apply(this,arguments)};function b(L,F){var k={};for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&F.indexOf(I)<0&&(k[I]=L[I]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,I=Object.getOwnPropertySymbols(L);S<I.length;S++)F.indexOf(I[S])<0&&Object.prototype.propertyIsEnumerable.call(L,I[S])&&(k[I[S]]=L[I[S]]);return k}function v(L,F,k,I){var S=arguments.length,A=S<3?F:I===null?I=Object.getOwnPropertyDescriptor(F,k):I,w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,F,k,I);else for(var V=L.length-1;V>=0;V--)(w=L[V])&&(A=(S<3?w(A):S>3?w(F,k,A):w(F,k))||A);return S>3&&A&&Object.defineProperty(F,k,A),A}function _(L,F){return function(k,I){F(k,I,L)}}function o(L,F,k,I,S,A){function w(te){if(te!==void 0&&typeof te!="function")throw new TypeError("Function expected");return te}for(var V=I.kind,G=V==="getter"?"get":V==="setter"?"set":"value",z=!F&&L?I.static?L:L.prototype:null,j=F||(z?Object.getOwnPropertyDescriptor(z,I.name):{}),X,K=!1,Z=k.length-1;Z>=0;Z--){var oe={};for(var ee in I)oe[ee]=ee==="access"?{}:I[ee];for(var ee in I.access)oe.access[ee]=I.access[ee];oe.addInitializer=function(te){if(K)throw new TypeError("Cannot add initializers after decoration has completed");A.push(w(te||null))};var re=(0,k[Z])(V==="accessor"?{get:j.get,set:j.set}:j[G],oe);if(V==="accessor"){if(re===void 0)continue;if(re===null||typeof re!="object")throw new TypeError("Object expected");(X=w(re.get))&&(j.get=X),(X=w(re.set))&&(j.set=X),(X=w(re.init))&&S.unshift(X)}else(X=w(re))&&(V==="field"?S.unshift(X):j[G]=X)}z&&Object.defineProperty(z,I.name,j),K=!0}function t(L,F,k){for(var I=arguments.length>2,S=0;S<F.length;S++)k=I?F[S].call(L,k):F[S].call(L);return I?k:void 0}function e(L){return typeof L=="symbol"?L:"".concat(L)}function i(L,F,k){return typeof F=="symbol"&&(F=F.description?"[".concat(F.description,"]"):""),Object.defineProperty(L,"name",{configurable:!0,value:k?"".concat(k," ",F):F})}function a(L,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,F)}function s(L,F,k,I){function S(A){return A instanceof k?A:new k(function(w){w(A)})}return new(k||(k=Promise))(function(A,w){function V(j){try{z(I.next(j))}catch(X){w(X)}}function G(j){try{z(I.throw(j))}catch(X){w(X)}}function z(j){j.done?A(j.value):S(j.value).then(V,G)}z((I=I.apply(L,F||[])).next())})}function u(L,F){var k={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},I,S,A,w;return w={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function V(z){return function(j){return G([z,j])}}function G(z){if(I)throw new TypeError("Generator is already executing.");for(;w&&(w=0,z[0]&&(k=0)),k;)try{if(I=1,S&&(A=z[0]&2?S.return:z[0]?S.throw||((A=S.return)&&A.call(S),0):S.next)&&!(A=A.call(S,z[1])).done)return A;switch(S=0,A&&(z=[z[0]&2,A.value]),z[0]){case 0:case 1:A=z;break;case 4:return k.label++,{value:z[1],done:!1};case 5:k.label++,S=z[1],z=[0];continue;case 7:z=k.ops.pop(),k.trys.pop();continue;default:if(A=k.trys,!(A=A.length>0&&A[A.length-1])&&(z[0]===6||z[0]===2)){k=0;continue}if(z[0]===3&&(!A||z[1]>A[0]&&z[1]<A[3])){k.label=z[1];break}if(z[0]===6&&k.label<A[1]){k.label=A[1],A=z;break}if(A&&k.label<A[2]){k.label=A[2],k.ops.push(z);break}A[2]&&k.ops.pop(),k.trys.pop();continue}z=F.call(L,k)}catch(j){z=[6,j],S=0}finally{I=A=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}}var f=Object.create?function(L,F,k,I){I===void 0&&(I=k);var S=Object.getOwnPropertyDescriptor(F,k);(!S||("get"in S?!F.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return F[k]}}),Object.defineProperty(L,I,S)}:function(L,F,k,I){I===void 0&&(I=k),L[I]=F[k]};function m(L,F){for(var k in L)k!=="default"&&!Object.prototype.hasOwnProperty.call(F,k)&&f(F,L,k)}function P(L){var F=typeof Symbol=="function"&&Symbol.iterator,k=F&&L[F],I=0;if(k)return k.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&I>=L.length&&(L=void 0),{value:L&&L[I++],done:!L}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(L,F){var k=typeof Symbol=="function"&&L[Symbol.iterator];if(!k)return L;var I=k.call(L),S,A=[],w;try{for(;(F===void 0||F-- >0)&&!(S=I.next()).done;)A.push(S.value)}catch(V){w={error:V}}finally{try{S&&!S.done&&(k=I.return)&&k.call(I)}finally{if(w)throw w.error}}return A}function M(){for(var L=[],F=0;F<arguments.length;F++)L=L.concat(y(arguments[F]));return L}function O(){for(var L=0,F=0,k=arguments.length;F<k;F++)L+=arguments[F].length;for(var I=Array(L),S=0,F=0;F<k;F++)for(var A=arguments[F],w=0,V=A.length;w<V;w++,S++)I[S]=A[w];return I}function x(L,F,k){if(k||arguments.length===2)for(var I=0,S=F.length,A;I<S;I++)(A||!(I in F))&&(A||(A=Array.prototype.slice.call(F,0,I)),A[I]=F[I]);return L.concat(A||Array.prototype.slice.call(F))}function R(L){return this instanceof R?(this.v=L,this):new R(L)}function N(L,F,k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=k.apply(L,F||[]),S,A=[];return S={},w("next"),w("throw"),w("return"),S[Symbol.asyncIterator]=function(){return this},S;function w(K){I[K]&&(S[K]=function(Z){return new Promise(function(oe,ee){A.push([K,Z,oe,ee])>1||V(K,Z)})})}function V(K,Z){try{G(I[K](Z))}catch(oe){X(A[0][3],oe)}}function G(K){K.value instanceof R?Promise.resolve(K.value.v).then(z,j):X(A[0][2],K)}function z(K){V("next",K)}function j(K){V("throw",K)}function X(K,Z){K(Z),A.shift(),A.length&&V(A[0][0],A[0][1])}}function W(L){var F,k;return F={},I("next"),I("throw",function(S){throw S}),I("return"),F[Symbol.iterator]=function(){return this},F;function I(S,A){F[S]=L[S]?function(w){return(k=!k)?{value:R(L[S](w)),done:!1}:A?A(w):w}:A}}function Q(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=L[Symbol.asyncIterator],k;return F?F.call(L):(L=typeof P=="function"?P(L):L[Symbol.iterator](),k={},I("next"),I("throw"),I("return"),k[Symbol.asyncIterator]=function(){return this},k);function I(A){k[A]=L[A]&&function(w){return new Promise(function(V,G){w=L[A](w),S(V,G,w.done,w.value)})}}function S(A,w,V,G){Promise.resolve(G).then(function(z){A({value:z,done:V})},w)}}function U(L,F){return Object.defineProperty?Object.defineProperty(L,"raw",{value:F}):L.raw=F,L}var H=Object.create?function(L,F){Object.defineProperty(L,"default",{enumerable:!0,value:F})}:function(L,F){L.default=F};function Y(L){if(L&&L.__esModule)return L;var F={};if(L!=null)for(var k in L)k!=="default"&&Object.prototype.hasOwnProperty.call(L,k)&&f(F,L,k);return H(F,L),F}function J(L){return L&&L.__esModule?L:{default:L}}function q(L,F,k,I){if(k==="a"&&!I)throw new TypeError("Private accessor was defined without a getter");if(typeof F=="function"?L!==F||!I:!F.has(L))throw new TypeError("Cannot read private member from an object whose class did not declare it");return k==="m"?I:k==="a"?I.call(L):I?I.value:F.get(L)}function le(L,F,k,I,S){if(I==="m")throw new TypeError("Private method is not writable");if(I==="a"&&!S)throw new TypeError("Private accessor was defined without a setter");if(typeof F=="function"?L!==F||!S:!F.has(L))throw new TypeError("Cannot write private member to an object whose class did not declare it");return I==="a"?S.call(L,k):S?S.value=k:F.set(L,k),k}function fe(L,F){if(F===null||typeof F!="object"&&typeof F!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof L=="function"?F===L:L.has(F)}function ue(L,F,k){if(F!=null){if(typeof F!="object"&&typeof F!="function")throw new TypeError("Object expected.");var I;if(k){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");I=F[Symbol.asyncDispose]}if(I===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");I=F[Symbol.dispose]}if(typeof I!="function")throw new TypeError("Object not disposable.");L.stack.push({value:F,dispose:I,async:k})}else k&&L.stack.push({async:!0});return F}var ae=typeof SuppressedError=="function"?SuppressedError:function(L,F,k){var I=new Error(k);return I.name="SuppressedError",I.error=L,I.suppressed=F,I};function ce(L){function F(I){L.error=L.hasError?new ae(I,L.error,"An error was suppressed during disposal."):I,L.hasError=!0}function k(){for(;L.stack.length;){var I=L.stack.pop();try{var S=I.dispose&&I.dispose.call(I.value);if(I.async)return Promise.resolve(S).then(k,function(A){return F(A),k()})}catch(A){F(A)}}if(L.hasError)throw L.error}return k()}const be={__extends:l,__assign:g,__rest:b,__decorate:v,__param:_,__metadata:a,__awaiter:s,__generator:u,__createBinding:f,__exportStar:m,__values:P,__read:y,__spread:M,__spreadArrays:O,__spreadArray:x,__await:R,__asyncGenerator:N,__asyncDelegator:W,__asyncValues:Q,__makeTemplateObject:U,__importStar:Y,__importDefault:J,__classPrivateFieldGet:q,__classPrivateFieldSet:le,__classPrivateFieldIn:fe,__addDisposableResource:ue,__disposeResources:ce}}},T={};function C(B){var E=T[B];if(E!==void 0)return E.exports;var d=T[B]={exports:{}};return p[B](d,d.exports,C),d.exports}C.n=B=>{var E=B&&B.__esModule?()=>B.default:()=>B;return C.d(E,{a:E}),E},C.d=(B,E)=>{for(var d in E)C.o(E,d)&&!C.o(B,d)&&Object.defineProperty(B,d,{enumerable:!0,get:E[d]})},C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),C.o=(B,E)=>Object.prototype.hasOwnProperty.call(B,E),C.r=B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})};var D={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/C.r(D),C.d(D,{default:()=>E,loaders:()=>B});var B=C("../../../lts/loaders/src/legacy/legacy.ts");const E=B})(),D=D.default,D})())})(hf);function df(){const[r,n]=Lr.useState(0),h=Lr.useRef(null);return Lr.useEffect(()=>{let p;return r<100&&(p=setInterval(()=>{n(T=>{const C=T+1;return C>=100?(clearInterval(p),100):Math.round(C)})},10)),()=>clearInterval(p)},[r]),Lr.useEffect(()=>{if(h.current){const p=h.current,T=new _e.Engine(p,!0);p.width=window.innerWidth,p.height=window.innerHeight;const D=(()=>{const B=new _e.Scene(T);B.createDefaultEnvironment({createSkybox:!1});var E=_e.MeshBuilder.CreateBox("skyBox",{size:1e3},B),d=new _e.StandardMaterial("skyBox",B);d.backFaceCulling=!1,d.reflectionTexture=new _e.CubeTexture("environment.env",B),d.reflectionTexture.coordinatesMode=_e.Texture.SKYBOX_MODE,d.diffuseColor=new _e.Color3(0,0,0),d.specularColor=new _e.Color3(0,0,0),E.material=d;const c=new _e.GlowLayer("glow",B);c.intensity=.5;var l=new _e.ArcRotateCamera("camera1",1.62,1.35,20,g,B);l.upperBetaLimit=Math.PI/2;var g=_e.Mesh.CreateSphere("sphere1",16,2,B);g.isVisible=!1,g.position.y=2,l.setTarget(_e.Vector3.Zero()),l.attachControl(p,!0),l.upperRadiusLimit=40,l.lowerRadiusLimit=2;const b=new _e.HemisphericLight("light",new _e.Vector3(0,1,0),B);b.intensity=.8,_e.MeshBuilder.CreateGround("ground",{width:6,height:6},B);const v=_e.MeshBuilder.CreatePlane("screen1",{width:3.9,height:2.13},B);v.position.y=1.53,v.position.x=3.8,v.position.z=.56,v.rotation.y=Math.PI;const _=new _e.StandardMaterial("pngMat",B);_.diffuseTexture=new _e.Texture("/billboard.png",B),_.emissiveTexture=new _e.Texture("/billboard-transformed.png",B),_.emissiveColor=new _e.Color3(0,.5,1),v.material=_;const o=_e.MeshBuilder.CreatePlane("billboard",{width:3.9,height:2.13},B);o.isVisible=!1,o.position.y=1.53,o.position.x=3.8,o.position.z=.56,o.rotation.y=Math.PI;const t=new _e.StandardMaterial("linkedinMat",B);t.diffuseTexture=new _e.Texture("/linkedin2.png",B),t.emissiveTexture=new _e.Texture("/linkedin2.png",B),t.emissiveColor=new _e.Color3(0,.5,1);const e=_e.MeshBuilder.CreatePlane("linkedinLogo",{width:1,height:.5},B);e.material=t,e.position.y=2.45,e.position.x=4.5,e.position.z=.57,e.rotation.y=Math.PI,e.scaling=new _e.Vector3(.2,.4,.4);const i=new _e.StandardMaterial("gitHubMat",B);i.diffuseTexture=new _e.Texture("/github.png",B),i.emissiveTexture=new _e.Texture("/github.png",B),i.emissiveColor=new _e.Color3(0,.5,1);const a=_e.MeshBuilder.CreatePlane("gitHubLogo",{width:1,height:.5},B);a.material=i,a.position.y=2.45,a.position.x=4.2,a.position.z=.57,a.rotation.y=Math.PI,a.scaling=new _e.Vector3(.2,.4,.4),v.actionManager=new _e.ActionManager(B);function s(){return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}v.actionManager.registerAction(new _e.ExecuteCodeAction(_e.ActionManager.OnPickTrigger,function(){l.detachControl(p),o.position.y=1.53,o.position.x=3.8,o.position.z=.56,o.rotation.y=Math.PI,l.setTarget(o.position),l.alpha=1.55,l.beta=1.55,s()?l.radius=10:l.radius=8,setTimeout(()=>{l.attachControl(p,!0)},10)}));function u(){const F="https://www.linkedin.com/in/andrew-morley";window.open(F,"_blank")}e.actionManager=new _e.ActionManager(B),e.actionManager.registerAction(new _e.ExecuteCodeAction(_e.ActionManager.OnPickTrigger,function(){u()}));function f(){const F="https://github.com/andrew-morley-2";window.open(F,"_blank")}a.actionManager=new _e.ActionManager(B),a.actionManager.registerAction(new _e.ExecuteCodeAction(_e.ActionManager.OnPickTrigger,function(){f()}));const m=_e.MeshBuilder.CreatePlane("screen2",{width:.6,height:.53},B);m.position.set(-1.19,1.27,.96),m.rotation.y=Math.PI;const P=ut.AdvancedDynamicTexture.CreateForMesh(m),y=new ut.Rectangle;y.width=1,y.height=1,y.cornerRadius=20,y.color="black",y.thickness=4,y.background="black",P.addControl(y);const M=[{url:"/paloverse.png",link:"https://morleyandrew84.pythonanywhere.com"},{url:"/aviato.png",link:"https://github.com/andrew-morley-2"},{url:"/portfolio.png",link:"https://github.com/andrew-morley-2"},{url:"/soon.png",link:"https://github.com/andrew-morley-2"}],O=2,x=500,R=500,N=10,W=10,Q=(x+N)*O,U=(R+W)*Math.ceil(M.length/O),H=(y.widthInPixels-Q)/2+255,Y=(y.heightInPixels-U)/2+255;let J=null,q=null,le=null;function fe(F){J&&(J.dispose(),q.dispose(),le.dispose()),J=new ut.Image("FullScreenImage",F.url),J.width=1,J.height=1,q=new ut.Button("BackButton"),q.width="180px",q.height="70px",q.color="white",q.background="white",q.cornerRadius=10,q.top="-468px",q.left="160px",q.text="Back",q.onPointerUpObservable.add(function(){J.dispose(),q.dispose(),le.dispose()}),le=new ut.Button("LinkButton"),le.width="180px",le.height="70px",le.color="white",le.background="white",le.cornerRadius=10,le.top="-468px",le.left="390px",le.text="Open Link",le.onPointerUpObservable.add(function(){window.open(F.link,"_blank")});const k=new ut.Image("backIcon","/backward-solid.png");k.height="50px",k.stretch=ut.Image.STRETCH_UNIFORM,q.addControl(k);const I=new ut.Image("linkIcon","/link-solid.png");I.height="50px",I.stretch=ut.Image.STRETCH_UNIFORM,le.addControl(I),P.addControl(J),P.addControl(q),P.addControl(le)}M.forEach((F,k)=>{const I=new ut.Image("image"+k,F.url);I.width="500px",I.height="500px",I.cornerRadius=20;const S=Math.floor(k/O),A=k%O,w=H+A*(x+N),V=Y+S*(R+W);I.left=w+"px",I.top=V+"px",I.onPointerUpObservable.add(function(){fe(F)}),y.addControl(I)});const ue=_e.MeshBuilder.CreateBox("clickableCube",{width:.78,height:1.75,depth:.68},B);ue.position=new _e.Vector3(-1.19,1,.52),ue.rotation.y=Math.PI,ue.visibility=0,ue.actionManager=new _e.ActionManager(B),ue.actionManager.registerAction(new _e.ExecuteCodeAction(_e.ActionManager.OnPickTrigger,function(){l.detachControl(p),ue.position.y=1,ue.position.x=-1.19,ue.position.z=.52,ue.rotation.y=Math.PI,ae.position.y=.83,ae.position.x=-1.19,ae.position.z=.9,ae.rotation.y=Math.PI,l.setTarget(ue.position),l.radius=1,l.alpha=1.57,l.beta=1.55,setTimeout(()=>{l.attachControl(p,!0)},10)}));const ae=_e.MeshBuilder.CreateBox("clickableCube2",{width:.78,height:.29,depth:.6},B);ae.position=new _e.Vector3(-1.19,.83,.9),ae.visibility=0,ae.actionManager=new _e.ActionManager(B),ae.actionManager.registerAction(new _e.ExecuteCodeAction(_e.ActionManager.OnPickTrigger,function(){l.detachControl(p),ue.position.y=1,ue.position.x=-1.19,ue.position.z=.52,ue.rotation.y=Math.PI,ae.position.y=.83,ae.position.x=-1.19,ae.position.z=.9,ae.rotation.y=Math.PI,l.setTarget(ue.position),l.radius=1,l.alpha=1.57,l.beta=1.55,setTimeout(()=>{l.attachControl(p,!0)},10)}));const ce=ut.AdvancedDynamicTexture.CreateFullscreenUI("fullscreenUI"),be=new ut.Button("resetButton");be.width="45px",be.height="45px",be.background="transparent",be.cornerRadius=50,be.thickness=0,be.paddingLeft="4px",be.paddingTop="2px",be.verticalAlignment=ut.Control.VERTICAL_ALIGNMENT_TOP,be.horizontalAlignment=ut.Control.HORIZONTAL_ALIGNMENT_LEFT,be.onPointerUpObservable.add(function(){l.setTarget(_e.Vector3.Zero()),l.alpha=1.62,l.beta=1.35,l.radius=20}),ce.addControl(be);const L=new ut.Image("resetIcon","/video-solid.png");return L.width="30px",L.height="35px",L.paddingTop="5px",L.verticalAlignment=ut.Control.VERTICAL_ALIGNMENT_TOP,be.addControl(L),_e.SceneLoader.ImportMesh("","/scene.glb","",B,function(F){console.log("Meshes loaded!"),console.log("Event type:",event.type),console.log("Progress event:",event),console.log("Loaded bytes:",event.loaded,"Total bytes:",event.total)}),B})();return T.runRenderLoop(()=>{D.render()}),window.addEventListener("resize",function(){T.resize()}),()=>{window.removeEventListener("resize",function(){T.resize()})}}},[]),qt.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[r<100&&qt.jsx("div",{className:"loading-container",children:qt.jsx(cf,{progress:r})}),qt.jsx("canvas",{ref:h})]})}ba.createRoot(document.getElementById("root")).render(qt.jsx(qc.StrictMode,{children:qt.jsx(df,{})}));
